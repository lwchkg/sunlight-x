<html>
<head>
  <meta charset="utf-8">
  <title>Sunlight-x demo</title>
  <style>
@import url('https://fonts.googleapis.com/css?family=Rajdhani:300,500');

body {
  display: flex;
  min-height: 100vh;
  flex-direction: column;

  font-family: "Rajdhani", sans-serif;
  font-weight: 500;
}

body, h1, h2 {
  margin: 0;
  padding: 0;
}

main, nav, aside, header, footer { box-sizing: border-box; }

@media (min-width: 768px) {
  .holygrail-body {
    display: flex;
    flex: 1;
  }

  main { flex: 1; }

  nav { order: -1; }
}

header {
  font-weight: bold;
  padding: 2px 16px;
  background-color: #ee9900;
  color: white;
}

@media (min-width: 768px) {
  header { padding: 8px 16px; }
}

header h1 {
  font-size: 32px;
  font-weight: 300;
}

main { padding: 12px 16px; }

main h2 { font-size: 20px; }

div + h2 { margin-top: 24px; }

p { margin: 0 0 8px; padding: 0; }

nav {
  flex: 0 0 12em;

  color: black;
  background-color: #f7f7f7;
  padding: 16px;
}

@media (min-width: 768px) {
  nav a { display: block; }
}


.sunlight-highlighted,
.sunlight-container,
.sunlight-container textarea,
.sunlight-container pre {
  font-family: "Dejavu Sans Mono", Consolas, Menlo !important;
  font-size: 13px !important;
  line-height: 1.2em !important;
}
.sunlight-container {
  clear: both !important;
  position: relative !important;
}
.sunlight-code-container {
  clear: both !important;
  position: relative !important;
  border: none;
}
.sunlight-highlighted,
.sunlight-container textarea {
  margin: 0 !important;
}
.sunlight-container textarea {
  padding-left: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  padding-right: 0 !important;
}
.sunlight-code-container > .sunlight-highlighted {
  white-space: pre;
  overflow-x: auto;
  overflow-y: hidden;
  /* ie requires this wtf? */
}
.sunlight-highlighted {
  z-index: 1;
  position: relative;
}
.sunlight-highlighted * {
  background: transparent;
}
.sunlight-line-number-margin {
  white-space: pre;
  float: left !important;
  margin-right: 0.5em !important;
  padding: 0 0.5em !important;
  border-top-right-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
  text-align: right !important;
  position: relative;
  z-index: 3;
}
.sunlight-highlighted a,
.sunlight-line-number-margin a {
  border: none !important;
  text-decoration: none !important;
  font-style: normal !important;
  padding: 0 !important;
}
.sunlight-line-number-margin a {
  color: inherit !important;
}
.sunlight-line-highlight-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 0;
}
.sunlight-line-highlight-overlay div {
  height: 15px;
  width: 100%;
}
/* menu */
.sunlight-menu {
  background-color: #FFFFCC;
  color: #000000;
}
.sunlight-menu ul {
  margin: 0 !important;
  padding: 0 !important;
  list-style-type: none !important;
}
.sunlight-menu li {
  float: right !important;
  margin-left: 5px !important;
}
.sunlight-menu a,
.sunlight-menu img {
  color: #000099 !important;
  text-decoration: none !important;
  border: none !important;
}
/* global styles */
.sunlight-code-container {
  border-color: #969696 !important;
  background-color: #F7F7F7 !important;
}
.sunlight-highlighted,
.sunlight-container textarea {
  color: #000000 !important;
}
.sunlight-line-number-margin {
  border-right: 1px solid #CCCCCC !important;
  border-left: 1px solid #EEEEEE !important;
  background-color: #EEEEEE !important;
  color: #848484 !important;
}
.sunlight-line-highlight-overlay .sunlight-line-highlight-active {
  background-color: #E7FCFA;
}
.sunlight-string,
.sunlight-char,
.sunlight-heredoc,
.sunlight-heredocDeclaration,
.sunlight-nowdoc,
.sunlight-longString,
.sunlight-rawString,
.sunlight-binaryString,
.sunlight-rawLongString,
.sunlight-binaryLongString,
.sunlight-verbatimString,
.sunlight-diff .sunlight-removed,
.sunlight-scala .sunlight-symbolLiteral {
  color: #990000 !important;
}
.sunlight-ident,
.sunlight-operator,
.sunlight-punctuation,
.sunlight-delimiter,
.sunlight-diff .sunlight-unchanged {
  color: #000000 !important;
}
.sunlight-comment,
.sunlight-xmlDocCommentContent,
.sunlight-nginx .sunlight-ssiCommand,
.sunlight-sln .sunlight-formatDeclaration,
.sunlight-diff .sunlight-added {
  color: #009900 !important;
}
.sunlight-number,
.sunlight-guid,
.sunlight-cdata {
  color: #CC6600 !important;
}
.sunlight-named-ident,
.sunlight-constant,
.sunlight-javascript .sunlight-globalVariable,
.sunlight-globalObject,
.sunlight-python .sunlight-attribute,
.sunlight-nginx .sunlight-context,
.sunlight-httpd .sunlight-context,
.sunlight-haskell .sunlight-class,
.sunlight-haskell .sunlight-type,
.sunlight-lisp .sunlight-declarationSpecifier,
.sunlight-erlang .sunlight-userDefinedFunction,
.sunlight-diff .sunlight-header {
  color: #2B91AF !important;
}
.sunlight-keyword,
.sunlight-languageConstruct,
.sunlight-css .sunlight-element,
.sunlight-bash .sunlight-command,
.sunlight-specialOperator,
.sunlight-erlang .sunlight-moduleAttribute,
.sunlight-xml .sunlight-tagName,
.sunlight-xml .sunlight-operator,
.sunlight-diff .sunlight-modified {
  color: #0000FF !important;
}
.sunlight-shortOpenTag,
.sunlight-openTag,
.sunlight-closeTag,
.sunlight-xmlOpenTag,
.sunlight-xmlCloseTag,
.sunlight-aspOpenTag,
.sunlight-aspCloseTag,
.sunlight-label,
.sunlight-css .sunlight-importantFlag {
  background-color: #FFFF99 !important;
  color: #000000 !important;
}
.sunlight-function,
.sunlight-globalFunction,
.sunlight-ruby .sunlight-specialFunction,
.sunlight-objective-c .sunlight-messageDestination,
.sunlight-6502asm .sunlight-illegalOpcode,
.sunlight-powershell .sunlight-switch,
.sunlight-lisp .sunlight-macro,
.sunlight-lisp .sunlight-specialForm,
.sunlight-lisp .sunlight-type,
.sunlight-sln .sunlight-sectionName,
.sunlight-diff .sunlight-rangeInfo {
  color: #B069AF !important;
}
.sunlight-variable,
.sunlight-specialVariable,
.sunlight-environmentVariable,
.sunlight-objective-c .sunlight-messageArgumentName,
.sunlight-lisp .sunlight-globalVariable,
.sunlight-ruby .sunlight-globalVariable,
.sunlight-ruby .sunlight-instanceVariable,
.sunlight-sln .sunlight-operator {
  color: #325484 !important;
}
.sunlight-regexLiteral,
.sunlight-lisp .sunlight-operator,
.sunlight-6502asm .sunlight-pseudoOp,
.sunlight-erlang .sunlight-macro {
  color: #FF00B2 !important;
}
.sunlight-specialVariable {
  font-style: italic !important;
  font-weight: bold !important;
}
.sunlight-csharp .sunlight-pragma,
.sunlight-preprocessorDirective,
.sunlight-vb .sunlight-compilerDirective,
.sunlight-diff .sunlight-mergeHeader,
.sunlight-diff .sunlight-noNewLine {
  color: #999999 !important;
  font-style: italic !important;
}
.sunlight-xmlDocCommentMeta,
.sunlight-java .sunlight-annotation,
.sunlight-scala .sunlight-annotation,
.sunlight-docComment {
  color: #808080 !important;
}
.sunlight-quotedIdent,
.sunlight-ruby .sunlight-subshellCommand,
.sunlight-lisp .sunlight-keywordArgument,
.sunlight-haskell .sunlight-infixOperator,
.sunlight-erlang .sunlight-quotedAtom {
  color: #999900 !important;
}
/* xml */
.sunlight-xml .sunlight-string {
  color: #990099 !important;
}
.sunlight-xml .sunlight-attribute {
  color: #FF0000 !important;
}
.sunlight-xml .sunlight-entity {
  background-color: #EEEEEE !important;
  color: #000000 !important;
  border: 1px solid #000000 !important;
}
.sunlight-xml .sunlight-doctype {
  color: #2B91AF !important;
}
/* javascript */
.sunlight-javascript .sunlight-reservedWord {
  font-style: italic !important;
}
/* css */
.sunlight-css .sunlight-microsoftFilterPrefix {
  color: #FF00FF !important;
}
.sunlight-css .sunlight-rule {
  color: #0099FF !important;
}
.sunlight-css .sunlight-keyword {
  color: #4E65B8 !important;
}
.sunlight-css .sunlight-class {
  color: #FF0000 !important;
}
.sunlight-css .sunlight-id {
  color: #8A8E13 !important;
}
.sunlight-css .sunlight-pseudoClass,
.sunlight-css .sunlight-pseudoElement {
  color: #368B87 !important;
}
/* bash */
.sunlight-bash .sunlight-hashBang {
  color: #3D97F5 !important;
}
.sunlight-bash .sunlight-verbatimCommand {
  color: #999900 !important;
}
.sunlight-bash .sunlight-variable,
.sunlight-bash .sunlight-specialVariable {
  color: #FF0000 !important;
}
/* python */
.sunlight-python .sunlight-specialMethod {
  font-weight: bold !important;
  color: #A07DD3;
}
/* ruby */
.sunlight-ruby .sunlight-symbol {
  font-weight: bold !important;
  color: #ED7272 !important;
}
/* brainfuck */
.sunlight-brainfuck {
  font-weight: bold !important;
  color: #000000 !important;
}
.sunlight-brainfuck .sunlight-increment {
  background-color: #FF9900 !important;
}
.sunlight-brainfuck .sunlight-decrement {
  background-color: #FF99FF !important;
}
.sunlight-brainfuck .sunlight-incrementPointer {
  background-color: #FFFF99 !important;
}
.sunlight-brainfuck .sunlight-decrementPointer {
  background-color: #66CCFF !important;
}
.sunlight-brainfuck .sunlight-read {
  background-color: #FFFFFF !important;
}
.sunlight-brainfuck .sunlight-write {
  background-color: #99FF99 !important;
}
.sunlight-brainfuck .sunlight-openLoop,
.sunlight-brainfuck .sunlight-closeLoop {
  background-color: #FFFFFF !important;
}
/* 6502 asm */
.sunlight-6502asm .sunlight-label {
  font-weight: bold !important;
  color: #000000 !important;
  background: none !important;
}
/* lisp */
.sunlight-lisp .sunlight-macro {
  font-style: italic !important;
}
/* erlang */
.sunlight-erlang .sunlight-atom {
  font-weight: bold !important;
}
.sunlight-theme-light {
  /* global styles */
  /* xml */
  /* javascript */
  /* css */
  /* bash */
  /* python */
  /* ruby */
  /* brainfuck */
  /* 6502 asm */
  /* lisp */
  /* erlang */
}
.sunlight-theme-light .sunlight-code-container {
  border-color: #969696 !important;
  background-color: #FFFFFF !important;
}
.sunlight-theme-light .sunlight-highlighted,
.sunlight-theme-light .sunlight-container textarea {
  color: #000000 !important;
}
.sunlight-theme-light .sunlight-line-number-margin {
  border-right: 1px solid #CCCCCC !important;
  border-left: 1px solid #EEEEEE !important;
  background-color: #EEEEEE !important;
  color: #848484 !important;
}
.sunlight-theme-light .sunlight-line-highlight-overlay .sunlight-line-highlight-active {
  background-color: #E7FCFA;
}
.sunlight-theme-light .sunlight-string,
.sunlight-theme-light .sunlight-char,
.sunlight-theme-light .sunlight-heredoc,
.sunlight-theme-light .sunlight-heredocDeclaration,
.sunlight-theme-light .sunlight-nowdoc,
.sunlight-theme-light .sunlight-longString,
.sunlight-theme-light .sunlight-rawString,
.sunlight-theme-light .sunlight-binaryString,
.sunlight-theme-light .sunlight-rawLongString,
.sunlight-theme-light .sunlight-binaryLongString,
.sunlight-theme-light .sunlight-verbatimString,
.sunlight-theme-light .sunlight-diff .sunlight-removed,
.sunlight-theme-light .sunlight-scala .sunlight-symbolLiteral {
  color: #990000 !important;
}
.sunlight-theme-light .sunlight-ident,
.sunlight-theme-light .sunlight-operator,
.sunlight-theme-light .sunlight-punctuation,
.sunlight-theme-light .sunlight-delimiter,
.sunlight-theme-light .sunlight-diff .sunlight-unchanged {
  color: #000000 !important;
}
.sunlight-theme-light .sunlight-comment,
.sunlight-theme-light .sunlight-xmlDocCommentContent,
.sunlight-theme-light .sunlight-nginx .sunlight-ssiCommand,
.sunlight-theme-light .sunlight-sln .sunlight-formatDeclaration,
.sunlight-theme-light .sunlight-diff .sunlight-added {
  color: #009900 !important;
}
.sunlight-theme-light .sunlight-number,
.sunlight-theme-light .sunlight-guid,
.sunlight-theme-light .sunlight-cdata {
  color: #CC6600 !important;
}
.sunlight-theme-light .sunlight-named-ident,
.sunlight-theme-light .sunlight-constant,
.sunlight-theme-light .sunlight-javascript .sunlight-globalVariable,
.sunlight-theme-light .sunlight-globalObject,
.sunlight-theme-light .sunlight-python .sunlight-attribute,
.sunlight-theme-light .sunlight-nginx .sunlight-context,
.sunlight-theme-light .sunlight-httpd .sunlight-context,
.sunlight-theme-light .sunlight-haskell .sunlight-class,
.sunlight-theme-light .sunlight-haskell .sunlight-type,
.sunlight-theme-light .sunlight-lisp .sunlight-declarationSpecifier,
.sunlight-theme-light .sunlight-erlang .sunlight-userDefinedFunction,
.sunlight-theme-light .sunlight-diff .sunlight-header {
  color: #2B91AF !important;
}
.sunlight-theme-light .sunlight-keyword,
.sunlight-theme-light .sunlight-languageConstruct,
.sunlight-theme-light .sunlight-css .sunlight-element,
.sunlight-theme-light .sunlight-bash .sunlight-command,
.sunlight-theme-light .sunlight-specialOperator,
.sunlight-theme-light .sunlight-erlang .sunlight-moduleAttribute,
.sunlight-theme-light .sunlight-xml .sunlight-tagName,
.sunlight-theme-light .sunlight-xml .sunlight-operator,
.sunlight-theme-light .sunlight-diff .sunlight-modified {
  color: #0000FF !important;
}
.sunlight-theme-light .sunlight-shortOpenTag,
.sunlight-theme-light .sunlight-openTag,
.sunlight-theme-light .sunlight-closeTag,
.sunlight-theme-light .sunlight-xmlOpenTag,
.sunlight-theme-light .sunlight-xmlCloseTag,
.sunlight-theme-light .sunlight-aspOpenTag,
.sunlight-theme-light .sunlight-aspCloseTag,
.sunlight-theme-light .sunlight-label,
.sunlight-theme-light .sunlight-css .sunlight-importantFlag {
  background-color: #FFFF99 !important;
  color: #000000 !important;
}
.sunlight-theme-light .sunlight-function,
.sunlight-theme-light .sunlight-globalFunction,
.sunlight-theme-light .sunlight-ruby .sunlight-specialFunction,
.sunlight-theme-light .sunlight-objective-c .sunlight-messageDestination,
.sunlight-theme-light .sunlight-6502asm .sunlight-illegalOpcode,
.sunlight-theme-light .sunlight-powershell .sunlight-switch,
.sunlight-theme-light .sunlight-lisp .sunlight-macro,
.sunlight-theme-light .sunlight-lisp .sunlight-specialForm,
.sunlight-theme-light .sunlight-lisp .sunlight-type,
.sunlight-theme-light .sunlight-sln .sunlight-sectionName,
.sunlight-theme-light .sunlight-diff .sunlight-rangeInfo {
  color: #B069AF !important;
}
.sunlight-theme-light .sunlight-variable,
.sunlight-theme-light .sunlight-specialVariable,
.sunlight-theme-light .sunlight-environmentVariable,
.sunlight-theme-light .sunlight-objective-c .sunlight-messageArgumentName,
.sunlight-theme-light .sunlight-lisp .sunlight-globalVariable,
.sunlight-theme-light .sunlight-ruby .sunlight-globalVariable,
.sunlight-theme-light .sunlight-ruby .sunlight-instanceVariable,
.sunlight-theme-light .sunlight-sln .sunlight-operator {
  color: #325484 !important;
}
.sunlight-theme-light .sunlight-regexLiteral,
.sunlight-theme-light .sunlight-lisp .sunlight-operator,
.sunlight-theme-light .sunlight-6502asm .sunlight-pseudoOp,
.sunlight-theme-light .sunlight-erlang .sunlight-macro {
  color: #FF00B2 !important;
}
.sunlight-theme-light .sunlight-specialVariable {
  font-style: italic !important;
  font-weight: bold !important;
}
.sunlight-theme-light .sunlight-csharp .sunlight-pragma,
.sunlight-theme-light .sunlight-preprocessorDirective,
.sunlight-theme-light .sunlight-vb .sunlight-compilerDirective,
.sunlight-theme-light .sunlight-diff .sunlight-mergeHeader,
.sunlight-theme-light .sunlight-diff .sunlight-noNewLine {
  color: #999999 !important;
  font-style: italic !important;
}
.sunlight-theme-light .sunlight-xmlDocCommentMeta,
.sunlight-theme-light .sunlight-java .sunlight-annotation,
.sunlight-theme-light .sunlight-scala .sunlight-annotation,
.sunlight-theme-light .sunlight-docComment {
  color: #808080 !important;
}
.sunlight-theme-light .sunlight-quotedIdent,
.sunlight-theme-light .sunlight-ruby .sunlight-subshellCommand,
.sunlight-theme-light .sunlight-lisp .sunlight-keywordArgument,
.sunlight-theme-light .sunlight-haskell .sunlight-infixOperator,
.sunlight-theme-light .sunlight-erlang .sunlight-quotedAtom {
  color: #999900 !important;
}
.sunlight-theme-light .sunlight-xml .sunlight-string {
  color: #990099 !important;
}
.sunlight-theme-light .sunlight-xml .sunlight-attribute {
  color: #FF0000 !important;
}
.sunlight-theme-light .sunlight-xml .sunlight-entity {
  background-color: #EEEEEE !important;
  color: #000000 !important;
  border: 1px solid #000000 !important;
}
.sunlight-theme-light .sunlight-xml .sunlight-doctype {
  color: #2B91AF !important;
}
.sunlight-theme-light .sunlight-javascript .sunlight-reservedWord {
  font-style: italic !important;
}
.sunlight-theme-light .sunlight-css .sunlight-microsoftFilterPrefix {
  color: #FF00FF !important;
}
.sunlight-theme-light .sunlight-css .sunlight-rule {
  color: #0099FF !important;
}
.sunlight-theme-light .sunlight-css .sunlight-keyword {
  color: #4E65B8 !important;
}
.sunlight-theme-light .sunlight-css .sunlight-class {
  color: #FF0000 !important;
}
.sunlight-theme-light .sunlight-css .sunlight-id {
  color: #8A8E13 !important;
}
.sunlight-theme-light .sunlight-css .sunlight-pseudoClass,
.sunlight-theme-light .sunlight-css .sunlight-pseudoElement {
  color: #368B87 !important;
}
.sunlight-theme-light .sunlight-bash .sunlight-hashBang {
  color: #3D97F5 !important;
}
.sunlight-theme-light .sunlight-bash .sunlight-verbatimCommand {
  color: #999900 !important;
}
.sunlight-theme-light .sunlight-bash .sunlight-variable,
.sunlight-theme-light .sunlight-bash .sunlight-specialVariable {
  color: #FF0000 !important;
}
.sunlight-theme-light .sunlight-python .sunlight-specialMethod {
  font-weight: bold !important;
  color: #A07DD3;
}
.sunlight-theme-light .sunlight-ruby .sunlight-symbol {
  font-weight: bold !important;
  color: #ED7272 !important;
}
.sunlight-theme-light .sunlight-brainfuck {
  font-weight: bold !important;
  color: #000000 !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-increment {
  background-color: #FF9900 !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-decrement {
  background-color: #FF99FF !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-incrementPointer {
  background-color: #FFFF99 !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-decrementPointer {
  background-color: #66CCFF !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-read {
  background-color: #FFFFFF !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-write {
  background-color: #99FF99 !important;
}
.sunlight-theme-light .sunlight-brainfuck .sunlight-openLoop,
.sunlight-theme-light .sunlight-brainfuck .sunlight-closeLoop {
  background-color: #FFFFFF !important;
}
.sunlight-theme-light .sunlight-6502asm .sunlight-label {
  font-weight: bold !important;
  color: #000000 !important;
  background: none !important;
}
.sunlight-theme-light .sunlight-lisp .sunlight-macro {
  font-style: italic !important;
}
.sunlight-theme-light .sunlight-erlang .sunlight-atom {
  font-weight: bold !important;
}
.sunlight-theme-dark {
  /* global styles */
  /* html/xml */
  /* javascript */
  /* css */
  /* bash */
  /* python */
  /* ruby */
  /* brainfuck */
  /* 6502 asm */
  /* lisp */
  /* erlang */
}
.sunlight-theme-dark .sunlight-code-container {
  border-color: #626262 !important;
  background-color: #262626 !important;
}
.sunlight-theme-dark .sunlight-highlighted,
.sunlight-theme-dark .sunlight-container textarea {
  color: #FFFFFF !important;
}
.sunlight-theme-dark .sunlight-line-number-margin {
  border-right: 1px solid #9A9A9A !important;
  border-left: 1px solid #3E3E3E !important;
  background-color: #3E3E3E !important;
  color: #9A9A9A !important;
}
.sunlight-theme-dark .sunlight-line-highlight-overlay .sunlight-line-highlight-active {
  background-color: #4B4B4B;
}
.sunlight-theme-dark .sunlight-string,
.sunlight-theme-dark .sunlight-char,
.sunlight-theme-dark .sunlight-heredoc,
.sunlight-theme-dark .sunlight-heredocDeclaration,
.sunlight-theme-dark .sunlight-nowdoc,
.sunlight-theme-dark .sunlight-longString,
.sunlight-theme-dark .sunlight-rawString,
.sunlight-theme-dark .sunlight-binaryString,
.sunlight-theme-dark .sunlight-verbatimString,
.sunlight-theme-dark .sunlight-rawLongString,
.sunlight-theme-dark .sunlight-binaryLongString,
.sunlight-theme-dark .sunlight-diff .sunlight-added,
.sunlight-theme-dark .sunlight-scala .sunlight-symbolLiteral {
  color: #55EB54 !important;
}
.sunlight-theme-dark .sunlight-operator,
.sunlight-theme-dark .sunlight-punctuation,
.sunlight-theme-dark .sunlight-delimiter {
  color: #B1EDEC !important;
}
.sunlight-theme-dark .sunlight-ident,
.sunlight-theme-dark .sunlight-diff .sunlight-unchanged {
  color: #E0E0E0 !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-comment,
.sunlight-theme-dark .sunlight-xmlDocCommentContent,
.sunlight-theme-dark .sunlight-nginx .sunlight-ssiCommand,
.sunlight-theme-dark .sunlight-sln .sunlight-formatDeclaration,
.sunlight-theme-dark .sunlight-diff .sunlight-mergeHeader,
.sunlight-theme-dark .sunlight-diff .sunlight-noNewLine {
  color: #787D31 !important;
}
.sunlight-theme-dark .sunlight-number,
.sunlight-theme-dark .sunlight-cdata,
.sunlight-theme-dark .sunlight-guid,
.sunlight-theme-dark .sunlight-diff .sunlight-modified {
  color: #F7BA7E !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-named-ident,
.sunlight-theme-dark .sunlight-xml .sunlight-attribute,
.sunlight-theme-dark .sunlight-constant,
.sunlight-theme-dark .sunlight-javascript .sunlight-globalVariable,
.sunlight-theme-dark .sunlight-globalObject,
.sunlight-theme-dark .sunlight-css .sunlight-id,
.sunlight-theme-dark .sunlight-python .sunlight-attribute,
.sunlight-theme-dark .sunlight-nginx .sunlight-context,
.sunlight-theme-dark .sunlight-httpd .sunlight-context,
.sunlight-theme-dark .sunlight-lisp .sunlight-declarationSpecifier,
.sunlight-theme-dark .sunlight-erlang .sunlight-userDefinedFunction,
.sunlight-theme-dark .sunlight-diff .sunlight-removed {
  color: #FBBDEE !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-keyword,
.sunlight-theme-dark .sunlight-languageConstruct,
.sunlight-theme-dark .sunlight-specialOperator,
.sunlight-theme-dark .sunlight-xml .sunlight-tagName,
.sunlight-theme-dark .sunlight-xml .sunlight-operator,
.sunlight-theme-dark .sunlight-bash .sunlight-command,
.sunlight-theme-dark .sunlight-erlang .sunlight-moduleAttribute {
  color: #A3CCF7 !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-shortOpenTag,
.sunlight-theme-dark .sunlight-openTag,
.sunlight-theme-dark .sunlight-closeTag,
.sunlight-theme-dark .sunlight-xmlOpenTag,
.sunlight-theme-dark .sunlight-xmlCloseTag,
.sunlight-theme-dark .sunlight-aspOpenTag,
.sunlight-theme-dark .sunlight-aspCloseTag,
.sunlight-theme-dark .sunlight-label,
.sunlight-theme-dark .sunlight-css .sunlight-importantFlag {
  background-color: #7373C1 !important;
}
.sunlight-theme-dark .sunlight-content {
  color: #FFFFFF !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-function,
.sunlight-theme-dark .sunlight-globalFunction,
.sunlight-theme-dark .sunlight-objective-c .sunlight-messageDestination,
.sunlight-theme-dark .sunlight-ruby .sunlight-specialFunction,
.sunlight-theme-dark .sunlight-6502asm .sunlight-illegalOpcode,
.sunlight-theme-dark .sunlight-powershell .sunlight-switch,
.sunlight-theme-dark .sunlight-lisp .sunlight-macro,
.sunlight-theme-dark .sunlight-lisp .sunlight-specialForm,
.sunlight-theme-dark .sunlight-lisp .sunlight-type,
.sunlight-theme-dark .sunlight-sln .sunlight-sectionName,
.sunlight-theme-dark .sunlight-diff .sunlight-header {
  color: #C8BBF1 !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-variable,
.sunlight-theme-dark .sunlight-environmentVariable,
.sunlight-theme-dark .sunlight-specialVariable,
.sunlight-theme-dark .sunlight-objective-c .sunlight-messageArgumentName,
.sunlight-theme-dark .sunlight-lisp .sunlight-globalVariable,
.sunlight-theme-dark .sunlight-ruby .sunlight-globalVariable,
.sunlight-theme-dark .sunlight-ruby .sunlight-instanceVariable {
  color: #F5E5B0 !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-regexLiteral,
.sunlight-theme-dark .sunlight-lisp .sunlight-operator,
.sunlight-theme-dark .sunlight-6502asm .sunlight-pseudoOp,
.sunlight-theme-dark .sunlight-erlang .sunlight-macro,
.sunlight-theme-dark .sunlight-diff .sunlight-rangeInfo {
  color: #E0F16A !important;
}
.sunlight-theme-dark .sunlight-specialVariable {
  font-style: italic !important;
  font-weight: bold !important;
}
.sunlight-theme-dark .sunlight-csharp .sunlight-pragma,
.sunlight-theme-dark .sunlight-preprocessorDirective,
.sunlight-theme-dark .sunlight-vb .sunlight-compilerDirective {
  color: #666363 !important;
  font-style: italic !important;
}
.sunlight-theme-dark .sunlight-xmlDocCommentMeta,
.sunlight-theme-dark .sunlight-java .sunlight-annotation,
.sunlight-theme-dark .sunlight-scala .sunlight-annotation,
.sunlight-theme-dark .sunlight-docComment {
  color: #666363 !important;
}
.sunlight-theme-dark .sunlight-quotedIdent,
.sunlight-theme-dark .sunlight-ruby .sunlight-subshellCommand,
.sunlight-theme-dark .sunlight-lisp .sunlight-keywordArgument,
.sunlight-theme-dark .sunlight-haskell .sunlight-infixOperator,
.sunlight-theme-dark .sunlight-erlang .sunlight-quotedAtom {
  color: #F8CA16 !important;
}
.sunlight-theme-dark .sunlight-xml .sunlight-tagName,
.sunlight-theme-dark .sunlight-xml .sunlight-operator,
.sunlight-theme-dark .sunlight-xml .sunlight-attribute {
  font-weight: normal !important;
}
.sunlight-theme-dark .sunlight-doctype {
  color: #DEB9B2 !important;
  font-style: italic !important;
}
.sunlight-theme-dark .sunlight-xml .sunlight-entity {
  background-color: #E6E585 !important;
  color: #000000 !important;
}
.sunlight-theme-dark .sunlight-javascript .sunlight-reservedWord {
  font-style: italic !important;
}
.sunlight-theme-dark .sunlight-css .sunlight-element {
  color: #E9EE97 !important;
}
.sunlight-theme-dark .sunlight-css .sunlight-microsoftFilterPrefix {
  color: #C9FF9F !important;
}
.sunlight-theme-dark .sunlight-css .sunlight-rule {
  color: #0099FF !important;
}
.sunlight-theme-dark .sunlight-css .sunlight-class {
  color: #E78282 !important;
}
.sunlight-theme-dark .sunlight-css .sunlight-pseudoClass,
.sunlight-theme-dark .sunlight-css .sunlight-pseudoElement {
  color: #73D693 !important;
}
.sunlight-theme-dark .sunlight-bash .sunlight-hashBang {
  color: #FFFF00 !important;
}
.sunlight-theme-dark .sunlight-bash .sunlight-verbatimCommand {
  color: #BBA4EE !important;
}
.sunlight-theme-dark .sunlight-bash .sunlight-variable,
.sunlight-theme-dark .sunlight-bash .sunlight-specialVariable {
  color: #ED8585 !important;
}
.sunlight-theme-dark .sunlight-python .sunlight-specialMethod {
  font-weight: bold !important;
  color: #B0A3C2;
}
.sunlight-theme-dark .sunlight-ruby .sunlight-symbol {
  font-weight: bold !important;
  color: #90EEA2 !important;
}
.sunlight-theme-dark .sunlight-brainfuck {
  font-weight: bold !important;
  color: #000000 !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-increment {
  background-color: #FF9900 !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-decrement {
  background-color: #FF99FF !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-incrementPointer {
  background-color: #FFFF99 !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-decrementPointer {
  background-color: #66CCFF !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-read {
  background-color: #FFFFFF !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-write {
  background-color: #99FF99 !important;
}
.sunlight-theme-dark .sunlight-brainfuck .sunlight-openLoop,
.sunlight-theme-dark .sunlight-brainfuck .sunlight-closeLoop {
  background-color: #FFFFFF !important;
}
.sunlight-theme-dark .sunlight-6502asm .sunlight-label {
  background: none !important;
  color: #FFFFFF !important;
  text-decoration: underline !important;
}
.sunlight-theme-dark .sunlight-lisp .sunlight-macro {
  font-style: italic !important;
}
.sunlight-theme-dark .sunlight-erlang .sunlight-atom {
  color: #FFFFFF !important;
  font-weight: bold !important;
}

  </style>
</head>
<body>
  <header><h1>Sunlight-x demo</h1></header>
  <div class="holygrail-body">
    <nav>
<a href="#6502asm.6502asm">6502asm.6502asm</a>
<a href="#actionscript.as">actionscript.as</a>
<a href="#bash.sh">bash.sh</a>
<a href="#batch1.bat">batch1.bat</a>
<a href="#batch2.bat">batch2.bat</a>
<a href="#brainfuck.bf">brainfuck.bf</a>
<a href="#cpp.cpp">cpp.cpp</a>
<a href="#csharp1.cs">csharp1.cs</a>
<a href="#csharp2.cs">csharp2.cs</a>
<a href="#csharp3.cs">csharp3.cs</a>
<a href="#css.css">css.css</a>
<a href="#diff.diff">diff.diff</a>
<a href="#erlang1.erl">erlang1.erl</a>
<a href="#erlang2.erl">erlang2.erl</a>
<a href="#haskell.hs">haskell.hs</a>
<a href="#httpd.httpdconf">httpd.httpdconf</a>
<a href="#invalid-lang.txt">invalid-lang.txt</a>
<a href="#java.java">java.java</a>
<a href="#javascript.js">javascript.js</a>
<a href="#lisp.lisp">lisp.lisp</a>
<a href="#lua.lua">lua.lua</a>
<a href="#mysql.sql">mysql.sql</a>
<a href="#nginx.nginxconf">nginx.nginxconf</a>
<a href="#objective-c1.mm">objective-c1.mm</a>
<a href="#objective-c2.mm">objective-c2.mm</a>
<a href="#perl.pl">perl.pl</a>
<a href="#php1.php">php1.php</a>
<a href="#php2.php">php2.php</a>
<a href="#plaintext.txt">plaintext.txt</a>
<a href="#powershell.ps1">powershell.ps1</a>
<a href="#python.py">python.py</a>
<a href="#ruby.rb">ruby.rb</a>
<a href="#scala.scala">scala.scala</a>
<a href="#tsql.tsql">tsql.tsql</a>
<a href="#vb1.vb">vb1.vb</a>
<a href="#vb2.vb">vb2.vb</a>
<a href="#vssolution.sln">vssolution.sln</a>
<a href="#xml-multilang.xml">xml-multilang.xml</a>
<a href="#xml.xml">xml.xml</a>

    </nav>
    <main>
    <h2>Introduction to the demo</h2>
    <p>Each snippet below is highlighted with some randomly generated settings.
      The settings are shown below the file names. One of the aim of the demo is
      to show that different themes can be shown in the same page.</p>
<h2 id="6502asm.6502asm">6502asm.6502asm</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-1-line-1" href="#sunlight-1-line-1">1</a>
<a name="sunlight-1-line-2" href="#sunlight-1-line-2">2</a>
<a name="sunlight-1-line-3" href="#sunlight-1-line-3">3</a>
<a name="sunlight-1-line-4" href="#sunlight-1-line-4">4</a>
<a name="sunlight-1-line-5" href="#sunlight-1-line-5">5</a>
<a name="sunlight-1-line-6" href="#sunlight-1-line-6">6</a>
<a name="sunlight-1-line-7" href="#sunlight-1-line-7">7</a>
<a name="sunlight-1-line-8" href="#sunlight-1-line-8">8</a>
<a name="sunlight-1-line-9" href="#sunlight-1-line-9">9</a>
<a name="sunlight-1-line-10" href="#sunlight-1-line-10">10</a>
<a name="sunlight-1-line-11" href="#sunlight-1-line-11">11</a>
<a name="sunlight-1-line-12" href="#sunlight-1-line-12">12</a>
<a name="sunlight-1-line-13" href="#sunlight-1-line-13">13</a>
<a name="sunlight-1-line-14" href="#sunlight-1-line-14">14</a>
<a name="sunlight-1-line-15" href="#sunlight-1-line-15">15</a>
<a name="sunlight-1-line-16" href="#sunlight-1-line-16">16</a>
<a name="sunlight-1-line-17" href="#sunlight-1-line-17">17</a>
<a name="sunlight-1-line-18" href="#sunlight-1-line-18">18</a>
<a name="sunlight-1-line-19" href="#sunlight-1-line-19">19</a>
<a name="sunlight-1-line-20" href="#sunlight-1-line-20">20</a>
<a name="sunlight-1-line-21" href="#sunlight-1-line-21">21</a>
<a name="sunlight-1-line-22" href="#sunlight-1-line-22">22</a>
<a name="sunlight-1-line-23" href="#sunlight-1-line-23">23</a>
<a name="sunlight-1-line-24" href="#sunlight-1-line-24">24</a>
<a name="sunlight-1-line-25" href="#sunlight-1-line-25">25</a>
<a name="sunlight-1-line-26" href="#sunlight-1-line-26">26</a>
<a name="sunlight-1-line-27" href="#sunlight-1-line-27">27</a>
<a name="sunlight-1-line-28" href="#sunlight-1-line-28">28</a>
<a name="sunlight-1-line-29" href="#sunlight-1-line-29">29</a>
<a name="sunlight-1-line-30" href="#sunlight-1-line-30">30</a>
<a name="sunlight-1-line-31" href="#sunlight-1-line-31">31</a>
<a name="sunlight-1-line-32" href="#sunlight-1-line-32">32</a>
<a name="sunlight-1-line-33" href="#sunlight-1-line-33">33</a>
<a name="sunlight-1-line-34" href="#sunlight-1-line-34">34</a>
<a name="sunlight-1-line-35" href="#sunlight-1-line-35">35</a>
<a name="sunlight-1-line-36" href="#sunlight-1-line-36">36</a>
<a name="sunlight-1-line-37" href="#sunlight-1-line-37">37</a>
<a name="sunlight-1-line-38" href="#sunlight-1-line-38">38</a>
<a name="sunlight-1-line-39" href="#sunlight-1-line-39">39</a>
<a name="sunlight-1-line-40" href="#sunlight-1-line-40">40</a>
<a name="sunlight-1-line-41" href="#sunlight-1-line-41">41</a>
<a name="sunlight-1-line-42" href="#sunlight-1-line-42">42</a>
<a name="sunlight-1-line-43" href="#sunlight-1-line-43">43</a>
<a name="sunlight-1-line-44" href="#sunlight-1-line-44">44</a>
<a name="sunlight-1-line-45" href="#sunlight-1-line-45">45</a>
<a name="sunlight-1-line-46" href="#sunlight-1-line-46">46</a>
<a name="sunlight-1-line-47" href="#sunlight-1-line-47">47</a>
<a name="sunlight-1-line-48" href="#sunlight-1-line-48">48</a>
<a name="sunlight-1-line-49" href="#sunlight-1-line-49">49</a>
<a name="sunlight-1-line-50" href="#sunlight-1-line-50">50</a>
<a name="sunlight-1-line-51" href="#sunlight-1-line-51">51</a>
<a name="sunlight-1-line-52" href="#sunlight-1-line-52">52</a>
<a name="sunlight-1-line-53" href="#sunlight-1-line-53">53</a>
<a name="sunlight-1-line-54" href="#sunlight-1-line-54">54</a>
<a name="sunlight-1-line-55" href="#sunlight-1-line-55">55</a>
<a name="sunlight-1-line-56" href="#sunlight-1-line-56">56</a>
<a name="sunlight-1-line-57" href="#sunlight-1-line-57">57</a>
<a name="sunlight-1-line-58" href="#sunlight-1-line-58">58</a>
<a name="sunlight-1-line-59" href="#sunlight-1-line-59">59</a>
<a name="sunlight-1-line-60" href="#sunlight-1-line-60">60</a>
<a name="sunlight-1-line-61" href="#sunlight-1-line-61">61</a>
<a name="sunlight-1-line-62" href="#sunlight-1-line-62">62</a>
<a name="sunlight-1-line-63" href="#sunlight-1-line-63">63</a>
<a name="sunlight-1-line-64" href="#sunlight-1-line-64">64</a>
<a name="sunlight-1-line-65" href="#sunlight-1-line-65">65</a>
<a name="sunlight-1-line-66" href="#sunlight-1-line-66">66</a>
<a name="sunlight-1-line-67" href="#sunlight-1-line-67">67</a>
<a name="sunlight-1-line-68" href="#sunlight-1-line-68">68</a>
<a name="sunlight-1-line-69" href="#sunlight-1-line-69">69</a>
<a name="sunlight-1-line-70" href="#sunlight-1-line-70">70</a>
<a name="sunlight-1-line-71" href="#sunlight-1-line-71">71</a>
<a name="sunlight-1-line-72" href="#sunlight-1-line-72">72</a>
<a name="sunlight-1-line-73" href="#sunlight-1-line-73">73</a>
<a name="sunlight-1-line-74" href="#sunlight-1-line-74">74</a>
<a name="sunlight-1-line-75" href="#sunlight-1-line-75">75</a>
<a name="sunlight-1-line-76" href="#sunlight-1-line-76">76</a>
<a name="sunlight-1-line-77" href="#sunlight-1-line-77">77</a>
<a name="sunlight-1-line-78" href="#sunlight-1-line-78">78</a>
<a name="sunlight-1-line-79" href="#sunlight-1-line-79">79</a>
<a name="sunlight-1-line-80" href="#sunlight-1-line-80">80</a>
<a name="sunlight-1-line-81" href="#sunlight-1-line-81">81</a>
<a name="sunlight-1-line-82" href="#sunlight-1-line-82">82</a>
<a name="sunlight-1-line-83" href="#sunlight-1-line-83">83</a>
<a name="sunlight-1-line-84" href="#sunlight-1-line-84">84</a>
<a name="sunlight-1-line-85" href="#sunlight-1-line-85">85</a>
<a name="sunlight-1-line-86" href="#sunlight-1-line-86">86</a>
<a name="sunlight-1-line-87" href="#sunlight-1-line-87">87</a>
<a name="sunlight-1-line-88" href="#sunlight-1-line-88">88</a>
<a name="sunlight-1-line-89" href="#sunlight-1-line-89">89</a>
<a name="sunlight-1-line-90" href="#sunlight-1-line-90">90</a>
<a name="sunlight-1-line-91" href="#sunlight-1-line-91">91</a>
</div><pre class="sunlight-highlight-6502asm sunlight-highlighted"><span class="sunlight-6502asm"><span class="sunlight-label">MainKernel</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">nop</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ldy</span>&nbsp;<span class="sunlight-constant">#PLAYAREAHEIGHT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;72</span>

<span class="sunlight-label">KernelLoopOuter</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;72</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SLEEP</span>&nbsp;<span class="sunlight-number">4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76</span>
<span class="sunlight-label">KernelLoopInner</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMOVE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#MAID_HEIGHT</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-illegalOpcode">dcp</span>&nbsp;<span class="sunlight-ident">MaidLineCounter2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bcs</span>&nbsp;<span class="sunlight-label">DoDraw2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">.</span><span class="sunlight-pseudoOp">byte</span>&nbsp;<span class="sunlight-number">$2C</span>
<span class="sunlight-label">DoDraw2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx1Ptra</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">GRP0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;33</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">NUM_RAMBANDS</span><span class="sunlight-operator">*</span><span class="sunlight-number">3</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;40</span>
<span class="sunlight-label">BackFromNoSpritesKernelMain</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">StairCaseTable</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMBL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;47</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">beq</span>&nbsp;<span class="sunlight-label">NoSpritesKernelMain</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;49</span>


&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#MAID_HEIGHT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cpy</span>&nbsp;<span class="sunlight-ident">HeroTop0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bpl</span>&nbsp;<span class="sunlight-label">SwitchDraw1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;56</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-illegalOpcode">dcp</span>&nbsp;<span class="sunlight-ident">MaidLineCounter2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;61</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx0Ptra</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">GRP1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VDEL</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroColorPtra</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMOVE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">COLUP1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</span>
<span class="sunlight-label">BackFromSwitchDraw1</span>


&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">GameFlags3</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">eor</span>&nbsp;<span class="sunlight-ident">BackgroundColorTable</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">COLUBK</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14</span>


&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;--can't&nbsp;use&nbsp;SwitchDraw&nbsp;for&nbsp;P1&nbsp;since&nbsp;P0&nbsp;is&nbsp;VDELed&nbsp;-&nbsp;have&nbsp;to</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;use&nbsp;DoDraw,&nbsp;which&nbsp;draws&nbsp;*something*&nbsp;every&nbsp;line.</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;lda&nbsp;#MAID_HEIGHT</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;dcp&nbsp;MaidLineCounter2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bcc</span>&nbsp;<span class="sunlight-label">NoDraw1</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx1Ptrb</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">GRP0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too&nbsp;late?&nbsp;&nbsp;No.</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#&lt;[3.14&nbsp;*&nbsp;100]</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">pi</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too&nbsp;late?&nbsp;&nbsp;Maybe.</span>
<span class="sunlight-label">BackFromNoDraw1</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-operator">+</span><span class="sunlight-ident">NUM_RAMBANDS</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;36</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">HMCLR</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">NUM_RAMBANDS</span><span class="sunlight-operator">*</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cpy</span>&nbsp;<span class="sunlight-ident">HeroTop0</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;50</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bpl</span>&nbsp;<span class="sunlight-label">WaitDraw3</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx0Ptrb</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">GRP1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VDEL</span>
<span class="sunlight-label">BackFromSwitchDraw3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;61</span>

<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;nop</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">dey</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">tya</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cmp</span>&nbsp;<span class="sunlight-ident">ElevBandHeight</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bne</span>&nbsp;<span class="sunlight-label">KernelLoopOuter</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+11&nbsp;&nbsp;&nbsp;&nbsp;(72)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">dex</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bpl</span>&nbsp;<span class="sunlight-label">KernelLoopInner</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;75</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMOVE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cpy</span>&nbsp;<span class="sunlight-constant">#0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bne</span>&nbsp;<span class="sunlight-label">NotDoneWithPlayAreaKernels</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">beq</span>&nbsp;<span class="sunlight-label">DoneWithPlayAreaKernels</span>&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;branch&nbsp;always</span>
</span></pre></div></div>
<h2 id="actionscript.as">actionscript.as</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-2-line-1" href="#sunlight-2-line-1">1</a>
<a name="sunlight-2-line-2" href="#sunlight-2-line-2">2</a>
<a name="sunlight-2-line-3" href="#sunlight-2-line-3">3</a>
<a name="sunlight-2-line-4" href="#sunlight-2-line-4">4</a>
<a name="sunlight-2-line-5" href="#sunlight-2-line-5">5</a>
<a name="sunlight-2-line-6" href="#sunlight-2-line-6">6</a>
<a name="sunlight-2-line-7" href="#sunlight-2-line-7">7</a>
<a name="sunlight-2-line-8" href="#sunlight-2-line-8">8</a>
<a name="sunlight-2-line-9" href="#sunlight-2-line-9">9</a>
<a name="sunlight-2-line-10" href="#sunlight-2-line-10">10</a>
<a name="sunlight-2-line-11" href="#sunlight-2-line-11">11</a>
<a name="sunlight-2-line-12" href="#sunlight-2-line-12">12</a>
<a name="sunlight-2-line-13" href="#sunlight-2-line-13">13</a>
<a name="sunlight-2-line-14" href="#sunlight-2-line-14">14</a>
<a name="sunlight-2-line-15" href="#sunlight-2-line-15">15</a>
<a name="sunlight-2-line-16" href="#sunlight-2-line-16">16</a>
<a name="sunlight-2-line-17" href="#sunlight-2-line-17">17</a>
<a name="sunlight-2-line-18" href="#sunlight-2-line-18">18</a>
<a name="sunlight-2-line-19" href="#sunlight-2-line-19">19</a>
<a name="sunlight-2-line-20" href="#sunlight-2-line-20">20</a>
<a name="sunlight-2-line-21" href="#sunlight-2-line-21">21</a>
<a name="sunlight-2-line-22" href="#sunlight-2-line-22">22</a>
<a name="sunlight-2-line-23" href="#sunlight-2-line-23">23</a>
<a name="sunlight-2-line-24" href="#sunlight-2-line-24">24</a>
<a name="sunlight-2-line-25" href="#sunlight-2-line-25">25</a>
<a name="sunlight-2-line-26" href="#sunlight-2-line-26">26</a>
<a name="sunlight-2-line-27" href="#sunlight-2-line-27">27</a>
<a name="sunlight-2-line-28" href="#sunlight-2-line-28">28</a>
<a name="sunlight-2-line-29" href="#sunlight-2-line-29">29</a>
<a name="sunlight-2-line-30" href="#sunlight-2-line-30">30</a>
<a name="sunlight-2-line-31" href="#sunlight-2-line-31">31</a>
<a name="sunlight-2-line-32" href="#sunlight-2-line-32">32</a>
<a name="sunlight-2-line-33" href="#sunlight-2-line-33">33</a>
<a name="sunlight-2-line-34" href="#sunlight-2-line-34">34</a>
<a name="sunlight-2-line-35" href="#sunlight-2-line-35">35</a>
<a name="sunlight-2-line-36" href="#sunlight-2-line-36">36</a>
<a name="sunlight-2-line-37" href="#sunlight-2-line-37">37</a>
<a name="sunlight-2-line-38" href="#sunlight-2-line-38">38</a>
<a name="sunlight-2-line-39" href="#sunlight-2-line-39">39</a>
<a name="sunlight-2-line-40" href="#sunlight-2-line-40">40</a>
<a name="sunlight-2-line-41" href="#sunlight-2-line-41">41</a>
<a name="sunlight-2-line-42" href="#sunlight-2-line-42">42</a>
<a name="sunlight-2-line-43" href="#sunlight-2-line-43">43</a>
<a name="sunlight-2-line-44" href="#sunlight-2-line-44">44</a>
<a name="sunlight-2-line-45" href="#sunlight-2-line-45">45</a>
<a name="sunlight-2-line-46" href="#sunlight-2-line-46">46</a>
<a name="sunlight-2-line-47" href="#sunlight-2-line-47">47</a>
<a name="sunlight-2-line-48" href="#sunlight-2-line-48">48</a>
<a name="sunlight-2-line-49" href="#sunlight-2-line-49">49</a>
<a name="sunlight-2-line-50" href="#sunlight-2-line-50">50</a>
<a name="sunlight-2-line-51" href="#sunlight-2-line-51">51</a>
<a name="sunlight-2-line-52" href="#sunlight-2-line-52">52</a>
<a name="sunlight-2-line-53" href="#sunlight-2-line-53">53</a>
<a name="sunlight-2-line-54" href="#sunlight-2-line-54">54</a>
<a name="sunlight-2-line-55" href="#sunlight-2-line-55">55</a>
<a name="sunlight-2-line-56" href="#sunlight-2-line-56">56</a>
<a name="sunlight-2-line-57" href="#sunlight-2-line-57">57</a>
<a name="sunlight-2-line-58" href="#sunlight-2-line-58">58</a>
<a name="sunlight-2-line-59" href="#sunlight-2-line-59">59</a>
<a name="sunlight-2-line-60" href="#sunlight-2-line-60">60</a>
<a name="sunlight-2-line-61" href="#sunlight-2-line-61">61</a>
<a name="sunlight-2-line-62" href="#sunlight-2-line-62">62</a>
<a name="sunlight-2-line-63" href="#sunlight-2-line-63">63</a>
<a name="sunlight-2-line-64" href="#sunlight-2-line-64">64</a>
<a name="sunlight-2-line-65" href="#sunlight-2-line-65">65</a>
<a name="sunlight-2-line-66" href="#sunlight-2-line-66">66</a>
<a name="sunlight-2-line-67" href="#sunlight-2-line-67">67</a>
<a name="sunlight-2-line-68" href="#sunlight-2-line-68">68</a>
<a name="sunlight-2-line-69" href="#sunlight-2-line-69">69</a>
<a name="sunlight-2-line-70" href="#sunlight-2-line-70">70</a>
<a name="sunlight-2-line-71" href="#sunlight-2-line-71">71</a>
<a name="sunlight-2-line-72" href="#sunlight-2-line-72">72</a>
<a name="sunlight-2-line-73" href="#sunlight-2-line-73">73</a>
<a name="sunlight-2-line-74" href="#sunlight-2-line-74">74</a>
<a name="sunlight-2-line-75" href="#sunlight-2-line-75">75</a>
<a name="sunlight-2-line-76" href="#sunlight-2-line-76">76</a>
<a name="sunlight-2-line-77" href="#sunlight-2-line-77">77</a>
<a name="sunlight-2-line-78" href="#sunlight-2-line-78">78</a>
<a name="sunlight-2-line-79" href="#sunlight-2-line-79">79</a>
<a name="sunlight-2-line-80" href="#sunlight-2-line-80">80</a>
<a name="sunlight-2-line-81" href="#sunlight-2-line-81">81</a>
<a name="sunlight-2-line-82" href="#sunlight-2-line-82">82</a>
<a name="sunlight-2-line-83" href="#sunlight-2-line-83">83</a>
<a name="sunlight-2-line-84" href="#sunlight-2-line-84">84</a>
<a name="sunlight-2-line-85" href="#sunlight-2-line-85">85</a>
<a name="sunlight-2-line-86" href="#sunlight-2-line-86">86</a>
<a name="sunlight-2-line-87" href="#sunlight-2-line-87">87</a>
<a name="sunlight-2-line-88" href="#sunlight-2-line-88">88</a>
<a name="sunlight-2-line-89" href="#sunlight-2-line-89">89</a>
<a name="sunlight-2-line-90" href="#sunlight-2-line-90">90</a>
<a name="sunlight-2-line-91" href="#sunlight-2-line-91">91</a>
<a name="sunlight-2-line-92" href="#sunlight-2-line-92">92</a>
<a name="sunlight-2-line-93" href="#sunlight-2-line-93">93</a>
<a name="sunlight-2-line-94" href="#sunlight-2-line-94">94</a>
<a name="sunlight-2-line-95" href="#sunlight-2-line-95">95</a>
<a name="sunlight-2-line-96" href="#sunlight-2-line-96">96</a>
<a name="sunlight-2-line-97" href="#sunlight-2-line-97">97</a>
<a name="sunlight-2-line-98" href="#sunlight-2-line-98">98</a>
<a name="sunlight-2-line-99" href="#sunlight-2-line-99">99</a>
<a name="sunlight-2-line-100" href="#sunlight-2-line-100">100</a>
<a name="sunlight-2-line-101" href="#sunlight-2-line-101">101</a>
<a name="sunlight-2-line-102" href="#sunlight-2-line-102">102</a>
<a name="sunlight-2-line-103" href="#sunlight-2-line-103">103</a>
<a name="sunlight-2-line-104" href="#sunlight-2-line-104">104</a>
<a name="sunlight-2-line-105" href="#sunlight-2-line-105">105</a>
<a name="sunlight-2-line-106" href="#sunlight-2-line-106">106</a>
<a name="sunlight-2-line-107" href="#sunlight-2-line-107">107</a>
<a name="sunlight-2-line-108" href="#sunlight-2-line-108">108</a>
<a name="sunlight-2-line-109" href="#sunlight-2-line-109">109</a>
<a name="sunlight-2-line-110" href="#sunlight-2-line-110">110</a>
<a name="sunlight-2-line-111" href="#sunlight-2-line-111">111</a>
<a name="sunlight-2-line-112" href="#sunlight-2-line-112">112</a>
<a name="sunlight-2-line-113" href="#sunlight-2-line-113">113</a>
<a name="sunlight-2-line-114" href="#sunlight-2-line-114">114</a>
<a name="sunlight-2-line-115" href="#sunlight-2-line-115">115</a>
<a name="sunlight-2-line-116" href="#sunlight-2-line-116">116</a>
<a name="sunlight-2-line-117" href="#sunlight-2-line-117">117</a>
<a name="sunlight-2-line-118" href="#sunlight-2-line-118">118</a>
<a name="sunlight-2-line-119" href="#sunlight-2-line-119">119</a>
<a name="sunlight-2-line-120" href="#sunlight-2-line-120">120</a>
<a name="sunlight-2-line-121" href="#sunlight-2-line-121">121</a>
<a name="sunlight-2-line-122" href="#sunlight-2-line-122">122</a>
<a name="sunlight-2-line-123" href="#sunlight-2-line-123">123</a>
<a name="sunlight-2-line-124" href="#sunlight-2-line-124">124</a>
<a name="sunlight-2-line-125" href="#sunlight-2-line-125">125</a>
<a name="sunlight-2-line-126" href="#sunlight-2-line-126">126</a>
<a name="sunlight-2-line-127" href="#sunlight-2-line-127">127</a>
<a name="sunlight-2-line-128" href="#sunlight-2-line-128">128</a>
<a name="sunlight-2-line-129" href="#sunlight-2-line-129">129</a>
<a name="sunlight-2-line-130" href="#sunlight-2-line-130">130</a>
<a name="sunlight-2-line-131" href="#sunlight-2-line-131">131</a>
<a name="sunlight-2-line-132" href="#sunlight-2-line-132">132</a>
<a name="sunlight-2-line-133" href="#sunlight-2-line-133">133</a>
<a name="sunlight-2-line-134" href="#sunlight-2-line-134">134</a>
<a name="sunlight-2-line-135" href="#sunlight-2-line-135">135</a>
<a name="sunlight-2-line-136" href="#sunlight-2-line-136">136</a>
<a name="sunlight-2-line-137" href="#sunlight-2-line-137">137</a>
<a name="sunlight-2-line-138" href="#sunlight-2-line-138">138</a>
<a name="sunlight-2-line-139" href="#sunlight-2-line-139">139</a>
<a name="sunlight-2-line-140" href="#sunlight-2-line-140">140</a>
<a name="sunlight-2-line-141" href="#sunlight-2-line-141">141</a>
<a name="sunlight-2-line-142" href="#sunlight-2-line-142">142</a>
<a name="sunlight-2-line-143" href="#sunlight-2-line-143">143</a>
<a name="sunlight-2-line-144" href="#sunlight-2-line-144">144</a>
<a name="sunlight-2-line-145" href="#sunlight-2-line-145">145</a>
<a name="sunlight-2-line-146" href="#sunlight-2-line-146">146</a>
<a name="sunlight-2-line-147" href="#sunlight-2-line-147">147</a>
<a name="sunlight-2-line-148" href="#sunlight-2-line-148">148</a>
<a name="sunlight-2-line-149" href="#sunlight-2-line-149">149</a>
<a name="sunlight-2-line-150" href="#sunlight-2-line-150">150</a>
<a name="sunlight-2-line-151" href="#sunlight-2-line-151">151</a>
<a name="sunlight-2-line-152" href="#sunlight-2-line-152">152</a>
<a name="sunlight-2-line-153" href="#sunlight-2-line-153">153</a>
<a name="sunlight-2-line-154" href="#sunlight-2-line-154">154</a>
<a name="sunlight-2-line-155" href="#sunlight-2-line-155">155</a>
<a name="sunlight-2-line-156" href="#sunlight-2-line-156">156</a>
<a name="sunlight-2-line-157" href="#sunlight-2-line-157">157</a>
<a name="sunlight-2-line-158" href="#sunlight-2-line-158">158</a>
<a name="sunlight-2-line-159" href="#sunlight-2-line-159">159</a>
<a name="sunlight-2-line-160" href="#sunlight-2-line-160">160</a>
<a name="sunlight-2-line-161" href="#sunlight-2-line-161">161</a>
<a name="sunlight-2-line-162" href="#sunlight-2-line-162">162</a>
<a name="sunlight-2-line-163" href="#sunlight-2-line-163">163</a>
<a name="sunlight-2-line-164" href="#sunlight-2-line-164">164</a>
<a name="sunlight-2-line-165" href="#sunlight-2-line-165">165</a>
<a name="sunlight-2-line-166" href="#sunlight-2-line-166">166</a>
<a name="sunlight-2-line-167" href="#sunlight-2-line-167">167</a>
<a name="sunlight-2-line-168" href="#sunlight-2-line-168">168</a>
<a name="sunlight-2-line-169" href="#sunlight-2-line-169">169</a>
<a name="sunlight-2-line-170" href="#sunlight-2-line-170">170</a>
<a name="sunlight-2-line-171" href="#sunlight-2-line-171">171</a>
<a name="sunlight-2-line-172" href="#sunlight-2-line-172">172</a>
<a name="sunlight-2-line-173" href="#sunlight-2-line-173">173</a>
<a name="sunlight-2-line-174" href="#sunlight-2-line-174">174</a>
<a name="sunlight-2-line-175" href="#sunlight-2-line-175">175</a>
<a name="sunlight-2-line-176" href="#sunlight-2-line-176">176</a>
<a name="sunlight-2-line-177" href="#sunlight-2-line-177">177</a>
<a name="sunlight-2-line-178" href="#sunlight-2-line-178">178</a>
<a name="sunlight-2-line-179" href="#sunlight-2-line-179">179</a>
<a name="sunlight-2-line-180" href="#sunlight-2-line-180">180</a>
<a name="sunlight-2-line-181" href="#sunlight-2-line-181">181</a>
<a name="sunlight-2-line-182" href="#sunlight-2-line-182">182</a>
<a name="sunlight-2-line-183" href="#sunlight-2-line-183">183</a>
<a name="sunlight-2-line-184" href="#sunlight-2-line-184">184</a>
<a name="sunlight-2-line-185" href="#sunlight-2-line-185">185</a>
<a name="sunlight-2-line-186" href="#sunlight-2-line-186">186</a>
<a name="sunlight-2-line-187" href="#sunlight-2-line-187">187</a>
<a name="sunlight-2-line-188" href="#sunlight-2-line-188">188</a>
<a name="sunlight-2-line-189" href="#sunlight-2-line-189">189</a>
<a name="sunlight-2-line-190" href="#sunlight-2-line-190">190</a>
<a name="sunlight-2-line-191" href="#sunlight-2-line-191">191</a>
<a name="sunlight-2-line-192" href="#sunlight-2-line-192">192</a>
<a name="sunlight-2-line-193" href="#sunlight-2-line-193">193</a>
<a name="sunlight-2-line-194" href="#sunlight-2-line-194">194</a>
<a name="sunlight-2-line-195" href="#sunlight-2-line-195">195</a>
<a name="sunlight-2-line-196" href="#sunlight-2-line-196">196</a>
<a name="sunlight-2-line-197" href="#sunlight-2-line-197">197</a>
<a name="sunlight-2-line-198" href="#sunlight-2-line-198">198</a>
<a name="sunlight-2-line-199" href="#sunlight-2-line-199">199</a>
<a name="sunlight-2-line-200" href="#sunlight-2-line-200">200</a>
<a name="sunlight-2-line-201" href="#sunlight-2-line-201">201</a>
<a name="sunlight-2-line-202" href="#sunlight-2-line-202">202</a>
<a name="sunlight-2-line-203" href="#sunlight-2-line-203">203</a>
<a name="sunlight-2-line-204" href="#sunlight-2-line-204">204</a>
<a name="sunlight-2-line-205" href="#sunlight-2-line-205">205</a>
<a name="sunlight-2-line-206" href="#sunlight-2-line-206">206</a>
<a name="sunlight-2-line-207" href="#sunlight-2-line-207">207</a>
<a name="sunlight-2-line-208" href="#sunlight-2-line-208">208</a>
<a name="sunlight-2-line-209" href="#sunlight-2-line-209">209</a>
<a name="sunlight-2-line-210" href="#sunlight-2-line-210">210</a>
<a name="sunlight-2-line-211" href="#sunlight-2-line-211">211</a>
<a name="sunlight-2-line-212" href="#sunlight-2-line-212">212</a>
<a name="sunlight-2-line-213" href="#sunlight-2-line-213">213</a>
<a name="sunlight-2-line-214" href="#sunlight-2-line-214">214</a>
<a name="sunlight-2-line-215" href="#sunlight-2-line-215">215</a>
<a name="sunlight-2-line-216" href="#sunlight-2-line-216">216</a>
<a name="sunlight-2-line-217" href="#sunlight-2-line-217">217</a>
<a name="sunlight-2-line-218" href="#sunlight-2-line-218">218</a>
<a name="sunlight-2-line-219" href="#sunlight-2-line-219">219</a>
<a name="sunlight-2-line-220" href="#sunlight-2-line-220">220</a>
<a name="sunlight-2-line-221" href="#sunlight-2-line-221">221</a>
<a name="sunlight-2-line-222" href="#sunlight-2-line-222">222</a>
<a name="sunlight-2-line-223" href="#sunlight-2-line-223">223</a>
<a name="sunlight-2-line-224" href="#sunlight-2-line-224">224</a>
<a name="sunlight-2-line-225" href="#sunlight-2-line-225">225</a>
<a name="sunlight-2-line-226" href="#sunlight-2-line-226">226</a>
<a name="sunlight-2-line-227" href="#sunlight-2-line-227">227</a>
<a name="sunlight-2-line-228" href="#sunlight-2-line-228">228</a>
<a name="sunlight-2-line-229" href="#sunlight-2-line-229">229</a>
<a name="sunlight-2-line-230" href="#sunlight-2-line-230">230</a>
<a name="sunlight-2-line-231" href="#sunlight-2-line-231">231</a>
<a name="sunlight-2-line-232" href="#sunlight-2-line-232">232</a>
<a name="sunlight-2-line-233" href="#sunlight-2-line-233">233</a>
<a name="sunlight-2-line-234" href="#sunlight-2-line-234">234</a>
<a name="sunlight-2-line-235" href="#sunlight-2-line-235">235</a>
<a name="sunlight-2-line-236" href="#sunlight-2-line-236">236</a>
<a name="sunlight-2-line-237" href="#sunlight-2-line-237">237</a>
<a name="sunlight-2-line-238" href="#sunlight-2-line-238">238</a>
<a name="sunlight-2-line-239" href="#sunlight-2-line-239">239</a>
<a name="sunlight-2-line-240" href="#sunlight-2-line-240">240</a>
<a name="sunlight-2-line-241" href="#sunlight-2-line-241">241</a>
<a name="sunlight-2-line-242" href="#sunlight-2-line-242">242</a>
<a name="sunlight-2-line-243" href="#sunlight-2-line-243">243</a>
<a name="sunlight-2-line-244" href="#sunlight-2-line-244">244</a>
<a name="sunlight-2-line-245" href="#sunlight-2-line-245">245</a>
<a name="sunlight-2-line-246" href="#sunlight-2-line-246">246</a>
<a name="sunlight-2-line-247" href="#sunlight-2-line-247">247</a>
<a name="sunlight-2-line-248" href="#sunlight-2-line-248">248</a>
<a name="sunlight-2-line-249" href="#sunlight-2-line-249">249</a>
<a name="sunlight-2-line-250" href="#sunlight-2-line-250">250</a>
<a name="sunlight-2-line-251" href="#sunlight-2-line-251">251</a>
<a name="sunlight-2-line-252" href="#sunlight-2-line-252">252</a>
<a name="sunlight-2-line-253" href="#sunlight-2-line-253">253</a>
<a name="sunlight-2-line-254" href="#sunlight-2-line-254">254</a>
<a name="sunlight-2-line-255" href="#sunlight-2-line-255">255</a>
<a name="sunlight-2-line-256" href="#sunlight-2-line-256">256</a>
<a name="sunlight-2-line-257" href="#sunlight-2-line-257">257</a>
<a name="sunlight-2-line-258" href="#sunlight-2-line-258">258</a>
<a name="sunlight-2-line-259" href="#sunlight-2-line-259">259</a>
<a name="sunlight-2-line-260" href="#sunlight-2-line-260">260</a>
<a name="sunlight-2-line-261" href="#sunlight-2-line-261">261</a>
<a name="sunlight-2-line-262" href="#sunlight-2-line-262">262</a>
<a name="sunlight-2-line-263" href="#sunlight-2-line-263">263</a>
<a name="sunlight-2-line-264" href="#sunlight-2-line-264">264</a>
<a name="sunlight-2-line-265" href="#sunlight-2-line-265">265</a>
<a name="sunlight-2-line-266" href="#sunlight-2-line-266">266</a>
<a name="sunlight-2-line-267" href="#sunlight-2-line-267">267</a>
<a name="sunlight-2-line-268" href="#sunlight-2-line-268">268</a>
<a name="sunlight-2-line-269" href="#sunlight-2-line-269">269</a>
<a name="sunlight-2-line-270" href="#sunlight-2-line-270">270</a>
<a name="sunlight-2-line-271" href="#sunlight-2-line-271">271</a>
<a name="sunlight-2-line-272" href="#sunlight-2-line-272">272</a>
<a name="sunlight-2-line-273" href="#sunlight-2-line-273">273</a>
<a name="sunlight-2-line-274" href="#sunlight-2-line-274">274</a>
<a name="sunlight-2-line-275" href="#sunlight-2-line-275">275</a>
<a name="sunlight-2-line-276" href="#sunlight-2-line-276">276</a>
<a name="sunlight-2-line-277" href="#sunlight-2-line-277">277</a>
<a name="sunlight-2-line-278" href="#sunlight-2-line-278">278</a>
<a name="sunlight-2-line-279" href="#sunlight-2-line-279">279</a>
<a name="sunlight-2-line-280" href="#sunlight-2-line-280">280</a>
<a name="sunlight-2-line-281" href="#sunlight-2-line-281">281</a>
<a name="sunlight-2-line-282" href="#sunlight-2-line-282">282</a>
<a name="sunlight-2-line-283" href="#sunlight-2-line-283">283</a>
<a name="sunlight-2-line-284" href="#sunlight-2-line-284">284</a>
<a name="sunlight-2-line-285" href="#sunlight-2-line-285">285</a>
<a name="sunlight-2-line-286" href="#sunlight-2-line-286">286</a>
<a name="sunlight-2-line-287" href="#sunlight-2-line-287">287</a>
<a name="sunlight-2-line-288" href="#sunlight-2-line-288">288</a>
<a name="sunlight-2-line-289" href="#sunlight-2-line-289">289</a>
<a name="sunlight-2-line-290" href="#sunlight-2-line-290">290</a>
<a name="sunlight-2-line-291" href="#sunlight-2-line-291">291</a>
<a name="sunlight-2-line-292" href="#sunlight-2-line-292">292</a>
<a name="sunlight-2-line-293" href="#sunlight-2-line-293">293</a>
<a name="sunlight-2-line-294" href="#sunlight-2-line-294">294</a>
<a name="sunlight-2-line-295" href="#sunlight-2-line-295">295</a>
<a name="sunlight-2-line-296" href="#sunlight-2-line-296">296</a>
<a name="sunlight-2-line-297" href="#sunlight-2-line-297">297</a>
<a name="sunlight-2-line-298" href="#sunlight-2-line-298">298</a>
<a name="sunlight-2-line-299" href="#sunlight-2-line-299">299</a>
<a name="sunlight-2-line-300" href="#sunlight-2-line-300">300</a>
<a name="sunlight-2-line-301" href="#sunlight-2-line-301">301</a>
<a name="sunlight-2-line-302" href="#sunlight-2-line-302">302</a>
<a name="sunlight-2-line-303" href="#sunlight-2-line-303">303</a>
<a name="sunlight-2-line-304" href="#sunlight-2-line-304">304</a>
<a name="sunlight-2-line-305" href="#sunlight-2-line-305">305</a>
<a name="sunlight-2-line-306" href="#sunlight-2-line-306">306</a>
<a name="sunlight-2-line-307" href="#sunlight-2-line-307">307</a>
<a name="sunlight-2-line-308" href="#sunlight-2-line-308">308</a>
<a name="sunlight-2-line-309" href="#sunlight-2-line-309">309</a>
<a name="sunlight-2-line-310" href="#sunlight-2-line-310">310</a>
<a name="sunlight-2-line-311" href="#sunlight-2-line-311">311</a>
<a name="sunlight-2-line-312" href="#sunlight-2-line-312">312</a>
<a name="sunlight-2-line-313" href="#sunlight-2-line-313">313</a>
<a name="sunlight-2-line-314" href="#sunlight-2-line-314">314</a>
<a name="sunlight-2-line-315" href="#sunlight-2-line-315">315</a>
<a name="sunlight-2-line-316" href="#sunlight-2-line-316">316</a>
<a name="sunlight-2-line-317" href="#sunlight-2-line-317">317</a>
<a name="sunlight-2-line-318" href="#sunlight-2-line-318">318</a>
<a name="sunlight-2-line-319" href="#sunlight-2-line-319">319</a>
<a name="sunlight-2-line-320" href="#sunlight-2-line-320">320</a>
<a name="sunlight-2-line-321" href="#sunlight-2-line-321">321</a>
<a name="sunlight-2-line-322" href="#sunlight-2-line-322">322</a>
<a name="sunlight-2-line-323" href="#sunlight-2-line-323">323</a>
<a name="sunlight-2-line-324" href="#sunlight-2-line-324">324</a>
<a name="sunlight-2-line-325" href="#sunlight-2-line-325">325</a>
<a name="sunlight-2-line-326" href="#sunlight-2-line-326">326</a>
<a name="sunlight-2-line-327" href="#sunlight-2-line-327">327</a>
<a name="sunlight-2-line-328" href="#sunlight-2-line-328">328</a>
<a name="sunlight-2-line-329" href="#sunlight-2-line-329">329</a>
<a name="sunlight-2-line-330" href="#sunlight-2-line-330">330</a>
<a name="sunlight-2-line-331" href="#sunlight-2-line-331">331</a>
<a name="sunlight-2-line-332" href="#sunlight-2-line-332">332</a>
<a name="sunlight-2-line-333" href="#sunlight-2-line-333">333</a>
<a name="sunlight-2-line-334" href="#sunlight-2-line-334">334</a>
<a name="sunlight-2-line-335" href="#sunlight-2-line-335">335</a>
<a name="sunlight-2-line-336" href="#sunlight-2-line-336">336</a>
<a name="sunlight-2-line-337" href="#sunlight-2-line-337">337</a>
<a name="sunlight-2-line-338" href="#sunlight-2-line-338">338</a>
<a name="sunlight-2-line-339" href="#sunlight-2-line-339">339</a>
<a name="sunlight-2-line-340" href="#sunlight-2-line-340">340</a>
<a name="sunlight-2-line-341" href="#sunlight-2-line-341">341</a>
<a name="sunlight-2-line-342" href="#sunlight-2-line-342">342</a>
<a name="sunlight-2-line-343" href="#sunlight-2-line-343">343</a>
<a name="sunlight-2-line-344" href="#sunlight-2-line-344">344</a>
<a name="sunlight-2-line-345" href="#sunlight-2-line-345">345</a>
<a name="sunlight-2-line-346" href="#sunlight-2-line-346">346</a>
<a name="sunlight-2-line-347" href="#sunlight-2-line-347">347</a>
<a name="sunlight-2-line-348" href="#sunlight-2-line-348">348</a>
<a name="sunlight-2-line-349" href="#sunlight-2-line-349">349</a>
<a name="sunlight-2-line-350" href="#sunlight-2-line-350">350</a>
<a name="sunlight-2-line-351" href="#sunlight-2-line-351">351</a>
<a name="sunlight-2-line-352" href="#sunlight-2-line-352">352</a>
<a name="sunlight-2-line-353" href="#sunlight-2-line-353">353</a>
<a name="sunlight-2-line-354" href="#sunlight-2-line-354">354</a>
<a name="sunlight-2-line-355" href="#sunlight-2-line-355">355</a>
<a name="sunlight-2-line-356" href="#sunlight-2-line-356">356</a>
<a name="sunlight-2-line-357" href="#sunlight-2-line-357">357</a>
<a name="sunlight-2-line-358" href="#sunlight-2-line-358">358</a>
<a name="sunlight-2-line-359" href="#sunlight-2-line-359">359</a>
<a name="sunlight-2-line-360" href="#sunlight-2-line-360">360</a>
<a name="sunlight-2-line-361" href="#sunlight-2-line-361">361</a>
<a name="sunlight-2-line-362" href="#sunlight-2-line-362">362</a>
<a name="sunlight-2-line-363" href="#sunlight-2-line-363">363</a>
<a name="sunlight-2-line-364" href="#sunlight-2-line-364">364</a>
<a name="sunlight-2-line-365" href="#sunlight-2-line-365">365</a>
<a name="sunlight-2-line-366" href="#sunlight-2-line-366">366</a>
<a name="sunlight-2-line-367" href="#sunlight-2-line-367">367</a>
<a name="sunlight-2-line-368" href="#sunlight-2-line-368">368</a>
<a name="sunlight-2-line-369" href="#sunlight-2-line-369">369</a>
<a name="sunlight-2-line-370" href="#sunlight-2-line-370">370</a>
<a name="sunlight-2-line-371" href="#sunlight-2-line-371">371</a>
<a name="sunlight-2-line-372" href="#sunlight-2-line-372">372</a>
<a name="sunlight-2-line-373" href="#sunlight-2-line-373">373</a>
<a name="sunlight-2-line-374" href="#sunlight-2-line-374">374</a>
<a name="sunlight-2-line-375" href="#sunlight-2-line-375">375</a>
<a name="sunlight-2-line-376" href="#sunlight-2-line-376">376</a>
<a name="sunlight-2-line-377" href="#sunlight-2-line-377">377</a>
<a name="sunlight-2-line-378" href="#sunlight-2-line-378">378</a>
<a name="sunlight-2-line-379" href="#sunlight-2-line-379">379</a>
<a name="sunlight-2-line-380" href="#sunlight-2-line-380">380</a>
<a name="sunlight-2-line-381" href="#sunlight-2-line-381">381</a>
<a name="sunlight-2-line-382" href="#sunlight-2-line-382">382</a>
<a name="sunlight-2-line-383" href="#sunlight-2-line-383">383</a>
<a name="sunlight-2-line-384" href="#sunlight-2-line-384">384</a>
<a name="sunlight-2-line-385" href="#sunlight-2-line-385">385</a>
<a name="sunlight-2-line-386" href="#sunlight-2-line-386">386</a>
<a name="sunlight-2-line-387" href="#sunlight-2-line-387">387</a>
<a name="sunlight-2-line-388" href="#sunlight-2-line-388">388</a>
<a name="sunlight-2-line-389" href="#sunlight-2-line-389">389</a>
<a name="sunlight-2-line-390" href="#sunlight-2-line-390">390</a>
<a name="sunlight-2-line-391" href="#sunlight-2-line-391">391</a>
<a name="sunlight-2-line-392" href="#sunlight-2-line-392">392</a>
<a name="sunlight-2-line-393" href="#sunlight-2-line-393">393</a>
<a name="sunlight-2-line-394" href="#sunlight-2-line-394">394</a>
<a name="sunlight-2-line-395" href="#sunlight-2-line-395">395</a>
<a name="sunlight-2-line-396" href="#sunlight-2-line-396">396</a>
<a name="sunlight-2-line-397" href="#sunlight-2-line-397">397</a>
<a name="sunlight-2-line-398" href="#sunlight-2-line-398">398</a>
<a name="sunlight-2-line-399" href="#sunlight-2-line-399">399</a>
<a name="sunlight-2-line-400" href="#sunlight-2-line-400">400</a>
<a name="sunlight-2-line-401" href="#sunlight-2-line-401">401</a>
<a name="sunlight-2-line-402" href="#sunlight-2-line-402">402</a>
<a name="sunlight-2-line-403" href="#sunlight-2-line-403">403</a>
<a name="sunlight-2-line-404" href="#sunlight-2-line-404">404</a>
<a name="sunlight-2-line-405" href="#sunlight-2-line-405">405</a>
<a name="sunlight-2-line-406" href="#sunlight-2-line-406">406</a>
<a name="sunlight-2-line-407" href="#sunlight-2-line-407">407</a>
<a name="sunlight-2-line-408" href="#sunlight-2-line-408">408</a>
<a name="sunlight-2-line-409" href="#sunlight-2-line-409">409</a>
<a name="sunlight-2-line-410" href="#sunlight-2-line-410">410</a>
<a name="sunlight-2-line-411" href="#sunlight-2-line-411">411</a>
<a name="sunlight-2-line-412" href="#sunlight-2-line-412">412</a>
<a name="sunlight-2-line-413" href="#sunlight-2-line-413">413</a>
<a name="sunlight-2-line-414" href="#sunlight-2-line-414">414</a>
<a name="sunlight-2-line-415" href="#sunlight-2-line-415">415</a>
<a name="sunlight-2-line-416" href="#sunlight-2-line-416">416</a>
<a name="sunlight-2-line-417" href="#sunlight-2-line-417">417</a>
<a name="sunlight-2-line-418" href="#sunlight-2-line-418">418</a>
<a name="sunlight-2-line-419" href="#sunlight-2-line-419">419</a>
<a name="sunlight-2-line-420" href="#sunlight-2-line-420">420</a>
<a name="sunlight-2-line-421" href="#sunlight-2-line-421">421</a>
<a name="sunlight-2-line-422" href="#sunlight-2-line-422">422</a>
<a name="sunlight-2-line-423" href="#sunlight-2-line-423">423</a>
<a name="sunlight-2-line-424" href="#sunlight-2-line-424">424</a>
<a name="sunlight-2-line-425" href="#sunlight-2-line-425">425</a>
<a name="sunlight-2-line-426" href="#sunlight-2-line-426">426</a>
<a name="sunlight-2-line-427" href="#sunlight-2-line-427">427</a>
<a name="sunlight-2-line-428" href="#sunlight-2-line-428">428</a>
<a name="sunlight-2-line-429" href="#sunlight-2-line-429">429</a>
<a name="sunlight-2-line-430" href="#sunlight-2-line-430">430</a>
<a name="sunlight-2-line-431" href="#sunlight-2-line-431">431</a>
<a name="sunlight-2-line-432" href="#sunlight-2-line-432">432</a>
<a name="sunlight-2-line-433" href="#sunlight-2-line-433">433</a>
<a name="sunlight-2-line-434" href="#sunlight-2-line-434">434</a>
<a name="sunlight-2-line-435" href="#sunlight-2-line-435">435</a>
<a name="sunlight-2-line-436" href="#sunlight-2-line-436">436</a>
<a name="sunlight-2-line-437" href="#sunlight-2-line-437">437</a>
<a name="sunlight-2-line-438" href="#sunlight-2-line-438">438</a>
<a name="sunlight-2-line-439" href="#sunlight-2-line-439">439</a>
<a name="sunlight-2-line-440" href="#sunlight-2-line-440">440</a>
<a name="sunlight-2-line-441" href="#sunlight-2-line-441">441</a>
<a name="sunlight-2-line-442" href="#sunlight-2-line-442">442</a>
<a name="sunlight-2-line-443" href="#sunlight-2-line-443">443</a>
<a name="sunlight-2-line-444" href="#sunlight-2-line-444">444</a>
<a name="sunlight-2-line-445" href="#sunlight-2-line-445">445</a>
<a name="sunlight-2-line-446" href="#sunlight-2-line-446">446</a>
<a name="sunlight-2-line-447" href="#sunlight-2-line-447">447</a>
<a name="sunlight-2-line-448" href="#sunlight-2-line-448">448</a>
<a name="sunlight-2-line-449" href="#sunlight-2-line-449">449</a>
<a name="sunlight-2-line-450" href="#sunlight-2-line-450">450</a>
<a name="sunlight-2-line-451" href="#sunlight-2-line-451">451</a>
<a name="sunlight-2-line-452" href="#sunlight-2-line-452">452</a>
<a name="sunlight-2-line-453" href="#sunlight-2-line-453">453</a>
<a name="sunlight-2-line-454" href="#sunlight-2-line-454">454</a>
<a name="sunlight-2-line-455" href="#sunlight-2-line-455">455</a>
</div><pre class="sunlight-highlight-actionscript sunlight-highlighted"><span class="sunlight-actionscript"><span class="sunlight-comment">//&nbsp;Copyright:&nbsp;Hiroshi&nbsp;Ichikawa&nbsp;&lt;http://gimite.net/en/&gt;</span>
<span class="sunlight-comment">//&nbsp;License:&nbsp;New&nbsp;BSD&nbsp;License</span>
<span class="sunlight-comment">//&nbsp;Reference:&nbsp;http://dev.w3.org/html5/websockets/</span>
<span class="sunlight-comment">//&nbsp;Reference:&nbsp;http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76</span>

<span class="sunlight-keyword">package</span>&nbsp;<span class="sunlight-punctuation">{</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">adobe</span><span class="sunlight-operator">.</span><span class="sunlight-ident">net</span><span class="sunlight-operator">.</span><span class="sunlight-ident">proxies</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">RFC2817Socket</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">gsolo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">encryption</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">MD5</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSConfig</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSEngine</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSSecurityParameters</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSSocket</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">display</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">events</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">external</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">net</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">system</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">utils</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">controls</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">core</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">events</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">utils</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">WebSocket</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">EventDispatcher</span>&nbsp;<span class="sunlight-punctuation">{</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">OPEN</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">CLOSING</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Socket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">TLSSocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">TLSConfig</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Socket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">scheme</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">host</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">port</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">path</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">headerState</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">readyState</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">expectedDigest</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">IWebSocketLogger</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">WebSocket</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">proxyHost</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">proxyPort</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">IWebSocketLogger</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">logger</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">initNoiseChars</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-operator">.</span><span class="sunlight-ident">match</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/^(\w+):\/\/([^\/:]+)(:(\d+))?(\/.*)?(\?.*)?$/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"SYNTAX_ERR:&nbsp;invalid&nbsp;url:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">host</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">port</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">parseInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">4</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-string">"80"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">path</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-string">"/"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">6</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">origin</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">cookie</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;if&nbsp;present&nbsp;and&nbsp;not&nbsp;the&nbsp;empty&nbsp;string,&nbsp;headers&nbsp;MUST&nbsp;end&nbsp;with&nbsp;\r\n</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;headers&nbsp;should&nbsp;be&nbsp;zero&nbsp;or&nbsp;more&nbsp;complete&nbsp;lines,&nbsp;for&nbsp;example</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;"Header1:&nbsp;xxx\r\nHeader2:&nbsp;yyyy\r\n"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">headers</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">proxyHost</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-keyword">null</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">proxyPort</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"wss"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"wss&nbsp;with&nbsp;proxy&nbsp;is&nbsp;not&nbsp;supported"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">RFC2817Socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">RFC2817Socket</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">setProxyInfo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">proxyHost</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">proxyPort</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ProgressEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SOCKET_DATA</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Socket</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"wss"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">TLSConfig</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">TLSEngine</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CLIENT</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">TLSSecurityParameters</span><span class="sunlight-operator">.</span><span class="sunlight-ident">PROTOCOL_VERSION</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">.</span><span class="sunlight-ident">trustAllCertificates</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ignoreCommonNameMismatch</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsSocket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">TLSSocket</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ProgressEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SOCKET_DATA</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ProgressEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SOCKET_DATA</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Event</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CLOSE</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketClose</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Event</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CONNECT</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketConnect</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">IOErrorEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">IO_ERROR</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketIoError</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">SecurityErrorEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SECURITY_ERROR</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketSecurityError</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">connect</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">host</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">port</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;&nbsp;This&nbsp;WebSocket's&nbsp;ID.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">getId</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;this&nbsp;WebSocket's&nbsp;readyState.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">getReadyState</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readyState</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">send</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">encData</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">decodeURIComponent</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">encData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">OPEN</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"sent:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CLOSING</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//&nbsp;not&nbsp;sure&nbsp;whether&nbsp;it&nbsp;should&nbsp;include&nbsp;\x00&nbsp;and&nbsp;\xff</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"invalid&nbsp;state"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">isError</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Boolean</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"close"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">OPEN</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-operator">!</span><span class="sunlight-ident">isError</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">ex</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Error</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">isError</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-string">"error"</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"close"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketConnect</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Event</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"connected"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"wss"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"starting&nbsp;SSL/TLS"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">startTLS</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">rawSocket</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">host</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">hostValue</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">host</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">port</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">80</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-string">""</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">":"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">port</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key1</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">generateKey</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">generateKey</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">generateKey3</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">expectedDigest</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">getSecurityDigest</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">opt</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">protocol</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">opt</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-string">"Sec-WebSocket-Protocol:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"\r\n"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;if&nbsp;caller&nbsp;passes&nbsp;additional&nbsp;headers&nbsp;they&nbsp;must&nbsp;end&nbsp;with&nbsp;"\r\n"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headers</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">opt</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">StringUtil</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substitute</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"GET&nbsp;{0}&nbsp;HTTP/1.1\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Upgrade:&nbsp;WebSocket\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Connection:&nbsp;Upgrade\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Host:&nbsp;{1}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Origin:&nbsp;{2}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Cookie:&nbsp;{3}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Sec-WebSocket-Key1:&nbsp;{4}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Sec-WebSocket-Key2:&nbsp;{5}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"{6}"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"\r\n"</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">path</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">hostValue</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">opt</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"request&nbsp;header:\n"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">req</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"sent&nbsp;key3:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">writeBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketClose</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Event</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"closed"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"close"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketIoError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">IOErrorEvent</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"cannot&nbsp;connect&nbsp;to&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(IoError)"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"error&nbsp;communicating&nbsp;with&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(IoError)"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketSecurityError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">SecurityErrorEvent</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"cannot&nbsp;connect&nbsp;to&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(SecurityError)\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"make&nbsp;sure&nbsp;the&nbsp;server&nbsp;is&nbsp;running&nbsp;and&nbsp;Flash&nbsp;socket&nbsp;policy&nbsp;file&nbsp;is&nbsp;correctly&nbsp;placed"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"error&nbsp;communicating&nbsp;with&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(SecurityError)"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">error</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ProgressEvent</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;try&nbsp;to&nbsp;find&nbsp;"\r\n\r\n"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x0d</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">headerState</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x0a</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">headerState</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">headerStr</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"response&nbsp;header:\n"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">headerStr</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">validateHeader</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerStr</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">15</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">replyDigest</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">16</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"reply&nbsp;digest:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">replyDigest</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">replyDigest</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">expectedDigest</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"digest&nbsp;doesn't&nbsp;match:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">replyDigest</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;!=&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">expectedDigest</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">OPEN</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"open"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0xff</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"data&nbsp;must&nbsp;start&nbsp;with&nbsp;\\x00"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"received:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"message"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-globalFunction">encodeURIComponent</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0xff</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-comment">//&nbsp;closing</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"received&nbsp;closing&nbsp;packet"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">validateHeader</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerStr</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Boolean</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">headerStr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">split</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/\r\n/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">match</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/^HTTP\/1.1&nbsp;101&nbsp;/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"bad&nbsp;response:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Object</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">lowerHeader</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Object</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">continue</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">match</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/^(\S+):&nbsp;(.*)$/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"failed&nbsp;to&nbsp;parse&nbsp;response&nbsp;header&nbsp;line:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toLowerCase</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toLowerCase</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toLowerCase</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"upgrade"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-string">"websocket"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"invalid&nbsp;Upgrade:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"Upgrade"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"connection"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-string">"upgrade"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"invalid&nbsp;Connection:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"Connection"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"sec-websocket-origin"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"websocket-origin"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"The&nbsp;WebSocket&nbsp;server&nbsp;speaks&nbsp;old&nbsp;WebSocket&nbsp;protocol,&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"which&nbsp;is&nbsp;not&nbsp;supported&nbsp;by&nbsp;web-socket-js.&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"It&nbsp;requires&nbsp;WebSocket&nbsp;protocol&nbsp;76&nbsp;or&nbsp;later.&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Try&nbsp;newer&nbsp;version&nbsp;of&nbsp;the&nbsp;server&nbsp;if&nbsp;available."</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"header&nbsp;Sec-WebSocket-Origin&nbsp;is&nbsp;missing"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">resOrigin</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"sec-websocket-origin"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">resOrigin</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"origin&nbsp;doesn't&nbsp;match:&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">resOrigin</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'&nbsp;!=&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">origin</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"sec-websocket-protocol"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"protocol&nbsp;doesn't&nbsp;match:&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"websocket-protocol"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'&nbsp;!=&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">nextBuffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">nextBuffer</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nextBuffer</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">initNoiseChars</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">noiseChars</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">Array</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0x21</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;=</span>&nbsp;<span class="sunlight-number">0x2f</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">.</span><span class="sunlight-ident">push</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">j</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0x3a</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">&lt;=</span>&nbsp;<span class="sunlight-number">0x7a</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">.</span><span class="sunlight-ident">push</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">generateKey</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">12</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalObject">uint</span><span class="sunlight-operator">.</span><span class="sunlight-ident">MAX_VALUE</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">number</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">number</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">noises</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">12</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">noises</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">char</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">key</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">char</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">j</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">key</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">generateKey3</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">8</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">key3</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">255</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">getSecurityDigest</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key1</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes1</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">keyToBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes2</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">keyToBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">MD5</span><span class="sunlight-operator">.</span><span class="sunlight-ident">rstr_md5</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes1</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">bytes2</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">keyToBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">keyNum</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">parseInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">replace</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/[^\d]/g</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">charAt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">resultNum</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">keyNum</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">j</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">&gt;=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">--</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bytes</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">resultNum</span>&nbsp;<span class="sunlight-operator">&gt;&gt;</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-number">8</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;Writes&nbsp;byte&nbsp;sequence&nbsp;to&nbsp;socket.</span>
&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;bytes&nbsp;is&nbsp;String&nbsp;in&nbsp;special&nbsp;format&nbsp;where&nbsp;bytes[i]&nbsp;is&nbsp;i-th&nbsp;byte,&nbsp;not&nbsp;i-th&nbsp;character.</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">writeBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">charCodeAt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;Reads&nbsp;specified&nbsp;number&nbsp;of&nbsp;bytes&nbsp;from&nbsp;buffer,&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;special&nbsp;format&nbsp;String</span>
&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;where&nbsp;bytes[i]&nbsp;is&nbsp;i-th&nbsp;byte&nbsp;(not&nbsp;i-th&nbsp;character).</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;&amp;&nbsp;0xff&nbsp;is&nbsp;to&nbsp;make&nbsp;\x80-\xff&nbsp;positive&nbsp;number.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bytes</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;Workaround&nbsp;of&nbsp;a&nbsp;bug&nbsp;of&nbsp;ByteArray#readUTFBytes()&nbsp;that&nbsp;bytes&nbsp;after&nbsp;"\x00"&nbsp;is&nbsp;discarded.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">data</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"\x00"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">data</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">numBytes</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">min</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">min</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-globalObject">Math</span><span class="sunlight-operator">.</span><span class="sunlight-ident">floor</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalObject">Math</span><span class="sunlight-operator">.</span><span class="sunlight-ident">random</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-globalFunction">Number</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">max</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">min</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">error</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;for&nbsp;debug</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">dumpBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">output</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">output</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">charCodeAt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">",&nbsp;"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">output</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

<span class="sunlight-punctuation">}</span>

<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">//other&nbsp;tests</span>
<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Foo</span>&nbsp;<span class="sunlight-keyword">implements</span>&nbsp;<span class="sunlight-named-ident">IInterface1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface3</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2 id="bash.sh">bash.sh</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-3-line-1" href="#sunlight-3-line-1">1</a>
<a name="sunlight-3-line-2" href="#sunlight-3-line-2">2</a>
<a name="sunlight-3-line-3" href="#sunlight-3-line-3">3</a>
<a name="sunlight-3-line-4" href="#sunlight-3-line-4">4</a>
<a name="sunlight-3-line-5" href="#sunlight-3-line-5">5</a>
<a name="sunlight-3-line-6" href="#sunlight-3-line-6">6</a>
<a name="sunlight-3-line-7" href="#sunlight-3-line-7">7</a>
<a name="sunlight-3-line-8" href="#sunlight-3-line-8">8</a>
<a name="sunlight-3-line-9" href="#sunlight-3-line-9">9</a>
<a name="sunlight-3-line-10" href="#sunlight-3-line-10">10</a>
<a name="sunlight-3-line-11" href="#sunlight-3-line-11">11</a>
<a name="sunlight-3-line-12" href="#sunlight-3-line-12">12</a>
<a name="sunlight-3-line-13" href="#sunlight-3-line-13">13</a>
<a name="sunlight-3-line-14" href="#sunlight-3-line-14">14</a>
<a name="sunlight-3-line-15" href="#sunlight-3-line-15">15</a>
<a name="sunlight-3-line-16" href="#sunlight-3-line-16">16</a>
<a name="sunlight-3-line-17" href="#sunlight-3-line-17">17</a>
<a name="sunlight-3-line-18" href="#sunlight-3-line-18">18</a>
<a name="sunlight-3-line-19" href="#sunlight-3-line-19">19</a>
<a name="sunlight-3-line-20" href="#sunlight-3-line-20">20</a>
<a name="sunlight-3-line-21" href="#sunlight-3-line-21">21</a>
<a name="sunlight-3-line-22" href="#sunlight-3-line-22">22</a>
<a name="sunlight-3-line-23" href="#sunlight-3-line-23">23</a>
<a name="sunlight-3-line-24" href="#sunlight-3-line-24">24</a>
<a name="sunlight-3-line-25" href="#sunlight-3-line-25">25</a>
<a name="sunlight-3-line-26" href="#sunlight-3-line-26">26</a>
<a name="sunlight-3-line-27" href="#sunlight-3-line-27">27</a>
<a name="sunlight-3-line-28" href="#sunlight-3-line-28">28</a>
<a name="sunlight-3-line-29" href="#sunlight-3-line-29">29</a>
<a name="sunlight-3-line-30" href="#sunlight-3-line-30">30</a>
<a name="sunlight-3-line-31" href="#sunlight-3-line-31">31</a>
<a name="sunlight-3-line-32" href="#sunlight-3-line-32">32</a>
<a name="sunlight-3-line-33" href="#sunlight-3-line-33">33</a>
<a name="sunlight-3-line-34" href="#sunlight-3-line-34">34</a>
<a name="sunlight-3-line-35" href="#sunlight-3-line-35">35</a>
<a name="sunlight-3-line-36" href="#sunlight-3-line-36">36</a>
<a name="sunlight-3-line-37" href="#sunlight-3-line-37">37</a>
<a name="sunlight-3-line-38" href="#sunlight-3-line-38">38</a>
<a name="sunlight-3-line-39" href="#sunlight-3-line-39">39</a>
<a name="sunlight-3-line-40" href="#sunlight-3-line-40">40</a>
<a name="sunlight-3-line-41" href="#sunlight-3-line-41">41</a>
<a name="sunlight-3-line-42" href="#sunlight-3-line-42">42</a>
<a name="sunlight-3-line-43" href="#sunlight-3-line-43">43</a>
<a name="sunlight-3-line-44" href="#sunlight-3-line-44">44</a>
<a name="sunlight-3-line-45" href="#sunlight-3-line-45">45</a>
<a name="sunlight-3-line-46" href="#sunlight-3-line-46">46</a>
<a name="sunlight-3-line-47" href="#sunlight-3-line-47">47</a>
<a name="sunlight-3-line-48" href="#sunlight-3-line-48">48</a>
<a name="sunlight-3-line-49" href="#sunlight-3-line-49">49</a>
</div><pre class="sunlight-highlight-bash sunlight-highlighted"><span class="sunlight-bash"><span class="sunlight-hashBang">#!/bin/bash</span>

<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Starting&nbsp;the&nbsp;script,&nbsp;yo"</span>
<span class="sunlight-comment">#this&nbsp;is&nbsp;a&nbsp;comment</span>

<span class="sunlight-ident">DIR</span><span class="sunlight-operator">=</span><span class="sunlight-operator">/</span><span class="sunlight-ident">var</span><span class="sunlight-operator">/</span><span class="sunlight-ident">log</span>
<span class="sunlight-command">cd</span>&nbsp;<span class="sunlight-variable">$DIR</span>

<span class="sunlight-named-ident">my_function</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-command">rm</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-ident">rf</span>&nbsp;<span class="sunlight-string">"$1"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-command">return</span>&nbsp;<span class="sunlight-number">0</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">planet</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">Mercury</span>&nbsp;<span class="sunlight-ident">Venus</span>&nbsp;<span class="sunlight-ident">Earth</span>&nbsp;<span class="sunlight-ident">Mars</span>&nbsp;<span class="sunlight-ident">Jupiter</span>&nbsp;<span class="sunlight-ident">Saturn</span>&nbsp;<span class="sunlight-ident">Uranus</span>&nbsp;<span class="sunlight-ident">Neptune</span>&nbsp;<span class="sunlight-ident">Pluto</span>
<span class="sunlight-keyword">do</span>
&nbsp;&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-variable">$planet</span>&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;Each&nbsp;planet&nbsp;on&nbsp;a&nbsp;separate&nbsp;line.</span>
<span class="sunlight-keyword">done</span>

<span class="sunlight-ident">my_function</span>&nbsp;<span class="sunlight-variable">$DIR</span>

<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">[</span>&nbsp;<span class="sunlight-specialVariable">$#</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-ident">ne</span>&nbsp;<span class="sunlight-number">2</span>&nbsp;<span class="sunlight-punctuation">]</span>
<span class="sunlight-keyword">then</span>
&nbsp;&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Usage:&nbsp;`basename&nbsp;$0`&nbsp;search_string&nbsp;filename"</span>
&nbsp;&nbsp;<span class="sunlight-command">exit</span>&nbsp;<span class="sunlight-number">65</span>
<span class="sunlight-keyword">fi</span>

<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-punctuation">[</span>&nbsp;<span class="sunlight-string">"$var1"</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-string">"end"</span>&nbsp;<span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;while&nbsp;test&nbsp;"$var1"&nbsp;!=&nbsp;"end"</span>
<span class="sunlight-keyword">do</span>
&nbsp;&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Input&nbsp;variable&nbsp;#1&nbsp;(end&nbsp;to&nbsp;exit)&nbsp;"</span>
&nbsp;&nbsp;<span class="sunlight-command">read</span>&nbsp;<span class="sunlight-ident">var1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;Not&nbsp;'read&nbsp;$var1'&nbsp;(why?).</span>
&nbsp;&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"variable&nbsp;#1&nbsp;=&nbsp;$var1"</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;Need&nbsp;quotes&nbsp;because&nbsp;of&nbsp;"#"&nbsp;.&nbsp;.&nbsp;.</span>
&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;If&nbsp;input&nbsp;is&nbsp;'end',&nbsp;echoes&nbsp;it&nbsp;here.</span>
&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;Does&nbsp;not&nbsp;test&nbsp;for&nbsp;termination&nbsp;condition&nbsp;until&nbsp;top&nbsp;of&nbsp;loop.</span>
&nbsp;&nbsp;<span class="sunlight-command">echo</span>
<span class="sunlight-keyword">done</span>

<span class="sunlight-ident">count</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span>
<span class="sunlight-command">let</span>&nbsp;<span class="sunlight-string">"count&nbsp;+=&nbsp;1"</span>

<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-string">"$Keypress"</span>&nbsp;<span class="sunlight-keyword">in</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">[</span><span class="sunlight-operator">:</span><span class="sunlight-ident">lower</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Lowercase&nbsp;letter"</span><span class="sunlight-operator">;;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">[</span><span class="sunlight-operator">:</span><span class="sunlight-ident">upper</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Uppercase&nbsp;letter"</span><span class="sunlight-operator">;;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-operator">-</span><span class="sunlight-number">9</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Digit"</span><span class="sunlight-operator">;;</span>
&nbsp;&nbsp;<span class="sunlight-operator">*</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-string">"Punctuation,&nbsp;whitespace,&nbsp;or&nbsp;other"</span><span class="sunlight-operator">;;</span>
<span class="sunlight-keyword">esac</span>

<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-specialVariable">$?</span>
<span class="sunlight-command">echo</span>&nbsp;<span class="sunlight-verbatimCommand">`echo&nbsp;running&nbsp;a&nbsp;command`</span>
<span class="sunlight-command">exit</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-comment">#exit</span>
</span></pre></div></div>
<h2 id="batch1.bat">batch1.bat</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-batch sunlight-highlighted"><span class="sunlight-batch"><span class="sunlight-comment">REM&nbsp;http://en.wikipedia.org/wiki/Batch_file#Advanced_batch_example_-_conditional_shutdown</span>
<span class="sunlight-operator">@</span><span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">off</span>
<span class="sunlight-keyword">color</span>&nbsp;<span class="sunlight-number">3</span>
<span class="sunlight-keyword">title</span>&nbsp;<span class="sunlight-ident">Conditional</span>&nbsp;<span class="sunlight-ident">Shutdown</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">name</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">name</span><span class="sunlight-operator">:</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">start</span>
<span class="sunlight-keyword">cls</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">Hi</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-variable">%name%</span>
<span class="sunlight-keyword">echo</span><span class="sunlight-ident">.</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-ident">.Shutdown</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-ident">.Quit</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">invalid_choice</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">choice</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">your</span>&nbsp;<span class="sunlight-ident">choice</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span><span class="sunlight-number">2</span><span class="sunlight-operator">:</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%choice%</span><span class="sunlight-operator">==</span><span class="sunlight-number">1</span>&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">shutdown</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%choice%</span><span class="sunlight-operator">==</span><span class="sunlight-number">2</span>&nbsp;<span class="sunlight-keyword">exit</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">invalid</span>&nbsp;<span class="sunlight-ident">choice</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-variable">%choice%</span>
<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">invalid_choice</span>

<span class="sunlight-operator">:</span><span class="sunlight-label">shutdown</span>
<span class="sunlight-keyword">cls</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">sec</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">number</span>&nbsp;<span class="sunlight-ident">of</span>&nbsp;<span class="sunlight-ident">seconds</span>&nbsp;<span class="sunlight-ident">that</span>&nbsp;<span class="sunlight-ident">you</span>&nbsp;<span class="sunlight-ident">wish</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">computer</span>&nbsp;<span class="sunlight-ident">to</span>&nbsp;<span class="sunlight-ident">shutdown</span>&nbsp;<span class="sunlight-ident">in</span><span class="sunlight-operator">:</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">shutdown</span>&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-ident">you</span>&nbsp;<span class="sunlight-ident">wish</span>&nbsp;<span class="sunlight-ident">to</span>&nbsp;<span class="sunlight-ident">display</span><span class="sunlight-operator">:</span>
<span class="sunlight-keyword">shutdown</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-variable">%sec%</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-string">"%message%"</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">shutdown</span>&nbsp;<span class="sunlight-ident">initiated</span>&nbsp;<span class="sunlight-ident">at</span>&nbsp;<span class="sunlight-variable">%time%</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">cancel</span><span class="sunlight-operator">=</span><span class="sunlight-ident">type</span>&nbsp;<span class="sunlight-ident">cancel</span>&nbsp;<span class="sunlight-ident">to</span>&nbsp;<span class="sunlight-ident">stop</span>&nbsp;<span class="sunlight-ident">shutdown</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%cancel%</span><span class="sunlight-operator">==</span><span class="sunlight-ident">cancel</span>&nbsp;<span class="sunlight-keyword">shutdown</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">a</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%cancel%</span><span class="sunlight-operator">==</span><span class="sunlight-ident">cancel</span>&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">start</span>

<span class="sunlight-comment">::&nbsp;http://en.wikipedia.org/wiki/Batch_file#Text_output_with_stripped_CR.2FLF</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-operator">=</span><span class="sunlight-ident">Line</span>&nbsp;<span class="sunlight-number">1</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">tmp</span><span class="sunlight-operator">=</span><span class="sunlight-string">"%foo%"</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">Line</span>&nbsp;<span class="sunlight-number">2</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">Line</span>&nbsp;<span class="sunlight-number">3</span>

<span class="sunlight-comment">REM&nbsp;http://en.wikipedia.org/wiki/Batch_file#Sleep_.2F_Scripted_Delay</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-string">"tokens=1-3&nbsp;delims=:.,"</span>&nbsp;<span class="sunlight-variable">%%a</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-string">"%time%"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">h</span><span class="sunlight-operator">=</span><span class="sunlight-variable">%%a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%b%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%c%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-operator">=</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">h</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">s</span><span class="sunlight-operator">+</span><span class="sunlight-variable">%1</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">wait</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-string">"tokens=1-3&nbsp;delims=:.,"</span>&nbsp;<span class="sunlight-variable">%%a</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-string">"%time%"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">h</span><span class="sunlight-operator">=</span><span class="sunlight-variable">%%a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%b%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%c%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">current</span><span class="sunlight-operator">=</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">h</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">s</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%current%</span>&nbsp;<span class="sunlight-keyword">lss</span>&nbsp;<span class="sunlight-variable">%end%</span>&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">wait</span>
</span></pre></div></div>
<h2 id="batch2.bat">batch2.bat</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-5-line-1" href="#sunlight-5-line-1">1</a>
<a name="sunlight-5-line-2" href="#sunlight-5-line-2">2</a>
<a name="sunlight-5-line-3" href="#sunlight-5-line-3">3</a>
<a name="sunlight-5-line-4" href="#sunlight-5-line-4">4</a>
<a name="sunlight-5-line-5" href="#sunlight-5-line-5">5</a>
<a name="sunlight-5-line-6" href="#sunlight-5-line-6">6</a>
<a name="sunlight-5-line-7" href="#sunlight-5-line-7">7</a>
<a name="sunlight-5-line-8" href="#sunlight-5-line-8">8</a>
</div><pre class="sunlight-highlight-batch sunlight-highlighted"><span class="sunlight-batch"><span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">label1</span>

<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">This</span>&nbsp;<span class="sunlight-ident">should</span>&nbsp;<span class="sunlight-ident">not</span>&nbsp;<span class="sunlight-ident">be</span>&nbsp;<span class="sunlight-ident">printed</span><span class="sunlight-ident">.</span>
&nbsp;&nbsp;<span class="sunlight-operator">:</span><span class="sunlight-label">label1</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">This</span>&nbsp;<span class="sunlight-ident">should</span>&nbsp;<span class="sunlight-ident">be</span>&nbsp;<span class="sunlight-ident">printed</span><span class="sunlight-ident">.</span>

<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">label2</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">label3</span>
</span></pre></div></div>
<h2 id="brainfuck.bf">brainfuck.bf</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-brainfuck sunlight-highlighted"><span class="sunlight-brainfuck"><span class="sunlight-openLoop">[</span>&nbsp;http://bf<span class="sunlight-write">.</span>doleczek<span class="sunlight-write">.</span>pl&nbsp;<span class="sunlight-closeLoop">]</span>
wypisuje&nbsp;kody&nbsp;wpisanych&nbsp;znakw

<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span>
<span class="sunlight-openLoop">[</span><span class="sunlight-read">,</span><span class="sunlight-write">.</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-write">.</span><span class="sunlight-increment">&gt;</span><span class="sunlight-write">.</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span>
<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-write">.</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-write">.</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span>
</span></pre></div></div>
<h2 id="cpp.cpp">cpp.cpp</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-7-line-1" href="#sunlight-7-line-1">1</a>
<a name="sunlight-7-line-2" href="#sunlight-7-line-2">2</a>
<a name="sunlight-7-line-3" href="#sunlight-7-line-3">3</a>
<a name="sunlight-7-line-4" href="#sunlight-7-line-4">4</a>
<a name="sunlight-7-line-5" href="#sunlight-7-line-5">5</a>
<a name="sunlight-7-line-6" href="#sunlight-7-line-6">6</a>
<a name="sunlight-7-line-7" href="#sunlight-7-line-7">7</a>
<a name="sunlight-7-line-8" href="#sunlight-7-line-8">8</a>
<a name="sunlight-7-line-9" href="#sunlight-7-line-9">9</a>
<a name="sunlight-7-line-10" href="#sunlight-7-line-10">10</a>
<a name="sunlight-7-line-11" href="#sunlight-7-line-11">11</a>
<a name="sunlight-7-line-12" href="#sunlight-7-line-12">12</a>
<a name="sunlight-7-line-13" href="#sunlight-7-line-13">13</a>
<a name="sunlight-7-line-14" href="#sunlight-7-line-14">14</a>
<a name="sunlight-7-line-15" href="#sunlight-7-line-15">15</a>
<a name="sunlight-7-line-16" href="#sunlight-7-line-16">16</a>
<a name="sunlight-7-line-17" href="#sunlight-7-line-17">17</a>
<a name="sunlight-7-line-18" href="#sunlight-7-line-18">18</a>
<a name="sunlight-7-line-19" href="#sunlight-7-line-19">19</a>
<a name="sunlight-7-line-20" href="#sunlight-7-line-20">20</a>
<a name="sunlight-7-line-21" href="#sunlight-7-line-21">21</a>
<a name="sunlight-7-line-22" href="#sunlight-7-line-22">22</a>
<a name="sunlight-7-line-23" href="#sunlight-7-line-23">23</a>
<a name="sunlight-7-line-24" href="#sunlight-7-line-24">24</a>
<a name="sunlight-7-line-25" href="#sunlight-7-line-25">25</a>
<a name="sunlight-7-line-26" href="#sunlight-7-line-26">26</a>
<a name="sunlight-7-line-27" href="#sunlight-7-line-27">27</a>
<a name="sunlight-7-line-28" href="#sunlight-7-line-28">28</a>
<a name="sunlight-7-line-29" href="#sunlight-7-line-29">29</a>
<a name="sunlight-7-line-30" href="#sunlight-7-line-30">30</a>
<a name="sunlight-7-line-31" href="#sunlight-7-line-31">31</a>
<a name="sunlight-7-line-32" href="#sunlight-7-line-32">32</a>
<a name="sunlight-7-line-33" href="#sunlight-7-line-33">33</a>
<a name="sunlight-7-line-34" href="#sunlight-7-line-34">34</a>
<a name="sunlight-7-line-35" href="#sunlight-7-line-35">35</a>
<a name="sunlight-7-line-36" href="#sunlight-7-line-36">36</a>
<a name="sunlight-7-line-37" href="#sunlight-7-line-37">37</a>
<a name="sunlight-7-line-38" href="#sunlight-7-line-38">38</a>
<a name="sunlight-7-line-39" href="#sunlight-7-line-39">39</a>
<a name="sunlight-7-line-40" href="#sunlight-7-line-40">40</a>
<a name="sunlight-7-line-41" href="#sunlight-7-line-41">41</a>
<a name="sunlight-7-line-42" href="#sunlight-7-line-42">42</a>
<a name="sunlight-7-line-43" href="#sunlight-7-line-43">43</a>
<a name="sunlight-7-line-44" href="#sunlight-7-line-44">44</a>
<a name="sunlight-7-line-45" href="#sunlight-7-line-45">45</a>
<a name="sunlight-7-line-46" href="#sunlight-7-line-46">46</a>
<a name="sunlight-7-line-47" href="#sunlight-7-line-47">47</a>
<a name="sunlight-7-line-48" href="#sunlight-7-line-48">48</a>
<a name="sunlight-7-line-49" href="#sunlight-7-line-49">49</a>
<a name="sunlight-7-line-50" href="#sunlight-7-line-50">50</a>
<a name="sunlight-7-line-51" href="#sunlight-7-line-51">51</a>
<a name="sunlight-7-line-52" href="#sunlight-7-line-52">52</a>
<a name="sunlight-7-line-53" href="#sunlight-7-line-53">53</a>
<a name="sunlight-7-line-54" href="#sunlight-7-line-54">54</a>
<a name="sunlight-7-line-55" href="#sunlight-7-line-55">55</a>
<a name="sunlight-7-line-56" href="#sunlight-7-line-56">56</a>
<a name="sunlight-7-line-57" href="#sunlight-7-line-57">57</a>
<a name="sunlight-7-line-58" href="#sunlight-7-line-58">58</a>
<a name="sunlight-7-line-59" href="#sunlight-7-line-59">59</a>
<a name="sunlight-7-line-60" href="#sunlight-7-line-60">60</a>
<a name="sunlight-7-line-61" href="#sunlight-7-line-61">61</a>
<a name="sunlight-7-line-62" href="#sunlight-7-line-62">62</a>
<a name="sunlight-7-line-63" href="#sunlight-7-line-63">63</a>
<a name="sunlight-7-line-64" href="#sunlight-7-line-64">64</a>
<a name="sunlight-7-line-65" href="#sunlight-7-line-65">65</a>
<a name="sunlight-7-line-66" href="#sunlight-7-line-66">66</a>
<a name="sunlight-7-line-67" href="#sunlight-7-line-67">67</a>
<a name="sunlight-7-line-68" href="#sunlight-7-line-68">68</a>
<a name="sunlight-7-line-69" href="#sunlight-7-line-69">69</a>
<a name="sunlight-7-line-70" href="#sunlight-7-line-70">70</a>
<a name="sunlight-7-line-71" href="#sunlight-7-line-71">71</a>
<a name="sunlight-7-line-72" href="#sunlight-7-line-72">72</a>
<a name="sunlight-7-line-73" href="#sunlight-7-line-73">73</a>
<a name="sunlight-7-line-74" href="#sunlight-7-line-74">74</a>
<a name="sunlight-7-line-75" href="#sunlight-7-line-75">75</a>
<a name="sunlight-7-line-76" href="#sunlight-7-line-76">76</a>
<a name="sunlight-7-line-77" href="#sunlight-7-line-77">77</a>
<a name="sunlight-7-line-78" href="#sunlight-7-line-78">78</a>
<a name="sunlight-7-line-79" href="#sunlight-7-line-79">79</a>
<a name="sunlight-7-line-80" href="#sunlight-7-line-80">80</a>
<a name="sunlight-7-line-81" href="#sunlight-7-line-81">81</a>
<a name="sunlight-7-line-82" href="#sunlight-7-line-82">82</a>
<a name="sunlight-7-line-83" href="#sunlight-7-line-83">83</a>
<a name="sunlight-7-line-84" href="#sunlight-7-line-84">84</a>
<a name="sunlight-7-line-85" href="#sunlight-7-line-85">85</a>
<a name="sunlight-7-line-86" href="#sunlight-7-line-86">86</a>
<a name="sunlight-7-line-87" href="#sunlight-7-line-87">87</a>
<a name="sunlight-7-line-88" href="#sunlight-7-line-88">88</a>
<a name="sunlight-7-line-89" href="#sunlight-7-line-89">89</a>
<a name="sunlight-7-line-90" href="#sunlight-7-line-90">90</a>
<a name="sunlight-7-line-91" href="#sunlight-7-line-91">91</a>
<a name="sunlight-7-line-92" href="#sunlight-7-line-92">92</a>
<a name="sunlight-7-line-93" href="#sunlight-7-line-93">93</a>
<a name="sunlight-7-line-94" href="#sunlight-7-line-94">94</a>
<a name="sunlight-7-line-95" href="#sunlight-7-line-95">95</a>
<a name="sunlight-7-line-96" href="#sunlight-7-line-96">96</a>
<a name="sunlight-7-line-97" href="#sunlight-7-line-97">97</a>
<a name="sunlight-7-line-98" href="#sunlight-7-line-98">98</a>
<a name="sunlight-7-line-99" href="#sunlight-7-line-99">99</a>
<a name="sunlight-7-line-100" href="#sunlight-7-line-100">100</a>
<a name="sunlight-7-line-101" href="#sunlight-7-line-101">101</a>
<a name="sunlight-7-line-102" href="#sunlight-7-line-102">102</a>
<a name="sunlight-7-line-103" href="#sunlight-7-line-103">103</a>
<a name="sunlight-7-line-104" href="#sunlight-7-line-104">104</a>
<a name="sunlight-7-line-105" href="#sunlight-7-line-105">105</a>
<a name="sunlight-7-line-106" href="#sunlight-7-line-106">106</a>
<a name="sunlight-7-line-107" href="#sunlight-7-line-107">107</a>
<a name="sunlight-7-line-108" href="#sunlight-7-line-108">108</a>
<a name="sunlight-7-line-109" href="#sunlight-7-line-109">109</a>
<a name="sunlight-7-line-110" href="#sunlight-7-line-110">110</a>
<a name="sunlight-7-line-111" href="#sunlight-7-line-111">111</a>
<a name="sunlight-7-line-112" href="#sunlight-7-line-112">112</a>
<a name="sunlight-7-line-113" href="#sunlight-7-line-113">113</a>
<a name="sunlight-7-line-114" href="#sunlight-7-line-114">114</a>
<a name="sunlight-7-line-115" href="#sunlight-7-line-115">115</a>
<a name="sunlight-7-line-116" href="#sunlight-7-line-116">116</a>
<a name="sunlight-7-line-117" href="#sunlight-7-line-117">117</a>
<a name="sunlight-7-line-118" href="#sunlight-7-line-118">118</a>
<a name="sunlight-7-line-119" href="#sunlight-7-line-119">119</a>
<a name="sunlight-7-line-120" href="#sunlight-7-line-120">120</a>
<a name="sunlight-7-line-121" href="#sunlight-7-line-121">121</a>
<a name="sunlight-7-line-122" href="#sunlight-7-line-122">122</a>
</div><pre class="sunlight-highlight-cpp sunlight-highlighted"><span class="sunlight-cpp"><span class="sunlight-preprocessorDirective">#include&nbsp;&lt;iostream&gt;</span>
<span class="sunlight-keyword">using</span>&nbsp;<span class="sunlight-keyword">namespace</span>&nbsp;<span class="sunlight-ident">std</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">float</span>&nbsp;<span class="sunlight-ident">Perimeter</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">float</span>&nbsp;<span class="sunlight-ident">l</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">float</span>&nbsp;<span class="sunlight-ident">w</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">l</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">w</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">//http://hg.mozilla.org/tracemonkey/file/dc6ce44bedd4/chrome/src/nsChromeRegistry.cpp</span>
<span class="sunlight-keyword">void</span>
<span class="sunlight-named-ident">nsChromeRegistry</span><span class="sunlight-operator">::</span><span class="sunlight-ident">LogMessageWithContext</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">nsIURI</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">aURL</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-named-ident">PRUint32</span>&nbsp;<span class="sunlight-ident">aLineNumber</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-named-ident">PRUint32</span>&nbsp;<span class="sunlight-ident">flags</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-keyword">char</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">aMsg</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ellipsis">...</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;<span class="sunlight-named-ident">nsresult</span>&nbsp;<span class="sunlight-ident">rv</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-named-ident">nsCOMPtr</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">nsIConsoleService</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">console</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">do_GetService</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">NS_CONSOLESERVICE_CONTRACTID</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-named-ident">nsCOMPtr</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">nsIScriptError</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">error</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">do_CreateInstance</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">NS_SCRIPTERROR_CONTRACTID</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">console</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-operator">!</span><span class="sunlight-ident">error</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-named-ident">va_list</span>&nbsp;<span class="sunlight-ident">args</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-ident">va_start</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">args</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">aMsg</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">char</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">formatted</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">PR_vsmprintf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">aMsg</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">args</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-ident">va_end</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">args</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">formatted</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-named-ident">nsCString</span>&nbsp;<span class="sunlight-ident">spec</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">aURL</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">aURL</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">GetSpec</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">spec</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-ident">rv</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">error</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">Init</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">NS_ConvertUTF8toUTF16</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">formatted</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">get</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">NS_ConvertUTF8toUTF16</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">spec</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">get</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">nsnull</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">aLineNumber</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">flags</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-string">"chrome&nbsp;registration"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-ident">PR_smprintf_free</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">formatted</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NS_FAILED</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">rv</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-ident">console</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">LogMessage</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">error</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">regexStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">std</span><span class="sunlight-operator">::</span><span class="sunlight-named-ident">regex</span>&nbsp;<span class="sunlight-ident">phoneRegex</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">R</span><span class="sunlight-string">"(\d{3}-\d{4})"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">std</span><span class="sunlight-operator">::</span><span class="sunlight-named-ident">string</span>&nbsp;<span class="sunlight-ident">input</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"Jenny:&nbsp;867-5309"</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">auto</span>&nbsp;<span class="sunlight-ident">cur</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">input</span><span class="sunlight-operator">.</span><span class="sunlight-ident">begin</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">input</span><span class="sunlight-operator">.</span><span class="sunlight-ident">end</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">std</span><span class="sunlight-operator">::</span><span class="sunlight-named-ident">smatch</span>&nbsp;<span class="sunlight-ident">phoneMatch</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">std</span><span class="sunlight-operator">::</span><span class="sunlight-ident">regex_search</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cur</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">phoneMatch</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">phoneRegex</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">std</span><span class="sunlight-operator">::</span><span class="sunlight-ident">cout</span>&nbsp;<span class="sunlight-operator">&lt;&lt;</span>&nbsp;<span class="sunlight-string">"I&nbsp;got&nbsp;it:&nbsp;"</span>&nbsp;<span class="sunlight-operator">&lt;&lt;</span>&nbsp;<span class="sunlight-ident">phoneMatch</span><span class="sunlight-operator">.</span><span class="sunlight-ident">str</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&lt;&lt;</span>&nbsp;<span class="sunlight-named-ident">std</span><span class="sunlight-operator">::</span><span class="sunlight-ident">endl</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">cur</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">phoneMatch</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">second</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">IntList</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">IntList</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">AddToEnd</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">Print</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ostream</span>&nbsp;<span class="sunlight-operator">&amp;</span><span class="sunlight-ident">output</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">const</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">SIZE</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">10</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-operator">*</span><span class="sunlight-ident">Items</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">numItems</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">arraySize</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">CRectangle</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">width</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">height</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">area</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">lolPointer</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">myPointer</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">pointerCast</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">cast</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">lolPointer2</span><span class="sunlight-operator">**</span>&nbsp;<span class="sunlight-ident">anotherPointer</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">other</span>&nbsp;<span class="sunlight-ident">myPointer</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">regularCast</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">cast</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">padd</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ReferenceCast</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&amp;</span><span class="sunlight-ident">d</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">result</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">firstIdent1</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">secondIdent1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">result</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">firstIdent2</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">secondIdent2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">result</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">firstIdent3</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-ident">secondIdent3</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">result</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">firstIdent4</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-ident">secondIdent4</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">convert</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CSquare</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">CSquare</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">side</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">set_side</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">side</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">friend</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">CRectangle</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-named-ident">CRectangle</span><span class="sunlight-operator">::</span><span class="sunlight-ident">convert</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CSquare</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">width</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-operator">.</span><span class="sunlight-ident">side</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">height</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-operator">.</span><span class="sunlight-ident">side</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">template</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">typename</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-keyword">inline</span>&nbsp;<span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-keyword">const</span><span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-keyword">const</span><span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-keyword">const</span><span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;if&nbsp;a&nbsp;&lt;&nbsp;b&nbsp;then&nbsp;use&nbsp;b&nbsp;else&nbsp;use&nbsp;a</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">template</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">N</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">mysequence</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">N</span><span class="sunlight-operator">&gt;</span><span class="sunlight-operator">::</span><span class="sunlight-ident">setmember</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">x</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-named-ident">T</span>&nbsp;<span class="sunlight-ident">value</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">memblock</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">value</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">template</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-ident">MyTemplateClass</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">N</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-named-ident">T</span>&nbsp;<span class="sunlight-ident">mysequence</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">N</span><span class="sunlight-operator">&gt;</span><span class="sunlight-operator">::</span><span class="sunlight-ident">getmember</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">x</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">memblock</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

</span></pre></div></div>
<h2 id="csharp1.cs">csharp1.cs</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-8-line-1" href="#sunlight-8-line-1">1</a>
<a name="sunlight-8-line-2" href="#sunlight-8-line-2">2</a>
<a name="sunlight-8-line-3" href="#sunlight-8-line-3">3</a>
<a name="sunlight-8-line-4" href="#sunlight-8-line-4">4</a>
<a name="sunlight-8-line-5" href="#sunlight-8-line-5">5</a>
<a name="sunlight-8-line-6" href="#sunlight-8-line-6">6</a>
<a name="sunlight-8-line-7" href="#sunlight-8-line-7">7</a>
<a name="sunlight-8-line-8" href="#sunlight-8-line-8">8</a>
<a name="sunlight-8-line-9" href="#sunlight-8-line-9">9</a>
<a name="sunlight-8-line-10" href="#sunlight-8-line-10">10</a>
<a name="sunlight-8-line-11" href="#sunlight-8-line-11">11</a>
<a name="sunlight-8-line-12" href="#sunlight-8-line-12">12</a>
<a name="sunlight-8-line-13" href="#sunlight-8-line-13">13</a>
<a name="sunlight-8-line-14" href="#sunlight-8-line-14">14</a>
<a name="sunlight-8-line-15" href="#sunlight-8-line-15">15</a>
<a name="sunlight-8-line-16" href="#sunlight-8-line-16">16</a>
<a name="sunlight-8-line-17" href="#sunlight-8-line-17">17</a>
<a name="sunlight-8-line-18" href="#sunlight-8-line-18">18</a>
<a name="sunlight-8-line-19" href="#sunlight-8-line-19">19</a>
<a name="sunlight-8-line-20" href="#sunlight-8-line-20">20</a>
<a name="sunlight-8-line-21" href="#sunlight-8-line-21">21</a>
<a name="sunlight-8-line-22" href="#sunlight-8-line-22">22</a>
<a name="sunlight-8-line-23" href="#sunlight-8-line-23">23</a>
<a name="sunlight-8-line-24" href="#sunlight-8-line-24">24</a>
<a name="sunlight-8-line-25" href="#sunlight-8-line-25">25</a>
<a name="sunlight-8-line-26" href="#sunlight-8-line-26">26</a>
<a name="sunlight-8-line-27" href="#sunlight-8-line-27">27</a>
<a name="sunlight-8-line-28" href="#sunlight-8-line-28">28</a>
<a name="sunlight-8-line-29" href="#sunlight-8-line-29">29</a>
<a name="sunlight-8-line-30" href="#sunlight-8-line-30">30</a>
<a name="sunlight-8-line-31" href="#sunlight-8-line-31">31</a>
<a name="sunlight-8-line-32" href="#sunlight-8-line-32">32</a>
<a name="sunlight-8-line-33" href="#sunlight-8-line-33">33</a>
<a name="sunlight-8-line-34" href="#sunlight-8-line-34">34</a>
<a name="sunlight-8-line-35" href="#sunlight-8-line-35">35</a>
<a name="sunlight-8-line-36" href="#sunlight-8-line-36">36</a>
<a name="sunlight-8-line-37" href="#sunlight-8-line-37">37</a>
<a name="sunlight-8-line-38" href="#sunlight-8-line-38">38</a>
<a name="sunlight-8-line-39" href="#sunlight-8-line-39">39</a>
<a name="sunlight-8-line-40" href="#sunlight-8-line-40">40</a>
<a name="sunlight-8-line-41" href="#sunlight-8-line-41">41</a>
<a name="sunlight-8-line-42" href="#sunlight-8-line-42">42</a>
<a name="sunlight-8-line-43" href="#sunlight-8-line-43">43</a>
<a name="sunlight-8-line-44" href="#sunlight-8-line-44">44</a>
<a name="sunlight-8-line-45" href="#sunlight-8-line-45">45</a>
<a name="sunlight-8-line-46" href="#sunlight-8-line-46">46</a>
<a name="sunlight-8-line-47" href="#sunlight-8-line-47">47</a>
<a name="sunlight-8-line-48" href="#sunlight-8-line-48">48</a>
<a name="sunlight-8-line-49" href="#sunlight-8-line-49">49</a>
<a name="sunlight-8-line-50" href="#sunlight-8-line-50">50</a>
<a name="sunlight-8-line-51" href="#sunlight-8-line-51">51</a>
<a name="sunlight-8-line-52" href="#sunlight-8-line-52">52</a>
<a name="sunlight-8-line-53" href="#sunlight-8-line-53">53</a>
<a name="sunlight-8-line-54" href="#sunlight-8-line-54">54</a>
<a name="sunlight-8-line-55" href="#sunlight-8-line-55">55</a>
<a name="sunlight-8-line-56" href="#sunlight-8-line-56">56</a>
<a name="sunlight-8-line-57" href="#sunlight-8-line-57">57</a>
<a name="sunlight-8-line-58" href="#sunlight-8-line-58">58</a>
<a name="sunlight-8-line-59" href="#sunlight-8-line-59">59</a>
<a name="sunlight-8-line-60" href="#sunlight-8-line-60">60</a>
<a name="sunlight-8-line-61" href="#sunlight-8-line-61">61</a>
<a name="sunlight-8-line-62" href="#sunlight-8-line-62">62</a>
<a name="sunlight-8-line-63" href="#sunlight-8-line-63">63</a>
<a name="sunlight-8-line-64" href="#sunlight-8-line-64">64</a>
<a name="sunlight-8-line-65" href="#sunlight-8-line-65">65</a>
<a name="sunlight-8-line-66" href="#sunlight-8-line-66">66</a>
<a name="sunlight-8-line-67" href="#sunlight-8-line-67">67</a>
<a name="sunlight-8-line-68" href="#sunlight-8-line-68">68</a>
<a name="sunlight-8-line-69" href="#sunlight-8-line-69">69</a>
<a name="sunlight-8-line-70" href="#sunlight-8-line-70">70</a>
<a name="sunlight-8-line-71" href="#sunlight-8-line-71">71</a>
<a name="sunlight-8-line-72" href="#sunlight-8-line-72">72</a>
<a name="sunlight-8-line-73" href="#sunlight-8-line-73">73</a>
<a name="sunlight-8-line-74" href="#sunlight-8-line-74">74</a>
<a name="sunlight-8-line-75" href="#sunlight-8-line-75">75</a>
<a name="sunlight-8-line-76" href="#sunlight-8-line-76">76</a>
<a name="sunlight-8-line-77" href="#sunlight-8-line-77">77</a>
<a name="sunlight-8-line-78" href="#sunlight-8-line-78">78</a>
<a name="sunlight-8-line-79" href="#sunlight-8-line-79">79</a>
<a name="sunlight-8-line-80" href="#sunlight-8-line-80">80</a>
<a name="sunlight-8-line-81" href="#sunlight-8-line-81">81</a>
<a name="sunlight-8-line-82" href="#sunlight-8-line-82">82</a>
<a name="sunlight-8-line-83" href="#sunlight-8-line-83">83</a>
<a name="sunlight-8-line-84" href="#sunlight-8-line-84">84</a>
<a name="sunlight-8-line-85" href="#sunlight-8-line-85">85</a>
<a name="sunlight-8-line-86" href="#sunlight-8-line-86">86</a>
<a name="sunlight-8-line-87" href="#sunlight-8-line-87">87</a>
<a name="sunlight-8-line-88" href="#sunlight-8-line-88">88</a>
<a name="sunlight-8-line-89" href="#sunlight-8-line-89">89</a>
<a name="sunlight-8-line-90" href="#sunlight-8-line-90">90</a>
<a name="sunlight-8-line-91" href="#sunlight-8-line-91">91</a>
<a name="sunlight-8-line-92" href="#sunlight-8-line-92">92</a>
<a name="sunlight-8-line-93" href="#sunlight-8-line-93">93</a>
<a name="sunlight-8-line-94" href="#sunlight-8-line-94">94</a>
<a name="sunlight-8-line-95" href="#sunlight-8-line-95">95</a>
<a name="sunlight-8-line-96" href="#sunlight-8-line-96">96</a>
<a name="sunlight-8-line-97" href="#sunlight-8-line-97">97</a>
<a name="sunlight-8-line-98" href="#sunlight-8-line-98">98</a>
<a name="sunlight-8-line-99" href="#sunlight-8-line-99">99</a>
<a name="sunlight-8-line-100" href="#sunlight-8-line-100">100</a>
<a name="sunlight-8-line-101" href="#sunlight-8-line-101">101</a>
<a name="sunlight-8-line-102" href="#sunlight-8-line-102">102</a>
<a name="sunlight-8-line-103" href="#sunlight-8-line-103">103</a>
<a name="sunlight-8-line-104" href="#sunlight-8-line-104">104</a>
<a name="sunlight-8-line-105" href="#sunlight-8-line-105">105</a>
<a name="sunlight-8-line-106" href="#sunlight-8-line-106">106</a>
<a name="sunlight-8-line-107" href="#sunlight-8-line-107">107</a>
<a name="sunlight-8-line-108" href="#sunlight-8-line-108">108</a>
<a name="sunlight-8-line-109" href="#sunlight-8-line-109">109</a>
<a name="sunlight-8-line-110" href="#sunlight-8-line-110">110</a>
<a name="sunlight-8-line-111" href="#sunlight-8-line-111">111</a>
<a name="sunlight-8-line-112" href="#sunlight-8-line-112">112</a>
<a name="sunlight-8-line-113" href="#sunlight-8-line-113">113</a>
<a name="sunlight-8-line-114" href="#sunlight-8-line-114">114</a>
<a name="sunlight-8-line-115" href="#sunlight-8-line-115">115</a>
<a name="sunlight-8-line-116" href="#sunlight-8-line-116">116</a>
<a name="sunlight-8-line-117" href="#sunlight-8-line-117">117</a>
<a name="sunlight-8-line-118" href="#sunlight-8-line-118">118</a>
<a name="sunlight-8-line-119" href="#sunlight-8-line-119">119</a>
<a name="sunlight-8-line-120" href="#sunlight-8-line-120">120</a>
<a name="sunlight-8-line-121" href="#sunlight-8-line-121">121</a>
<a name="sunlight-8-line-122" href="#sunlight-8-line-122">122</a>
<a name="sunlight-8-line-123" href="#sunlight-8-line-123">123</a>
<a name="sunlight-8-line-124" href="#sunlight-8-line-124">124</a>
<a name="sunlight-8-line-125" href="#sunlight-8-line-125">125</a>
<a name="sunlight-8-line-126" href="#sunlight-8-line-126">126</a>
<a name="sunlight-8-line-127" href="#sunlight-8-line-127">127</a>
<a name="sunlight-8-line-128" href="#sunlight-8-line-128">128</a>
<a name="sunlight-8-line-129" href="#sunlight-8-line-129">129</a>
<a name="sunlight-8-line-130" href="#sunlight-8-line-130">130</a>
<a name="sunlight-8-line-131" href="#sunlight-8-line-131">131</a>
<a name="sunlight-8-line-132" href="#sunlight-8-line-132">132</a>
<a name="sunlight-8-line-133" href="#sunlight-8-line-133">133</a>
<a name="sunlight-8-line-134" href="#sunlight-8-line-134">134</a>
<a name="sunlight-8-line-135" href="#sunlight-8-line-135">135</a>
<a name="sunlight-8-line-136" href="#sunlight-8-line-136">136</a>
<a name="sunlight-8-line-137" href="#sunlight-8-line-137">137</a>
<a name="sunlight-8-line-138" href="#sunlight-8-line-138">138</a>
<a name="sunlight-8-line-139" href="#sunlight-8-line-139">139</a>
<a name="sunlight-8-line-140" href="#sunlight-8-line-140">140</a>
<a name="sunlight-8-line-141" href="#sunlight-8-line-141">141</a>
<a name="sunlight-8-line-142" href="#sunlight-8-line-142">142</a>
<a name="sunlight-8-line-143" href="#sunlight-8-line-143">143</a>
</div><pre class="sunlight-highlight-csharp sunlight-highlighted"><span class="sunlight-csharp"><span class="sunlight-keyword">extern&nbsp;alias</span>&nbsp;<span class="sunlight-ident">GridV1</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">using</span>&nbsp;<span class="sunlight-ident">System</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">using</span>&nbsp;<span class="sunlight-named-ident">UsingAlias</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">UsingThisClass</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">namespace</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Namespace</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">NotAnAttribute</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">FullyQualifiedAttribute</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">ValueHandlerFactoryBase</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">T2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">TClass1</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">MarshalByRefObject</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IValueHandlerFactory</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IAmAnInterface</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">TClass1Constraint</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">IAmATypeConstraint</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">T2</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T1</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Obsolete</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-named-ident">Skank</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-named-ident">Stripper</span>&nbsp;<span class="sunlight-ident">bar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">readonly</span>&nbsp;<span class="sunlight-named-ident">DirtyWhore</span>&nbsp;<span class="sunlight-ident">baz</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0xffffff</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-pragma">#if&nbsp;NET_20</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-named-ident">ArrayList</span>&nbsp;<span class="sunlight-ident">list</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ArrayList</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-pragma">#endif</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">AnAttribute</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">typeof</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Exception</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">Message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">internal</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">InternalClass</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TClass2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">out</span>&nbsp;<span class="sunlight-ident">TClass3</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">ICloneable</span>&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">TClass2Constraint</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">class</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IAfterClassConstraint</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ISecondConstraint</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">Iterate</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ICollection</span><span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">object</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">foos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">foos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">is</span>&nbsp;<span class="sunlight-ident">MyNamespace</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TypeAfterIs</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SomeMethod</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ref</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">out</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">chars</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-char">'c'</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-char">'\''</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-char">'\\'</span>&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-pragma">#region&nbsp;verify&nbsp;that&nbsp;casts&nbsp;are&nbsp;properly&nbsp;colored</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">partial</span>&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">Meh</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">AnotherArrayOfSomething</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">somethings</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">IDisposable</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-named-ident">ICloneable</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Dispose</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">)</span><span class="sunlight-keyword">this</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Dispose</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">lame</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">typeof</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">notACast</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">methodCall</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-pragma">#endregion</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;or&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;an&nbsp;integer
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;and&nbsp;such.&nbsp;This&nbsp;is&nbsp;a&nbsp;useful&nbsp;comment.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Object</span>&nbsp;<span class="sunlight-ident">PropertyAccessor</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">get</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">get</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Integer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">initialArrayLength</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Integer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">object</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">set</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">value</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">value</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-keyword">value</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-ident">DoSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">DoSomethingElse</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">value</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">set</span>&nbsp;<span class="sunlight-operator">??</span>&nbsp;<span class="sunlight-keyword">value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">string</span>&nbsp;<span class="sunlight-ident">AutomaticProperty</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">get</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">set</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-named-ident">Func</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Object</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">char</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">GetFunction</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Object</span>&nbsp;<span class="sunlight-ident">o</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Character</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Integer</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">integers</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">Object</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ReferenceEquals</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">o</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ArgumentException</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">value</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">char</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">value</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GetHashCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;Tests&nbsp;the&nbsp;coloring&nbsp;of&nbsp;generic&nbsp;method&nbsp;definitions&nbsp;and</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;and&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;c&nbsp;cref="Foo"&gt;</span><span class="sunlight-xmlDocCommentContent">generic&nbsp;parameters</span><span class="sunlight-xmlDocCommentMeta">&lt;/c&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;param&nbsp;name="foos"&gt;</span><span class="sunlight-xmlDocCommentContent">Collection&nbsp;of&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;see&nbsp;cref="Foo"&nbsp;/&gt;</span><span class="sunlight-xmlDocCommentMeta">&lt;/param&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">FirstAttribute</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Pure</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">typeof</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">OutOfThisWorld</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ThirdAttribute</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">OutOfThisWorld</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">AttributeNamedParameter</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Another</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Action</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">DoOtherStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IEnumerable</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Foo</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">fooEnumerable</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">string</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">strings</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Action</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Func</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">SecondGeneric</span><span class="sunlight-operator">&gt;&gt;</span>&nbsp;<span class="sunlight-ident">action</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-ident">disposable</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//neither&nbsp;foo&nbsp;below&nbsp;should&nbsp;be&nbsp;a&nbsp;named&nbsp;ident</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-named-ident">IEnumerable</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TReturnValue</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">GenericMethod</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TMethod</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">GenericCollection1</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TParameter</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">shouldNotBeNamed</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">GenericCollection2</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TGenericTest4</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">somethingElse</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">container</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GenericMethodInvocation</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">GenericMethodDefinition</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">options</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">OptionParser</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Parse</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Contract</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">args</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">expression</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ArrayAccess</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Name</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//ArrayAccess&nbsp;should&nbsp;not&nbsp;be&nbsp;a&nbsp;named&nbsp;ident</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//method&nbsp;without&nbsp;an&nbsp;access&nbsp;modifier:&nbsp;"Action"&nbsp;should&nbsp;be&nbsp;a&nbsp;named&nbsp;ident</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Action</span>&nbsp;<span class="sunlight-ident">DoStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Fully1</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Qualified1</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">FullyQualifiedClass1</span>&nbsp;<span class="sunlight-ident">fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">Fully2</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Qualified2</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">FullyQualifiedClass2</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">sealed</span>&nbsp;<span class="sunlight-ident">TNotNamed</span>&nbsp;<span class="sunlight-ident">NumbersTest</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ref</span>&nbsp;<span class="sunlight-named-ident">Foo</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">out</span>&nbsp;<span class="sunlight-named-ident">Bar</span>&nbsp;<span class="sunlight-ident">@class</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">params</span>&nbsp;<span class="sunlight-named-ident">ArrayOfSomething</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">somethings</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">event</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IFoo</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//let's&nbsp;test&nbsp;out&nbsp;numbers</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1.5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">float</span>&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1.7f</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1.2d</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">12</span>&nbsp;<span class="sunlight-operator">%</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">decimal</span>&nbsp;<span class="sunlight-ident">dec</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1.2d</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">hex</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0x1a</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//ooh!&nbsp;hex!</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">TAlsoNotNamed</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">virtual</span>&nbsp;<span class="sunlight-named-ident">IValueHandler</span>&nbsp;<span class="sunlight-ident">Create</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">string</span>&nbsp;<span class="sunlight-ident">resourceName</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">string</span>&nbsp;<span class="sunlight-ident">criterionFieldName</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//1)&nbsp;check&nbsp;for&nbsp;resource-specific&nbsp;value&nbsp;handler</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">VerifyStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">resourceName</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*&nbsp;multi
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;comment
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"this&nbsp;is&nbsp;\"a\"&nbsp;string"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">@"this&nbsp;is&nbsp;""another""
multi&nbsp;line
string"</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">switch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Foo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Bar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">2</span>&nbsp;<span class="sunlight-operator">|=</span>&nbsp;<span class="sunlight-ident">Foo</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">InvalidOperationException</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Format</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"fail"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-string">"bar"</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">Empty</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">yield&nbsp;return</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">TanningBooth</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2 id="csharp2.cs">csharp2.cs</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-csharp sunlight-highlighted"><span class="sunlight-csharp"><span class="sunlight-named-ident">UndefinedTokenFix</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Foo</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">undefinedTokenFix</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Foo</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
</span></pre></div></div>
<h2 id="csharp3.cs">csharp3.cs</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-10-line-1" href="#sunlight-10-line-1">1</a>
<a name="sunlight-10-line-2" href="#sunlight-10-line-2">2</a>
</div><pre class="sunlight-highlight-csharp sunlight-highlighted"><span class="sunlight-csharp"><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">FirstToken</span><span class="sunlight-punctuation">]</span>
<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Foo</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2 id="css.css">css.css</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-11-line-1" href="#sunlight-11-line-1">1</a>
<a name="sunlight-11-line-2" href="#sunlight-11-line-2">2</a>
<a name="sunlight-11-line-3" href="#sunlight-11-line-3">3</a>
<a name="sunlight-11-line-4" href="#sunlight-11-line-4">4</a>
<a name="sunlight-11-line-5" href="#sunlight-11-line-5">5</a>
<a name="sunlight-11-line-6" href="#sunlight-11-line-6">6</a>
<a name="sunlight-11-line-7" href="#sunlight-11-line-7">7</a>
<a name="sunlight-11-line-8" href="#sunlight-11-line-8">8</a>
<a name="sunlight-11-line-9" href="#sunlight-11-line-9">9</a>
<a name="sunlight-11-line-10" href="#sunlight-11-line-10">10</a>
<a name="sunlight-11-line-11" href="#sunlight-11-line-11">11</a>
<a name="sunlight-11-line-12" href="#sunlight-11-line-12">12</a>
<a name="sunlight-11-line-13" href="#sunlight-11-line-13">13</a>
<a name="sunlight-11-line-14" href="#sunlight-11-line-14">14</a>
<a name="sunlight-11-line-15" href="#sunlight-11-line-15">15</a>
<a name="sunlight-11-line-16" href="#sunlight-11-line-16">16</a>
<a name="sunlight-11-line-17" href="#sunlight-11-line-17">17</a>
<a name="sunlight-11-line-18" href="#sunlight-11-line-18">18</a>
<a name="sunlight-11-line-19" href="#sunlight-11-line-19">19</a>
<a name="sunlight-11-line-20" href="#sunlight-11-line-20">20</a>
<a name="sunlight-11-line-21" href="#sunlight-11-line-21">21</a>
<a name="sunlight-11-line-22" href="#sunlight-11-line-22">22</a>
<a name="sunlight-11-line-23" href="#sunlight-11-line-23">23</a>
<a name="sunlight-11-line-24" href="#sunlight-11-line-24">24</a>
<a name="sunlight-11-line-25" href="#sunlight-11-line-25">25</a>
<a name="sunlight-11-line-26" href="#sunlight-11-line-26">26</a>
<a name="sunlight-11-line-27" href="#sunlight-11-line-27">27</a>
<a name="sunlight-11-line-28" href="#sunlight-11-line-28">28</a>
<a name="sunlight-11-line-29" href="#sunlight-11-line-29">29</a>
<a name="sunlight-11-line-30" href="#sunlight-11-line-30">30</a>
<a name="sunlight-11-line-31" href="#sunlight-11-line-31">31</a>
<a name="sunlight-11-line-32" href="#sunlight-11-line-32">32</a>
<a name="sunlight-11-line-33" href="#sunlight-11-line-33">33</a>
<a name="sunlight-11-line-34" href="#sunlight-11-line-34">34</a>
<a name="sunlight-11-line-35" href="#sunlight-11-line-35">35</a>
<a name="sunlight-11-line-36" href="#sunlight-11-line-36">36</a>
<a name="sunlight-11-line-37" href="#sunlight-11-line-37">37</a>
<a name="sunlight-11-line-38" href="#sunlight-11-line-38">38</a>
<a name="sunlight-11-line-39" href="#sunlight-11-line-39">39</a>
<a name="sunlight-11-line-40" href="#sunlight-11-line-40">40</a>
<a name="sunlight-11-line-41" href="#sunlight-11-line-41">41</a>
<a name="sunlight-11-line-42" href="#sunlight-11-line-42">42</a>
<a name="sunlight-11-line-43" href="#sunlight-11-line-43">43</a>
<a name="sunlight-11-line-44" href="#sunlight-11-line-44">44</a>
<a name="sunlight-11-line-45" href="#sunlight-11-line-45">45</a>
<a name="sunlight-11-line-46" href="#sunlight-11-line-46">46</a>
<a name="sunlight-11-line-47" href="#sunlight-11-line-47">47</a>
<a name="sunlight-11-line-48" href="#sunlight-11-line-48">48</a>
<a name="sunlight-11-line-49" href="#sunlight-11-line-49">49</a>
<a name="sunlight-11-line-50" href="#sunlight-11-line-50">50</a>
<a name="sunlight-11-line-51" href="#sunlight-11-line-51">51</a>
<a name="sunlight-11-line-52" href="#sunlight-11-line-52">52</a>
<a name="sunlight-11-line-53" href="#sunlight-11-line-53">53</a>
<a name="sunlight-11-line-54" href="#sunlight-11-line-54">54</a>
<a name="sunlight-11-line-55" href="#sunlight-11-line-55">55</a>
<a name="sunlight-11-line-56" href="#sunlight-11-line-56">56</a>
<a name="sunlight-11-line-57" href="#sunlight-11-line-57">57</a>
<a name="sunlight-11-line-58" href="#sunlight-11-line-58">58</a>
<a name="sunlight-11-line-59" href="#sunlight-11-line-59">59</a>
<a name="sunlight-11-line-60" href="#sunlight-11-line-60">60</a>
<a name="sunlight-11-line-61" href="#sunlight-11-line-61">61</a>
<a name="sunlight-11-line-62" href="#sunlight-11-line-62">62</a>
<a name="sunlight-11-line-63" href="#sunlight-11-line-63">63</a>
<a name="sunlight-11-line-64" href="#sunlight-11-line-64">64</a>
<a name="sunlight-11-line-65" href="#sunlight-11-line-65">65</a>
</div><pre class="sunlight-highlight-css sunlight-highlighted"><span class="sunlight-css"><span class="sunlight-rule">@import</span>&nbsp;<span class="sunlight-string">"/my/style/sheet.css"</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-rule">@import</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">my</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">style</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">sheet</span><span class="sunlight-operator">.</span><span class="sunlight-ident">css</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">screen</span>&nbsp;<span class="sunlight-string">"Print&nbsp;style\"s"</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-element">html</span>&nbsp;<span class="sunlight-element">div</span><span class="sunlight-operator">.</span><span class="sunlight-class">myClass</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">width</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">100%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">min-height</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">100%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">opacity</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0.0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">transparent</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">no-repeat</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#000000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">white</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-family</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"Courier&nbsp;New"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">'Arialola\'s'</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">sans-serif</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-element">body</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">warning</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#FF0000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-image</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">warning</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">/*&nbsp;".png"&nbsp;should&nbsp;not&nbsp;be&nbsp;colored&nbsp;as&nbsp;a&nbsp;class&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">2px</span>&nbsp;<span class="sunlight-ident">solid</span>&nbsp;<span class="sunlight-ident">none</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-image</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">warning</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-radius</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">warning</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-top</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1px</span>&nbsp;<span class="sunlight-ident">dotted</span>&nbsp;<span class="sunlight-hexColor">#FFFFFF</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-top-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">magenta</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">filter</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-microsoftFilterPrefix">progid:DXImageTransform.Microsoft</span><span class="sunlight-operator">.</span><span class="sunlight-function">Alpha</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">opacity</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">50</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">filter</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">alpha</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">opacity</span><span class="sunlight-operator">=</span><span class="sunlight-number">50</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">opacity</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-id">#wrapper</span>&nbsp;<span class="sunlight-element">div</span><span class="sunlight-punctuation">[</span><span class="sunlight-element">lang</span><span class="sunlight-operator">~=</span><span class="sunlight-string">"en"</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">first-child</span><span class="sunlight-operator">::</span><span class="sunlight-pseudoElement">before</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">text-decoration</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">underline</span>&nbsp;<span class="sunlight-ident">overline</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">padding-left</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">12px</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">width</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">50%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">position</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">fixed</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">display</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">inline-block</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-element">a</span><span class="sunlight-operator">:</span><span class="sunlight-ident">fake-pseudo-class</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">transform</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">rotate</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">5deg</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-moz-background-inline-policy</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">-moz-initial</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-o-device-pixel-ratio</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">meh</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-webkit-background-origin</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">lolwut</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-ms-accelerator</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">snoo-snoo</span>&nbsp;<span class="sunlight-importantFlag">!important</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">zoom</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">/*&nbsp;IE&nbsp;crap&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">vertical-align</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">middle</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">/*&nbsp;new&nbsp;clearfix&nbsp;*/</span>
<span class="sunlight-operator">.</span><span class="sunlight-class">clearfix</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">after</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">visibility</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">hidden</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">display</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">block</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-size</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">content</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">clear</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">both</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">height</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>
<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-element">html</span>&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">clearfix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">zoom</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">/*&nbsp;IE6&nbsp;*/</span>
<span class="sunlight-operator">*</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">first-child</span><span class="sunlight-operator">+</span><span class="sunlight-element">shouldBeNamed</span>&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">shouldBeNamed</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">zoom</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">/*&nbsp;IE7&nbsp;*/</span>

<span class="sunlight-element">pseudotest1</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">before</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-element">pseudotest2</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">after</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*&nbsp;stuff&nbsp;goes&nbsp;here&nbsp;*/</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">/*&nbsp;do&nbsp;not&nbsp;mix&nbsp;up&nbsp;id&nbsp;selectors&nbsp;and&nbsp;hex&nbsp;color&nbsp;*/</span>
<span class="sunlight-id">#abc</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#12345678</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#def</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2 id="diff.diff">diff.diff</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-12-line-1" href="#sunlight-12-line-1">1</a>
<a name="sunlight-12-line-2" href="#sunlight-12-line-2">2</a>
<a name="sunlight-12-line-3" href="#sunlight-12-line-3">3</a>
<a name="sunlight-12-line-4" href="#sunlight-12-line-4">4</a>
<a name="sunlight-12-line-5" href="#sunlight-12-line-5">5</a>
<a name="sunlight-12-line-6" href="#sunlight-12-line-6">6</a>
<a name="sunlight-12-line-7" href="#sunlight-12-line-7">7</a>
<a name="sunlight-12-line-8" href="#sunlight-12-line-8">8</a>
<a name="sunlight-12-line-9" href="#sunlight-12-line-9">9</a>
<a name="sunlight-12-line-10" href="#sunlight-12-line-10">10</a>
<a name="sunlight-12-line-11" href="#sunlight-12-line-11">11</a>
<a name="sunlight-12-line-12" href="#sunlight-12-line-12">12</a>
<a name="sunlight-12-line-13" href="#sunlight-12-line-13">13</a>
<a name="sunlight-12-line-14" href="#sunlight-12-line-14">14</a>
<a name="sunlight-12-line-15" href="#sunlight-12-line-15">15</a>
<a name="sunlight-12-line-16" href="#sunlight-12-line-16">16</a>
<a name="sunlight-12-line-17" href="#sunlight-12-line-17">17</a>
<a name="sunlight-12-line-18" href="#sunlight-12-line-18">18</a>
<a name="sunlight-12-line-19" href="#sunlight-12-line-19">19</a>
<a name="sunlight-12-line-20" href="#sunlight-12-line-20">20</a>
<a name="sunlight-12-line-21" href="#sunlight-12-line-21">21</a>
<a name="sunlight-12-line-22" href="#sunlight-12-line-22">22</a>
<a name="sunlight-12-line-23" href="#sunlight-12-line-23">23</a>
<a name="sunlight-12-line-24" href="#sunlight-12-line-24">24</a>
<a name="sunlight-12-line-25" href="#sunlight-12-line-25">25</a>
<a name="sunlight-12-line-26" href="#sunlight-12-line-26">26</a>
<a name="sunlight-12-line-27" href="#sunlight-12-line-27">27</a>
<a name="sunlight-12-line-28" href="#sunlight-12-line-28">28</a>
<a name="sunlight-12-line-29" href="#sunlight-12-line-29">29</a>
<a name="sunlight-12-line-30" href="#sunlight-12-line-30">30</a>
<a name="sunlight-12-line-31" href="#sunlight-12-line-31">31</a>
<a name="sunlight-12-line-32" href="#sunlight-12-line-32">32</a>
<a name="sunlight-12-line-33" href="#sunlight-12-line-33">33</a>
<a name="sunlight-12-line-34" href="#sunlight-12-line-34">34</a>
<a name="sunlight-12-line-35" href="#sunlight-12-line-35">35</a>
<a name="sunlight-12-line-36" href="#sunlight-12-line-36">36</a>
<a name="sunlight-12-line-37" href="#sunlight-12-line-37">37</a>
<a name="sunlight-12-line-38" href="#sunlight-12-line-38">38</a>
<a name="sunlight-12-line-39" href="#sunlight-12-line-39">39</a>
<a name="sunlight-12-line-40" href="#sunlight-12-line-40">40</a>
<a name="sunlight-12-line-41" href="#sunlight-12-line-41">41</a>
<a name="sunlight-12-line-42" href="#sunlight-12-line-42">42</a>
<a name="sunlight-12-line-43" href="#sunlight-12-line-43">43</a>
<a name="sunlight-12-line-44" href="#sunlight-12-line-44">44</a>
<a name="sunlight-12-line-45" href="#sunlight-12-line-45">45</a>
<a name="sunlight-12-line-46" href="#sunlight-12-line-46">46</a>
<a name="sunlight-12-line-47" href="#sunlight-12-line-47">47</a>
<a name="sunlight-12-line-48" href="#sunlight-12-line-48">48</a>
<a name="sunlight-12-line-49" href="#sunlight-12-line-49">49</a>
<a name="sunlight-12-line-50" href="#sunlight-12-line-50">50</a>
<a name="sunlight-12-line-51" href="#sunlight-12-line-51">51</a>
<a name="sunlight-12-line-52" href="#sunlight-12-line-52">52</a>
<a name="sunlight-12-line-53" href="#sunlight-12-line-53">53</a>
<a name="sunlight-12-line-54" href="#sunlight-12-line-54">54</a>
<a name="sunlight-12-line-55" href="#sunlight-12-line-55">55</a>
<a name="sunlight-12-line-56" href="#sunlight-12-line-56">56</a>
<a name="sunlight-12-line-57" href="#sunlight-12-line-57">57</a>
<a name="sunlight-12-line-58" href="#sunlight-12-line-58">58</a>
<a name="sunlight-12-line-59" href="#sunlight-12-line-59">59</a>
<a name="sunlight-12-line-60" href="#sunlight-12-line-60">60</a>
<a name="sunlight-12-line-61" href="#sunlight-12-line-61">61</a>
<a name="sunlight-12-line-62" href="#sunlight-12-line-62">62</a>
<a name="sunlight-12-line-63" href="#sunlight-12-line-63">63</a>
<a name="sunlight-12-line-64" href="#sunlight-12-line-64">64</a>
<a name="sunlight-12-line-65" href="#sunlight-12-line-65">65</a>
<a name="sunlight-12-line-66" href="#sunlight-12-line-66">66</a>
<a name="sunlight-12-line-67" href="#sunlight-12-line-67">67</a>
<a name="sunlight-12-line-68" href="#sunlight-12-line-68">68</a>
<a name="sunlight-12-line-69" href="#sunlight-12-line-69">69</a>
<a name="sunlight-12-line-70" href="#sunlight-12-line-70">70</a>
<a name="sunlight-12-line-71" href="#sunlight-12-line-71">71</a>
<a name="sunlight-12-line-72" href="#sunlight-12-line-72">72</a>
<a name="sunlight-12-line-73" href="#sunlight-12-line-73">73</a>
<a name="sunlight-12-line-74" href="#sunlight-12-line-74">74</a>
<a name="sunlight-12-line-75" href="#sunlight-12-line-75">75</a>
<a name="sunlight-12-line-76" href="#sunlight-12-line-76">76</a>
<a name="sunlight-12-line-77" href="#sunlight-12-line-77">77</a>
<a name="sunlight-12-line-78" href="#sunlight-12-line-78">78</a>
<a name="sunlight-12-line-79" href="#sunlight-12-line-79">79</a>
<a name="sunlight-12-line-80" href="#sunlight-12-line-80">80</a>
<a name="sunlight-12-line-81" href="#sunlight-12-line-81">81</a>
<a name="sunlight-12-line-82" href="#sunlight-12-line-82">82</a>
<a name="sunlight-12-line-83" href="#sunlight-12-line-83">83</a>
<a name="sunlight-12-line-84" href="#sunlight-12-line-84">84</a>
<a name="sunlight-12-line-85" href="#sunlight-12-line-85">85</a>
<a name="sunlight-12-line-86" href="#sunlight-12-line-86">86</a>
<a name="sunlight-12-line-87" href="#sunlight-12-line-87">87</a>
<a name="sunlight-12-line-88" href="#sunlight-12-line-88">88</a>
<a name="sunlight-12-line-89" href="#sunlight-12-line-89">89</a>
<a name="sunlight-12-line-90" href="#sunlight-12-line-90">90</a>
<a name="sunlight-12-line-91" href="#sunlight-12-line-91">91</a>
<a name="sunlight-12-line-92" href="#sunlight-12-line-92">92</a>
<a name="sunlight-12-line-93" href="#sunlight-12-line-93">93</a>
<a name="sunlight-12-line-94" href="#sunlight-12-line-94">94</a>
<a name="sunlight-12-line-95" href="#sunlight-12-line-95">95</a>
<a name="sunlight-12-line-96" href="#sunlight-12-line-96">96</a>
<a name="sunlight-12-line-97" href="#sunlight-12-line-97">97</a>
<a name="sunlight-12-line-98" href="#sunlight-12-line-98">98</a>
</div><pre class="sunlight-highlight-diff sunlight-highlighted"><span class="sunlight-diff"><span class="sunlight-mergeHeader">Index:&nbsp;path/to/file.cpp</span>
<span class="sunlight-mergeHeader">===================================================================</span>

<span class="sunlight-header">---&nbsp;/path/to/original&nbsp;''timestamp''</span>
<span class="sunlight-header">+++&nbsp;/path/to/new&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;''timestamp''</span>
<span class="sunlight-rangeInfo">@@&nbsp;-1,3&nbsp;+1,9&nbsp;@@</span>
<span class="sunlight-added">+This&nbsp;is&nbsp;an&nbsp;important</span>
<span class="sunlight-added">+notice!&nbsp;It&nbsp;should</span>
<span class="sunlight-added">+therefore&nbsp;be&nbsp;located&nbsp;at</span>
<span class="sunlight-added">+the&nbsp;beginning&nbsp;of&nbsp;this</span>
<span class="sunlight-added">+document!</span>
<span class="sunlight-added">+</span>
<span class="sunlight-unchanged">&nbsp;This&nbsp;part&nbsp;of&nbsp;the</span>
<span class="sunlight-unchanged">&nbsp;document&nbsp;has&nbsp;stayed&nbsp;the</span>
<span class="sunlight-unchanged">&nbsp;same&nbsp;from&nbsp;version&nbsp;to</span>
<span class="sunlight-rangeInfo">@@&nbsp;-5,16&nbsp;+11,10&nbsp;@@</span>
<span class="sunlight-unchanged">&nbsp;be&nbsp;shown&nbsp;if&nbsp;it&nbsp;doesn't</span>
<span class="sunlight-unchanged">&nbsp;change.&nbsp;&nbsp;Otherwise,&nbsp;that</span>
<span class="sunlight-unchanged">&nbsp;would&nbsp;not&nbsp;be&nbsp;helping&nbsp;to</span>
<span class="sunlight-removed">-compress&nbsp;the&nbsp;size&nbsp;of&nbsp;the</span>
<span class="sunlight-removed">-changes.</span>
<span class="sunlight-removed">-</span>
<span class="sunlight-removed">-This&nbsp;paragraph&nbsp;contains</span>
<span class="sunlight-removed">-text&nbsp;that&nbsp;is&nbsp;outdated.</span>
<span class="sunlight-removed">-It&nbsp;will&nbsp;be&nbsp;deleted&nbsp;in&nbsp;the</span>
<span class="sunlight-removed">-near&nbsp;future.</span>
<span class="sunlight-added">+compress&nbsp;anything.</span>

<span class="sunlight-unchanged">&nbsp;It&nbsp;is&nbsp;important&nbsp;to&nbsp;spell</span>
<span class="sunlight-removed">-check&nbsp;this&nbsp;dokument.&nbsp;On</span>
<span class="sunlight-added">+check&nbsp;this&nbsp;document.&nbsp;On</span>
<span class="sunlight-unchanged">&nbsp;the&nbsp;other&nbsp;hand,&nbsp;a</span>
<span class="sunlight-unchanged">&nbsp;misspelled&nbsp;word&nbsp;isn't</span>
<span class="sunlight-unchanged">&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;world.</span>
<span class="sunlight-rangeInfo">@@&nbsp;-22,3&nbsp;+22,7&nbsp;@@</span>
<span class="sunlight-unchanged">&nbsp;this&nbsp;paragraph&nbsp;needs&nbsp;to</span>
<span class="sunlight-unchanged">&nbsp;be&nbsp;changed.&nbsp;Things&nbsp;can</span>
<span class="sunlight-unchanged">&nbsp;be&nbsp;added&nbsp;after&nbsp;it.</span>
<span class="sunlight-added">+</span>
<span class="sunlight-added">+This&nbsp;paragraph&nbsp;contains</span>
<span class="sunlight-added">+important&nbsp;new&nbsp;additions</span>
<span class="sunlight-added">+to&nbsp;this&nbsp;document.</span>

<span class="sunlight-header">***&nbsp;/path/to/original&nbsp;''timestamp''</span>
<span class="sunlight-header">---&nbsp;/path/to/new&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;''timestamp''</span>
<span class="sunlight-header">***************</span>
<span class="sunlight-header">***&nbsp;1,3&nbsp;****</span>
<span class="sunlight-header">---&nbsp;1,9&nbsp;----</span>
<span class="sunlight-added">+&nbsp;This&nbsp;is&nbsp;an&nbsp;important</span>
<span class="sunlight-added">+&nbsp;notice!&nbsp;It&nbsp;should</span>
<span class="sunlight-added">+&nbsp;therefore&nbsp;be&nbsp;located&nbsp;at</span>
<span class="sunlight-added">+&nbsp;the&nbsp;beginning&nbsp;of&nbsp;this</span>
<span class="sunlight-added">+&nbsp;document!</span>
<span class="sunlight-added">+</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;This&nbsp;part&nbsp;of&nbsp;the</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;document&nbsp;has&nbsp;stayed&nbsp;the</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;same&nbsp;from&nbsp;version&nbsp;to</span>
<span class="sunlight-header">***************</span>
<span class="sunlight-header">***&nbsp;5,20&nbsp;****</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;be&nbsp;shown&nbsp;if&nbsp;it&nbsp;doesn't</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;change.&nbsp;&nbsp;Otherwise,&nbsp;that</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;would&nbsp;not&nbsp;be&nbsp;helping&nbsp;to</span>
<span class="sunlight-modified">!&nbsp;compress&nbsp;the&nbsp;size&nbsp;of&nbsp;the</span>
<span class="sunlight-modified">!&nbsp;changes.</span>
<span class="sunlight-modified">!</span>
<span class="sunlight-modified">!&nbsp;This&nbsp;paragraph&nbsp;contains</span>
<span class="sunlight-modified">!&nbsp;text&nbsp;that&nbsp;is&nbsp;outdated.</span>
<span class="sunlight-modified">!&nbsp;It&nbsp;will&nbsp;be&nbsp;deleted&nbsp;in&nbsp;the</span>
<span class="sunlight-modified">!&nbsp;near&nbsp;future.</span>

<span class="sunlight-unchanged">&nbsp;&nbsp;It&nbsp;is&nbsp;important&nbsp;to&nbsp;spell</span>
<span class="sunlight-modified">!&nbsp;check&nbsp;this&nbsp;dokument.&nbsp;On</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;the&nbsp;other&nbsp;hand,&nbsp;a</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;misspelled&nbsp;word&nbsp;isn't</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;world.</span>
<span class="sunlight-header">---&nbsp;11,20&nbsp;----</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;be&nbsp;shown&nbsp;if&nbsp;it&nbsp;doesn't</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;change.&nbsp;&nbsp;Otherwise,&nbsp;that</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;would&nbsp;not&nbsp;be&nbsp;helping&nbsp;to</span>
<span class="sunlight-modified">!&nbsp;compress&nbsp;anything.</span>

<span class="sunlight-unchanged">&nbsp;&nbsp;It&nbsp;is&nbsp;important&nbsp;to&nbsp;spell</span>
<span class="sunlight-modified">!&nbsp;check&nbsp;this&nbsp;document.&nbsp;On</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;the&nbsp;other&nbsp;hand,&nbsp;a</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;misspelled&nbsp;word&nbsp;isn't</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;world.</span>
<span class="sunlight-header">***************</span>
<span class="sunlight-header">***&nbsp;22,24&nbsp;****</span>
<span class="sunlight-header">---&nbsp;22,28&nbsp;----</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;this&nbsp;paragraph&nbsp;needs&nbsp;to</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;be&nbsp;changed.&nbsp;Things&nbsp;can</span>
<span class="sunlight-unchanged">&nbsp;&nbsp;be&nbsp;added&nbsp;after&nbsp;it.</span>
<span class="sunlight-added">+</span>
<span class="sunlight-added">+&nbsp;This&nbsp;paragraph&nbsp;contains</span>
<span class="sunlight-added">+&nbsp;important&nbsp;new&nbsp;additions</span>
<span class="sunlight-added">+&nbsp;to&nbsp;this&nbsp;document.</span>

<span class="sunlight-noNewLine">\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file</span>
</span></pre></div></div>
<h2 id="erlang1.erl">erlang1.erl</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-erlang sunlight-highlighted"><span class="sunlight-erlang"><span class="sunlight-moduleAttribute">-module</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">talk2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-moduleAttribute">-compile</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">export_all</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">start</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">OtherNode</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">clean</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">io</span><span class="sunlight-operator">:</span><span class="sunlight-function">get_line</span><span class="sunlight-punctuation">(</span><span class="sunlight-quotedAtom">'What&nbsp;node?&nbsp;'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">FullNode</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">:</span><span class="sunlight-function">concat</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">OtherNode</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-string">"@localhost"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">io</span><span class="sunlight-operator">:</span><span class="sunlight-function">format</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"talking&nbsp;to:&nbsp;~s~n"</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">FullNode</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">register</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">receiver</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-function">spawn</span><span class="sunlight-punctuation">(</span><span class="sunlight-macro">?MODULE</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-named-ident">receiver</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">register</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">sender</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-function">spawn</span><span class="sunlight-punctuation">(</span><span class="sunlight-macro">?MODULE</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-named-ident">sender</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-function">list_to_atom</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">FullNode</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">get_input</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">get_input</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">clean</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">io</span><span class="sunlight-operator">:</span><span class="sunlight-function">get_line</span><span class="sunlight-punctuation">(</span><span class="sunlight-quotedAtom">'Talk:&nbsp;'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">:</span><span class="sunlight-function">equal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"exit!"</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">Message</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">of</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">true</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">receiver</span>&nbsp;<span class="sunlight-operator">!</span>&nbsp;<span class="sunlight-ident">done</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">sender</span>&nbsp;<span class="sunlight-operator">!</span>&nbsp;<span class="sunlight-ident">done</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">false</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">talk</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Message</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">get_input</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">talk</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Message</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">sender</span>&nbsp;<span class="sunlight-operator">!</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">send</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">Message</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">sender</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">OtherNode</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">receive</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">send</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">Message</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">rpc</span><span class="sunlight-operator">:</span><span class="sunlight-function">call</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">OtherNode</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">talk2</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-named-ident">send_message</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">Message</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">sender</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">OtherNode</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">done</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">void</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">send_message</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Message</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">receiver</span>&nbsp;<span class="sunlight-operator">!</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">message</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">Message</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">receiver</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">receive</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">message</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">Message</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">io</span><span class="sunlight-operator">:</span><span class="sunlight-function">format</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"~s~n"</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">Message</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">receiver</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">done</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">void</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span><span class="sunlight-punctuation">.</span>
<span class="sunlight-userDefinedFunction">clean</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Data</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">:</span><span class="sunlight-function">strip</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Data</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">both</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-char">$\n</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span>
</span></pre></div></div>
<h2 id="erlang2.erl">erlang2.erl</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-14-line-1" href="#sunlight-14-line-1">1</a>
<a name="sunlight-14-line-2" href="#sunlight-14-line-2">2</a>
<a name="sunlight-14-line-3" href="#sunlight-14-line-3">3</a>
<a name="sunlight-14-line-4" href="#sunlight-14-line-4">4</a>
<a name="sunlight-14-line-5" href="#sunlight-14-line-5">5</a>
<a name="sunlight-14-line-6" href="#sunlight-14-line-6">6</a>
<a name="sunlight-14-line-7" href="#sunlight-14-line-7">7</a>
<a name="sunlight-14-line-8" href="#sunlight-14-line-8">8</a>
<a name="sunlight-14-line-9" href="#sunlight-14-line-9">9</a>
<a name="sunlight-14-line-10" href="#sunlight-14-line-10">10</a>
<a name="sunlight-14-line-11" href="#sunlight-14-line-11">11</a>
<a name="sunlight-14-line-12" href="#sunlight-14-line-12">12</a>
<a name="sunlight-14-line-13" href="#sunlight-14-line-13">13</a>
<a name="sunlight-14-line-14" href="#sunlight-14-line-14">14</a>
<a name="sunlight-14-line-15" href="#sunlight-14-line-15">15</a>
<a name="sunlight-14-line-16" href="#sunlight-14-line-16">16</a>
<a name="sunlight-14-line-17" href="#sunlight-14-line-17">17</a>
<a name="sunlight-14-line-18" href="#sunlight-14-line-18">18</a>
<a name="sunlight-14-line-19" href="#sunlight-14-line-19">19</a>
<a name="sunlight-14-line-20" href="#sunlight-14-line-20">20</a>
<a name="sunlight-14-line-21" href="#sunlight-14-line-21">21</a>
<a name="sunlight-14-line-22" href="#sunlight-14-line-22">22</a>
<a name="sunlight-14-line-23" href="#sunlight-14-line-23">23</a>
<a name="sunlight-14-line-24" href="#sunlight-14-line-24">24</a>
<a name="sunlight-14-line-25" href="#sunlight-14-line-25">25</a>
<a name="sunlight-14-line-26" href="#sunlight-14-line-26">26</a>
<a name="sunlight-14-line-27" href="#sunlight-14-line-27">27</a>
<a name="sunlight-14-line-28" href="#sunlight-14-line-28">28</a>
<a name="sunlight-14-line-29" href="#sunlight-14-line-29">29</a>
<a name="sunlight-14-line-30" href="#sunlight-14-line-30">30</a>
<a name="sunlight-14-line-31" href="#sunlight-14-line-31">31</a>
<a name="sunlight-14-line-32" href="#sunlight-14-line-32">32</a>
<a name="sunlight-14-line-33" href="#sunlight-14-line-33">33</a>
<a name="sunlight-14-line-34" href="#sunlight-14-line-34">34</a>
</div><pre class="sunlight-highlight-erlang sunlight-highlighted"><span class="sunlight-erlang"><span class="sunlight-ident">var</span>&nbsp;<span class="sunlight-ident">parser</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">new</span>&nbsp;<span class="sunlight-ident">Butterfly</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">Parser</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">loadDefaultStrategies</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">timeout</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">current</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-char">$</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"#markup"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">keydown</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">timeout</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">clearTimeout</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">timeout</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">timeout</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">null</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">timeout</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">setTimeout</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">render</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-number">200</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-ident">function</span>&nbsp;<span class="sunlight-function">render</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">var</span>&nbsp;<span class="sunlight-ident">text</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-char">$</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"#markup"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">val</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">text</span>&nbsp;<span class="sunlight-operator">==</span><span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">current</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">current</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">text</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">var</span>&nbsp;<span class="sunlight-char">$html</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-char">$</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"#html"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">removeClass</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"error"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">empty</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">var</span>&nbsp;<span class="sunlight-ident">startTime</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">new</span>&nbsp;<span class="sunlight-function">Date</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">getTime</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">var</span>&nbsp;<span class="sunlight-ident">html</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">parser</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">parseAndReturn</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">text</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-char">$html</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">html</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">html</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-function">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-char">$html</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">addClass</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"error"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">html</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"&lt;p/&gt;"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">text</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">parser</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">analyzer</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-char">$</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"#elapsed-time"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">empty</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">text</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">new</span>&nbsp;<span class="sunlight-function">Date</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">getTime</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">startTime</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"ms"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Sunlight</span><span class="sunlight-punctuation">.</span><span class="sunlight-function">highlightAll</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-function">render</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
</span></pre></div></div>
<h2 id="haskell.hs">haskell.hs</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-15-line-1" href="#sunlight-15-line-1">1</a>
<a name="sunlight-15-line-2" href="#sunlight-15-line-2">2</a>
<a name="sunlight-15-line-3" href="#sunlight-15-line-3">3</a>
<a name="sunlight-15-line-4" href="#sunlight-15-line-4">4</a>
<a name="sunlight-15-line-5" href="#sunlight-15-line-5">5</a>
<a name="sunlight-15-line-6" href="#sunlight-15-line-6">6</a>
<a name="sunlight-15-line-7" href="#sunlight-15-line-7">7</a>
<a name="sunlight-15-line-8" href="#sunlight-15-line-8">8</a>
<a name="sunlight-15-line-9" href="#sunlight-15-line-9">9</a>
<a name="sunlight-15-line-10" href="#sunlight-15-line-10">10</a>
<a name="sunlight-15-line-11" href="#sunlight-15-line-11">11</a>
<a name="sunlight-15-line-12" href="#sunlight-15-line-12">12</a>
<a name="sunlight-15-line-13" href="#sunlight-15-line-13">13</a>
<a name="sunlight-15-line-14" href="#sunlight-15-line-14">14</a>
<a name="sunlight-15-line-15" href="#sunlight-15-line-15">15</a>
<a name="sunlight-15-line-16" href="#sunlight-15-line-16">16</a>
<a name="sunlight-15-line-17" href="#sunlight-15-line-17">17</a>
<a name="sunlight-15-line-18" href="#sunlight-15-line-18">18</a>
<a name="sunlight-15-line-19" href="#sunlight-15-line-19">19</a>
<a name="sunlight-15-line-20" href="#sunlight-15-line-20">20</a>
<a name="sunlight-15-line-21" href="#sunlight-15-line-21">21</a>
<a name="sunlight-15-line-22" href="#sunlight-15-line-22">22</a>
<a name="sunlight-15-line-23" href="#sunlight-15-line-23">23</a>
<a name="sunlight-15-line-24" href="#sunlight-15-line-24">24</a>
<a name="sunlight-15-line-25" href="#sunlight-15-line-25">25</a>
<a name="sunlight-15-line-26" href="#sunlight-15-line-26">26</a>
<a name="sunlight-15-line-27" href="#sunlight-15-line-27">27</a>
<a name="sunlight-15-line-28" href="#sunlight-15-line-28">28</a>
<a name="sunlight-15-line-29" href="#sunlight-15-line-29">29</a>
<a name="sunlight-15-line-30" href="#sunlight-15-line-30">30</a>
<a name="sunlight-15-line-31" href="#sunlight-15-line-31">31</a>
<a name="sunlight-15-line-32" href="#sunlight-15-line-32">32</a>
<a name="sunlight-15-line-33" href="#sunlight-15-line-33">33</a>
<a name="sunlight-15-line-34" href="#sunlight-15-line-34">34</a>
<a name="sunlight-15-line-35" href="#sunlight-15-line-35">35</a>
<a name="sunlight-15-line-36" href="#sunlight-15-line-36">36</a>
<a name="sunlight-15-line-37" href="#sunlight-15-line-37">37</a>
<a name="sunlight-15-line-38" href="#sunlight-15-line-38">38</a>
<a name="sunlight-15-line-39" href="#sunlight-15-line-39">39</a>
<a name="sunlight-15-line-40" href="#sunlight-15-line-40">40</a>
<a name="sunlight-15-line-41" href="#sunlight-15-line-41">41</a>
<a name="sunlight-15-line-42" href="#sunlight-15-line-42">42</a>
<a name="sunlight-15-line-43" href="#sunlight-15-line-43">43</a>
<a name="sunlight-15-line-44" href="#sunlight-15-line-44">44</a>
<a name="sunlight-15-line-45" href="#sunlight-15-line-45">45</a>
<a name="sunlight-15-line-46" href="#sunlight-15-line-46">46</a>
<a name="sunlight-15-line-47" href="#sunlight-15-line-47">47</a>
<a name="sunlight-15-line-48" href="#sunlight-15-line-48">48</a>
<a name="sunlight-15-line-49" href="#sunlight-15-line-49">49</a>
<a name="sunlight-15-line-50" href="#sunlight-15-line-50">50</a>
<a name="sunlight-15-line-51" href="#sunlight-15-line-51">51</a>
<a name="sunlight-15-line-52" href="#sunlight-15-line-52">52</a>
<a name="sunlight-15-line-53" href="#sunlight-15-line-53">53</a>
<a name="sunlight-15-line-54" href="#sunlight-15-line-54">54</a>
<a name="sunlight-15-line-55" href="#sunlight-15-line-55">55</a>
<a name="sunlight-15-line-56" href="#sunlight-15-line-56">56</a>
<a name="sunlight-15-line-57" href="#sunlight-15-line-57">57</a>
<a name="sunlight-15-line-58" href="#sunlight-15-line-58">58</a>
<a name="sunlight-15-line-59" href="#sunlight-15-line-59">59</a>
<a name="sunlight-15-line-60" href="#sunlight-15-line-60">60</a>
<a name="sunlight-15-line-61" href="#sunlight-15-line-61">61</a>
<a name="sunlight-15-line-62" href="#sunlight-15-line-62">62</a>
<a name="sunlight-15-line-63" href="#sunlight-15-line-63">63</a>
<a name="sunlight-15-line-64" href="#sunlight-15-line-64">64</a>
<a name="sunlight-15-line-65" href="#sunlight-15-line-65">65</a>
<a name="sunlight-15-line-66" href="#sunlight-15-line-66">66</a>
<a name="sunlight-15-line-67" href="#sunlight-15-line-67">67</a>
<a name="sunlight-15-line-68" href="#sunlight-15-line-68">68</a>
<a name="sunlight-15-line-69" href="#sunlight-15-line-69">69</a>
<a name="sunlight-15-line-70" href="#sunlight-15-line-70">70</a>
<a name="sunlight-15-line-71" href="#sunlight-15-line-71">71</a>
<a name="sunlight-15-line-72" href="#sunlight-15-line-72">72</a>
<a name="sunlight-15-line-73" href="#sunlight-15-line-73">73</a>
<a name="sunlight-15-line-74" href="#sunlight-15-line-74">74</a>
<a name="sunlight-15-line-75" href="#sunlight-15-line-75">75</a>
<a name="sunlight-15-line-76" href="#sunlight-15-line-76">76</a>
<a name="sunlight-15-line-77" href="#sunlight-15-line-77">77</a>
<a name="sunlight-15-line-78" href="#sunlight-15-line-78">78</a>
<a name="sunlight-15-line-79" href="#sunlight-15-line-79">79</a>
<a name="sunlight-15-line-80" href="#sunlight-15-line-80">80</a>
<a name="sunlight-15-line-81" href="#sunlight-15-line-81">81</a>
<a name="sunlight-15-line-82" href="#sunlight-15-line-82">82</a>
<a name="sunlight-15-line-83" href="#sunlight-15-line-83">83</a>
<a name="sunlight-15-line-84" href="#sunlight-15-line-84">84</a>
<a name="sunlight-15-line-85" href="#sunlight-15-line-85">85</a>
<a name="sunlight-15-line-86" href="#sunlight-15-line-86">86</a>
<a name="sunlight-15-line-87" href="#sunlight-15-line-87">87</a>
<a name="sunlight-15-line-88" href="#sunlight-15-line-88">88</a>
<a name="sunlight-15-line-89" href="#sunlight-15-line-89">89</a>
<a name="sunlight-15-line-90" href="#sunlight-15-line-90">90</a>
<a name="sunlight-15-line-91" href="#sunlight-15-line-91">91</a>
<a name="sunlight-15-line-92" href="#sunlight-15-line-92">92</a>
<a name="sunlight-15-line-93" href="#sunlight-15-line-93">93</a>
<a name="sunlight-15-line-94" href="#sunlight-15-line-94">94</a>
<a name="sunlight-15-line-95" href="#sunlight-15-line-95">95</a>
<a name="sunlight-15-line-96" href="#sunlight-15-line-96">96</a>
<a name="sunlight-15-line-97" href="#sunlight-15-line-97">97</a>
<a name="sunlight-15-line-98" href="#sunlight-15-line-98">98</a>
<a name="sunlight-15-line-99" href="#sunlight-15-line-99">99</a>
<a name="sunlight-15-line-100" href="#sunlight-15-line-100">100</a>
<a name="sunlight-15-line-101" href="#sunlight-15-line-101">101</a>
<a name="sunlight-15-line-102" href="#sunlight-15-line-102">102</a>
<a name="sunlight-15-line-103" href="#sunlight-15-line-103">103</a>
<a name="sunlight-15-line-104" href="#sunlight-15-line-104">104</a>
<a name="sunlight-15-line-105" href="#sunlight-15-line-105">105</a>
<a name="sunlight-15-line-106" href="#sunlight-15-line-106">106</a>
<a name="sunlight-15-line-107" href="#sunlight-15-line-107">107</a>
<a name="sunlight-15-line-108" href="#sunlight-15-line-108">108</a>
<a name="sunlight-15-line-109" href="#sunlight-15-line-109">109</a>
<a name="sunlight-15-line-110" href="#sunlight-15-line-110">110</a>
<a name="sunlight-15-line-111" href="#sunlight-15-line-111">111</a>
<a name="sunlight-15-line-112" href="#sunlight-15-line-112">112</a>
<a name="sunlight-15-line-113" href="#sunlight-15-line-113">113</a>
<a name="sunlight-15-line-114" href="#sunlight-15-line-114">114</a>
<a name="sunlight-15-line-115" href="#sunlight-15-line-115">115</a>
<a name="sunlight-15-line-116" href="#sunlight-15-line-116">116</a>
<a name="sunlight-15-line-117" href="#sunlight-15-line-117">117</a>
<a name="sunlight-15-line-118" href="#sunlight-15-line-118">118</a>
<a name="sunlight-15-line-119" href="#sunlight-15-line-119">119</a>
<a name="sunlight-15-line-120" href="#sunlight-15-line-120">120</a>
<a name="sunlight-15-line-121" href="#sunlight-15-line-121">121</a>
<a name="sunlight-15-line-122" href="#sunlight-15-line-122">122</a>
<a name="sunlight-15-line-123" href="#sunlight-15-line-123">123</a>
<a name="sunlight-15-line-124" href="#sunlight-15-line-124">124</a>
<a name="sunlight-15-line-125" href="#sunlight-15-line-125">125</a>
<a name="sunlight-15-line-126" href="#sunlight-15-line-126">126</a>
<a name="sunlight-15-line-127" href="#sunlight-15-line-127">127</a>
<a name="sunlight-15-line-128" href="#sunlight-15-line-128">128</a>
<a name="sunlight-15-line-129" href="#sunlight-15-line-129">129</a>
<a name="sunlight-15-line-130" href="#sunlight-15-line-130">130</a>
<a name="sunlight-15-line-131" href="#sunlight-15-line-131">131</a>
<a name="sunlight-15-line-132" href="#sunlight-15-line-132">132</a>
<a name="sunlight-15-line-133" href="#sunlight-15-line-133">133</a>
<a name="sunlight-15-line-134" href="#sunlight-15-line-134">134</a>
<a name="sunlight-15-line-135" href="#sunlight-15-line-135">135</a>
<a name="sunlight-15-line-136" href="#sunlight-15-line-136">136</a>
<a name="sunlight-15-line-137" href="#sunlight-15-line-137">137</a>
<a name="sunlight-15-line-138" href="#sunlight-15-line-138">138</a>
<a name="sunlight-15-line-139" href="#sunlight-15-line-139">139</a>
<a name="sunlight-15-line-140" href="#sunlight-15-line-140">140</a>
<a name="sunlight-15-line-141" href="#sunlight-15-line-141">141</a>
<a name="sunlight-15-line-142" href="#sunlight-15-line-142">142</a>
<a name="sunlight-15-line-143" href="#sunlight-15-line-143">143</a>
<a name="sunlight-15-line-144" href="#sunlight-15-line-144">144</a>
<a name="sunlight-15-line-145" href="#sunlight-15-line-145">145</a>
<a name="sunlight-15-line-146" href="#sunlight-15-line-146">146</a>
<a name="sunlight-15-line-147" href="#sunlight-15-line-147">147</a>
<a name="sunlight-15-line-148" href="#sunlight-15-line-148">148</a>
<a name="sunlight-15-line-149" href="#sunlight-15-line-149">149</a>
<a name="sunlight-15-line-150" href="#sunlight-15-line-150">150</a>
<a name="sunlight-15-line-151" href="#sunlight-15-line-151">151</a>
<a name="sunlight-15-line-152" href="#sunlight-15-line-152">152</a>
<a name="sunlight-15-line-153" href="#sunlight-15-line-153">153</a>
<a name="sunlight-15-line-154" href="#sunlight-15-line-154">154</a>
<a name="sunlight-15-line-155" href="#sunlight-15-line-155">155</a>
<a name="sunlight-15-line-156" href="#sunlight-15-line-156">156</a>
<a name="sunlight-15-line-157" href="#sunlight-15-line-157">157</a>
<a name="sunlight-15-line-158" href="#sunlight-15-line-158">158</a>
<a name="sunlight-15-line-159" href="#sunlight-15-line-159">159</a>
<a name="sunlight-15-line-160" href="#sunlight-15-line-160">160</a>
<a name="sunlight-15-line-161" href="#sunlight-15-line-161">161</a>
<a name="sunlight-15-line-162" href="#sunlight-15-line-162">162</a>
<a name="sunlight-15-line-163" href="#sunlight-15-line-163">163</a>
<a name="sunlight-15-line-164" href="#sunlight-15-line-164">164</a>
<a name="sunlight-15-line-165" href="#sunlight-15-line-165">165</a>
<a name="sunlight-15-line-166" href="#sunlight-15-line-166">166</a>
<a name="sunlight-15-line-167" href="#sunlight-15-line-167">167</a>
<a name="sunlight-15-line-168" href="#sunlight-15-line-168">168</a>
<a name="sunlight-15-line-169" href="#sunlight-15-line-169">169</a>
<a name="sunlight-15-line-170" href="#sunlight-15-line-170">170</a>
<a name="sunlight-15-line-171" href="#sunlight-15-line-171">171</a>
<a name="sunlight-15-line-172" href="#sunlight-15-line-172">172</a>
<a name="sunlight-15-line-173" href="#sunlight-15-line-173">173</a>
<a name="sunlight-15-line-174" href="#sunlight-15-line-174">174</a>
<a name="sunlight-15-line-175" href="#sunlight-15-line-175">175</a>
<a name="sunlight-15-line-176" href="#sunlight-15-line-176">176</a>
<a name="sunlight-15-line-177" href="#sunlight-15-line-177">177</a>
<a name="sunlight-15-line-178" href="#sunlight-15-line-178">178</a>
<a name="sunlight-15-line-179" href="#sunlight-15-line-179">179</a>
<a name="sunlight-15-line-180" href="#sunlight-15-line-180">180</a>
<a name="sunlight-15-line-181" href="#sunlight-15-line-181">181</a>
<a name="sunlight-15-line-182" href="#sunlight-15-line-182">182</a>
<a name="sunlight-15-line-183" href="#sunlight-15-line-183">183</a>
<a name="sunlight-15-line-184" href="#sunlight-15-line-184">184</a>
<a name="sunlight-15-line-185" href="#sunlight-15-line-185">185</a>
<a name="sunlight-15-line-186" href="#sunlight-15-line-186">186</a>
<a name="sunlight-15-line-187" href="#sunlight-15-line-187">187</a>
<a name="sunlight-15-line-188" href="#sunlight-15-line-188">188</a>
<a name="sunlight-15-line-189" href="#sunlight-15-line-189">189</a>
<a name="sunlight-15-line-190" href="#sunlight-15-line-190">190</a>
<a name="sunlight-15-line-191" href="#sunlight-15-line-191">191</a>
<a name="sunlight-15-line-192" href="#sunlight-15-line-192">192</a>
<a name="sunlight-15-line-193" href="#sunlight-15-line-193">193</a>
<a name="sunlight-15-line-194" href="#sunlight-15-line-194">194</a>
<a name="sunlight-15-line-195" href="#sunlight-15-line-195">195</a>
<a name="sunlight-15-line-196" href="#sunlight-15-line-196">196</a>
<a name="sunlight-15-line-197" href="#sunlight-15-line-197">197</a>
<a name="sunlight-15-line-198" href="#sunlight-15-line-198">198</a>
<a name="sunlight-15-line-199" href="#sunlight-15-line-199">199</a>
<a name="sunlight-15-line-200" href="#sunlight-15-line-200">200</a>
<a name="sunlight-15-line-201" href="#sunlight-15-line-201">201</a>
<a name="sunlight-15-line-202" href="#sunlight-15-line-202">202</a>
<a name="sunlight-15-line-203" href="#sunlight-15-line-203">203</a>
<a name="sunlight-15-line-204" href="#sunlight-15-line-204">204</a>
<a name="sunlight-15-line-205" href="#sunlight-15-line-205">205</a>
<a name="sunlight-15-line-206" href="#sunlight-15-line-206">206</a>
<a name="sunlight-15-line-207" href="#sunlight-15-line-207">207</a>
<a name="sunlight-15-line-208" href="#sunlight-15-line-208">208</a>
<a name="sunlight-15-line-209" href="#sunlight-15-line-209">209</a>
<a name="sunlight-15-line-210" href="#sunlight-15-line-210">210</a>
<a name="sunlight-15-line-211" href="#sunlight-15-line-211">211</a>
<a name="sunlight-15-line-212" href="#sunlight-15-line-212">212</a>
<a name="sunlight-15-line-213" href="#sunlight-15-line-213">213</a>
<a name="sunlight-15-line-214" href="#sunlight-15-line-214">214</a>
<a name="sunlight-15-line-215" href="#sunlight-15-line-215">215</a>
<a name="sunlight-15-line-216" href="#sunlight-15-line-216">216</a>
<a name="sunlight-15-line-217" href="#sunlight-15-line-217">217</a>
<a name="sunlight-15-line-218" href="#sunlight-15-line-218">218</a>
<a name="sunlight-15-line-219" href="#sunlight-15-line-219">219</a>
<a name="sunlight-15-line-220" href="#sunlight-15-line-220">220</a>
<a name="sunlight-15-line-221" href="#sunlight-15-line-221">221</a>
<a name="sunlight-15-line-222" href="#sunlight-15-line-222">222</a>
<a name="sunlight-15-line-223" href="#sunlight-15-line-223">223</a>
<a name="sunlight-15-line-224" href="#sunlight-15-line-224">224</a>
<a name="sunlight-15-line-225" href="#sunlight-15-line-225">225</a>
<a name="sunlight-15-line-226" href="#sunlight-15-line-226">226</a>
<a name="sunlight-15-line-227" href="#sunlight-15-line-227">227</a>
<a name="sunlight-15-line-228" href="#sunlight-15-line-228">228</a>
<a name="sunlight-15-line-229" href="#sunlight-15-line-229">229</a>
<a name="sunlight-15-line-230" href="#sunlight-15-line-230">230</a>
<a name="sunlight-15-line-231" href="#sunlight-15-line-231">231</a>
<a name="sunlight-15-line-232" href="#sunlight-15-line-232">232</a>
<a name="sunlight-15-line-233" href="#sunlight-15-line-233">233</a>
<a name="sunlight-15-line-234" href="#sunlight-15-line-234">234</a>
<a name="sunlight-15-line-235" href="#sunlight-15-line-235">235</a>
<a name="sunlight-15-line-236" href="#sunlight-15-line-236">236</a>
<a name="sunlight-15-line-237" href="#sunlight-15-line-237">237</a>
<a name="sunlight-15-line-238" href="#sunlight-15-line-238">238</a>
<a name="sunlight-15-line-239" href="#sunlight-15-line-239">239</a>
<a name="sunlight-15-line-240" href="#sunlight-15-line-240">240</a>
<a name="sunlight-15-line-241" href="#sunlight-15-line-241">241</a>
<a name="sunlight-15-line-242" href="#sunlight-15-line-242">242</a>
<a name="sunlight-15-line-243" href="#sunlight-15-line-243">243</a>
<a name="sunlight-15-line-244" href="#sunlight-15-line-244">244</a>
<a name="sunlight-15-line-245" href="#sunlight-15-line-245">245</a>
<a name="sunlight-15-line-246" href="#sunlight-15-line-246">246</a>
<a name="sunlight-15-line-247" href="#sunlight-15-line-247">247</a>
<a name="sunlight-15-line-248" href="#sunlight-15-line-248">248</a>
<a name="sunlight-15-line-249" href="#sunlight-15-line-249">249</a>
<a name="sunlight-15-line-250" href="#sunlight-15-line-250">250</a>
<a name="sunlight-15-line-251" href="#sunlight-15-line-251">251</a>
<a name="sunlight-15-line-252" href="#sunlight-15-line-252">252</a>
<a name="sunlight-15-line-253" href="#sunlight-15-line-253">253</a>
<a name="sunlight-15-line-254" href="#sunlight-15-line-254">254</a>
<a name="sunlight-15-line-255" href="#sunlight-15-line-255">255</a>
<a name="sunlight-15-line-256" href="#sunlight-15-line-256">256</a>
<a name="sunlight-15-line-257" href="#sunlight-15-line-257">257</a>
<a name="sunlight-15-line-258" href="#sunlight-15-line-258">258</a>
<a name="sunlight-15-line-259" href="#sunlight-15-line-259">259</a>
<a name="sunlight-15-line-260" href="#sunlight-15-line-260">260</a>
<a name="sunlight-15-line-261" href="#sunlight-15-line-261">261</a>
<a name="sunlight-15-line-262" href="#sunlight-15-line-262">262</a>
<a name="sunlight-15-line-263" href="#sunlight-15-line-263">263</a>
<a name="sunlight-15-line-264" href="#sunlight-15-line-264">264</a>
<a name="sunlight-15-line-265" href="#sunlight-15-line-265">265</a>
<a name="sunlight-15-line-266" href="#sunlight-15-line-266">266</a>
<a name="sunlight-15-line-267" href="#sunlight-15-line-267">267</a>
<a name="sunlight-15-line-268" href="#sunlight-15-line-268">268</a>
<a name="sunlight-15-line-269" href="#sunlight-15-line-269">269</a>
<a name="sunlight-15-line-270" href="#sunlight-15-line-270">270</a>
<a name="sunlight-15-line-271" href="#sunlight-15-line-271">271</a>
<a name="sunlight-15-line-272" href="#sunlight-15-line-272">272</a>
<a name="sunlight-15-line-273" href="#sunlight-15-line-273">273</a>
<a name="sunlight-15-line-274" href="#sunlight-15-line-274">274</a>
<a name="sunlight-15-line-275" href="#sunlight-15-line-275">275</a>
<a name="sunlight-15-line-276" href="#sunlight-15-line-276">276</a>
<a name="sunlight-15-line-277" href="#sunlight-15-line-277">277</a>
<a name="sunlight-15-line-278" href="#sunlight-15-line-278">278</a>
<a name="sunlight-15-line-279" href="#sunlight-15-line-279">279</a>
<a name="sunlight-15-line-280" href="#sunlight-15-line-280">280</a>
<a name="sunlight-15-line-281" href="#sunlight-15-line-281">281</a>
<a name="sunlight-15-line-282" href="#sunlight-15-line-282">282</a>
<a name="sunlight-15-line-283" href="#sunlight-15-line-283">283</a>
<a name="sunlight-15-line-284" href="#sunlight-15-line-284">284</a>
<a name="sunlight-15-line-285" href="#sunlight-15-line-285">285</a>
<a name="sunlight-15-line-286" href="#sunlight-15-line-286">286</a>
<a name="sunlight-15-line-287" href="#sunlight-15-line-287">287</a>
<a name="sunlight-15-line-288" href="#sunlight-15-line-288">288</a>
<a name="sunlight-15-line-289" href="#sunlight-15-line-289">289</a>
<a name="sunlight-15-line-290" href="#sunlight-15-line-290">290</a>
<a name="sunlight-15-line-291" href="#sunlight-15-line-291">291</a>
<a name="sunlight-15-line-292" href="#sunlight-15-line-292">292</a>
<a name="sunlight-15-line-293" href="#sunlight-15-line-293">293</a>
<a name="sunlight-15-line-294" href="#sunlight-15-line-294">294</a>
<a name="sunlight-15-line-295" href="#sunlight-15-line-295">295</a>
<a name="sunlight-15-line-296" href="#sunlight-15-line-296">296</a>
<a name="sunlight-15-line-297" href="#sunlight-15-line-297">297</a>
<a name="sunlight-15-line-298" href="#sunlight-15-line-298">298</a>
<a name="sunlight-15-line-299" href="#sunlight-15-line-299">299</a>
<a name="sunlight-15-line-300" href="#sunlight-15-line-300">300</a>
<a name="sunlight-15-line-301" href="#sunlight-15-line-301">301</a>
<a name="sunlight-15-line-302" href="#sunlight-15-line-302">302</a>
<a name="sunlight-15-line-303" href="#sunlight-15-line-303">303</a>
<a name="sunlight-15-line-304" href="#sunlight-15-line-304">304</a>
<a name="sunlight-15-line-305" href="#sunlight-15-line-305">305</a>
<a name="sunlight-15-line-306" href="#sunlight-15-line-306">306</a>
<a name="sunlight-15-line-307" href="#sunlight-15-line-307">307</a>
<a name="sunlight-15-line-308" href="#sunlight-15-line-308">308</a>
<a name="sunlight-15-line-309" href="#sunlight-15-line-309">309</a>
<a name="sunlight-15-line-310" href="#sunlight-15-line-310">310</a>
<a name="sunlight-15-line-311" href="#sunlight-15-line-311">311</a>
<a name="sunlight-15-line-312" href="#sunlight-15-line-312">312</a>
<a name="sunlight-15-line-313" href="#sunlight-15-line-313">313</a>
<a name="sunlight-15-line-314" href="#sunlight-15-line-314">314</a>
<a name="sunlight-15-line-315" href="#sunlight-15-line-315">315</a>
<a name="sunlight-15-line-316" href="#sunlight-15-line-316">316</a>
<a name="sunlight-15-line-317" href="#sunlight-15-line-317">317</a>
<a name="sunlight-15-line-318" href="#sunlight-15-line-318">318</a>
<a name="sunlight-15-line-319" href="#sunlight-15-line-319">319</a>
<a name="sunlight-15-line-320" href="#sunlight-15-line-320">320</a>
<a name="sunlight-15-line-321" href="#sunlight-15-line-321">321</a>
<a name="sunlight-15-line-322" href="#sunlight-15-line-322">322</a>
<a name="sunlight-15-line-323" href="#sunlight-15-line-323">323</a>
<a name="sunlight-15-line-324" href="#sunlight-15-line-324">324</a>
<a name="sunlight-15-line-325" href="#sunlight-15-line-325">325</a>
<a name="sunlight-15-line-326" href="#sunlight-15-line-326">326</a>
<a name="sunlight-15-line-327" href="#sunlight-15-line-327">327</a>
<a name="sunlight-15-line-328" href="#sunlight-15-line-328">328</a>
<a name="sunlight-15-line-329" href="#sunlight-15-line-329">329</a>
<a name="sunlight-15-line-330" href="#sunlight-15-line-330">330</a>
<a name="sunlight-15-line-331" href="#sunlight-15-line-331">331</a>
<a name="sunlight-15-line-332" href="#sunlight-15-line-332">332</a>
<a name="sunlight-15-line-333" href="#sunlight-15-line-333">333</a>
<a name="sunlight-15-line-334" href="#sunlight-15-line-334">334</a>
<a name="sunlight-15-line-335" href="#sunlight-15-line-335">335</a>
<a name="sunlight-15-line-336" href="#sunlight-15-line-336">336</a>
<a name="sunlight-15-line-337" href="#sunlight-15-line-337">337</a>
<a name="sunlight-15-line-338" href="#sunlight-15-line-338">338</a>
<a name="sunlight-15-line-339" href="#sunlight-15-line-339">339</a>
<a name="sunlight-15-line-340" href="#sunlight-15-line-340">340</a>
<a name="sunlight-15-line-341" href="#sunlight-15-line-341">341</a>
<a name="sunlight-15-line-342" href="#sunlight-15-line-342">342</a>
<a name="sunlight-15-line-343" href="#sunlight-15-line-343">343</a>
<a name="sunlight-15-line-344" href="#sunlight-15-line-344">344</a>
<a name="sunlight-15-line-345" href="#sunlight-15-line-345">345</a>
<a name="sunlight-15-line-346" href="#sunlight-15-line-346">346</a>
<a name="sunlight-15-line-347" href="#sunlight-15-line-347">347</a>
<a name="sunlight-15-line-348" href="#sunlight-15-line-348">348</a>
<a name="sunlight-15-line-349" href="#sunlight-15-line-349">349</a>
<a name="sunlight-15-line-350" href="#sunlight-15-line-350">350</a>
<a name="sunlight-15-line-351" href="#sunlight-15-line-351">351</a>
<a name="sunlight-15-line-352" href="#sunlight-15-line-352">352</a>
<a name="sunlight-15-line-353" href="#sunlight-15-line-353">353</a>
<a name="sunlight-15-line-354" href="#sunlight-15-line-354">354</a>
<a name="sunlight-15-line-355" href="#sunlight-15-line-355">355</a>
<a name="sunlight-15-line-356" href="#sunlight-15-line-356">356</a>
<a name="sunlight-15-line-357" href="#sunlight-15-line-357">357</a>
<a name="sunlight-15-line-358" href="#sunlight-15-line-358">358</a>
<a name="sunlight-15-line-359" href="#sunlight-15-line-359">359</a>
<a name="sunlight-15-line-360" href="#sunlight-15-line-360">360</a>
<a name="sunlight-15-line-361" href="#sunlight-15-line-361">361</a>
<a name="sunlight-15-line-362" href="#sunlight-15-line-362">362</a>
<a name="sunlight-15-line-363" href="#sunlight-15-line-363">363</a>
<a name="sunlight-15-line-364" href="#sunlight-15-line-364">364</a>
<a name="sunlight-15-line-365" href="#sunlight-15-line-365">365</a>
<a name="sunlight-15-line-366" href="#sunlight-15-line-366">366</a>
<a name="sunlight-15-line-367" href="#sunlight-15-line-367">367</a>
<a name="sunlight-15-line-368" href="#sunlight-15-line-368">368</a>
<a name="sunlight-15-line-369" href="#sunlight-15-line-369">369</a>
<a name="sunlight-15-line-370" href="#sunlight-15-line-370">370</a>
<a name="sunlight-15-line-371" href="#sunlight-15-line-371">371</a>
<a name="sunlight-15-line-372" href="#sunlight-15-line-372">372</a>
<a name="sunlight-15-line-373" href="#sunlight-15-line-373">373</a>
<a name="sunlight-15-line-374" href="#sunlight-15-line-374">374</a>
<a name="sunlight-15-line-375" href="#sunlight-15-line-375">375</a>
<a name="sunlight-15-line-376" href="#sunlight-15-line-376">376</a>
<a name="sunlight-15-line-377" href="#sunlight-15-line-377">377</a>
<a name="sunlight-15-line-378" href="#sunlight-15-line-378">378</a>
<a name="sunlight-15-line-379" href="#sunlight-15-line-379">379</a>
<a name="sunlight-15-line-380" href="#sunlight-15-line-380">380</a>
<a name="sunlight-15-line-381" href="#sunlight-15-line-381">381</a>
<a name="sunlight-15-line-382" href="#sunlight-15-line-382">382</a>
<a name="sunlight-15-line-383" href="#sunlight-15-line-383">383</a>
<a name="sunlight-15-line-384" href="#sunlight-15-line-384">384</a>
<a name="sunlight-15-line-385" href="#sunlight-15-line-385">385</a>
<a name="sunlight-15-line-386" href="#sunlight-15-line-386">386</a>
<a name="sunlight-15-line-387" href="#sunlight-15-line-387">387</a>
<a name="sunlight-15-line-388" href="#sunlight-15-line-388">388</a>
<a name="sunlight-15-line-389" href="#sunlight-15-line-389">389</a>
<a name="sunlight-15-line-390" href="#sunlight-15-line-390">390</a>
<a name="sunlight-15-line-391" href="#sunlight-15-line-391">391</a>
<a name="sunlight-15-line-392" href="#sunlight-15-line-392">392</a>
<a name="sunlight-15-line-393" href="#sunlight-15-line-393">393</a>
<a name="sunlight-15-line-394" href="#sunlight-15-line-394">394</a>
<a name="sunlight-15-line-395" href="#sunlight-15-line-395">395</a>
<a name="sunlight-15-line-396" href="#sunlight-15-line-396">396</a>
<a name="sunlight-15-line-397" href="#sunlight-15-line-397">397</a>
<a name="sunlight-15-line-398" href="#sunlight-15-line-398">398</a>
<a name="sunlight-15-line-399" href="#sunlight-15-line-399">399</a>
<a name="sunlight-15-line-400" href="#sunlight-15-line-400">400</a>
<a name="sunlight-15-line-401" href="#sunlight-15-line-401">401</a>
<a name="sunlight-15-line-402" href="#sunlight-15-line-402">402</a>
<a name="sunlight-15-line-403" href="#sunlight-15-line-403">403</a>
<a name="sunlight-15-line-404" href="#sunlight-15-line-404">404</a>
<a name="sunlight-15-line-405" href="#sunlight-15-line-405">405</a>
<a name="sunlight-15-line-406" href="#sunlight-15-line-406">406</a>
<a name="sunlight-15-line-407" href="#sunlight-15-line-407">407</a>
<a name="sunlight-15-line-408" href="#sunlight-15-line-408">408</a>
<a name="sunlight-15-line-409" href="#sunlight-15-line-409">409</a>
<a name="sunlight-15-line-410" href="#sunlight-15-line-410">410</a>
<a name="sunlight-15-line-411" href="#sunlight-15-line-411">411</a>
<a name="sunlight-15-line-412" href="#sunlight-15-line-412">412</a>
<a name="sunlight-15-line-413" href="#sunlight-15-line-413">413</a>
<a name="sunlight-15-line-414" href="#sunlight-15-line-414">414</a>
<a name="sunlight-15-line-415" href="#sunlight-15-line-415">415</a>
<a name="sunlight-15-line-416" href="#sunlight-15-line-416">416</a>
<a name="sunlight-15-line-417" href="#sunlight-15-line-417">417</a>
<a name="sunlight-15-line-418" href="#sunlight-15-line-418">418</a>
<a name="sunlight-15-line-419" href="#sunlight-15-line-419">419</a>
<a name="sunlight-15-line-420" href="#sunlight-15-line-420">420</a>
<a name="sunlight-15-line-421" href="#sunlight-15-line-421">421</a>
<a name="sunlight-15-line-422" href="#sunlight-15-line-422">422</a>
<a name="sunlight-15-line-423" href="#sunlight-15-line-423">423</a>
<a name="sunlight-15-line-424" href="#sunlight-15-line-424">424</a>
<a name="sunlight-15-line-425" href="#sunlight-15-line-425">425</a>
<a name="sunlight-15-line-426" href="#sunlight-15-line-426">426</a>
<a name="sunlight-15-line-427" href="#sunlight-15-line-427">427</a>
<a name="sunlight-15-line-428" href="#sunlight-15-line-428">428</a>
<a name="sunlight-15-line-429" href="#sunlight-15-line-429">429</a>
<a name="sunlight-15-line-430" href="#sunlight-15-line-430">430</a>
<a name="sunlight-15-line-431" href="#sunlight-15-line-431">431</a>
<a name="sunlight-15-line-432" href="#sunlight-15-line-432">432</a>
<a name="sunlight-15-line-433" href="#sunlight-15-line-433">433</a>
<a name="sunlight-15-line-434" href="#sunlight-15-line-434">434</a>
<a name="sunlight-15-line-435" href="#sunlight-15-line-435">435</a>
<a name="sunlight-15-line-436" href="#sunlight-15-line-436">436</a>
<a name="sunlight-15-line-437" href="#sunlight-15-line-437">437</a>
<a name="sunlight-15-line-438" href="#sunlight-15-line-438">438</a>
<a name="sunlight-15-line-439" href="#sunlight-15-line-439">439</a>
<a name="sunlight-15-line-440" href="#sunlight-15-line-440">440</a>
<a name="sunlight-15-line-441" href="#sunlight-15-line-441">441</a>
<a name="sunlight-15-line-442" href="#sunlight-15-line-442">442</a>
<a name="sunlight-15-line-443" href="#sunlight-15-line-443">443</a>
<a name="sunlight-15-line-444" href="#sunlight-15-line-444">444</a>
<a name="sunlight-15-line-445" href="#sunlight-15-line-445">445</a>
<a name="sunlight-15-line-446" href="#sunlight-15-line-446">446</a>
<a name="sunlight-15-line-447" href="#sunlight-15-line-447">447</a>
<a name="sunlight-15-line-448" href="#sunlight-15-line-448">448</a>
<a name="sunlight-15-line-449" href="#sunlight-15-line-449">449</a>
<a name="sunlight-15-line-450" href="#sunlight-15-line-450">450</a>
<a name="sunlight-15-line-451" href="#sunlight-15-line-451">451</a>
<a name="sunlight-15-line-452" href="#sunlight-15-line-452">452</a>
<a name="sunlight-15-line-453" href="#sunlight-15-line-453">453</a>
<a name="sunlight-15-line-454" href="#sunlight-15-line-454">454</a>
<a name="sunlight-15-line-455" href="#sunlight-15-line-455">455</a>
<a name="sunlight-15-line-456" href="#sunlight-15-line-456">456</a>
<a name="sunlight-15-line-457" href="#sunlight-15-line-457">457</a>
<a name="sunlight-15-line-458" href="#sunlight-15-line-458">458</a>
<a name="sunlight-15-line-459" href="#sunlight-15-line-459">459</a>
<a name="sunlight-15-line-460" href="#sunlight-15-line-460">460</a>
<a name="sunlight-15-line-461" href="#sunlight-15-line-461">461</a>
<a name="sunlight-15-line-462" href="#sunlight-15-line-462">462</a>
<a name="sunlight-15-line-463" href="#sunlight-15-line-463">463</a>
<a name="sunlight-15-line-464" href="#sunlight-15-line-464">464</a>
<a name="sunlight-15-line-465" href="#sunlight-15-line-465">465</a>
<a name="sunlight-15-line-466" href="#sunlight-15-line-466">466</a>
<a name="sunlight-15-line-467" href="#sunlight-15-line-467">467</a>
<a name="sunlight-15-line-468" href="#sunlight-15-line-468">468</a>
<a name="sunlight-15-line-469" href="#sunlight-15-line-469">469</a>
<a name="sunlight-15-line-470" href="#sunlight-15-line-470">470</a>
<a name="sunlight-15-line-471" href="#sunlight-15-line-471">471</a>
<a name="sunlight-15-line-472" href="#sunlight-15-line-472">472</a>
<a name="sunlight-15-line-473" href="#sunlight-15-line-473">473</a>
<a name="sunlight-15-line-474" href="#sunlight-15-line-474">474</a>
<a name="sunlight-15-line-475" href="#sunlight-15-line-475">475</a>
<a name="sunlight-15-line-476" href="#sunlight-15-line-476">476</a>
<a name="sunlight-15-line-477" href="#sunlight-15-line-477">477</a>
<a name="sunlight-15-line-478" href="#sunlight-15-line-478">478</a>
<a name="sunlight-15-line-479" href="#sunlight-15-line-479">479</a>
<a name="sunlight-15-line-480" href="#sunlight-15-line-480">480</a>
<a name="sunlight-15-line-481" href="#sunlight-15-line-481">481</a>
<a name="sunlight-15-line-482" href="#sunlight-15-line-482">482</a>
<a name="sunlight-15-line-483" href="#sunlight-15-line-483">483</a>
<a name="sunlight-15-line-484" href="#sunlight-15-line-484">484</a>
<a name="sunlight-15-line-485" href="#sunlight-15-line-485">485</a>
<a name="sunlight-15-line-486" href="#sunlight-15-line-486">486</a>
<a name="sunlight-15-line-487" href="#sunlight-15-line-487">487</a>
<a name="sunlight-15-line-488" href="#sunlight-15-line-488">488</a>
<a name="sunlight-15-line-489" href="#sunlight-15-line-489">489</a>
<a name="sunlight-15-line-490" href="#sunlight-15-line-490">490</a>
<a name="sunlight-15-line-491" href="#sunlight-15-line-491">491</a>
<a name="sunlight-15-line-492" href="#sunlight-15-line-492">492</a>
<a name="sunlight-15-line-493" href="#sunlight-15-line-493">493</a>
<a name="sunlight-15-line-494" href="#sunlight-15-line-494">494</a>
<a name="sunlight-15-line-495" href="#sunlight-15-line-495">495</a>
<a name="sunlight-15-line-496" href="#sunlight-15-line-496">496</a>
<a name="sunlight-15-line-497" href="#sunlight-15-line-497">497</a>
<a name="sunlight-15-line-498" href="#sunlight-15-line-498">498</a>
<a name="sunlight-15-line-499" href="#sunlight-15-line-499">499</a>
<a name="sunlight-15-line-500" href="#sunlight-15-line-500">500</a>
<a name="sunlight-15-line-501" href="#sunlight-15-line-501">501</a>
<a name="sunlight-15-line-502" href="#sunlight-15-line-502">502</a>
<a name="sunlight-15-line-503" href="#sunlight-15-line-503">503</a>
<a name="sunlight-15-line-504" href="#sunlight-15-line-504">504</a>
<a name="sunlight-15-line-505" href="#sunlight-15-line-505">505</a>
<a name="sunlight-15-line-506" href="#sunlight-15-line-506">506</a>
<a name="sunlight-15-line-507" href="#sunlight-15-line-507">507</a>
<a name="sunlight-15-line-508" href="#sunlight-15-line-508">508</a>
<a name="sunlight-15-line-509" href="#sunlight-15-line-509">509</a>
<a name="sunlight-15-line-510" href="#sunlight-15-line-510">510</a>
<a name="sunlight-15-line-511" href="#sunlight-15-line-511">511</a>
<a name="sunlight-15-line-512" href="#sunlight-15-line-512">512</a>
<a name="sunlight-15-line-513" href="#sunlight-15-line-513">513</a>
<a name="sunlight-15-line-514" href="#sunlight-15-line-514">514</a>
<a name="sunlight-15-line-515" href="#sunlight-15-line-515">515</a>
<a name="sunlight-15-line-516" href="#sunlight-15-line-516">516</a>
<a name="sunlight-15-line-517" href="#sunlight-15-line-517">517</a>
<a name="sunlight-15-line-518" href="#sunlight-15-line-518">518</a>
<a name="sunlight-15-line-519" href="#sunlight-15-line-519">519</a>
<a name="sunlight-15-line-520" href="#sunlight-15-line-520">520</a>
<a name="sunlight-15-line-521" href="#sunlight-15-line-521">521</a>
<a name="sunlight-15-line-522" href="#sunlight-15-line-522">522</a>
<a name="sunlight-15-line-523" href="#sunlight-15-line-523">523</a>
<a name="sunlight-15-line-524" href="#sunlight-15-line-524">524</a>
<a name="sunlight-15-line-525" href="#sunlight-15-line-525">525</a>
<a name="sunlight-15-line-526" href="#sunlight-15-line-526">526</a>
<a name="sunlight-15-line-527" href="#sunlight-15-line-527">527</a>
<a name="sunlight-15-line-528" href="#sunlight-15-line-528">528</a>
<a name="sunlight-15-line-529" href="#sunlight-15-line-529">529</a>
<a name="sunlight-15-line-530" href="#sunlight-15-line-530">530</a>
<a name="sunlight-15-line-531" href="#sunlight-15-line-531">531</a>
<a name="sunlight-15-line-532" href="#sunlight-15-line-532">532</a>
<a name="sunlight-15-line-533" href="#sunlight-15-line-533">533</a>
<a name="sunlight-15-line-534" href="#sunlight-15-line-534">534</a>
<a name="sunlight-15-line-535" href="#sunlight-15-line-535">535</a>
<a name="sunlight-15-line-536" href="#sunlight-15-line-536">536</a>
<a name="sunlight-15-line-537" href="#sunlight-15-line-537">537</a>
<a name="sunlight-15-line-538" href="#sunlight-15-line-538">538</a>
<a name="sunlight-15-line-539" href="#sunlight-15-line-539">539</a>
<a name="sunlight-15-line-540" href="#sunlight-15-line-540">540</a>
<a name="sunlight-15-line-541" href="#sunlight-15-line-541">541</a>
<a name="sunlight-15-line-542" href="#sunlight-15-line-542">542</a>
<a name="sunlight-15-line-543" href="#sunlight-15-line-543">543</a>
<a name="sunlight-15-line-544" href="#sunlight-15-line-544">544</a>
<a name="sunlight-15-line-545" href="#sunlight-15-line-545">545</a>
<a name="sunlight-15-line-546" href="#sunlight-15-line-546">546</a>
<a name="sunlight-15-line-547" href="#sunlight-15-line-547">547</a>
<a name="sunlight-15-line-548" href="#sunlight-15-line-548">548</a>
<a name="sunlight-15-line-549" href="#sunlight-15-line-549">549</a>
<a name="sunlight-15-line-550" href="#sunlight-15-line-550">550</a>
<a name="sunlight-15-line-551" href="#sunlight-15-line-551">551</a>
<a name="sunlight-15-line-552" href="#sunlight-15-line-552">552</a>
<a name="sunlight-15-line-553" href="#sunlight-15-line-553">553</a>
<a name="sunlight-15-line-554" href="#sunlight-15-line-554">554</a>
<a name="sunlight-15-line-555" href="#sunlight-15-line-555">555</a>
<a name="sunlight-15-line-556" href="#sunlight-15-line-556">556</a>
<a name="sunlight-15-line-557" href="#sunlight-15-line-557">557</a>
<a name="sunlight-15-line-558" href="#sunlight-15-line-558">558</a>
<a name="sunlight-15-line-559" href="#sunlight-15-line-559">559</a>
<a name="sunlight-15-line-560" href="#sunlight-15-line-560">560</a>
<a name="sunlight-15-line-561" href="#sunlight-15-line-561">561</a>
<a name="sunlight-15-line-562" href="#sunlight-15-line-562">562</a>
<a name="sunlight-15-line-563" href="#sunlight-15-line-563">563</a>
<a name="sunlight-15-line-564" href="#sunlight-15-line-564">564</a>
<a name="sunlight-15-line-565" href="#sunlight-15-line-565">565</a>
<a name="sunlight-15-line-566" href="#sunlight-15-line-566">566</a>
<a name="sunlight-15-line-567" href="#sunlight-15-line-567">567</a>
<a name="sunlight-15-line-568" href="#sunlight-15-line-568">568</a>
<a name="sunlight-15-line-569" href="#sunlight-15-line-569">569</a>
<a name="sunlight-15-line-570" href="#sunlight-15-line-570">570</a>
<a name="sunlight-15-line-571" href="#sunlight-15-line-571">571</a>
<a name="sunlight-15-line-572" href="#sunlight-15-line-572">572</a>
<a name="sunlight-15-line-573" href="#sunlight-15-line-573">573</a>
<a name="sunlight-15-line-574" href="#sunlight-15-line-574">574</a>
<a name="sunlight-15-line-575" href="#sunlight-15-line-575">575</a>
<a name="sunlight-15-line-576" href="#sunlight-15-line-576">576</a>
<a name="sunlight-15-line-577" href="#sunlight-15-line-577">577</a>
<a name="sunlight-15-line-578" href="#sunlight-15-line-578">578</a>
<a name="sunlight-15-line-579" href="#sunlight-15-line-579">579</a>
<a name="sunlight-15-line-580" href="#sunlight-15-line-580">580</a>
<a name="sunlight-15-line-581" href="#sunlight-15-line-581">581</a>
<a name="sunlight-15-line-582" href="#sunlight-15-line-582">582</a>
<a name="sunlight-15-line-583" href="#sunlight-15-line-583">583</a>
<a name="sunlight-15-line-584" href="#sunlight-15-line-584">584</a>
<a name="sunlight-15-line-585" href="#sunlight-15-line-585">585</a>
<a name="sunlight-15-line-586" href="#sunlight-15-line-586">586</a>
<a name="sunlight-15-line-587" href="#sunlight-15-line-587">587</a>
<a name="sunlight-15-line-588" href="#sunlight-15-line-588">588</a>
<a name="sunlight-15-line-589" href="#sunlight-15-line-589">589</a>
<a name="sunlight-15-line-590" href="#sunlight-15-line-590">590</a>
<a name="sunlight-15-line-591" href="#sunlight-15-line-591">591</a>
<a name="sunlight-15-line-592" href="#sunlight-15-line-592">592</a>
<a name="sunlight-15-line-593" href="#sunlight-15-line-593">593</a>
<a name="sunlight-15-line-594" href="#sunlight-15-line-594">594</a>
<a name="sunlight-15-line-595" href="#sunlight-15-line-595">595</a>
<a name="sunlight-15-line-596" href="#sunlight-15-line-596">596</a>
<a name="sunlight-15-line-597" href="#sunlight-15-line-597">597</a>
<a name="sunlight-15-line-598" href="#sunlight-15-line-598">598</a>
<a name="sunlight-15-line-599" href="#sunlight-15-line-599">599</a>
<a name="sunlight-15-line-600" href="#sunlight-15-line-600">600</a>
<a name="sunlight-15-line-601" href="#sunlight-15-line-601">601</a>
<a name="sunlight-15-line-602" href="#sunlight-15-line-602">602</a>
<a name="sunlight-15-line-603" href="#sunlight-15-line-603">603</a>
<a name="sunlight-15-line-604" href="#sunlight-15-line-604">604</a>
<a name="sunlight-15-line-605" href="#sunlight-15-line-605">605</a>
<a name="sunlight-15-line-606" href="#sunlight-15-line-606">606</a>
<a name="sunlight-15-line-607" href="#sunlight-15-line-607">607</a>
<a name="sunlight-15-line-608" href="#sunlight-15-line-608">608</a>
<a name="sunlight-15-line-609" href="#sunlight-15-line-609">609</a>
<a name="sunlight-15-line-610" href="#sunlight-15-line-610">610</a>
<a name="sunlight-15-line-611" href="#sunlight-15-line-611">611</a>
<a name="sunlight-15-line-612" href="#sunlight-15-line-612">612</a>
<a name="sunlight-15-line-613" href="#sunlight-15-line-613">613</a>
<a name="sunlight-15-line-614" href="#sunlight-15-line-614">614</a>
<a name="sunlight-15-line-615" href="#sunlight-15-line-615">615</a>
<a name="sunlight-15-line-616" href="#sunlight-15-line-616">616</a>
<a name="sunlight-15-line-617" href="#sunlight-15-line-617">617</a>
<a name="sunlight-15-line-618" href="#sunlight-15-line-618">618</a>
<a name="sunlight-15-line-619" href="#sunlight-15-line-619">619</a>
<a name="sunlight-15-line-620" href="#sunlight-15-line-620">620</a>
<a name="sunlight-15-line-621" href="#sunlight-15-line-621">621</a>
<a name="sunlight-15-line-622" href="#sunlight-15-line-622">622</a>
<a name="sunlight-15-line-623" href="#sunlight-15-line-623">623</a>
<a name="sunlight-15-line-624" href="#sunlight-15-line-624">624</a>
<a name="sunlight-15-line-625" href="#sunlight-15-line-625">625</a>
<a name="sunlight-15-line-626" href="#sunlight-15-line-626">626</a>
<a name="sunlight-15-line-627" href="#sunlight-15-line-627">627</a>
<a name="sunlight-15-line-628" href="#sunlight-15-line-628">628</a>
<a name="sunlight-15-line-629" href="#sunlight-15-line-629">629</a>
<a name="sunlight-15-line-630" href="#sunlight-15-line-630">630</a>
<a name="sunlight-15-line-631" href="#sunlight-15-line-631">631</a>
<a name="sunlight-15-line-632" href="#sunlight-15-line-632">632</a>
<a name="sunlight-15-line-633" href="#sunlight-15-line-633">633</a>
<a name="sunlight-15-line-634" href="#sunlight-15-line-634">634</a>
<a name="sunlight-15-line-635" href="#sunlight-15-line-635">635</a>
<a name="sunlight-15-line-636" href="#sunlight-15-line-636">636</a>
<a name="sunlight-15-line-637" href="#sunlight-15-line-637">637</a>
<a name="sunlight-15-line-638" href="#sunlight-15-line-638">638</a>
<a name="sunlight-15-line-639" href="#sunlight-15-line-639">639</a>
<a name="sunlight-15-line-640" href="#sunlight-15-line-640">640</a>
<a name="sunlight-15-line-641" href="#sunlight-15-line-641">641</a>
<a name="sunlight-15-line-642" href="#sunlight-15-line-642">642</a>
<a name="sunlight-15-line-643" href="#sunlight-15-line-643">643</a>
<a name="sunlight-15-line-644" href="#sunlight-15-line-644">644</a>
<a name="sunlight-15-line-645" href="#sunlight-15-line-645">645</a>
<a name="sunlight-15-line-646" href="#sunlight-15-line-646">646</a>
<a name="sunlight-15-line-647" href="#sunlight-15-line-647">647</a>
<a name="sunlight-15-line-648" href="#sunlight-15-line-648">648</a>
<a name="sunlight-15-line-649" href="#sunlight-15-line-649">649</a>
<a name="sunlight-15-line-650" href="#sunlight-15-line-650">650</a>
<a name="sunlight-15-line-651" href="#sunlight-15-line-651">651</a>
<a name="sunlight-15-line-652" href="#sunlight-15-line-652">652</a>
<a name="sunlight-15-line-653" href="#sunlight-15-line-653">653</a>
<a name="sunlight-15-line-654" href="#sunlight-15-line-654">654</a>
<a name="sunlight-15-line-655" href="#sunlight-15-line-655">655</a>
<a name="sunlight-15-line-656" href="#sunlight-15-line-656">656</a>
<a name="sunlight-15-line-657" href="#sunlight-15-line-657">657</a>
<a name="sunlight-15-line-658" href="#sunlight-15-line-658">658</a>
<a name="sunlight-15-line-659" href="#sunlight-15-line-659">659</a>
<a name="sunlight-15-line-660" href="#sunlight-15-line-660">660</a>
<a name="sunlight-15-line-661" href="#sunlight-15-line-661">661</a>
<a name="sunlight-15-line-662" href="#sunlight-15-line-662">662</a>
<a name="sunlight-15-line-663" href="#sunlight-15-line-663">663</a>
<a name="sunlight-15-line-664" href="#sunlight-15-line-664">664</a>
<a name="sunlight-15-line-665" href="#sunlight-15-line-665">665</a>
<a name="sunlight-15-line-666" href="#sunlight-15-line-666">666</a>
<a name="sunlight-15-line-667" href="#sunlight-15-line-667">667</a>
<a name="sunlight-15-line-668" href="#sunlight-15-line-668">668</a>
<a name="sunlight-15-line-669" href="#sunlight-15-line-669">669</a>
<a name="sunlight-15-line-670" href="#sunlight-15-line-670">670</a>
<a name="sunlight-15-line-671" href="#sunlight-15-line-671">671</a>
<a name="sunlight-15-line-672" href="#sunlight-15-line-672">672</a>
<a name="sunlight-15-line-673" href="#sunlight-15-line-673">673</a>
<a name="sunlight-15-line-674" href="#sunlight-15-line-674">674</a>
<a name="sunlight-15-line-675" href="#sunlight-15-line-675">675</a>
<a name="sunlight-15-line-676" href="#sunlight-15-line-676">676</a>
<a name="sunlight-15-line-677" href="#sunlight-15-line-677">677</a>
<a name="sunlight-15-line-678" href="#sunlight-15-line-678">678</a>
<a name="sunlight-15-line-679" href="#sunlight-15-line-679">679</a>
<a name="sunlight-15-line-680" href="#sunlight-15-line-680">680</a>
<a name="sunlight-15-line-681" href="#sunlight-15-line-681">681</a>
<a name="sunlight-15-line-682" href="#sunlight-15-line-682">682</a>
<a name="sunlight-15-line-683" href="#sunlight-15-line-683">683</a>
<a name="sunlight-15-line-684" href="#sunlight-15-line-684">684</a>
<a name="sunlight-15-line-685" href="#sunlight-15-line-685">685</a>
<a name="sunlight-15-line-686" href="#sunlight-15-line-686">686</a>
<a name="sunlight-15-line-687" href="#sunlight-15-line-687">687</a>
<a name="sunlight-15-line-688" href="#sunlight-15-line-688">688</a>
<a name="sunlight-15-line-689" href="#sunlight-15-line-689">689</a>
<a name="sunlight-15-line-690" href="#sunlight-15-line-690">690</a>
<a name="sunlight-15-line-691" href="#sunlight-15-line-691">691</a>
<a name="sunlight-15-line-692" href="#sunlight-15-line-692">692</a>
<a name="sunlight-15-line-693" href="#sunlight-15-line-693">693</a>
<a name="sunlight-15-line-694" href="#sunlight-15-line-694">694</a>
<a name="sunlight-15-line-695" href="#sunlight-15-line-695">695</a>
<a name="sunlight-15-line-696" href="#sunlight-15-line-696">696</a>
<a name="sunlight-15-line-697" href="#sunlight-15-line-697">697</a>
<a name="sunlight-15-line-698" href="#sunlight-15-line-698">698</a>
<a name="sunlight-15-line-699" href="#sunlight-15-line-699">699</a>
<a name="sunlight-15-line-700" href="#sunlight-15-line-700">700</a>
<a name="sunlight-15-line-701" href="#sunlight-15-line-701">701</a>
<a name="sunlight-15-line-702" href="#sunlight-15-line-702">702</a>
<a name="sunlight-15-line-703" href="#sunlight-15-line-703">703</a>
<a name="sunlight-15-line-704" href="#sunlight-15-line-704">704</a>
<a name="sunlight-15-line-705" href="#sunlight-15-line-705">705</a>
<a name="sunlight-15-line-706" href="#sunlight-15-line-706">706</a>
<a name="sunlight-15-line-707" href="#sunlight-15-line-707">707</a>
<a name="sunlight-15-line-708" href="#sunlight-15-line-708">708</a>
<a name="sunlight-15-line-709" href="#sunlight-15-line-709">709</a>
<a name="sunlight-15-line-710" href="#sunlight-15-line-710">710</a>
<a name="sunlight-15-line-711" href="#sunlight-15-line-711">711</a>
<a name="sunlight-15-line-712" href="#sunlight-15-line-712">712</a>
<a name="sunlight-15-line-713" href="#sunlight-15-line-713">713</a>
<a name="sunlight-15-line-714" href="#sunlight-15-line-714">714</a>
<a name="sunlight-15-line-715" href="#sunlight-15-line-715">715</a>
<a name="sunlight-15-line-716" href="#sunlight-15-line-716">716</a>
<a name="sunlight-15-line-717" href="#sunlight-15-line-717">717</a>
<a name="sunlight-15-line-718" href="#sunlight-15-line-718">718</a>
<a name="sunlight-15-line-719" href="#sunlight-15-line-719">719</a>
<a name="sunlight-15-line-720" href="#sunlight-15-line-720">720</a>
<a name="sunlight-15-line-721" href="#sunlight-15-line-721">721</a>
<a name="sunlight-15-line-722" href="#sunlight-15-line-722">722</a>
<a name="sunlight-15-line-723" href="#sunlight-15-line-723">723</a>
<a name="sunlight-15-line-724" href="#sunlight-15-line-724">724</a>
<a name="sunlight-15-line-725" href="#sunlight-15-line-725">725</a>
<a name="sunlight-15-line-726" href="#sunlight-15-line-726">726</a>
<a name="sunlight-15-line-727" href="#sunlight-15-line-727">727</a>
<a name="sunlight-15-line-728" href="#sunlight-15-line-728">728</a>
<a name="sunlight-15-line-729" href="#sunlight-15-line-729">729</a>
<a name="sunlight-15-line-730" href="#sunlight-15-line-730">730</a>
<a name="sunlight-15-line-731" href="#sunlight-15-line-731">731</a>
<a name="sunlight-15-line-732" href="#sunlight-15-line-732">732</a>
<a name="sunlight-15-line-733" href="#sunlight-15-line-733">733</a>
<a name="sunlight-15-line-734" href="#sunlight-15-line-734">734</a>
<a name="sunlight-15-line-735" href="#sunlight-15-line-735">735</a>
<a name="sunlight-15-line-736" href="#sunlight-15-line-736">736</a>
<a name="sunlight-15-line-737" href="#sunlight-15-line-737">737</a>
<a name="sunlight-15-line-738" href="#sunlight-15-line-738">738</a>
<a name="sunlight-15-line-739" href="#sunlight-15-line-739">739</a>
<a name="sunlight-15-line-740" href="#sunlight-15-line-740">740</a>
<a name="sunlight-15-line-741" href="#sunlight-15-line-741">741</a>
<a name="sunlight-15-line-742" href="#sunlight-15-line-742">742</a>
<a name="sunlight-15-line-743" href="#sunlight-15-line-743">743</a>
<a name="sunlight-15-line-744" href="#sunlight-15-line-744">744</a>
<a name="sunlight-15-line-745" href="#sunlight-15-line-745">745</a>
<a name="sunlight-15-line-746" href="#sunlight-15-line-746">746</a>
<a name="sunlight-15-line-747" href="#sunlight-15-line-747">747</a>
<a name="sunlight-15-line-748" href="#sunlight-15-line-748">748</a>
<a name="sunlight-15-line-749" href="#sunlight-15-line-749">749</a>
<a name="sunlight-15-line-750" href="#sunlight-15-line-750">750</a>
<a name="sunlight-15-line-751" href="#sunlight-15-line-751">751</a>
<a name="sunlight-15-line-752" href="#sunlight-15-line-752">752</a>
<a name="sunlight-15-line-753" href="#sunlight-15-line-753">753</a>
<a name="sunlight-15-line-754" href="#sunlight-15-line-754">754</a>
<a name="sunlight-15-line-755" href="#sunlight-15-line-755">755</a>
<a name="sunlight-15-line-756" href="#sunlight-15-line-756">756</a>
<a name="sunlight-15-line-757" href="#sunlight-15-line-757">757</a>
<a name="sunlight-15-line-758" href="#sunlight-15-line-758">758</a>
<a name="sunlight-15-line-759" href="#sunlight-15-line-759">759</a>
<a name="sunlight-15-line-760" href="#sunlight-15-line-760">760</a>
<a name="sunlight-15-line-761" href="#sunlight-15-line-761">761</a>
<a name="sunlight-15-line-762" href="#sunlight-15-line-762">762</a>
<a name="sunlight-15-line-763" href="#sunlight-15-line-763">763</a>
<a name="sunlight-15-line-764" href="#sunlight-15-line-764">764</a>
<a name="sunlight-15-line-765" href="#sunlight-15-line-765">765</a>
<a name="sunlight-15-line-766" href="#sunlight-15-line-766">766</a>
<a name="sunlight-15-line-767" href="#sunlight-15-line-767">767</a>
<a name="sunlight-15-line-768" href="#sunlight-15-line-768">768</a>
<a name="sunlight-15-line-769" href="#sunlight-15-line-769">769</a>
<a name="sunlight-15-line-770" href="#sunlight-15-line-770">770</a>
<a name="sunlight-15-line-771" href="#sunlight-15-line-771">771</a>
<a name="sunlight-15-line-772" href="#sunlight-15-line-772">772</a>
<a name="sunlight-15-line-773" href="#sunlight-15-line-773">773</a>
<a name="sunlight-15-line-774" href="#sunlight-15-line-774">774</a>
<a name="sunlight-15-line-775" href="#sunlight-15-line-775">775</a>
<a name="sunlight-15-line-776" href="#sunlight-15-line-776">776</a>
<a name="sunlight-15-line-777" href="#sunlight-15-line-777">777</a>
<a name="sunlight-15-line-778" href="#sunlight-15-line-778">778</a>
<a name="sunlight-15-line-779" href="#sunlight-15-line-779">779</a>
<a name="sunlight-15-line-780" href="#sunlight-15-line-780">780</a>
<a name="sunlight-15-line-781" href="#sunlight-15-line-781">781</a>
<a name="sunlight-15-line-782" href="#sunlight-15-line-782">782</a>
<a name="sunlight-15-line-783" href="#sunlight-15-line-783">783</a>
<a name="sunlight-15-line-784" href="#sunlight-15-line-784">784</a>
<a name="sunlight-15-line-785" href="#sunlight-15-line-785">785</a>
<a name="sunlight-15-line-786" href="#sunlight-15-line-786">786</a>
<a name="sunlight-15-line-787" href="#sunlight-15-line-787">787</a>
<a name="sunlight-15-line-788" href="#sunlight-15-line-788">788</a>
<a name="sunlight-15-line-789" href="#sunlight-15-line-789">789</a>
<a name="sunlight-15-line-790" href="#sunlight-15-line-790">790</a>
<a name="sunlight-15-line-791" href="#sunlight-15-line-791">791</a>
<a name="sunlight-15-line-792" href="#sunlight-15-line-792">792</a>
<a name="sunlight-15-line-793" href="#sunlight-15-line-793">793</a>
<a name="sunlight-15-line-794" href="#sunlight-15-line-794">794</a>
<a name="sunlight-15-line-795" href="#sunlight-15-line-795">795</a>
<a name="sunlight-15-line-796" href="#sunlight-15-line-796">796</a>
<a name="sunlight-15-line-797" href="#sunlight-15-line-797">797</a>
<a name="sunlight-15-line-798" href="#sunlight-15-line-798">798</a>
<a name="sunlight-15-line-799" href="#sunlight-15-line-799">799</a>
<a name="sunlight-15-line-800" href="#sunlight-15-line-800">800</a>
<a name="sunlight-15-line-801" href="#sunlight-15-line-801">801</a>
<a name="sunlight-15-line-802" href="#sunlight-15-line-802">802</a>
<a name="sunlight-15-line-803" href="#sunlight-15-line-803">803</a>
<a name="sunlight-15-line-804" href="#sunlight-15-line-804">804</a>
<a name="sunlight-15-line-805" href="#sunlight-15-line-805">805</a>
<a name="sunlight-15-line-806" href="#sunlight-15-line-806">806</a>
<a name="sunlight-15-line-807" href="#sunlight-15-line-807">807</a>
<a name="sunlight-15-line-808" href="#sunlight-15-line-808">808</a>
<a name="sunlight-15-line-809" href="#sunlight-15-line-809">809</a>
<a name="sunlight-15-line-810" href="#sunlight-15-line-810">810</a>
<a name="sunlight-15-line-811" href="#sunlight-15-line-811">811</a>
<a name="sunlight-15-line-812" href="#sunlight-15-line-812">812</a>
<a name="sunlight-15-line-813" href="#sunlight-15-line-813">813</a>
<a name="sunlight-15-line-814" href="#sunlight-15-line-814">814</a>
<a name="sunlight-15-line-815" href="#sunlight-15-line-815">815</a>
<a name="sunlight-15-line-816" href="#sunlight-15-line-816">816</a>
<a name="sunlight-15-line-817" href="#sunlight-15-line-817">817</a>
<a name="sunlight-15-line-818" href="#sunlight-15-line-818">818</a>
<a name="sunlight-15-line-819" href="#sunlight-15-line-819">819</a>
<a name="sunlight-15-line-820" href="#sunlight-15-line-820">820</a>
<a name="sunlight-15-line-821" href="#sunlight-15-line-821">821</a>
<a name="sunlight-15-line-822" href="#sunlight-15-line-822">822</a>
<a name="sunlight-15-line-823" href="#sunlight-15-line-823">823</a>
<a name="sunlight-15-line-824" href="#sunlight-15-line-824">824</a>
<a name="sunlight-15-line-825" href="#sunlight-15-line-825">825</a>
<a name="sunlight-15-line-826" href="#sunlight-15-line-826">826</a>
<a name="sunlight-15-line-827" href="#sunlight-15-line-827">827</a>
<a name="sunlight-15-line-828" href="#sunlight-15-line-828">828</a>
<a name="sunlight-15-line-829" href="#sunlight-15-line-829">829</a>
<a name="sunlight-15-line-830" href="#sunlight-15-line-830">830</a>
<a name="sunlight-15-line-831" href="#sunlight-15-line-831">831</a>
<a name="sunlight-15-line-832" href="#sunlight-15-line-832">832</a>
<a name="sunlight-15-line-833" href="#sunlight-15-line-833">833</a>
<a name="sunlight-15-line-834" href="#sunlight-15-line-834">834</a>
<a name="sunlight-15-line-835" href="#sunlight-15-line-835">835</a>
<a name="sunlight-15-line-836" href="#sunlight-15-line-836">836</a>
<a name="sunlight-15-line-837" href="#sunlight-15-line-837">837</a>
<a name="sunlight-15-line-838" href="#sunlight-15-line-838">838</a>
<a name="sunlight-15-line-839" href="#sunlight-15-line-839">839</a>
<a name="sunlight-15-line-840" href="#sunlight-15-line-840">840</a>
<a name="sunlight-15-line-841" href="#sunlight-15-line-841">841</a>
<a name="sunlight-15-line-842" href="#sunlight-15-line-842">842</a>
<a name="sunlight-15-line-843" href="#sunlight-15-line-843">843</a>
<a name="sunlight-15-line-844" href="#sunlight-15-line-844">844</a>
<a name="sunlight-15-line-845" href="#sunlight-15-line-845">845</a>
<a name="sunlight-15-line-846" href="#sunlight-15-line-846">846</a>
<a name="sunlight-15-line-847" href="#sunlight-15-line-847">847</a>
<a name="sunlight-15-line-848" href="#sunlight-15-line-848">848</a>
<a name="sunlight-15-line-849" href="#sunlight-15-line-849">849</a>
<a name="sunlight-15-line-850" href="#sunlight-15-line-850">850</a>
<a name="sunlight-15-line-851" href="#sunlight-15-line-851">851</a>
<a name="sunlight-15-line-852" href="#sunlight-15-line-852">852</a>
<a name="sunlight-15-line-853" href="#sunlight-15-line-853">853</a>
<a name="sunlight-15-line-854" href="#sunlight-15-line-854">854</a>
<a name="sunlight-15-line-855" href="#sunlight-15-line-855">855</a>
<a name="sunlight-15-line-856" href="#sunlight-15-line-856">856</a>
<a name="sunlight-15-line-857" href="#sunlight-15-line-857">857</a>
<a name="sunlight-15-line-858" href="#sunlight-15-line-858">858</a>
<a name="sunlight-15-line-859" href="#sunlight-15-line-859">859</a>
<a name="sunlight-15-line-860" href="#sunlight-15-line-860">860</a>
<a name="sunlight-15-line-861" href="#sunlight-15-line-861">861</a>
<a name="sunlight-15-line-862" href="#sunlight-15-line-862">862</a>
<a name="sunlight-15-line-863" href="#sunlight-15-line-863">863</a>
<a name="sunlight-15-line-864" href="#sunlight-15-line-864">864</a>
<a name="sunlight-15-line-865" href="#sunlight-15-line-865">865</a>
<a name="sunlight-15-line-866" href="#sunlight-15-line-866">866</a>
<a name="sunlight-15-line-867" href="#sunlight-15-line-867">867</a>
<a name="sunlight-15-line-868" href="#sunlight-15-line-868">868</a>
<a name="sunlight-15-line-869" href="#sunlight-15-line-869">869</a>
<a name="sunlight-15-line-870" href="#sunlight-15-line-870">870</a>
<a name="sunlight-15-line-871" href="#sunlight-15-line-871">871</a>
<a name="sunlight-15-line-872" href="#sunlight-15-line-872">872</a>
<a name="sunlight-15-line-873" href="#sunlight-15-line-873">873</a>
<a name="sunlight-15-line-874" href="#sunlight-15-line-874">874</a>
<a name="sunlight-15-line-875" href="#sunlight-15-line-875">875</a>
<a name="sunlight-15-line-876" href="#sunlight-15-line-876">876</a>
<a name="sunlight-15-line-877" href="#sunlight-15-line-877">877</a>
<a name="sunlight-15-line-878" href="#sunlight-15-line-878">878</a>
<a name="sunlight-15-line-879" href="#sunlight-15-line-879">879</a>
<a name="sunlight-15-line-880" href="#sunlight-15-line-880">880</a>
<a name="sunlight-15-line-881" href="#sunlight-15-line-881">881</a>
<a name="sunlight-15-line-882" href="#sunlight-15-line-882">882</a>
<a name="sunlight-15-line-883" href="#sunlight-15-line-883">883</a>
<a name="sunlight-15-line-884" href="#sunlight-15-line-884">884</a>
<a name="sunlight-15-line-885" href="#sunlight-15-line-885">885</a>
<a name="sunlight-15-line-886" href="#sunlight-15-line-886">886</a>
<a name="sunlight-15-line-887" href="#sunlight-15-line-887">887</a>
<a name="sunlight-15-line-888" href="#sunlight-15-line-888">888</a>
<a name="sunlight-15-line-889" href="#sunlight-15-line-889">889</a>
<a name="sunlight-15-line-890" href="#sunlight-15-line-890">890</a>
<a name="sunlight-15-line-891" href="#sunlight-15-line-891">891</a>
<a name="sunlight-15-line-892" href="#sunlight-15-line-892">892</a>
<a name="sunlight-15-line-893" href="#sunlight-15-line-893">893</a>
<a name="sunlight-15-line-894" href="#sunlight-15-line-894">894</a>
<a name="sunlight-15-line-895" href="#sunlight-15-line-895">895</a>
<a name="sunlight-15-line-896" href="#sunlight-15-line-896">896</a>
<a name="sunlight-15-line-897" href="#sunlight-15-line-897">897</a>
<a name="sunlight-15-line-898" href="#sunlight-15-line-898">898</a>
<a name="sunlight-15-line-899" href="#sunlight-15-line-899">899</a>
<a name="sunlight-15-line-900" href="#sunlight-15-line-900">900</a>
<a name="sunlight-15-line-901" href="#sunlight-15-line-901">901</a>
<a name="sunlight-15-line-902" href="#sunlight-15-line-902">902</a>
<a name="sunlight-15-line-903" href="#sunlight-15-line-903">903</a>
<a name="sunlight-15-line-904" href="#sunlight-15-line-904">904</a>
<a name="sunlight-15-line-905" href="#sunlight-15-line-905">905</a>
<a name="sunlight-15-line-906" href="#sunlight-15-line-906">906</a>
<a name="sunlight-15-line-907" href="#sunlight-15-line-907">907</a>
<a name="sunlight-15-line-908" href="#sunlight-15-line-908">908</a>
<a name="sunlight-15-line-909" href="#sunlight-15-line-909">909</a>
<a name="sunlight-15-line-910" href="#sunlight-15-line-910">910</a>
<a name="sunlight-15-line-911" href="#sunlight-15-line-911">911</a>
<a name="sunlight-15-line-912" href="#sunlight-15-line-912">912</a>
<a name="sunlight-15-line-913" href="#sunlight-15-line-913">913</a>
<a name="sunlight-15-line-914" href="#sunlight-15-line-914">914</a>
<a name="sunlight-15-line-915" href="#sunlight-15-line-915">915</a>
<a name="sunlight-15-line-916" href="#sunlight-15-line-916">916</a>
<a name="sunlight-15-line-917" href="#sunlight-15-line-917">917</a>
<a name="sunlight-15-line-918" href="#sunlight-15-line-918">918</a>
<a name="sunlight-15-line-919" href="#sunlight-15-line-919">919</a>
<a name="sunlight-15-line-920" href="#sunlight-15-line-920">920</a>
<a name="sunlight-15-line-921" href="#sunlight-15-line-921">921</a>
<a name="sunlight-15-line-922" href="#sunlight-15-line-922">922</a>
<a name="sunlight-15-line-923" href="#sunlight-15-line-923">923</a>
<a name="sunlight-15-line-924" href="#sunlight-15-line-924">924</a>
<a name="sunlight-15-line-925" href="#sunlight-15-line-925">925</a>
<a name="sunlight-15-line-926" href="#sunlight-15-line-926">926</a>
<a name="sunlight-15-line-927" href="#sunlight-15-line-927">927</a>
<a name="sunlight-15-line-928" href="#sunlight-15-line-928">928</a>
<a name="sunlight-15-line-929" href="#sunlight-15-line-929">929</a>
<a name="sunlight-15-line-930" href="#sunlight-15-line-930">930</a>
<a name="sunlight-15-line-931" href="#sunlight-15-line-931">931</a>
<a name="sunlight-15-line-932" href="#sunlight-15-line-932">932</a>
<a name="sunlight-15-line-933" href="#sunlight-15-line-933">933</a>
<a name="sunlight-15-line-934" href="#sunlight-15-line-934">934</a>
<a name="sunlight-15-line-935" href="#sunlight-15-line-935">935</a>
<a name="sunlight-15-line-936" href="#sunlight-15-line-936">936</a>
<a name="sunlight-15-line-937" href="#sunlight-15-line-937">937</a>
<a name="sunlight-15-line-938" href="#sunlight-15-line-938">938</a>
<a name="sunlight-15-line-939" href="#sunlight-15-line-939">939</a>
<a name="sunlight-15-line-940" href="#sunlight-15-line-940">940</a>
<a name="sunlight-15-line-941" href="#sunlight-15-line-941">941</a>
<a name="sunlight-15-line-942" href="#sunlight-15-line-942">942</a>
<a name="sunlight-15-line-943" href="#sunlight-15-line-943">943</a>
<a name="sunlight-15-line-944" href="#sunlight-15-line-944">944</a>
<a name="sunlight-15-line-945" href="#sunlight-15-line-945">945</a>
<a name="sunlight-15-line-946" href="#sunlight-15-line-946">946</a>
<a name="sunlight-15-line-947" href="#sunlight-15-line-947">947</a>
<a name="sunlight-15-line-948" href="#sunlight-15-line-948">948</a>
<a name="sunlight-15-line-949" href="#sunlight-15-line-949">949</a>
<a name="sunlight-15-line-950" href="#sunlight-15-line-950">950</a>
<a name="sunlight-15-line-951" href="#sunlight-15-line-951">951</a>
<a name="sunlight-15-line-952" href="#sunlight-15-line-952">952</a>
<a name="sunlight-15-line-953" href="#sunlight-15-line-953">953</a>
<a name="sunlight-15-line-954" href="#sunlight-15-line-954">954</a>
<a name="sunlight-15-line-955" href="#sunlight-15-line-955">955</a>
<a name="sunlight-15-line-956" href="#sunlight-15-line-956">956</a>
<a name="sunlight-15-line-957" href="#sunlight-15-line-957">957</a>
<a name="sunlight-15-line-958" href="#sunlight-15-line-958">958</a>
<a name="sunlight-15-line-959" href="#sunlight-15-line-959">959</a>
<a name="sunlight-15-line-960" href="#sunlight-15-line-960">960</a>
<a name="sunlight-15-line-961" href="#sunlight-15-line-961">961</a>
<a name="sunlight-15-line-962" href="#sunlight-15-line-962">962</a>
<a name="sunlight-15-line-963" href="#sunlight-15-line-963">963</a>
<a name="sunlight-15-line-964" href="#sunlight-15-line-964">964</a>
<a name="sunlight-15-line-965" href="#sunlight-15-line-965">965</a>
<a name="sunlight-15-line-966" href="#sunlight-15-line-966">966</a>
<a name="sunlight-15-line-967" href="#sunlight-15-line-967">967</a>
<a name="sunlight-15-line-968" href="#sunlight-15-line-968">968</a>
<a name="sunlight-15-line-969" href="#sunlight-15-line-969">969</a>
<a name="sunlight-15-line-970" href="#sunlight-15-line-970">970</a>
<a name="sunlight-15-line-971" href="#sunlight-15-line-971">971</a>
<a name="sunlight-15-line-972" href="#sunlight-15-line-972">972</a>
<a name="sunlight-15-line-973" href="#sunlight-15-line-973">973</a>
<a name="sunlight-15-line-974" href="#sunlight-15-line-974">974</a>
<a name="sunlight-15-line-975" href="#sunlight-15-line-975">975</a>
<a name="sunlight-15-line-976" href="#sunlight-15-line-976">976</a>
<a name="sunlight-15-line-977" href="#sunlight-15-line-977">977</a>
<a name="sunlight-15-line-978" href="#sunlight-15-line-978">978</a>
<a name="sunlight-15-line-979" href="#sunlight-15-line-979">979</a>
<a name="sunlight-15-line-980" href="#sunlight-15-line-980">980</a>
<a name="sunlight-15-line-981" href="#sunlight-15-line-981">981</a>
<a name="sunlight-15-line-982" href="#sunlight-15-line-982">982</a>
<a name="sunlight-15-line-983" href="#sunlight-15-line-983">983</a>
<a name="sunlight-15-line-984" href="#sunlight-15-line-984">984</a>
<a name="sunlight-15-line-985" href="#sunlight-15-line-985">985</a>
<a name="sunlight-15-line-986" href="#sunlight-15-line-986">986</a>
<a name="sunlight-15-line-987" href="#sunlight-15-line-987">987</a>
<a name="sunlight-15-line-988" href="#sunlight-15-line-988">988</a>
<a name="sunlight-15-line-989" href="#sunlight-15-line-989">989</a>
<a name="sunlight-15-line-990" href="#sunlight-15-line-990">990</a>
<a name="sunlight-15-line-991" href="#sunlight-15-line-991">991</a>
</div><pre class="sunlight-highlight-haskell sunlight-highlighted"><span class="sunlight-haskell"><span class="sunlight-comment">-----------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;|</span>
<span class="sunlight-comment">--&nbsp;Module&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;Text.PrettyPrint.HughesPJ</span>
<span class="sunlight-comment">--&nbsp;Copyright&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;(c)&nbsp;The&nbsp;University&nbsp;of&nbsp;Glasgow&nbsp;2001</span>
<span class="sunlight-comment">--&nbsp;License&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;BSD-style&nbsp;(see&nbsp;the&nbsp;file&nbsp;libraries/base/LICENSE)</span>
<span class="sunlight-comment">--&nbsp;</span>
<span class="sunlight-comment">--&nbsp;Maintainer&nbsp;&nbsp;:&nbsp;&nbsp;libraries@haskell.org</span>
<span class="sunlight-comment">--&nbsp;Stability&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;provisional</span>
<span class="sunlight-comment">--&nbsp;Portability&nbsp;:&nbsp;&nbsp;portable</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;John&nbsp;Hughes's&nbsp;and&nbsp;Simon&nbsp;Peyton&nbsp;Jones's&nbsp;Pretty&nbsp;Printer&nbsp;Combinators</span>
<span class="sunlight-comment">--&nbsp;</span>
<span class="sunlight-comment">--&nbsp;Based&nbsp;on&nbsp;/The&nbsp;Design&nbsp;of&nbsp;a&nbsp;Pretty-printing&nbsp;Library/</span>
<span class="sunlight-comment">--&nbsp;in&nbsp;Advanced&nbsp;Functional&nbsp;Programming,</span>
<span class="sunlight-comment">--&nbsp;Johan&nbsp;Jeuring&nbsp;and&nbsp;Erik&nbsp;Meijer&nbsp;(eds),&nbsp;LNCS&nbsp;925</span>
<span class="sunlight-comment">--&nbsp;&lt;http://www.cs.chalmers.se/~rjmh/Papers/pretty.ps&gt;</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;Heavily&nbsp;modified&nbsp;by&nbsp;Simon&nbsp;Peyton&nbsp;Jones,&nbsp;Dec&nbsp;96</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">-----------------------------------------------------------------------------</span>

<span class="sunlight-comment">{-
Version&nbsp;3.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28&nbsp;May&nbsp;1997
&nbsp;&nbsp;*&nbsp;Cured&nbsp;massive&nbsp;performance&nbsp;bug.&nbsp;&nbsp;If&nbsp;you&nbsp;write

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foldl&nbsp;&lt;&gt;&nbsp;empty&nbsp;(map&nbsp;(text.show)&nbsp;[1..10000])

&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;get&nbsp;quadratic&nbsp;behaviour&nbsp;with&nbsp;V2.0.&nbsp;&nbsp;Why?&nbsp;&nbsp;For&nbsp;just&nbsp;the&nbsp;same
&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;as&nbsp;you&nbsp;get&nbsp;quadratic&nbsp;behaviour&nbsp;with&nbsp;left-associated&nbsp;(++)
&nbsp;&nbsp;&nbsp;&nbsp;chains.

&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;really&nbsp;bad&nbsp;news.&nbsp;&nbsp;One&nbsp;thing&nbsp;a&nbsp;pretty-printer&nbsp;abstraction
&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;certainly&nbsp;guarantee&nbsp;is&nbsp;insensivity&nbsp;to&nbsp;associativity.&nbsp;&nbsp;It
&nbsp;&nbsp;&nbsp;&nbsp;matters:&nbsp;suddenly&nbsp;GHC's&nbsp;compilation&nbsp;times&nbsp;went&nbsp;up&nbsp;by&nbsp;a&nbsp;factor&nbsp;of
&nbsp;&nbsp;&nbsp;&nbsp;100&nbsp;when&nbsp;I&nbsp;switched&nbsp;to&nbsp;the&nbsp;new&nbsp;pretty&nbsp;printer.

&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;fixed&nbsp;it&nbsp;with&nbsp;a&nbsp;bit&nbsp;of&nbsp;a&nbsp;hack&nbsp;(because&nbsp;I&nbsp;wanted&nbsp;to&nbsp;get&nbsp;GHC&nbsp;back
&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;the&nbsp;road).&nbsp;&nbsp;I&nbsp;added&nbsp;two&nbsp;new&nbsp;constructors&nbsp;to&nbsp;the&nbsp;Doc&nbsp;type,&nbsp;Above
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Beside:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&gt;&nbsp;=&nbsp;Beside
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$&nbsp;=&nbsp;Above

&nbsp;&nbsp;&nbsp;&nbsp;Then,&nbsp;where&nbsp;I&nbsp;need&nbsp;to&nbsp;get&nbsp;to&nbsp;a&nbsp;"TextBeside"&nbsp;or&nbsp;"NilAbove"&nbsp;form&nbsp;I
&nbsp;&nbsp;&nbsp;&nbsp;"force"&nbsp;the&nbsp;Doc&nbsp;to&nbsp;squeeze&nbsp;out&nbsp;these&nbsp;suspended&nbsp;calls&nbsp;to&nbsp;Beside&nbsp;and
&nbsp;&nbsp;&nbsp;&nbsp;Above;&nbsp;but&nbsp;in&nbsp;so&nbsp;doing&nbsp;I&nbsp;re-associate.&nbsp;It's&nbsp;quite&nbsp;simple,&nbsp;but&nbsp;I'm
&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;satisfied&nbsp;that&nbsp;I've&nbsp;done&nbsp;the&nbsp;best&nbsp;possible&nbsp;job.&nbsp;&nbsp;I'll&nbsp;send&nbsp;you
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;code&nbsp;if&nbsp;you&nbsp;are&nbsp;interested.

&nbsp;&nbsp;*&nbsp;Added&nbsp;new&nbsp;exports:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;punctuate,&nbsp;hang
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int,&nbsp;integer,&nbsp;float,&nbsp;double,&nbsp;rational,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lparen,&nbsp;rparen,&nbsp;lbrack,&nbsp;rbrack,&nbsp;lbrace,&nbsp;rbrace,

&nbsp;&nbsp;*&nbsp;fullRender's&nbsp;type&nbsp;signature&nbsp;has&nbsp;changed.&nbsp;&nbsp;Rather&nbsp;than&nbsp;producing&nbsp;a
&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;it&nbsp;now&nbsp;takes&nbsp;an&nbsp;extra&nbsp;couple&nbsp;of&nbsp;arguments&nbsp;that&nbsp;tells&nbsp;it&nbsp;how
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;glue&nbsp;fragments&nbsp;of&nbsp;output&nbsp;together:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fullRender&nbsp;::&nbsp;Mode
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Line&nbsp;length
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Ribbons&nbsp;per&nbsp;line
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;(TextDetails&nbsp;-&gt;&nbsp;a&nbsp;-&gt;&nbsp;a)&nbsp;&nbsp;&nbsp;--&nbsp;What&nbsp;to&nbsp;do&nbsp;with&nbsp;text
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;What&nbsp;to&nbsp;do&nbsp;at&nbsp;the&nbsp;end
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Doc
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Result

&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;"fragments"&nbsp;are&nbsp;encapsulated&nbsp;in&nbsp;the&nbsp;TextDetails&nbsp;data&nbsp;type:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;TextDetails&nbsp;=&nbsp;Chr&nbsp;&nbsp;Char
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Str&nbsp;&nbsp;String
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;PStr&nbsp;FAST_STRING

&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;Chr&nbsp;and&nbsp;Str&nbsp;constructors&nbsp;are&nbsp;obvious&nbsp;enough.&nbsp;&nbsp;The&nbsp;PStr
&nbsp;&nbsp;&nbsp;&nbsp;constructor&nbsp;has&nbsp;a&nbsp;packed&nbsp;string&nbsp;(FAST_STRING)&nbsp;inside&nbsp;it.&nbsp;&nbsp;It's
&nbsp;&nbsp;&nbsp;&nbsp;generated&nbsp;by&nbsp;using&nbsp;the&nbsp;new&nbsp;"ptext"&nbsp;export.

&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;advantage&nbsp;of&nbsp;this&nbsp;new&nbsp;setup&nbsp;is&nbsp;that&nbsp;you&nbsp;can&nbsp;get&nbsp;the&nbsp;renderer&nbsp;to
&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;output&nbsp;directly&nbsp;(by&nbsp;passing&nbsp;in&nbsp;a&nbsp;function&nbsp;of&nbsp;type&nbsp;(TextDetails
&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;IO&nbsp;()&nbsp;-&gt;&nbsp;IO&nbsp;()),&nbsp;rather&nbsp;than&nbsp;producing&nbsp;a&nbsp;string&nbsp;that&nbsp;you&nbsp;then
&nbsp;&nbsp;&nbsp;&nbsp;print.


Version&nbsp;2.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;April&nbsp;1997
&nbsp;&nbsp;*&nbsp;Made&nbsp;empty&nbsp;into&nbsp;a&nbsp;left&nbsp;unit&nbsp;for&nbsp;&lt;&gt;&nbsp;as&nbsp;well&nbsp;as&nbsp;a&nbsp;right&nbsp;unit;
&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;also&nbsp;now&nbsp;true&nbsp;that
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;k&nbsp;empty&nbsp;=&nbsp;empty
&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;wasn't&nbsp;true&nbsp;before.

&nbsp;&nbsp;*&nbsp;Fixed&nbsp;an&nbsp;obscure&nbsp;bug&nbsp;in&nbsp;sep&nbsp;that&nbsp;occassionally&nbsp;gave&nbsp;very&nbsp;weird&nbsp;behaviour

&nbsp;&nbsp;*&nbsp;Added&nbsp;$+$

&nbsp;&nbsp;*&nbsp;Corrected&nbsp;and&nbsp;tidied&nbsp;up&nbsp;the&nbsp;laws&nbsp;and&nbsp;invariants

======================================================================
Relative&nbsp;to&nbsp;John's&nbsp;original&nbsp;paper,&nbsp;there&nbsp;are&nbsp;the&nbsp;following&nbsp;new&nbsp;features:

1.&nbsp;&nbsp;There's&nbsp;an&nbsp;empty&nbsp;document,&nbsp;"empty".&nbsp;&nbsp;It's&nbsp;a&nbsp;left&nbsp;and&nbsp;right&nbsp;unit&nbsp;for&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;both&nbsp;&lt;&gt;&nbsp;and&nbsp;$$,&nbsp;and&nbsp;anywhere&nbsp;in&nbsp;the&nbsp;argument&nbsp;list&nbsp;for
&nbsp;&nbsp;&nbsp;&nbsp;sep,&nbsp;hcat,&nbsp;hsep,&nbsp;vcat,&nbsp;fcat&nbsp;etc.

&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;Really&nbsp;Useful&nbsp;in&nbsp;practice.

2.&nbsp;&nbsp;There&nbsp;is&nbsp;a&nbsp;paragraph-fill&nbsp;combinator,&nbsp;fsep,&nbsp;that's&nbsp;much&nbsp;like&nbsp;sep,
&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;it&nbsp;keeps&nbsp;fitting&nbsp;things&nbsp;on&nbsp;one&nbsp;line&nbsp;until&nbsp;it&nbsp;can't&nbsp;fit&nbsp;any&nbsp;more.

3.&nbsp;&nbsp;Some&nbsp;random&nbsp;useful&nbsp;extra&nbsp;combinators&nbsp;are&nbsp;provided.&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;+&gt;&nbsp;puts&nbsp;its&nbsp;arguments&nbsp;beside&nbsp;each&nbsp;other&nbsp;with&nbsp;a&nbsp;space&nbsp;between&nbsp;them,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless&nbsp;either&nbsp;argument&nbsp;is&nbsp;empty&nbsp;in&nbsp;which&nbsp;case&nbsp;it&nbsp;returns&nbsp;the&nbsp;other


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hcat&nbsp;is&nbsp;a&nbsp;list&nbsp;version&nbsp;of&nbsp;&lt;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hsep&nbsp;is&nbsp;a&nbsp;list&nbsp;version&nbsp;of&nbsp;&lt;+&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vcat&nbsp;is&nbsp;a&nbsp;list&nbsp;version&nbsp;of&nbsp;$$

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sep&nbsp;(separate)&nbsp;is&nbsp;either&nbsp;like&nbsp;hsep&nbsp;or&nbsp;like&nbsp;vcat,&nbsp;depending&nbsp;on&nbsp;what&nbsp;fits

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;&nbsp;behaves&nbsp;like&nbsp;sep,&nbsp;&nbsp;but&nbsp;it&nbsp;uses&nbsp;&lt;&gt;&nbsp;for&nbsp;horizontal&nbsp;conposition
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fcat&nbsp;behaves&nbsp;like&nbsp;fsep,&nbsp;but&nbsp;it&nbsp;uses&nbsp;&lt;&gt;&nbsp;for&nbsp;horizontal&nbsp;conposition

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;new&nbsp;ones&nbsp;do&nbsp;the&nbsp;obvious&nbsp;things:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char,&nbsp;semi,&nbsp;comma,&nbsp;colon,&nbsp;space,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parens,&nbsp;brackets,&nbsp;braces,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quotes,&nbsp;doubleQuotes

4.&nbsp;&nbsp;The&nbsp;"above"&nbsp;combinator,&nbsp;$$,&nbsp;now&nbsp;overlaps&nbsp;its&nbsp;two&nbsp;arguments&nbsp;if&nbsp;the
&nbsp;&nbsp;&nbsp;&nbsp;last&nbsp;line&nbsp;of&nbsp;the&nbsp;top&nbsp;argument&nbsp;stops&nbsp;before&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;the
&nbsp;&nbsp;&nbsp;&nbsp;second&nbsp;begins.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;example:&nbsp;&nbsp;text&nbsp;"hi"&nbsp;$$&nbsp;nest&nbsp;5&nbsp;(text&nbsp;"there")
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lays&nbsp;out&nbsp;as
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hi&nbsp;&nbsp;&nbsp;there
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rather&nbsp;than
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hi
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;are&nbsp;two&nbsp;places&nbsp;this&nbsp;is&nbsp;really&nbsp;useful

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a)&nbsp;When&nbsp;making&nbsp;labelled&nbsp;blocks,&nbsp;like&nbsp;this:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Left&nbsp;-&gt;&nbsp;&nbsp;&nbsp;code&nbsp;for&nbsp;left
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Right&nbsp;-&gt;&nbsp;&nbsp;code&nbsp;for&nbsp;right
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongLongLongLabel&nbsp;-&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;for&nbsp;longlonglonglabel
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;block&nbsp;is&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;label&nbsp;if&nbsp;the&nbsp;label&nbsp;is
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;short,&nbsp;but&nbsp;on&nbsp;the&nbsp;next&nbsp;line&nbsp;otherwise.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b)&nbsp;When&nbsp;laying&nbsp;out&nbsp;lists&nbsp;like&nbsp;this:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;first
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;second
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;third
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;some&nbsp;people&nbsp;like.&nbsp;&nbsp;But&nbsp;if&nbsp;the&nbsp;list&nbsp;fits&nbsp;on&nbsp;one&nbsp;line
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;want&nbsp;[first,&nbsp;second,&nbsp;third].&nbsp;&nbsp;You&nbsp;can't&nbsp;do&nbsp;this&nbsp;with
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;John's&nbsp;original&nbsp;combinators,&nbsp;but&nbsp;it's&nbsp;quite&nbsp;easy&nbsp;with&nbsp;the
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;$$.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;combinator&nbsp;$+$&nbsp;gives&nbsp;the&nbsp;original&nbsp;"never-overlap"&nbsp;behaviour.

5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Several&nbsp;different&nbsp;renderers&nbsp;are&nbsp;provided:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;standard&nbsp;one
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;one&nbsp;that&nbsp;uses&nbsp;cut-marks&nbsp;to&nbsp;avoid&nbsp;deeply-nested&nbsp;documents&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simply&nbsp;piling&nbsp;up&nbsp;in&nbsp;the&nbsp;right-hand&nbsp;margin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;one&nbsp;that&nbsp;ignores&nbsp;indentation&nbsp;(fewer&nbsp;chars&nbsp;output;&nbsp;good&nbsp;for&nbsp;machines)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;one&nbsp;that&nbsp;ignores&nbsp;indentation&nbsp;and&nbsp;newlines&nbsp;(ditto,&nbsp;only&nbsp;more&nbsp;so)

6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Numerous&nbsp;implementation&nbsp;tidy-ups
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use&nbsp;of&nbsp;unboxed&nbsp;data&nbsp;types&nbsp;to&nbsp;speed&nbsp;up&nbsp;the&nbsp;implementation
-}</span>

<span class="sunlight-keyword">module</span>&nbsp;<span class="sunlight-ident">Text</span><span class="sunlight-operator">.</span><span class="sunlight-ident">PrettyPrint</span><span class="sunlight-operator">.</span><span class="sunlight-ident">HughesPJ</span>&nbsp;<span class="sunlight-punctuation">(</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;*&nbsp;The&nbsp;document&nbsp;type</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Abstract</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;*&nbsp;Constructing&nbsp;documents</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;Converting&nbsp;values&nbsp;into&nbsp;documents</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">char</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">text</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ptext</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">integer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">float</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">double</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">rational</span><span class="sunlight-punctuation">,</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;Simple&nbsp;derived&nbsp;documents</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">semi</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">comma</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">colon</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">space</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">equals</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">lparen</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">rparen</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">lbrack</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">rbrack</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">lbrace</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">rbrace</span><span class="sunlight-punctuation">,</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;Wrapping&nbsp;documents&nbsp;in&nbsp;delimiters</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">parens</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">brackets</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">braces</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">quotes</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">doubleQuotes</span><span class="sunlight-punctuation">,</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;Combining&nbsp;documents</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">empty</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">+</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">hcat</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">hsep</span><span class="sunlight-punctuation">,</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">$</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">vcat</span><span class="sunlight-punctuation">,</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">sep</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">cat</span><span class="sunlight-punctuation">,</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">fsep</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">fcat</span><span class="sunlight-punctuation">,</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">nest</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">hang</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">punctuate</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;*&nbsp;Predicates&nbsp;on&nbsp;documents</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">isEmpty</span><span class="sunlight-punctuation">,</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;*&nbsp;Rendering&nbsp;documents</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;Default&nbsp;rendering</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">render</span><span class="sunlight-punctuation">,</span>&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;Rendering&nbsp;with&nbsp;a&nbsp;particular&nbsp;style</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Style</span><span class="sunlight-punctuation">(</span><span class="sunlight-operator">..</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">style</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">renderStyle</span><span class="sunlight-punctuation">,</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;**&nbsp;General&nbsp;rendering</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">fullRender</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Mode</span><span class="sunlight-punctuation">(</span><span class="sunlight-operator">..</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">TextDetails</span><span class="sunlight-punctuation">(</span><span class="sunlight-operator">..</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>

&nbsp;&nbsp;<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">where</span>


<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">Prelude</span>

<span class="sunlight-keyword">infixl</span>&nbsp;<span class="sunlight-number">6</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;
<span class="sunlight-keyword">infixl</span>&nbsp;<span class="sunlight-number">6</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">+</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-keyword">infixl</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-punctuation">$</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">$</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;The&nbsp;interface</span>

<span class="sunlight-comment">--&nbsp;The&nbsp;primitive&nbsp;Doc&nbsp;values</span>

<span class="sunlight-named-ident">isEmpty</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Returns&nbsp;'True'&nbsp;if&nbsp;the&nbsp;document&nbsp;is&nbsp;empty</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;The&nbsp;empty&nbsp;document,&nbsp;with&nbsp;no&nbsp;height&nbsp;and&nbsp;no&nbsp;width.</span>
<span class="sunlight-comment">--&nbsp;'empty'&nbsp;is&nbsp;the&nbsp;identity&nbsp;for&nbsp;'&lt;&gt;',&nbsp;'&lt;+&gt;',&nbsp;'$$'&nbsp;and&nbsp;'$+$',&nbsp;and&nbsp;anywhere</span>
<span class="sunlight-comment">--&nbsp;in&nbsp;the&nbsp;argument&nbsp;list&nbsp;for&nbsp;'sep',&nbsp;'hcat',&nbsp;'hsep',&nbsp;'vcat',&nbsp;'fcat'&nbsp;etc.</span>
<span class="sunlight-named-ident">empty</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-named-ident">semi</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;';'&nbsp;character</span>
<span class="sunlight-named-ident">comma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;','&nbsp;character</span>
<span class="sunlight-named-ident">colon</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;':'&nbsp;character</span>
<span class="sunlight-named-ident">space</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;space&nbsp;character</span>
<span class="sunlight-named-ident">equals</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;'='&nbsp;character</span>
<span class="sunlight-named-ident">lparen</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;'('&nbsp;character</span>
<span class="sunlight-named-ident">rparen</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;')'&nbsp;character</span>
<span class="sunlight-named-ident">lbrack</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;'['&nbsp;character</span>
<span class="sunlight-named-ident">rbrack</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;']'&nbsp;character</span>
<span class="sunlight-named-ident">lbrace</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;'{'&nbsp;character</span>
<span class="sunlight-named-ident">rbrace</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;A&nbsp;'}'&nbsp;character</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;A&nbsp;document&nbsp;of&nbsp;height&nbsp;and&nbsp;width&nbsp;1,&nbsp;containing&nbsp;a&nbsp;literal&nbsp;character.</span>
<span class="sunlight-named-ident">char</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Char</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;A&nbsp;document&nbsp;of&nbsp;height&nbsp;1&nbsp;containing&nbsp;a&nbsp;literal&nbsp;string.</span>
<span class="sunlight-comment">--&nbsp;'text'&nbsp;satisfies&nbsp;the&nbsp;following&nbsp;laws:</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'text'&nbsp;s&nbsp;'&lt;&gt;'&nbsp;'text'&nbsp;t&nbsp;=&nbsp;'text'&nbsp;(s'++'t)@</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'text'&nbsp;\"\"&nbsp;'&lt;&gt;'&nbsp;x&nbsp;=&nbsp;x@,&nbsp;if&nbsp;@x@&nbsp;non-empty</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;The&nbsp;side&nbsp;condition&nbsp;on&nbsp;the&nbsp;last&nbsp;law&nbsp;is&nbsp;necessary&nbsp;because&nbsp;@'text'&nbsp;\"\"@</span>
<span class="sunlight-comment">--&nbsp;has&nbsp;height&nbsp;1,&nbsp;while&nbsp;'empty'&nbsp;has&nbsp;no&nbsp;height.</span>
<span class="sunlight-named-ident">text</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">String</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;An&nbsp;obsolete&nbsp;function,&nbsp;now&nbsp;identical&nbsp;to&nbsp;'text'.</span>
<span class="sunlight-named-ident">ptext</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">String</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-named-ident">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;@int&nbsp;n&nbsp;=&nbsp;text&nbsp;(show&nbsp;n)@</span>
<span class="sunlight-named-ident">integer</span>&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Integer</span>&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;@integer&nbsp;n&nbsp;=&nbsp;text&nbsp;(show&nbsp;n)@</span>
<span class="sunlight-named-ident">float</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Float</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;@float&nbsp;n&nbsp;=&nbsp;text&nbsp;(show&nbsp;n)@</span>
<span class="sunlight-named-ident">double</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Double</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;@double&nbsp;n&nbsp;=&nbsp;text&nbsp;(show&nbsp;n)@</span>
<span class="sunlight-named-ident">rational</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">Rational</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;@rational&nbsp;n&nbsp;=&nbsp;text&nbsp;(show&nbsp;n)@</span>

<span class="sunlight-named-ident">parens</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Wrap&nbsp;document&nbsp;in&nbsp;@(...)@</span>
<span class="sunlight-named-ident">brackets</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Wrap&nbsp;document&nbsp;in&nbsp;@[...]@</span>
<span class="sunlight-named-ident">braces</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Wrap&nbsp;document&nbsp;in&nbsp;@{...}@</span>
<span class="sunlight-named-ident">quotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Wrap&nbsp;document&nbsp;in&nbsp;@\'...\'@</span>
<span class="sunlight-named-ident">doubleQuotes</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Wrap&nbsp;document&nbsp;in&nbsp;@\"...\"@</span>

<span class="sunlight-comment">--&nbsp;Combining&nbsp;@Doc@&nbsp;values</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Beside.</span>
<span class="sunlight-comment">--&nbsp;'&lt;&gt;'&nbsp;is&nbsp;associative,&nbsp;with&nbsp;identity&nbsp;'empty'.</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Beside,&nbsp;separated&nbsp;by&nbsp;space,&nbsp;unless&nbsp;one&nbsp;of&nbsp;the&nbsp;arguments&nbsp;is&nbsp;'empty'.</span>
<span class="sunlight-comment">--&nbsp;'&lt;+&gt;'&nbsp;is&nbsp;associative,&nbsp;with&nbsp;identity&nbsp;'empty'.</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">+</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Above,&nbsp;except&nbsp;that&nbsp;if&nbsp;the&nbsp;last&nbsp;line&nbsp;of&nbsp;the&nbsp;first&nbsp;argument&nbsp;stops</span>
<span class="sunlight-comment">--&nbsp;at&nbsp;least&nbsp;one&nbsp;position&nbsp;before&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;the&nbsp;second&nbsp;begins,</span>
<span class="sunlight-comment">--&nbsp;these&nbsp;two&nbsp;lines&nbsp;are&nbsp;overlapped.&nbsp;&nbsp;For&nbsp;example:</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;"hi"&nbsp;$$&nbsp;nest&nbsp;5&nbsp;(text&nbsp;"there")</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;lays&nbsp;out&nbsp;as</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;hi&nbsp;&nbsp;&nbsp;there</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;rather&nbsp;than</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;hi</span>
<span class="sunlight-comment">--&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;'$$'&nbsp;is&nbsp;associative,&nbsp;with&nbsp;identity&nbsp;'empty',&nbsp;and&nbsp;also&nbsp;satisfies</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@(x&nbsp;'$$'&nbsp;y)&nbsp;'&lt;&gt;'&nbsp;z&nbsp;=&nbsp;x&nbsp;'$$'&nbsp;(y&nbsp;'&lt;&gt;'&nbsp;z)@,&nbsp;if&nbsp;@y@&nbsp;non-empty.</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Above,&nbsp;with&nbsp;no&nbsp;overlapping.</span>
<span class="sunlight-comment">--&nbsp;'$+$'&nbsp;is&nbsp;associative,&nbsp;with&nbsp;identity&nbsp;'empty'.</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">$</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-named-ident">hcat</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^List&nbsp;version&nbsp;of&nbsp;'&lt;&gt;'.</span>
<span class="sunlight-named-ident">hsep</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^List&nbsp;version&nbsp;of&nbsp;'&lt;+&gt;'.</span>
<span class="sunlight-named-ident">vcat</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^List&nbsp;version&nbsp;of&nbsp;'$$'.</span>

<span class="sunlight-named-ident">cat</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Either&nbsp;'hcat'&nbsp;or&nbsp;'vcat'.</span>
<span class="sunlight-named-ident">sep</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Either&nbsp;'hsep'&nbsp;or&nbsp;'vcat'.</span>
<span class="sunlight-named-ident">fcat</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;\"Paragraph&nbsp;fill\"&nbsp;version&nbsp;of&nbsp;'cat'.</span>
<span class="sunlight-named-ident">fsep</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;\"Paragraph&nbsp;fill\"&nbsp;version&nbsp;of&nbsp;'sep'.</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Nest&nbsp;(or&nbsp;indent)&nbsp;a&nbsp;document&nbsp;by&nbsp;a&nbsp;given&nbsp;number&nbsp;of&nbsp;positions</span>
<span class="sunlight-comment">--&nbsp;(which&nbsp;may&nbsp;also&nbsp;be&nbsp;negative).&nbsp;&nbsp;'nest'&nbsp;satisfies&nbsp;the&nbsp;laws:</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'nest'&nbsp;0&nbsp;x&nbsp;=&nbsp;x@</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'nest'&nbsp;k&nbsp;('nest'&nbsp;k'&nbsp;x)&nbsp;=&nbsp;'nest'&nbsp;(k+k')&nbsp;x@</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'nest'&nbsp;k&nbsp;(x&nbsp;'&lt;&gt;'&nbsp;y)&nbsp;=&nbsp;'nest'&nbsp;k&nbsp;z&nbsp;'&lt;&gt;'&nbsp;'nest'&nbsp;k&nbsp;y@</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'nest'&nbsp;k&nbsp;(x&nbsp;'$$'&nbsp;y)&nbsp;=&nbsp;'nest'&nbsp;k&nbsp;x&nbsp;'$$'&nbsp;'nest'&nbsp;k&nbsp;y@</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@'nest'&nbsp;k&nbsp;'empty'&nbsp;=&nbsp;'empty'@</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;*&nbsp;@x&nbsp;'&lt;&gt;'&nbsp;'nest'&nbsp;k&nbsp;y&nbsp;=&nbsp;x&nbsp;'&lt;&gt;'&nbsp;y@,&nbsp;if&nbsp;@x@&nbsp;non-empty</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;The&nbsp;side&nbsp;condition&nbsp;on&nbsp;the&nbsp;last&nbsp;law&nbsp;is&nbsp;needed&nbsp;because</span>
<span class="sunlight-comment">--&nbsp;'empty'&nbsp;is&nbsp;a&nbsp;left&nbsp;identity&nbsp;for&nbsp;'&lt;&gt;'.</span>
<span class="sunlight-named-ident">nest</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;GHC-specific&nbsp;ones.</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;@hang&nbsp;d1&nbsp;n&nbsp;d2&nbsp;=&nbsp;sep&nbsp;[d1,&nbsp;nest&nbsp;n&nbsp;d2]@</span>
<span class="sunlight-named-ident">hang</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;@punctuate&nbsp;p&nbsp;[d1,&nbsp;...&nbsp;dn]&nbsp;=&nbsp;[d1&nbsp;\&lt;&gt;&nbsp;p,&nbsp;d2&nbsp;\&lt;&gt;&nbsp;p,&nbsp;...&nbsp;dn-1&nbsp;\&lt;&gt;&nbsp;p,&nbsp;dn]@</span>
<span class="sunlight-named-ident">punctuate</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>


<span class="sunlight-comment">--&nbsp;Displaying&nbsp;@Doc@&nbsp;values.&nbsp;</span>

<span class="sunlight-keyword">instance</span>&nbsp;<span class="sunlight-class">Show</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;<span class="sunlight-function">showsPrec</span>&nbsp;<span class="sunlight-ident">prec</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-ident">cont</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">showDoc</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-ident">cont</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Renders&nbsp;the&nbsp;document&nbsp;as&nbsp;a&nbsp;string&nbsp;using&nbsp;the&nbsp;default&nbsp;'style'.</span>
<span class="sunlight-named-ident">render</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">String</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;The&nbsp;general&nbsp;rendering&nbsp;interface.</span>
<span class="sunlight-named-ident">fullRender</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^Rendering&nbsp;mode</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^Line&nbsp;length</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Float</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^Ribbons&nbsp;per&nbsp;line</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">TextDetails</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^What&nbsp;to&nbsp;do&nbsp;with&nbsp;text</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^What&nbsp;to&nbsp;do&nbsp;at&nbsp;the&nbsp;end</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^The&nbsp;document</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^Result</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Render&nbsp;the&nbsp;document&nbsp;as&nbsp;a&nbsp;string&nbsp;using&nbsp;a&nbsp;specified&nbsp;style.</span>
<span class="sunlight-named-ident">renderStyle</span>&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Style</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">String</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;A&nbsp;rendering&nbsp;style.</span>
<span class="sunlight-keyword">data</span>&nbsp;<span class="sunlight-named-ident">Style</span>
&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Style</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;The&nbsp;rendering&nbsp;mode</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">lineLength</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Length&nbsp;of&nbsp;line,&nbsp;in&nbsp;chars</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">ribbonsPerLine</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Float</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^&nbsp;Ratio&nbsp;of&nbsp;ribbon&nbsp;length&nbsp;to&nbsp;line&nbsp;length</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;The&nbsp;default&nbsp;style&nbsp;(@mode=PageMode,&nbsp;lineLength=100,&nbsp;ribbonsPerLine=1.5@).</span>
<span class="sunlight-named-ident">style</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Style</span>
<span class="sunlight-named-ident">style</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Style</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">lineLength</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">ribbonsPerLine</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1.5</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">PageMode</span>&nbsp;<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;Rendering&nbsp;mode.</span>
<span class="sunlight-keyword">data</span>&nbsp;<span class="sunlight-named-ident">Mode</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">PageMode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^Normal&nbsp;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">ZigZagMode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^With&nbsp;zig-zag&nbsp;cuts</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">LeftMode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^No&nbsp;indentation,&nbsp;infinitely&nbsp;long&nbsp;lines</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">OneLineMode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;^All&nbsp;on&nbsp;one&nbsp;line</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;The&nbsp;Doc&nbsp;calculus</span>

<span class="sunlight-comment">--&nbsp;The&nbsp;Doc&nbsp;combinators&nbsp;satisfy&nbsp;the&nbsp;following&nbsp;laws:</span>

<span class="sunlight-comment">{-
Laws&nbsp;for&nbsp;$$
~~~~~~~~~~~
&lt;a1&gt;&nbsp;&nbsp;&nbsp;&nbsp;(x&nbsp;$$&nbsp;y)&nbsp;$$&nbsp;z&nbsp;&nbsp;&nbsp;=&nbsp;x&nbsp;$$&nbsp;(y&nbsp;$$&nbsp;z)
&lt;a2&gt;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;$$&nbsp;x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;x
&lt;a3&gt;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;$$&nbsp;empty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;x

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...ditto&nbsp;$+$...

Laws&nbsp;for&nbsp;&lt;&gt;
~~~~~~~~~~~
&lt;b1&gt;&nbsp;&nbsp;&nbsp;&nbsp;(x&nbsp;&lt;&gt;&nbsp;y)&nbsp;&lt;&gt;&nbsp;z&nbsp;&nbsp;&nbsp;=&nbsp;x&nbsp;&lt;&gt;&nbsp;(y&nbsp;&lt;&gt;&nbsp;z)
&lt;b2&gt;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;&lt;&gt;&nbsp;x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;empty
&lt;b3&gt;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&lt;&gt;&nbsp;empty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;x

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...ditto&nbsp;&lt;+&gt;...

Laws&nbsp;for&nbsp;text
~~~~~~~~~~~~~
&lt;t1&gt;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;text&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;text&nbsp;(s++t)
&lt;t2&gt;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;""&nbsp;&lt;&gt;&nbsp;x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;x,&nbsp;if&nbsp;x&nbsp;non-empty

Laws&nbsp;for&nbsp;nest
~~~~~~~~~~~~~
&lt;n1&gt;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;0&nbsp;x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;x
&lt;n2&gt;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;k&nbsp;(nest&nbsp;k'&nbsp;x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;nest&nbsp;(k+k')&nbsp;x
&lt;n3&gt;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;k&nbsp;(x&nbsp;&lt;&gt;&nbsp;y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;nest&nbsp;k&nbsp;z&nbsp;&lt;&gt;&nbsp;nest&nbsp;k&nbsp;y
&lt;n4&gt;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;k&nbsp;(x&nbsp;$$&nbsp;y)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;nest&nbsp;k&nbsp;x&nbsp;$$&nbsp;nest&nbsp;k&nbsp;y
&lt;n5&gt;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;k&nbsp;empty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;empty
&lt;n6&gt;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&lt;&gt;&nbsp;nest&nbsp;k&nbsp;y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;x&nbsp;&lt;&gt;&nbsp;y,&nbsp;if&nbsp;x&nbsp;non-empty

**&nbsp;Note&nbsp;the&nbsp;side&nbsp;condition&nbsp;on&nbsp;&lt;n6&gt;!&nbsp;&nbsp;It&nbsp;is&nbsp;this&nbsp;that
**&nbsp;makes&nbsp;it&nbsp;OK&nbsp;for&nbsp;empty&nbsp;to&nbsp;be&nbsp;a&nbsp;left&nbsp;unit&nbsp;for&nbsp;&lt;&gt;.

Miscellaneous
~~~~~~~~~~~~~
&lt;m1&gt;&nbsp;&nbsp;&nbsp;&nbsp;(text&nbsp;s&nbsp;&lt;&gt;&nbsp;x)&nbsp;$$&nbsp;y&nbsp;=&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;((text&nbsp;""&nbsp;&lt;&gt;&nbsp;x))&nbsp;$$&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;(-length&nbsp;s)&nbsp;y)

&lt;m2&gt;&nbsp;&nbsp;&nbsp;&nbsp;(x&nbsp;$$&nbsp;y)&nbsp;&lt;&gt;&nbsp;z&nbsp;=&nbsp;x&nbsp;$$&nbsp;(y&nbsp;&lt;&gt;&nbsp;z)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;y&nbsp;non-empty


Laws&nbsp;for&nbsp;list&nbsp;versions
~~~~~~~~~~~~~~~~~~~~~~
&lt;l1&gt;&nbsp;&nbsp;&nbsp;&nbsp;sep&nbsp;(ps++[empty]++qs)&nbsp;&nbsp;&nbsp;=&nbsp;sep&nbsp;(ps&nbsp;++&nbsp;qs)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...ditto&nbsp;hsep,&nbsp;hcat,&nbsp;vcat,&nbsp;fill...

&lt;l2&gt;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;k&nbsp;(sep&nbsp;ps)&nbsp;=&nbsp;sep&nbsp;(map&nbsp;(nest&nbsp;k)&nbsp;ps)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...ditto&nbsp;hsep,&nbsp;hcat,&nbsp;vcat,&nbsp;fill...

Laws&nbsp;for&nbsp;oneLiner
~~~~~~~~~~~~~~~~~
&lt;o1&gt;&nbsp;&nbsp;&nbsp;&nbsp;oneLiner&nbsp;(nest&nbsp;k&nbsp;p)&nbsp;=&nbsp;nest&nbsp;k&nbsp;(oneLiner&nbsp;p)
&lt;o2&gt;&nbsp;&nbsp;&nbsp;&nbsp;oneLiner&nbsp;(x&nbsp;&lt;&gt;&nbsp;y)&nbsp;&nbsp;&nbsp;=&nbsp;oneLiner&nbsp;x&nbsp;&lt;&gt;&nbsp;oneLiner&nbsp;y&nbsp;

You&nbsp;might&nbsp;think&nbsp;that&nbsp;the&nbsp;following&nbsp;verion&nbsp;of&nbsp;&lt;m1&gt;&nbsp;would
be&nbsp;neater:

&lt;3&nbsp;NO&gt;&nbsp;&nbsp;(text&nbsp;s&nbsp;&lt;&gt;&nbsp;x)&nbsp;$$&nbsp;y&nbsp;=&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;((empty&nbsp;&lt;&gt;&nbsp;x))&nbsp;$$&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nest&nbsp;(-length&nbsp;s)&nbsp;y)

But&nbsp;it&nbsp;doesn't&nbsp;work,&nbsp;for&nbsp;if&nbsp;x=empty,&nbsp;we&nbsp;would&nbsp;have

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;s&nbsp;$$&nbsp;y&nbsp;=&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;(empty&nbsp;$$&nbsp;nest&nbsp;(-length&nbsp;s)&nbsp;y)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;nest&nbsp;(-length&nbsp;s)&nbsp;y
-}</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;Simple&nbsp;derived&nbsp;definitions</span>

<span class="sunlight-named-ident">semi</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">';'</span>
<span class="sunlight-named-ident">colon</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">':'</span>
<span class="sunlight-named-ident">comma</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">','</span>
<span class="sunlight-named-ident">space</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'&nbsp;'</span>
<span class="sunlight-named-ident">equals</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'='</span>
<span class="sunlight-named-ident">lparen</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'('</span>
<span class="sunlight-named-ident">rparen</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">')'</span>
<span class="sunlight-named-ident">lbrack</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'['</span>
<span class="sunlight-named-ident">rbrack</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">']'</span>
<span class="sunlight-named-ident">lbrace</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'{'</span>
<span class="sunlight-named-ident">rbrace</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'}'</span>

<span class="sunlight-named-ident">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">show</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">integer</span>&nbsp;&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">show</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">float</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">show</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">double</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">show</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">rational</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">show</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-comment">--&nbsp;SIGBJORN&nbsp;wrote&nbsp;instead:</span>
<span class="sunlight-comment">--&nbsp;rational&nbsp;n&nbsp;=&nbsp;text&nbsp;(show&nbsp;(fromRationalX&nbsp;n))</span>

<span class="sunlight-named-ident">quotes</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'\''</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'\''</span>
<span class="sunlight-named-ident">doubleQuotes</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'"'</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'"'</span>
<span class="sunlight-named-ident">parens</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'('</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">')'</span>
<span class="sunlight-named-ident">brackets</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'['</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">']'</span>
<span class="sunlight-named-ident">braces</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'{'</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">char</span>&nbsp;<span class="sunlight-char">'}'</span>


<span class="sunlight-named-ident">hcat</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">foldr</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-named-ident">empty</span>
<span class="sunlight-named-ident">hsep</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">foldr</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">+</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-named-ident">empty</span>
<span class="sunlight-named-ident">vcat</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">foldr</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-named-ident">empty</span>

<span class="sunlight-named-ident">hang</span>&nbsp;<span class="sunlight-ident">d1</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">d2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">sep</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">d1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">nest</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">d2</span><span class="sunlight-punctuation">]</span>

<span class="sunlight-named-ident">punctuate</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>
<span class="sunlight-named-ident">punctuate</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">d</span><span class="sunlight-operator">:</span><span class="sunlight-ident">ds</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">go</span>&nbsp;<span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-ident">ds</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">go</span>&nbsp;<span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">d</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">go</span>&nbsp;<span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-operator">:</span><span class="sunlight-ident">es</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">go</span>&nbsp;<span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-ident">es</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;The&nbsp;Doc&nbsp;data&nbsp;type</span>

<span class="sunlight-comment">--&nbsp;A&nbsp;Doc&nbsp;represents&nbsp;a&nbsp;*set*&nbsp;of&nbsp;layouts.&nbsp;&nbsp;A&nbsp;Doc&nbsp;with</span>
<span class="sunlight-comment">--&nbsp;no&nbsp;occurrences&nbsp;of&nbsp;Union&nbsp;or&nbsp;NoDoc&nbsp;represents&nbsp;just&nbsp;one&nbsp;layout.</span>

<span class="sunlight-comment">--&nbsp;|&nbsp;The&nbsp;abstract&nbsp;type&nbsp;of&nbsp;documents.</span>
<span class="sunlight-comment">--&nbsp;The&nbsp;'Show'&nbsp;instance&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;using&nbsp;'render'.</span>
<span class="sunlight-keyword">data</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;empty</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;text&nbsp;""&nbsp;$$&nbsp;x</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-named-ident">TextDetails</span>&nbsp;<span class="sunlight-operator">!</span><span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;x&nbsp;&nbsp;</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-operator">!</span><span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;nest&nbsp;k&nbsp;x</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">Union</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;ul&nbsp;`union`&nbsp;ur</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;The&nbsp;empty&nbsp;set&nbsp;of&nbsp;documents</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">Beside</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;True&nbsp;&lt;=&gt;&nbsp;space&nbsp;between</span>
&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">Above</span>&nbsp;&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;True&nbsp;&lt;=&gt;&nbsp;never&nbsp;overlap</span>

<span class="sunlight-keyword">type</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;RDoc&nbsp;is&nbsp;a&nbsp;"reduced&nbsp;Doc",&nbsp;guaranteed&nbsp;not&nbsp;to&nbsp;have&nbsp;a&nbsp;top-level&nbsp;Above&nbsp;or&nbsp;Beside</span>


<span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Beside</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Above</span>&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">above</span>&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>


<span class="sunlight-keyword">data</span>&nbsp;<span class="sunlight-named-ident">TextDetails</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Chr</span>&nbsp;&nbsp;<span class="sunlight-type">Char</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">Str</span>&nbsp;&nbsp;<span class="sunlight-type">String</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">PStr</span>&nbsp;<span class="sunlight-type">String</span>
<span class="sunlight-ident">space_text</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Chr</span>&nbsp;<span class="sunlight-char">'&nbsp;'</span>
<span class="sunlight-ident">nl_text</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Chr</span>&nbsp;<span class="sunlight-char">'\n'</span>

<span class="sunlight-comment">{-
&nbsp;&nbsp;Here&nbsp;are&nbsp;the&nbsp;invariants:
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;The&nbsp;argument&nbsp;of&nbsp;NilAbove&nbsp;is&nbsp;never&nbsp;Empty.&nbsp;Therefore
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;NilAbove&nbsp;occupies&nbsp;at&nbsp;least&nbsp;two&nbsp;lines.
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;The&nbsp;arugment&nbsp;of&nbsp;@TextBeside@&nbsp;is&nbsp;never&nbsp;@Nest@.
&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;The&nbsp;layouts&nbsp;of&nbsp;the&nbsp;two&nbsp;arguments&nbsp;of&nbsp;@Union@&nbsp;both&nbsp;flatten&nbsp;to&nbsp;the&nbsp;same&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;string.
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;The&nbsp;arguments&nbsp;of&nbsp;@Union@&nbsp;are&nbsp;either&nbsp;@TextBeside@,&nbsp;or&nbsp;@NilAbove@.
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;The&nbsp;right&nbsp;argument&nbsp;of&nbsp;a&nbsp;union&nbsp;cannot&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;the&nbsp;empty&nbsp;set
&nbsp;&nbsp;&nbsp;&nbsp;(@NoDoc@).&nbsp;&nbsp;If&nbsp;the&nbsp;left&nbsp;argument&nbsp;of&nbsp;a&nbsp;union&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;the
&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;set&nbsp;(@NoDoc@),&nbsp;then&nbsp;the&nbsp;@NoDoc@&nbsp;appears&nbsp;in&nbsp;the&nbsp;first&nbsp;line.
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;An&nbsp;empty&nbsp;document&nbsp;is&nbsp;always&nbsp;represented&nbsp;by&nbsp;@Empty@.&nbsp;&nbsp;It&nbsp;can't&nbsp;be
&nbsp;&nbsp;&nbsp;&nbsp;hidden&nbsp;inside&nbsp;a&nbsp;@Nest@,&nbsp;or&nbsp;a&nbsp;@Union@&nbsp;of&nbsp;two&nbsp;@Empty@s.
&nbsp;&nbsp;
&nbsp;&nbsp;*&nbsp;The&nbsp;first&nbsp;line&nbsp;of&nbsp;every&nbsp;layout&nbsp;in&nbsp;the&nbsp;left&nbsp;argument&nbsp;of&nbsp;@Union@&nbsp;is
&nbsp;&nbsp;&nbsp;&nbsp;longer&nbsp;than&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;any&nbsp;layout&nbsp;in&nbsp;the&nbsp;right&nbsp;argument.
&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;ensures&nbsp;that&nbsp;the&nbsp;left&nbsp;argument&nbsp;has&nbsp;a&nbsp;first&nbsp;line.&nbsp;&nbsp;In&nbsp;view&nbsp;of
&nbsp;&nbsp;&nbsp;&nbsp;(3),&nbsp;this&nbsp;invariant&nbsp;means&nbsp;that&nbsp;the&nbsp;right&nbsp;argument&nbsp;must&nbsp;have&nbsp;at
&nbsp;&nbsp;&nbsp;&nbsp;least&nbsp;two&nbsp;lines.
-}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Arg&nbsp;of&nbsp;a&nbsp;NilAbove&nbsp;is&nbsp;always&nbsp;an&nbsp;RDoc</span>
<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Arg&nbsp;of&nbsp;a&nbsp;TextBeside&nbsp;is&nbsp;always&nbsp;an&nbsp;RDoc</span>
<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Arg&nbsp;of&nbsp;Nest&nbsp;is&nbsp;always&nbsp;an&nbsp;RDoc</span>
<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Args&nbsp;of&nbsp;union&nbsp;are&nbsp;always&nbsp;RDocs</span>
<span class="sunlight-ident">union_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Union</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>


<span class="sunlight-comment">--&nbsp;Notice&nbsp;the&nbsp;difference&nbsp;between</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;NoDoc&nbsp;(no&nbsp;documents)</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Empty&nbsp;(one&nbsp;empty&nbsp;document;&nbsp;no&nbsp;height&nbsp;and&nbsp;no&nbsp;width)</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;text&nbsp;""&nbsp;(a&nbsp;document&nbsp;containing&nbsp;the&nbsp;empty&nbsp;string;</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;line&nbsp;high,&nbsp;but&nbsp;has&nbsp;no&nbsp;width)</span>


<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;@empty@,&nbsp;@text@,&nbsp;@nest@,&nbsp;@union@</span>

<span class="sunlight-named-ident">empty</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>

<span class="sunlight-named-ident">isEmpty</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">True</span>
<span class="sunlight-named-ident">isEmpty</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">False</span>

<span class="sunlight-named-ident">char</span>&nbsp;&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Chr</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-ident">Empty</span>
<span class="sunlight-named-ident">text</span>&nbsp;&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-function">length</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-keyword">of</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Str</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">Empty</span><span class="sunlight-punctuation">}</span>
<span class="sunlight-named-ident">ptext</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-function">length</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-keyword">of</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">PStr</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">Empty</span><span class="sunlight-punctuation">}</span>

<span class="sunlight-named-ident">nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Externally&nbsp;callable&nbsp;version</span>

<span class="sunlight-comment">--&nbsp;mkNest&nbsp;checks&nbsp;for&nbsp;Nest's&nbsp;invariant&nbsp;that&nbsp;it&nbsp;doesn't&nbsp;have&nbsp;an&nbsp;Empty&nbsp;inside&nbsp;it</span>
<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">k1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span>
<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Worth&nbsp;a&nbsp;try!</span>
<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span>

<span class="sunlight-comment">--&nbsp;mkUnion&nbsp;checks&nbsp;for&nbsp;an&nbsp;empty&nbsp;document</span>
<span class="sunlight-ident">mkUnion</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
<span class="sunlight-ident">mkUnion</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`union_`</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;Vertical&nbsp;composition&nbsp;@$$@</span>

<span class="sunlight-named-ident">above_</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
<span class="sunlight-named-ident">above_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>
<span class="sunlight-named-ident">above_</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-named-ident">above_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Above</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span>&nbsp;&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">above_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">$</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">$</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">above_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-type">True</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-named-ident">above</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-named-ident">above</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Above</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g1</span>&nbsp;<span class="sunlight-ident">q1</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-ident">g2</span>&nbsp;<span class="sunlight-ident">q2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">above</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g1</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">above</span>&nbsp;<span class="sunlight-ident">q1</span>&nbsp;<span class="sunlight-ident">g2</span>&nbsp;<span class="sunlight-ident">q2</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">above</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-operator">@</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Beside</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">above</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-comment">--&nbsp;Specfication:&nbsp;aboveNest&nbsp;p&nbsp;g&nbsp;k&nbsp;q&nbsp;=&nbsp;p&nbsp;$g$&nbsp;(nest&nbsp;k&nbsp;q)</span>

<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p1</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">p2</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-infixOperator">`union_`</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p2</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">k1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;p&nbsp;can't&nbsp;be&nbsp;Empty,&nbsp;so&nbsp;no&nbsp;need&nbsp;for&nbsp;mkNest</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">rest</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k1</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">sl</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-keyword">of</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">q</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">other</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">aboveNest</span>&nbsp;&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">q</span>


<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-comment">--&nbsp;Specification:&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;nilaboveNest&nbsp;g&nbsp;k&nbsp;q&nbsp;</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;text&nbsp;s&nbsp;&lt;&gt;&nbsp;(text&nbsp;""&nbsp;$g$&nbsp;nest&nbsp;k&nbsp;q)</span>

<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Here's&nbsp;why&nbsp;the&nbsp;"text&nbsp;s&nbsp;&lt;&gt;"&nbsp;is&nbsp;in&nbsp;the&nbsp;spec!</span>
<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">k1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">not</span>&nbsp;<span class="sunlight-ident">g</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;No&nbsp;newline&nbsp;if&nbsp;no&nbsp;overlap</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Str</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">spaces</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Put&nbsp;them&nbsp;really&nbsp;above</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;Horizontal&nbsp;composition&nbsp;@&lt;&gt;@</span>

<span class="sunlight-named-ident">beside_</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
<span class="sunlight-named-ident">beside_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>
<span class="sunlight-named-ident">beside_</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-named-ident">beside_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Beside</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span>&nbsp;&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">beside_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">+</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">beside_</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-type">True</span>&nbsp;&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-comment">--&nbsp;Specification:&nbsp;beside&nbsp;g&nbsp;p&nbsp;q&nbsp;=&nbsp;p&nbsp;&lt;g&gt;&nbsp;q</span>
&nbsp;
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p1</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">p2</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-infixOperator">`union_`</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p2</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;p&nbsp;non-empty</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-operator">@</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Beside</span>&nbsp;<span class="sunlight-ident">p1</span>&nbsp;<span class="sunlight-ident">g1</span>&nbsp;<span class="sunlight-ident">q1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g2</span>&nbsp;<span class="sunlight-ident">q2</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">{-&nbsp;(A&nbsp;`op1`&nbsp;B)&nbsp;`op2`&nbsp;C&nbsp;==&nbsp;A&nbsp;`op1`&nbsp;(B&nbsp;`op2`&nbsp;C)&nbsp;&nbsp;iff&nbsp;op1&nbsp;==&nbsp;op2&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&amp;&amp;&nbsp;(op1&nbsp;==&nbsp;&lt;&gt;&nbsp;||&nbsp;op1&nbsp;==&nbsp;&lt;+&gt;)&nbsp;]&nbsp;-}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">g1</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">g2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p1</span>&nbsp;<span class="sunlight-ident">g1</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">q1</span>&nbsp;<span class="sunlight-ident">g2</span>&nbsp;<span class="sunlight-ident">q2</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g2</span>&nbsp;<span class="sunlight-ident">q2</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-operator">@</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Above</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">rest</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-keyword">of</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">other</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">beside</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">q</span>


<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-comment">--&nbsp;Specification:&nbsp;text&nbsp;""&nbsp;&lt;&gt;&nbsp;nilBeside&nbsp;g&nbsp;p&nbsp;</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;text&nbsp;""&nbsp;&lt;g&gt;&nbsp;p</span>

<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Hence&nbsp;the&nbsp;text&nbsp;""&nbsp;in&nbsp;the&nbsp;spec</span>
<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>
<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">space_text</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;Separate,&nbsp;@sep@,&nbsp;Hughes&nbsp;version</span>

<span class="sunlight-comment">--&nbsp;Specification:&nbsp;sep&nbsp;ps&nbsp;&nbsp;=&nbsp;oneLiner&nbsp;(hsep&nbsp;ps)</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`union`</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vcat&nbsp;ps</span>

<span class="sunlight-named-ident">sep</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">sepX</span>&nbsp;<span class="sunlight-type">True</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Separate&nbsp;with&nbsp;spaces</span>
<span class="sunlight-named-ident">cat</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">sepX</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Don't</span>

<span class="sunlight-ident">sepX</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">empty</span>
<span class="sunlight-ident">sepX</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span><span class="sunlight-operator">:</span><span class="sunlight-ident">ps</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-ident">ps</span>


<span class="sunlight-comment">--&nbsp;Specification:&nbsp;sep1&nbsp;g&nbsp;k&nbsp;ys&nbsp;=&nbsp;sep&nbsp;(x&nbsp;:&nbsp;map&nbsp;(nest&nbsp;k)&nbsp;ys)</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;oneLiner&nbsp;(x&nbsp;&lt;g&gt;&nbsp;nest&nbsp;k&nbsp;(hsep&nbsp;ys))</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`union`&nbsp;x&nbsp;$$&nbsp;nest&nbsp;k&nbsp;(vcat&nbsp;ys)</span>

<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-infixOperator">`union_`</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">vcat</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">sepX</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">vcat</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">sepNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">--&nbsp;Specification:&nbsp;sepNB&nbsp;p&nbsp;k&nbsp;ys&nbsp;=&nbsp;sep1&nbsp;(text&nbsp;""&nbsp;&lt;&gt;&nbsp;p)&nbsp;k&nbsp;ys</span>
<span class="sunlight-comment">--&nbsp;Called&nbsp;when&nbsp;we&nbsp;have&nbsp;already&nbsp;found&nbsp;some&nbsp;text&nbsp;in&nbsp;the&nbsp;first&nbsp;item</span>
<span class="sunlight-comment">--&nbsp;We&nbsp;have&nbsp;to&nbsp;eat&nbsp;up&nbsp;nests</span>

<span class="sunlight-ident">sepNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">sepNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>

<span class="sunlight-ident">sepNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">rest</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-infixOperator">`mkUnion`</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">vcat</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">hsep</span>&nbsp;<span class="sunlight-ident">ys</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">hcat</span>&nbsp;<span class="sunlight-ident">ys</span>

<span class="sunlight-ident">sepNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">sep1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>

<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;@fill@</span>

<span class="sunlight-named-ident">fsep</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-type">True</span>
<span class="sunlight-named-ident">fcat</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-type">False</span>

<span class="sunlight-comment">--&nbsp;Specification:&nbsp;</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;fill&nbsp;[]&nbsp;&nbsp;=&nbsp;empty</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;fill&nbsp;[p]&nbsp;=&nbsp;p</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;fill&nbsp;(p1:p2:ps)&nbsp;=&nbsp;oneLiner&nbsp;p1&nbsp;&lt;#&gt;&nbsp;nest&nbsp;(length&nbsp;p1)&nbsp;</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fill&nbsp;(oneLiner&nbsp;p2&nbsp;:&nbsp;ps))</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`union`</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1&nbsp;$$&nbsp;fill&nbsp;ps</span>

<span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">empty</span>
<span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span><span class="sunlight-operator">:</span><span class="sunlight-ident">ps</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-ident">ps</span>


<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Doc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-infixOperator">`union_`</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">mkNest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">aboveNest</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
<span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>
<span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
<span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">y</span><span class="sunlight-operator">:</span><span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">nilBeside</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">y</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-infixOperator">`mkUnion`</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">nilAboveNest</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">fill</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">y</span><span class="sunlight-operator">:</span><span class="sunlight-ident">ys</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">k</span>

<span class="sunlight-ident">fillNB</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">fill1</span>&nbsp;<span class="sunlight-ident">g</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">ys</span>


<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;Selecting&nbsp;the&nbsp;best&nbsp;layout</span>

<span class="sunlight-named-ident">best</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Mode</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Line&nbsp;length</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Ribbon&nbsp;length</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">RDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;No&nbsp;unions&nbsp;in&nbsp;here!</span>

<span class="sunlight-named-ident">best</span>&nbsp;<span class="sunlight-ident">OneLineMode</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Elide&nbsp;nest</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">first</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">best</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;(Remaining)&nbsp;width&nbsp;of&nbsp;line</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">w</span><span class="sunlight-operator">==</span><span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nicest</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;(Remaining)&nbsp;width&nbsp;of&nbsp;line</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Amount&nbsp;of&nbsp;first&nbsp;line&nbsp;already&nbsp;eaten&nbsp;up</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;This&nbsp;is&nbsp;an&nbsp;argument&nbsp;to&nbsp;TextBeside&nbsp;=&gt;&nbsp;eat&nbsp;Nests</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;No&nbsp;unions&nbsp;in&nbsp;here!</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">w</span><span class="sunlight-operator">==</span><span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nilAbove_</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-ident">tl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-ident">tl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">tl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nicest1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">get1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-ident">nicest</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nicest1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>
<span class="sunlight-ident">nicest1</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-infixOperator">`minn`</span>&nbsp;<span class="sunlight-ident">r</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Space&nbsp;available</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-type">Bool</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;True&nbsp;if&nbsp;*first&nbsp;line*&nbsp;of&nbsp;Doc&nbsp;fits&nbsp;in&nbsp;space&nbsp;available</span>
&nbsp;
<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">False</span>
<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">False</span>
<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">True</span>
<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">_</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">True</span>
<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">fits</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span>

<span class="sunlight-ident">minn</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">x</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">y</span>

<span class="sunlight-comment">--&nbsp;@first@&nbsp;and&nbsp;@nonEmptySet@&nbsp;are&nbsp;similar&nbsp;to&nbsp;@nicest@&nbsp;and&nbsp;@fits@,&nbsp;only&nbsp;simpler.</span>
<span class="sunlight-comment">--&nbsp;@first@&nbsp;returns&nbsp;its&nbsp;first&nbsp;argument&nbsp;if&nbsp;it&nbsp;is&nbsp;non-empty,&nbsp;otherwise&nbsp;its&nbsp;second.</span>

<span class="sunlight-ident">first</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">q</span>

<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">False</span>
<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">True</span>
<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">True</span>
<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-type">True</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;NoDoc&nbsp;always&nbsp;in&nbsp;first&nbsp;line</span>
<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-ident">p</span>
<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nonEmptySet</span>&nbsp;<span class="sunlight-ident">p</span>

<span class="sunlight-comment">--&nbsp;@oneLiner@&nbsp;returns&nbsp;the&nbsp;one-line&nbsp;members&nbsp;of&nbsp;the&nbsp;given&nbsp;set&nbsp;of&nbsp;@Doc@s.</span>

<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-named-ident">Doc</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-named-ident">Doc</span>
<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Empty</span>
<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NoDoc</span>
<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">textBeside_</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nest_</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-infixOperator">`Union`</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">oneLiner</span>&nbsp;<span class="sunlight-ident">p</span>


<span class="sunlight-comment">--&nbsp;---------------------------------------------------------------------------</span>
<span class="sunlight-comment">--&nbsp;Displaying&nbsp;the&nbsp;best&nbsp;layout</span>

<span class="sunlight-named-ident">renderStyle</span>&nbsp;<span class="sunlight-named-ident">style</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;
&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">fullRender</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-named-ident">style</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lineLength</span>&nbsp;<span class="sunlight-named-ident">style</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">ribbonsPerLine</span>&nbsp;<span class="sunlight-named-ident">style</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">string_txt</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">""</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">doc</span>

<span class="sunlight-named-ident">render</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">showDoc</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-string">""</span>
<span class="sunlight-ident">showDoc</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">fullRender</span>&nbsp;<span class="sunlight-ident">PageMode</span>&nbsp;<span class="sunlight-number">100</span>&nbsp;<span class="sunlight-number">1.5</span>&nbsp;<span class="sunlight-ident">string_txt</span>&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-ident">doc</span>

<span class="sunlight-ident">string_txt</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Chr</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">s</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-operator">:</span><span class="sunlight-ident">s</span>
<span class="sunlight-ident">string_txt</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Str</span>&nbsp;<span class="sunlight-ident">s1</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-ident">s2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">s1</span>&nbsp;<span class="sunlight-operator">++</span>&nbsp;<span class="sunlight-ident">s2</span>
<span class="sunlight-ident">string_txt</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">PStr</span>&nbsp;<span class="sunlight-ident">s1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">s2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">s1</span>&nbsp;<span class="sunlight-operator">++</span>&nbsp;<span class="sunlight-ident">s2</span>


<span class="sunlight-named-ident">fullRender</span>&nbsp;<span class="sunlight-ident">OneLineMode</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">easy_display</span>&nbsp;<span class="sunlight-ident">space_text</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">doc</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-named-ident">fullRender</span>&nbsp;<span class="sunlight-ident">LeftMode</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">easy_display</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">doc</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-named-ident">fullRender</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-ident">line_length</span>&nbsp;<span class="sunlight-ident">ribbons_per_line</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">doc</span>
&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">display</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-ident">line_length</span>&nbsp;<span class="sunlight-ident">ribbon_length</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">best_doc</span>
&nbsp;&nbsp;<span class="sunlight-keyword">where</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">best_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">best</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-ident">hacked_line_length</span>&nbsp;<span class="sunlight-ident">ribbon_length</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">reduceDoc</span>&nbsp;<span class="sunlight-ident">doc</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">hacked_line_length</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">ribbon_length</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-type">Int</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ribbon_length</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">round</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">fromIntegral</span>&nbsp;<span class="sunlight-ident">line_length</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-ident">ribbons_per_line</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">hacked_line_length</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-keyword">of</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">ZigZagMode</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-function">maxBound</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">other</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">line_length</span>&nbsp;<span class="sunlight-punctuation">}</span>

<span class="sunlight-ident">display</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-ident">page_width</span>&nbsp;<span class="sunlight-ident">ribbon_width</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">doc</span>
&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">page_width</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">ribbon_width</span>&nbsp;<span class="sunlight-keyword">of</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">gap_width</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">gap_width</span>&nbsp;<span class="sunlight-infixOperator">`quot`</span>&nbsp;<span class="sunlight-number">2</span>&nbsp;<span class="sunlight-keyword">of</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">shift</span>&nbsp;<span class="sunlight-operator">-&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">let</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k1</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">k1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">mode</span>&nbsp;<span class="sunlight-keyword">of</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ZigZagMode</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">&gt;=</span>&nbsp;<span class="sunlight-ident">gap_width</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Str</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">multi_ch</span>&nbsp;<span class="sunlight-ident">shift</span>&nbsp;<span class="sunlight-char">'/'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay1</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">shift</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">0</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Str</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">multi_ch</span>&nbsp;<span class="sunlight-ident">shift</span>&nbsp;<span class="sunlight-char">'\\'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay1</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">shift</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">other</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">lay1</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay1</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-operator">+</span><span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay1</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Str</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">indent</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-infixOperator">`seq`</span>&nbsp;<span class="sunlight-type">False</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">undefined</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">sl</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">_</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay2</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">in</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-ident">doc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">}</span>

<span class="sunlight-ident">cant_fail</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">error</span>&nbsp;<span class="sunlight-string">"easy_display:&nbsp;NoDoc"</span>
<span class="sunlight-ident">easy_display</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-ident">txt</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;
&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">doc</span>&nbsp;<span class="sunlight-ident">cant_fail</span>
&nbsp;&nbsp;<span class="sunlight-keyword">where</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">NoDoc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">no_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">no_doc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Union</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">q</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">no_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-comment">{-&nbsp;lay&nbsp;p&nbsp;-}</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-ident">cant_fail</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;Second&nbsp;arg&nbsp;can't&nbsp;be&nbsp;NoDoc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Nest</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">no_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">no_doc</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">Empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">no_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">NilAbove</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">no_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nl_text</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">cant_fail</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;NoDoc&nbsp;always&nbsp;on&nbsp;first&nbsp;line</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">TextBeside</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">sl</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">no_doc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-infixOperator">`txt`</span>&nbsp;<span class="sunlight-ident">lay</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">no_doc</span>

<span class="sunlight-comment">--&nbsp;OLD&nbsp;version:&nbsp;we&nbsp;shouldn't&nbsp;rely&nbsp;on&nbsp;tabs&nbsp;being&nbsp;8&nbsp;columns&nbsp;apart&nbsp;in&nbsp;the&nbsp;output.</span>
<span class="sunlight-comment">--&nbsp;indent&nbsp;n&nbsp;|&nbsp;n&nbsp;&gt;=&nbsp;8&nbsp;=&nbsp;'\t'&nbsp;:&nbsp;indent&nbsp;(n&nbsp;-&nbsp;8)</span>
<span class="sunlight-comment">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;otherwise&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;spaces&nbsp;n</span>
<span class="sunlight-ident">indent</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">spaces</span>&nbsp;<span class="sunlight-ident">n</span>

<span class="sunlight-ident">multi_ch</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-ident">ch</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span>
<span class="sunlight-ident">multi_ch</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ch</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">ch</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">multi_ch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">ch</span>

<span class="sunlight-comment">--&nbsp;(spaces&nbsp;n)&nbsp;generates&nbsp;a&nbsp;list&nbsp;of&nbsp;n&nbsp;spaces</span>
<span class="sunlight-comment">--</span>
<span class="sunlight-comment">--&nbsp;It&nbsp;should&nbsp;never&nbsp;be&nbsp;called&nbsp;with&nbsp;'n'&nbsp;&lt;&nbsp;0,&nbsp;but&nbsp;that&nbsp;can&nbsp;happen&nbsp;for&nbsp;reasons&nbsp;I&nbsp;don't&nbsp;understand</span>
<span class="sunlight-comment">--&nbsp;Here's&nbsp;a&nbsp;test&nbsp;case:</span>
<span class="sunlight-comment">--&nbsp;&nbsp;ncat&nbsp;x&nbsp;y&nbsp;=&nbsp;nest&nbsp;4&nbsp;$&nbsp;cat&nbsp;[&nbsp;x,&nbsp;y&nbsp;]</span>
<span class="sunlight-comment">--&nbsp;&nbsp;d1&nbsp;=&nbsp;foldl1&nbsp;ncat&nbsp;$&nbsp;take&nbsp;50&nbsp;$&nbsp;repeat&nbsp;$&nbsp;char&nbsp;'a'</span>
<span class="sunlight-comment">--&nbsp;&nbsp;d2&nbsp;=&nbsp;parens&nbsp;$&nbsp;&nbsp;sep&nbsp;[&nbsp;d1,&nbsp;text&nbsp;"+"&nbsp;,&nbsp;d1&nbsp;]</span>
<span class="sunlight-comment">--&nbsp;&nbsp;main&nbsp;=&nbsp;print&nbsp;d2</span>
<span class="sunlight-comment">--&nbsp;I&nbsp;don't&nbsp;feel&nbsp;motivated&nbsp;enough&nbsp;to&nbsp;find&nbsp;the&nbsp;Real&nbsp;Bug,&nbsp;so&nbsp;meanwhile&nbsp;we&nbsp;just&nbsp;test&nbsp;for&nbsp;n&lt;=0</span>
<span class="sunlight-ident">spaces</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">&lt;=</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">otherwise</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-char">'&nbsp;'</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">spaces</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">{-&nbsp;Comments&nbsp;from&nbsp;Johannes&nbsp;Waldmann&nbsp;about&nbsp;what&nbsp;the&nbsp;problem&nbsp;might&nbsp;be:

&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;example&nbsp;above,&nbsp;d2&nbsp;and&nbsp;d1&nbsp;are&nbsp;deeply&nbsp;nested,&nbsp;but&nbsp;`text&nbsp;"+"'&nbsp;is&nbsp;not,&nbsp;
&nbsp;&nbsp;&nbsp;so&nbsp;the&nbsp;layout&nbsp;function&nbsp;tries&nbsp;to&nbsp;"out-dent"&nbsp;it.
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;when&nbsp;I&nbsp;look&nbsp;at&nbsp;the&nbsp;Doc&nbsp;values&nbsp;that&nbsp;are&nbsp;generated,&nbsp;there&nbsp;are&nbsp;lots&nbsp;of
&nbsp;&nbsp;&nbsp;Nest&nbsp;constructors&nbsp;with&nbsp;negative&nbsp;arguments.&nbsp;&nbsp;see&nbsp;this&nbsp;sample&nbsp;output&nbsp;of
&nbsp;&nbsp;&nbsp;d1&nbsp;(obtained&nbsp;with&nbsp;hugs,&nbsp;:s&nbsp;-u)
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;tBeside&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1&nbsp;Doc_Empty)&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest
&nbsp;&nbsp;&nbsp;(-241)&nbsp;(Doc_TextBeside&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1&nbsp;Doc_Empty)))))
&nbsp;&nbsp;&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest&nbsp;(-236)&nbsp;(Doc_TextBeside&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1
&nbsp;&nbsp;&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest&nbsp;(-5)&nbsp;(Doc_TextBeside&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1
&nbsp;&nbsp;&nbsp;Doc_Empty))))))))&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest&nbsp;(-231)&nbsp;(Doc_TextBeside
&nbsp;&nbsp;&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest&nbsp;(-5)&nbsp;(Doc_TextBeside
&nbsp;&nbsp;&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest&nbsp;(-5)&nbsp;(Doc_TextBeside
&nbsp;&nbsp;&nbsp;(TextDetails_Chr&nbsp;'a')&nbsp;1&nbsp;Doc_Empty)))))))))))&nbsp;(Doc_NilAbove&nbsp;(Doc_Nest
-}</span>
</span></pre></div></div>
<h2 id="httpd.httpdconf">httpd.httpdconf</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-http sunlight-highlighted"><span class="sunlight-plaintext">ServerType&nbsp;standalone
ServerRoot&nbsp;"/var/www"

Timeout&nbsp;300

#LockFile&nbsp;logs/accept.lock

MaxClients&nbsp;150

Listen&nbsp;8080
Listen&nbsp;12.34.56.78:80

RewriteEngine&nbsp;on
RewriteCond&nbsp;&nbsp;&nbsp;%{HTTP_USER_AGENT}&nbsp;&nbsp;^Mozilla
RewriteRule&nbsp;&nbsp;&nbsp;^/$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/homepage.max.html&nbsp;&nbsp;[L]

RewriteLog&nbsp;&nbsp;&nbsp;&nbsp;"/usr/local/var/apache/logs/rewrite.log"
RewriteMap&nbsp;&nbsp;&nbsp;&nbsp;examplemap&nbsp;txt:/path/to/file/map.txt&nbsp;
RewriteRule&nbsp;&nbsp;&nbsp;^/ex/(.*)&nbsp;${examplemap:$1}&nbsp;
RewriteRule&nbsp;&nbsp;&nbsp;^$&nbsp;RewriteRule

#1.3&nbsp;legacy&nbsp;style
&lt;IfDefine&nbsp;SSL&gt;
&nbsp;&nbsp;&nbsp;&nbsp;Listen&nbsp;80
&nbsp;&nbsp;&nbsp;&nbsp;Listen&nbsp;443
&lt;/IfDefine&gt;

&lt;IfModule&nbsp;SSL&gt;
&nbsp;&nbsp;&nbsp;&nbsp;Listen&nbsp;80
&nbsp;&nbsp;&nbsp;&nbsp;Listen&nbsp;443
&lt;/IfModule&gt;

&lt;Directory&nbsp;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;FollowSymLinks
&nbsp;&nbsp;&nbsp;&nbsp;AllowOverride&nbsp;None
&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;Deny,Allow
&nbsp;&nbsp;&nbsp;&nbsp;Deny&nbsp;from&nbsp;all
&lt;/Directory&gt;

&lt;Directory&nbsp;"/var/www/htdocs"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;AllowOverride&nbsp;None
&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;allow,deny
&nbsp;&nbsp;&nbsp;&nbsp;Allow&nbsp;from&nbsp;all
&lt;/Directory&gt;

&lt;Directory&nbsp;/home/*/public_html&gt;
&nbsp;&nbsp;&nbsp;&nbsp;AllowOverride&nbsp;FileInfo&nbsp;AuthConfig&nbsp;Limit&nbsp;Options&nbsp;Indexes
&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;MultiViews&nbsp;SymLinksIfOwnerMatch&nbsp;IncludesNoExec
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Limit&nbsp;GET&nbsp;POST&nbsp;OPTIONS&nbsp;PROPFIND&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;allow,deny
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Allow&nbsp;from&nbsp;all
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Limit&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Limit&nbsp;PUT&nbsp;DELETE&nbsp;PATCH&nbsp;PROPPATCH&nbsp;MKCOL&nbsp;COPY&nbsp;MOVE&nbsp;LOCK&nbsp;UNLOCK&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;deny,allow
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deny&nbsp;from&nbsp;all
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Limit&gt;
&lt;/Directory&gt;

&lt;Files&nbsp;.htaccess&gt;
&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;allow,deny
&nbsp;&nbsp;&nbsp;&nbsp;Deny&nbsp;from&nbsp;all
&lt;/Files&gt;

LogFormat&nbsp;"%h&nbsp;%l&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""&nbsp;combined

AddIconByEncoding&nbsp;(CMP,/icons/compressed.gif)&nbsp;x-compress&nbsp;x-gzip

AddIconByType&nbsp;(TXT,/icons/text.gif)&nbsp;text/*
AddIconByType&nbsp;(IMG,/icons/image2.gif)&nbsp;image/*
AddIconByType&nbsp;(SND,/icons/sound2.gif)&nbsp;audio/*
AddIconByType&nbsp;(VID,/icons/movie.gif)&nbsp;video/*

AddIcon&nbsp;/icons/binary.gif&nbsp;.bin&nbsp;.exe

NameVirtualHost&nbsp;*:80

&lt;VirtualHost&nbsp;*:80&gt;
&nbsp;&nbsp;&nbsp;&nbsp;ServerName&nbsp;www.domain.tld
&nbsp;&nbsp;&nbsp;&nbsp;ServerAlias&nbsp;domain.tld&nbsp;*.domain.tld
&nbsp;&nbsp;&nbsp;&nbsp;DocumentRoot&nbsp;/www/domain
&lt;/VirtualHost&gt;

</span></pre></div></div>
<h2 id="invalid-lang.txt">invalid-lang.txt</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-plaintext sunlight-highlighted"><span class="sunlight-plaintext">foo
</span></pre></div></div>
<h2 id="java.java">java.java</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-18-line-1" href="#sunlight-18-line-1">1</a>
<a name="sunlight-18-line-2" href="#sunlight-18-line-2">2</a>
<a name="sunlight-18-line-3" href="#sunlight-18-line-3">3</a>
<a name="sunlight-18-line-4" href="#sunlight-18-line-4">4</a>
<a name="sunlight-18-line-5" href="#sunlight-18-line-5">5</a>
<a name="sunlight-18-line-6" href="#sunlight-18-line-6">6</a>
<a name="sunlight-18-line-7" href="#sunlight-18-line-7">7</a>
<a name="sunlight-18-line-8" href="#sunlight-18-line-8">8</a>
<a name="sunlight-18-line-9" href="#sunlight-18-line-9">9</a>
<a name="sunlight-18-line-10" href="#sunlight-18-line-10">10</a>
<a name="sunlight-18-line-11" href="#sunlight-18-line-11">11</a>
<a name="sunlight-18-line-12" href="#sunlight-18-line-12">12</a>
<a name="sunlight-18-line-13" href="#sunlight-18-line-13">13</a>
<a name="sunlight-18-line-14" href="#sunlight-18-line-14">14</a>
<a name="sunlight-18-line-15" href="#sunlight-18-line-15">15</a>
<a name="sunlight-18-line-16" href="#sunlight-18-line-16">16</a>
<a name="sunlight-18-line-17" href="#sunlight-18-line-17">17</a>
<a name="sunlight-18-line-18" href="#sunlight-18-line-18">18</a>
<a name="sunlight-18-line-19" href="#sunlight-18-line-19">19</a>
<a name="sunlight-18-line-20" href="#sunlight-18-line-20">20</a>
<a name="sunlight-18-line-21" href="#sunlight-18-line-21">21</a>
<a name="sunlight-18-line-22" href="#sunlight-18-line-22">22</a>
<a name="sunlight-18-line-23" href="#sunlight-18-line-23">23</a>
<a name="sunlight-18-line-24" href="#sunlight-18-line-24">24</a>
<a name="sunlight-18-line-25" href="#sunlight-18-line-25">25</a>
<a name="sunlight-18-line-26" href="#sunlight-18-line-26">26</a>
<a name="sunlight-18-line-27" href="#sunlight-18-line-27">27</a>
<a name="sunlight-18-line-28" href="#sunlight-18-line-28">28</a>
<a name="sunlight-18-line-29" href="#sunlight-18-line-29">29</a>
<a name="sunlight-18-line-30" href="#sunlight-18-line-30">30</a>
<a name="sunlight-18-line-31" href="#sunlight-18-line-31">31</a>
<a name="sunlight-18-line-32" href="#sunlight-18-line-32">32</a>
<a name="sunlight-18-line-33" href="#sunlight-18-line-33">33</a>
<a name="sunlight-18-line-34" href="#sunlight-18-line-34">34</a>
<a name="sunlight-18-line-35" href="#sunlight-18-line-35">35</a>
<a name="sunlight-18-line-36" href="#sunlight-18-line-36">36</a>
<a name="sunlight-18-line-37" href="#sunlight-18-line-37">37</a>
<a name="sunlight-18-line-38" href="#sunlight-18-line-38">38</a>
<a name="sunlight-18-line-39" href="#sunlight-18-line-39">39</a>
<a name="sunlight-18-line-40" href="#sunlight-18-line-40">40</a>
<a name="sunlight-18-line-41" href="#sunlight-18-line-41">41</a>
<a name="sunlight-18-line-42" href="#sunlight-18-line-42">42</a>
<a name="sunlight-18-line-43" href="#sunlight-18-line-43">43</a>
<a name="sunlight-18-line-44" href="#sunlight-18-line-44">44</a>
<a name="sunlight-18-line-45" href="#sunlight-18-line-45">45</a>
<a name="sunlight-18-line-46" href="#sunlight-18-line-46">46</a>
<a name="sunlight-18-line-47" href="#sunlight-18-line-47">47</a>
<a name="sunlight-18-line-48" href="#sunlight-18-line-48">48</a>
<a name="sunlight-18-line-49" href="#sunlight-18-line-49">49</a>
<a name="sunlight-18-line-50" href="#sunlight-18-line-50">50</a>
<a name="sunlight-18-line-51" href="#sunlight-18-line-51">51</a>
<a name="sunlight-18-line-52" href="#sunlight-18-line-52">52</a>
<a name="sunlight-18-line-53" href="#sunlight-18-line-53">53</a>
<a name="sunlight-18-line-54" href="#sunlight-18-line-54">54</a>
<a name="sunlight-18-line-55" href="#sunlight-18-line-55">55</a>
<a name="sunlight-18-line-56" href="#sunlight-18-line-56">56</a>
<a name="sunlight-18-line-57" href="#sunlight-18-line-57">57</a>
<a name="sunlight-18-line-58" href="#sunlight-18-line-58">58</a>
<a name="sunlight-18-line-59" href="#sunlight-18-line-59">59</a>
<a name="sunlight-18-line-60" href="#sunlight-18-line-60">60</a>
<a name="sunlight-18-line-61" href="#sunlight-18-line-61">61</a>
<a name="sunlight-18-line-62" href="#sunlight-18-line-62">62</a>
<a name="sunlight-18-line-63" href="#sunlight-18-line-63">63</a>
<a name="sunlight-18-line-64" href="#sunlight-18-line-64">64</a>
<a name="sunlight-18-line-65" href="#sunlight-18-line-65">65</a>
<a name="sunlight-18-line-66" href="#sunlight-18-line-66">66</a>
<a name="sunlight-18-line-67" href="#sunlight-18-line-67">67</a>
<a name="sunlight-18-line-68" href="#sunlight-18-line-68">68</a>
<a name="sunlight-18-line-69" href="#sunlight-18-line-69">69</a>
<a name="sunlight-18-line-70" href="#sunlight-18-line-70">70</a>
<a name="sunlight-18-line-71" href="#sunlight-18-line-71">71</a>
<a name="sunlight-18-line-72" href="#sunlight-18-line-72">72</a>
<a name="sunlight-18-line-73" href="#sunlight-18-line-73">73</a>
<a name="sunlight-18-line-74" href="#sunlight-18-line-74">74</a>
<a name="sunlight-18-line-75" href="#sunlight-18-line-75">75</a>
<a name="sunlight-18-line-76" href="#sunlight-18-line-76">76</a>
<a name="sunlight-18-line-77" href="#sunlight-18-line-77">77</a>
<a name="sunlight-18-line-78" href="#sunlight-18-line-78">78</a>
<a name="sunlight-18-line-79" href="#sunlight-18-line-79">79</a>
<a name="sunlight-18-line-80" href="#sunlight-18-line-80">80</a>
<a name="sunlight-18-line-81" href="#sunlight-18-line-81">81</a>
<a name="sunlight-18-line-82" href="#sunlight-18-line-82">82</a>
<a name="sunlight-18-line-83" href="#sunlight-18-line-83">83</a>
<a name="sunlight-18-line-84" href="#sunlight-18-line-84">84</a>
<a name="sunlight-18-line-85" href="#sunlight-18-line-85">85</a>
<a name="sunlight-18-line-86" href="#sunlight-18-line-86">86</a>
<a name="sunlight-18-line-87" href="#sunlight-18-line-87">87</a>
<a name="sunlight-18-line-88" href="#sunlight-18-line-88">88</a>
<a name="sunlight-18-line-89" href="#sunlight-18-line-89">89</a>
<a name="sunlight-18-line-90" href="#sunlight-18-line-90">90</a>
<a name="sunlight-18-line-91" href="#sunlight-18-line-91">91</a>
<a name="sunlight-18-line-92" href="#sunlight-18-line-92">92</a>
<a name="sunlight-18-line-93" href="#sunlight-18-line-93">93</a>
<a name="sunlight-18-line-94" href="#sunlight-18-line-94">94</a>
<a name="sunlight-18-line-95" href="#sunlight-18-line-95">95</a>
<a name="sunlight-18-line-96" href="#sunlight-18-line-96">96</a>
<a name="sunlight-18-line-97" href="#sunlight-18-line-97">97</a>
<a name="sunlight-18-line-98" href="#sunlight-18-line-98">98</a>
<a name="sunlight-18-line-99" href="#sunlight-18-line-99">99</a>
<a name="sunlight-18-line-100" href="#sunlight-18-line-100">100</a>
<a name="sunlight-18-line-101" href="#sunlight-18-line-101">101</a>
<a name="sunlight-18-line-102" href="#sunlight-18-line-102">102</a>
<a name="sunlight-18-line-103" href="#sunlight-18-line-103">103</a>
<a name="sunlight-18-line-104" href="#sunlight-18-line-104">104</a>
<a name="sunlight-18-line-105" href="#sunlight-18-line-105">105</a>
<a name="sunlight-18-line-106" href="#sunlight-18-line-106">106</a>
<a name="sunlight-18-line-107" href="#sunlight-18-line-107">107</a>
<a name="sunlight-18-line-108" href="#sunlight-18-line-108">108</a>
<a name="sunlight-18-line-109" href="#sunlight-18-line-109">109</a>
<a name="sunlight-18-line-110" href="#sunlight-18-line-110">110</a>
<a name="sunlight-18-line-111" href="#sunlight-18-line-111">111</a>
<a name="sunlight-18-line-112" href="#sunlight-18-line-112">112</a>
<a name="sunlight-18-line-113" href="#sunlight-18-line-113">113</a>
<a name="sunlight-18-line-114" href="#sunlight-18-line-114">114</a>
<a name="sunlight-18-line-115" href="#sunlight-18-line-115">115</a>
</div><pre class="sunlight-highlight-java sunlight-highlighted"><span class="sunlight-java"><span class="sunlight-keyword">package</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">sunlightjs</span><span class="sunlight-operator">.</span><span class="sunlight-ident">awesome</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">java</span><span class="sunlight-operator">.</span><span class="sunlight-ident">text</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">java</span><span class="sunlight-operator">.</span><span class="sunlight-ident">io</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">BufferedStreamReader</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">java</span><span class="sunlight-operator">.</span><span class="sunlight-ident">lang</span><span class="sunlight-operator">.</span><span class="sunlight-ident">annotation</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">java</span><span class="sunlight-operator">.</span><span class="sunlight-ident">lang</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">StackTraceElement</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">MyClass</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">ExtendedClass</span>&nbsp;<span class="sunlight-keyword">implements</span>&nbsp;<span class="sunlight-named-ident">Interfacable1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Interfacable2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Interfacable3</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-named-ident">MyClass</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">parameter1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">super</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CastingTest1</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CastingTest2</span><span class="sunlight-punctuation">)</span><span class="sunlight-keyword">this</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">doStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">notACast</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">methodCall</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-ident">java</span><span class="sunlight-operator">.</span><span class="sunlight-ident">lang</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">CharSequence</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Exception</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;How&nbsp;about&nbsp;an&nbsp;inner&nbsp;class?
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">InnerEvenIterator</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//start&nbsp;stepping&nbsp;through&nbsp;the&nbsp;array&nbsp;from&nbsp;the&nbsp;beginning</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">next</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">boolean</span>&nbsp;<span class="sunlight-ident">hasNext</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//check&nbsp;if&nbsp;a&nbsp;current&nbsp;element&nbsp;is&nbsp;the&nbsp;last&nbsp;in&nbsp;the&nbsp;array</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">next</span>&nbsp;<span class="sunlight-operator">&lt;=</span>&nbsp;<span class="sunlight-ident">SIZE</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">getNext</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//record&nbsp;a&nbsp;value&nbsp;of&nbsp;an&nbsp;even&nbsp;index&nbsp;of&nbsp;the&nbsp;array</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">retValue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">arrayOfInts</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">next</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//get&nbsp;the&nbsp;next&nbsp;even&nbsp;element</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">next</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">retValue</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">anonymousInnerClassTest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">throws</span>&nbsp;<span class="sunlight-named-ident">CheckedException1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">CheckedException2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">CheckedException3</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Thread</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Runnable</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">run</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">true</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">sleep</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1000</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">System</span><span class="sunlight-operator">.</span><span class="sunlight-ident">out</span><span class="sunlight-operator">.</span><span class="sunlight-ident">print</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"."</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">catch</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">InterruptedException</span>&nbsp;<span class="sunlight-ident">ex</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">start</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//http://www.roseindia.net/javatutorials/anonymous_innerclassestutorial.shtml</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Vector</span>&nbsp;<span class="sunlight-ident">myVector</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Vector</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"Heinz"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"John"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"Anton"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*
&nbsp;&nbsp;&nbsp;&nbsp;multi&nbsp;line
&nbsp;&nbsp;&nbsp;&nbsp;comment
&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">abstractMethod</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Kissable</span>&nbsp;<span class="sunlight-ident">lips</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">char</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ArrayParameter</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">arrayParameter</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Stolen&nbsp;mostly&nbsp;from&nbsp;http://download.oracle.com/javase/tutorial/java/generics/bounded.html
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;because&nbsp;I&nbsp;haven't&nbsp;written&nbsp;Java&nbsp;since&nbsp;I&nbsp;was&nbsp;an&nbsp;idiot&nbsp;in&nbsp;college
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-annotation">@Documented</span>&nbsp;<span class="sunlight-annotation">@AnnotationWithArguments</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"this&nbsp;\"is\"&nbsp;a&nbsp;string\\"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-annotation">@Override</span>&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">GenericExtended</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-named-ident">GenericImplemented</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-operator">&gt;&gt;</span>&nbsp;<span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-ident">genericMethod</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">GenericParam</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">genericParam</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//wait,&nbsp;so&nbsp;Java&nbsp;seriously&nbsp;uses&nbsp;the&nbsp;ampersand&nbsp;for&nbsp;interfaces&nbsp;in&nbsp;generics?</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">MyCustomMap1</span><span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">char</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">AnotherGeneric</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">map</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">MyCustomMap2</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">FirstGeneric</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">SecondGeneric</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">fully1</span><span class="sunlight-operator">.</span><span class="sunlight-ident">qualified1</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">ClassName1</span>&nbsp;<span class="sunlight-ident">fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">fully2</span><span class="sunlight-operator">.</span><span class="sunlight-ident">qualified2</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">ClassName2</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">ArrayTest1</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">arrayOStuff</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ArrayTest2</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ArrayTest3</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">12</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">true</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-keyword">false</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">//enum&nbsp;test:&nbsp;http://download.oracle.com/javase/1.5.0/docs/guide/language/enums.html</span>
<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">enum</span>&nbsp;<span class="sunlight-named-ident">Planet</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MERCURY</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">3.303e</span><span class="sunlight-operator">+</span><span class="sunlight-number">23</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">2.4397e6</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">VENUS</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">4.869e</span><span class="sunlight-operator">+</span><span class="sunlight-number">24</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">6.0518e6</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">EARTH</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">5.976e</span><span class="sunlight-operator">+</span><span class="sunlight-number">24</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">6.37814e6</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MARS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">6.421e</span><span class="sunlight-operator">+</span><span class="sunlight-number">23</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">3.3972e6</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">JUPITER</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1.9e</span><span class="sunlight-operator">+</span><span class="sunlight-number">27</span><span class="sunlight-punctuation">,</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-number">7.1492e7</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SATURN</span>&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">5.688e</span><span class="sunlight-operator">+</span><span class="sunlight-number">26</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">6.0268e7</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">URANUS</span>&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">8.686e</span><span class="sunlight-operator">+</span><span class="sunlight-number">25</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">2.5559e7</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">NEPTUNE</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1.024e</span><span class="sunlight-operator">+</span><span class="sunlight-number">26</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">2.4746e7</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">PLUTO</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1.27e</span><span class="sunlight-operator">+</span><span class="sunlight-number">22</span><span class="sunlight-punctuation">,</span>&nbsp;&nbsp;<span class="sunlight-number">1.137e6</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">final</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">mass</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;in&nbsp;kilograms</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">final</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">radius</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//&nbsp;in&nbsp;meters</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Planet</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">mass</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">radius</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">mass</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">mass</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">radius</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">radius</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">mass</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">mass</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">radius</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">radius</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;universal&nbsp;gravitational&nbsp;constant&nbsp;&nbsp;(m3&nbsp;kg-1&nbsp;s-2)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">final</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">G</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">6.67300E</span><span class="sunlight-operator">-</span><span class="sunlight-number">11</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">surfaceGravity</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">G</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">mass</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">radius</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">radius</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">surfaceWeight</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">otherMass</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">otherMass</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">surfaceGravity</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2 id="javascript.js">javascript.js</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-javascript sunlight-highlighted"><span class="sunlight-javascript"><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">$</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-globalVariable">undefined</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">$</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-globalVariable">undefined</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-string">'missing&nbsp;jQuery\'s&nbsp;dependency'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">$$</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">id</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">element</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getElementById</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">id</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">property</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">element</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">write</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">property</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">":&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">element</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">property</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-operator">.</span><span class="sunlight-ident">alert</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"oh&nbsp;noes!!"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-reservedWord">abstract</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">encodeURIComponent</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalFunction">parseFloat</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"abstract&nbsp;is&nbsp;a&nbsp;reserved&nbsp;word"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">elements</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getElementsByTagName</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&amp;</span><span class="sunlight-ident">lt</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">elements</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">++</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">element</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-operator">!==</span>&nbsp;<span class="sunlight-string">'foo\'s'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">XMLHttpRequest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">XDomainRequest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">ActiveXObject</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"MSXML2.HTTP"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-globalObject">Object</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">finally</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">!==</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-operator">.</span><span class="sunlight-ident">open</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"http://google.com/"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-operator">.</span><span class="sunlight-ident">send</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">Error</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"FAIL"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bar</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">stringify</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-globalObject">JSON</span>&nbsp;<span class="sunlight-operator">!==</span>&nbsp;<span class="sunlight-globalVariable">undefined</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-globalObject">JSON</span><span class="sunlight-operator">.</span><span class="sunlight-ident">stringify</span><span class="sunlight-operator">.</span><span class="sunlight-ident">call</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">switch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"he\\\"ad"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//fall&nbsp;through</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">0x2</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">1e3</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;default&nbsp;implementation
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;of&nbsp;something
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-globalFunction">isNaN</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-keyword">this</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-globalVariable">NaN</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalVariable">Infinity</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">Boolean</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">true</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/\w[^A-Z0-9]$/g</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//regex&nbsp;literal&nbsp;parsing</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\//</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"/"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\\/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">/f\/oo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//all&nbsp;should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-regexLiteral">/regexafteroperator/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/regexatstartofline/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[/]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[\/]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[\]]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[\[]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\[/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/foo/gim</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex&nbsp;with&nbsp;modifiers</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/foo/asdfasdf</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex&nbsp;with&nbsp;non-existent&nbsp;modifiers</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">arr</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-regexLiteral">/regexafterbracket/</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-regexLiteral">/regexaftercomma/</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-operator">/</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">regex</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-regexLiteral">/regexafterbrace/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">text</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">regex</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/regexafterparen/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-regexLiteral">/regexaftersemicolon/</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//.test("foo");&nbsp;//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">identafterdivision1</span><span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-operator">/</span><span class="sunlight-ident">identafterdivision2</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">identafterdivision3</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">regexafterkeyword</span><span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">jsonLiteral</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">regex</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-regexLiteral">/regexaftercolon/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">jQuery</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
</span></pre></div></div>
<h2 id="lisp.lisp">lisp.lisp</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-20-line-1" href="#sunlight-20-line-1">1</a>
<a name="sunlight-20-line-2" href="#sunlight-20-line-2">2</a>
<a name="sunlight-20-line-3" href="#sunlight-20-line-3">3</a>
<a name="sunlight-20-line-4" href="#sunlight-20-line-4">4</a>
<a name="sunlight-20-line-5" href="#sunlight-20-line-5">5</a>
<a name="sunlight-20-line-6" href="#sunlight-20-line-6">6</a>
<a name="sunlight-20-line-7" href="#sunlight-20-line-7">7</a>
<a name="sunlight-20-line-8" href="#sunlight-20-line-8">8</a>
<a name="sunlight-20-line-9" href="#sunlight-20-line-9">9</a>
<a name="sunlight-20-line-10" href="#sunlight-20-line-10">10</a>
<a name="sunlight-20-line-11" href="#sunlight-20-line-11">11</a>
<a name="sunlight-20-line-12" href="#sunlight-20-line-12">12</a>
<a name="sunlight-20-line-13" href="#sunlight-20-line-13">13</a>
<a name="sunlight-20-line-14" href="#sunlight-20-line-14">14</a>
<a name="sunlight-20-line-15" href="#sunlight-20-line-15">15</a>
<a name="sunlight-20-line-16" href="#sunlight-20-line-16">16</a>
<a name="sunlight-20-line-17" href="#sunlight-20-line-17">17</a>
<a name="sunlight-20-line-18" href="#sunlight-20-line-18">18</a>
<a name="sunlight-20-line-19" href="#sunlight-20-line-19">19</a>
<a name="sunlight-20-line-20" href="#sunlight-20-line-20">20</a>
<a name="sunlight-20-line-21" href="#sunlight-20-line-21">21</a>
<a name="sunlight-20-line-22" href="#sunlight-20-line-22">22</a>
<a name="sunlight-20-line-23" href="#sunlight-20-line-23">23</a>
<a name="sunlight-20-line-24" href="#sunlight-20-line-24">24</a>
<a name="sunlight-20-line-25" href="#sunlight-20-line-25">25</a>
<a name="sunlight-20-line-26" href="#sunlight-20-line-26">26</a>
<a name="sunlight-20-line-27" href="#sunlight-20-line-27">27</a>
<a name="sunlight-20-line-28" href="#sunlight-20-line-28">28</a>
<a name="sunlight-20-line-29" href="#sunlight-20-line-29">29</a>
<a name="sunlight-20-line-30" href="#sunlight-20-line-30">30</a>
<a name="sunlight-20-line-31" href="#sunlight-20-line-31">31</a>
<a name="sunlight-20-line-32" href="#sunlight-20-line-32">32</a>
<a name="sunlight-20-line-33" href="#sunlight-20-line-33">33</a>
<a name="sunlight-20-line-34" href="#sunlight-20-line-34">34</a>
<a name="sunlight-20-line-35" href="#sunlight-20-line-35">35</a>
<a name="sunlight-20-line-36" href="#sunlight-20-line-36">36</a>
<a name="sunlight-20-line-37" href="#sunlight-20-line-37">37</a>
<a name="sunlight-20-line-38" href="#sunlight-20-line-38">38</a>
<a name="sunlight-20-line-39" href="#sunlight-20-line-39">39</a>
<a name="sunlight-20-line-40" href="#sunlight-20-line-40">40</a>
<a name="sunlight-20-line-41" href="#sunlight-20-line-41">41</a>
<a name="sunlight-20-line-42" href="#sunlight-20-line-42">42</a>
<a name="sunlight-20-line-43" href="#sunlight-20-line-43">43</a>
<a name="sunlight-20-line-44" href="#sunlight-20-line-44">44</a>
<a name="sunlight-20-line-45" href="#sunlight-20-line-45">45</a>
<a name="sunlight-20-line-46" href="#sunlight-20-line-46">46</a>
<a name="sunlight-20-line-47" href="#sunlight-20-line-47">47</a>
<a name="sunlight-20-line-48" href="#sunlight-20-line-48">48</a>
<a name="sunlight-20-line-49" href="#sunlight-20-line-49">49</a>
<a name="sunlight-20-line-50" href="#sunlight-20-line-50">50</a>
<a name="sunlight-20-line-51" href="#sunlight-20-line-51">51</a>
<a name="sunlight-20-line-52" href="#sunlight-20-line-52">52</a>
<a name="sunlight-20-line-53" href="#sunlight-20-line-53">53</a>
<a name="sunlight-20-line-54" href="#sunlight-20-line-54">54</a>
<a name="sunlight-20-line-55" href="#sunlight-20-line-55">55</a>
<a name="sunlight-20-line-56" href="#sunlight-20-line-56">56</a>
<a name="sunlight-20-line-57" href="#sunlight-20-line-57">57</a>
<a name="sunlight-20-line-58" href="#sunlight-20-line-58">58</a>
<a name="sunlight-20-line-59" href="#sunlight-20-line-59">59</a>
<a name="sunlight-20-line-60" href="#sunlight-20-line-60">60</a>
<a name="sunlight-20-line-61" href="#sunlight-20-line-61">61</a>
<a name="sunlight-20-line-62" href="#sunlight-20-line-62">62</a>
<a name="sunlight-20-line-63" href="#sunlight-20-line-63">63</a>
<a name="sunlight-20-line-64" href="#sunlight-20-line-64">64</a>
<a name="sunlight-20-line-65" href="#sunlight-20-line-65">65</a>
<a name="sunlight-20-line-66" href="#sunlight-20-line-66">66</a>
<a name="sunlight-20-line-67" href="#sunlight-20-line-67">67</a>
<a name="sunlight-20-line-68" href="#sunlight-20-line-68">68</a>
<a name="sunlight-20-line-69" href="#sunlight-20-line-69">69</a>
<a name="sunlight-20-line-70" href="#sunlight-20-line-70">70</a>
<a name="sunlight-20-line-71" href="#sunlight-20-line-71">71</a>
<a name="sunlight-20-line-72" href="#sunlight-20-line-72">72</a>
<a name="sunlight-20-line-73" href="#sunlight-20-line-73">73</a>
<a name="sunlight-20-line-74" href="#sunlight-20-line-74">74</a>
<a name="sunlight-20-line-75" href="#sunlight-20-line-75">75</a>
<a name="sunlight-20-line-76" href="#sunlight-20-line-76">76</a>
<a name="sunlight-20-line-77" href="#sunlight-20-line-77">77</a>
<a name="sunlight-20-line-78" href="#sunlight-20-line-78">78</a>
<a name="sunlight-20-line-79" href="#sunlight-20-line-79">79</a>
<a name="sunlight-20-line-80" href="#sunlight-20-line-80">80</a>
<a name="sunlight-20-line-81" href="#sunlight-20-line-81">81</a>
<a name="sunlight-20-line-82" href="#sunlight-20-line-82">82</a>
<a name="sunlight-20-line-83" href="#sunlight-20-line-83">83</a>
<a name="sunlight-20-line-84" href="#sunlight-20-line-84">84</a>
<a name="sunlight-20-line-85" href="#sunlight-20-line-85">85</a>
<a name="sunlight-20-line-86" href="#sunlight-20-line-86">86</a>
<a name="sunlight-20-line-87" href="#sunlight-20-line-87">87</a>
<a name="sunlight-20-line-88" href="#sunlight-20-line-88">88</a>
<a name="sunlight-20-line-89" href="#sunlight-20-line-89">89</a>
<a name="sunlight-20-line-90" href="#sunlight-20-line-90">90</a>
<a name="sunlight-20-line-91" href="#sunlight-20-line-91">91</a>
<a name="sunlight-20-line-92" href="#sunlight-20-line-92">92</a>
<a name="sunlight-20-line-93" href="#sunlight-20-line-93">93</a>
<a name="sunlight-20-line-94" href="#sunlight-20-line-94">94</a>
<a name="sunlight-20-line-95" href="#sunlight-20-line-95">95</a>
<a name="sunlight-20-line-96" href="#sunlight-20-line-96">96</a>
<a name="sunlight-20-line-97" href="#sunlight-20-line-97">97</a>
<a name="sunlight-20-line-98" href="#sunlight-20-line-98">98</a>
<a name="sunlight-20-line-99" href="#sunlight-20-line-99">99</a>
<a name="sunlight-20-line-100" href="#sunlight-20-line-100">100</a>
<a name="sunlight-20-line-101" href="#sunlight-20-line-101">101</a>
<a name="sunlight-20-line-102" href="#sunlight-20-line-102">102</a>
<a name="sunlight-20-line-103" href="#sunlight-20-line-103">103</a>
<a name="sunlight-20-line-104" href="#sunlight-20-line-104">104</a>
<a name="sunlight-20-line-105" href="#sunlight-20-line-105">105</a>
<a name="sunlight-20-line-106" href="#sunlight-20-line-106">106</a>
<a name="sunlight-20-line-107" href="#sunlight-20-line-107">107</a>
<a name="sunlight-20-line-108" href="#sunlight-20-line-108">108</a>
<a name="sunlight-20-line-109" href="#sunlight-20-line-109">109</a>
<a name="sunlight-20-line-110" href="#sunlight-20-line-110">110</a>
<a name="sunlight-20-line-111" href="#sunlight-20-line-111">111</a>
<a name="sunlight-20-line-112" href="#sunlight-20-line-112">112</a>
<a name="sunlight-20-line-113" href="#sunlight-20-line-113">113</a>
<a name="sunlight-20-line-114" href="#sunlight-20-line-114">114</a>
<a name="sunlight-20-line-115" href="#sunlight-20-line-115">115</a>
<a name="sunlight-20-line-116" href="#sunlight-20-line-116">116</a>
<a name="sunlight-20-line-117" href="#sunlight-20-line-117">117</a>
<a name="sunlight-20-line-118" href="#sunlight-20-line-118">118</a>
<a name="sunlight-20-line-119" href="#sunlight-20-line-119">119</a>
<a name="sunlight-20-line-120" href="#sunlight-20-line-120">120</a>
<a name="sunlight-20-line-121" href="#sunlight-20-line-121">121</a>
<a name="sunlight-20-line-122" href="#sunlight-20-line-122">122</a>
<a name="sunlight-20-line-123" href="#sunlight-20-line-123">123</a>
<a name="sunlight-20-line-124" href="#sunlight-20-line-124">124</a>
<a name="sunlight-20-line-125" href="#sunlight-20-line-125">125</a>
<a name="sunlight-20-line-126" href="#sunlight-20-line-126">126</a>
<a name="sunlight-20-line-127" href="#sunlight-20-line-127">127</a>
<a name="sunlight-20-line-128" href="#sunlight-20-line-128">128</a>
<a name="sunlight-20-line-129" href="#sunlight-20-line-129">129</a>
<a name="sunlight-20-line-130" href="#sunlight-20-line-130">130</a>
<a name="sunlight-20-line-131" href="#sunlight-20-line-131">131</a>
<a name="sunlight-20-line-132" href="#sunlight-20-line-132">132</a>
<a name="sunlight-20-line-133" href="#sunlight-20-line-133">133</a>
<a name="sunlight-20-line-134" href="#sunlight-20-line-134">134</a>
<a name="sunlight-20-line-135" href="#sunlight-20-line-135">135</a>
<a name="sunlight-20-line-136" href="#sunlight-20-line-136">136</a>
<a name="sunlight-20-line-137" href="#sunlight-20-line-137">137</a>
<a name="sunlight-20-line-138" href="#sunlight-20-line-138">138</a>
<a name="sunlight-20-line-139" href="#sunlight-20-line-139">139</a>
<a name="sunlight-20-line-140" href="#sunlight-20-line-140">140</a>
<a name="sunlight-20-line-141" href="#sunlight-20-line-141">141</a>
<a name="sunlight-20-line-142" href="#sunlight-20-line-142">142</a>
<a name="sunlight-20-line-143" href="#sunlight-20-line-143">143</a>
<a name="sunlight-20-line-144" href="#sunlight-20-line-144">144</a>
<a name="sunlight-20-line-145" href="#sunlight-20-line-145">145</a>
<a name="sunlight-20-line-146" href="#sunlight-20-line-146">146</a>
<a name="sunlight-20-line-147" href="#sunlight-20-line-147">147</a>
<a name="sunlight-20-line-148" href="#sunlight-20-line-148">148</a>
<a name="sunlight-20-line-149" href="#sunlight-20-line-149">149</a>
<a name="sunlight-20-line-150" href="#sunlight-20-line-150">150</a>
<a name="sunlight-20-line-151" href="#sunlight-20-line-151">151</a>
<a name="sunlight-20-line-152" href="#sunlight-20-line-152">152</a>
<a name="sunlight-20-line-153" href="#sunlight-20-line-153">153</a>
<a name="sunlight-20-line-154" href="#sunlight-20-line-154">154</a>
<a name="sunlight-20-line-155" href="#sunlight-20-line-155">155</a>
<a name="sunlight-20-line-156" href="#sunlight-20-line-156">156</a>
<a name="sunlight-20-line-157" href="#sunlight-20-line-157">157</a>
<a name="sunlight-20-line-158" href="#sunlight-20-line-158">158</a>
<a name="sunlight-20-line-159" href="#sunlight-20-line-159">159</a>
<a name="sunlight-20-line-160" href="#sunlight-20-line-160">160</a>
<a name="sunlight-20-line-161" href="#sunlight-20-line-161">161</a>
<a name="sunlight-20-line-162" href="#sunlight-20-line-162">162</a>
<a name="sunlight-20-line-163" href="#sunlight-20-line-163">163</a>
<a name="sunlight-20-line-164" href="#sunlight-20-line-164">164</a>
<a name="sunlight-20-line-165" href="#sunlight-20-line-165">165</a>
<a name="sunlight-20-line-166" href="#sunlight-20-line-166">166</a>
<a name="sunlight-20-line-167" href="#sunlight-20-line-167">167</a>
<a name="sunlight-20-line-168" href="#sunlight-20-line-168">168</a>
<a name="sunlight-20-line-169" href="#sunlight-20-line-169">169</a>
<a name="sunlight-20-line-170" href="#sunlight-20-line-170">170</a>
<a name="sunlight-20-line-171" href="#sunlight-20-line-171">171</a>
<a name="sunlight-20-line-172" href="#sunlight-20-line-172">172</a>
<a name="sunlight-20-line-173" href="#sunlight-20-line-173">173</a>
<a name="sunlight-20-line-174" href="#sunlight-20-line-174">174</a>
<a name="sunlight-20-line-175" href="#sunlight-20-line-175">175</a>
<a name="sunlight-20-line-176" href="#sunlight-20-line-176">176</a>
<a name="sunlight-20-line-177" href="#sunlight-20-line-177">177</a>
<a name="sunlight-20-line-178" href="#sunlight-20-line-178">178</a>
<a name="sunlight-20-line-179" href="#sunlight-20-line-179">179</a>
<a name="sunlight-20-line-180" href="#sunlight-20-line-180">180</a>
<a name="sunlight-20-line-181" href="#sunlight-20-line-181">181</a>
<a name="sunlight-20-line-182" href="#sunlight-20-line-182">182</a>
<a name="sunlight-20-line-183" href="#sunlight-20-line-183">183</a>
<a name="sunlight-20-line-184" href="#sunlight-20-line-184">184</a>
<a name="sunlight-20-line-185" href="#sunlight-20-line-185">185</a>
<a name="sunlight-20-line-186" href="#sunlight-20-line-186">186</a>
</div><pre class="sunlight-highlight-lisp sunlight-highlighted"><span class="sunlight-lisp"><span class="sunlight-comment">;;;&nbsp;Count&nbsp;and&nbsp;collect&nbsp;names&nbsp;and&nbsp;ages.</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">loop</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">fred</span>&nbsp;<span class="sunlight-ident">sue</span>&nbsp;<span class="sunlight-ident">alice</span>&nbsp;<span class="sunlight-ident">joe</span>&nbsp;<span class="sunlight-ident">june</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-ident">age</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">22</span>&nbsp;<span class="sunlight-number">26</span>&nbsp;<span class="sunlight-number">19</span>&nbsp;<span class="sunlight-number">20</span>&nbsp;<span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">append</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">list</span>&nbsp;<span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-ident">age</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">into</span>&nbsp;<span class="sunlight-ident">name-and-age-list</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">count</span>&nbsp;<span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-keyword">into</span>&nbsp;<span class="sunlight-ident">name-count</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sum</span>&nbsp;<span class="sunlight-ident">age</span>&nbsp;<span class="sunlight-keyword">into</span>&nbsp;<span class="sunlight-ident">total-age</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">finally</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">return</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">values</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">round</span>&nbsp;<span class="sunlight-ident">total-age</span>&nbsp;<span class="sunlight-ident">name-count</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">name-and-age-list</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;&nbsp;special&nbsp;form&nbsp;and&nbsp;constant</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">setq</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">+</span>&nbsp;<span class="sunlight-number">3</span>&nbsp;<span class="sunlight-number">2</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">cons</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-constant">nil</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;&nbsp;type</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-type">series</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-operator">#</span><span class="sunlight-ident">Z</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">...</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-function">scan</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">list</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-operator">#</span><span class="sunlight-ident">Z</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;&nbsp;declaration&nbsp;specifier</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defun</span>&nbsp;<span class="sunlight-named-ident">simple-collect-sum</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">numbers</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">declare</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-declarationSpecifier">optimizable-series-function</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">collect-fn</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">number</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">lambda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-function">+</span>&nbsp;<span class="sunlight-ident">numbers</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;&nbsp;global&nbsp;variables</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">let</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalVariable">*print-right-margin*</span>&nbsp;<span class="sunlight-number">25</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-globalVariable">*print-lines*</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pprint</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">progn</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">setq</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-number">2</span>&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-number">3</span>&nbsp;<span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>


<span class="sunlight-operator">#2A</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">#4r</span><span class="sunlight-number">4056</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">hot</span>&nbsp;<span class="sunlight-ident">dog</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;&nbsp;user-defined&nbsp;variable</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-variable">*temp*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">function</span>&nbsp;<span class="sunlight-globalVariable">*</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;&nbsp;keyword&nbsp;arguments</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-function">write</span>&nbsp;<span class="sunlight-ident">foo</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:pretty</span>&nbsp;<span class="sunlight-constant">t</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:right-margin</span>&nbsp;<span class="sunlight-number">60</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:case</span>&nbsp;<span class="sunlight-keywordArgument">:downcase</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;;;&nbsp;cl-typesetting&nbsp;copyright&nbsp;2003-2004&nbsp;Marc&nbsp;Battyani&nbsp;see&nbsp;license.txt&nbsp;for&nbsp;the&nbsp;details</span>
<span class="sunlight-comment">;;;&nbsp;You&nbsp;can&nbsp;reach&nbsp;me&nbsp;at&nbsp;marc.battyani@fractalconcept.com&nbsp;or&nbsp;marc@battyani.net</span>
<span class="sunlight-comment">;;;&nbsp;The&nbsp;homepage&nbsp;of&nbsp;cl-typesetting&nbsp;is&nbsp;here:&nbsp;http://www.fractalconcept.com/asp/html/cl-typesetting.html</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">in-package</span>&nbsp;<span class="sunlight-operator">#:</span><span class="sunlight-ident">typeset</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;;;&nbsp;This&nbsp;is&nbsp;a&nbsp;module&nbsp;to&nbsp;typeset&nbsp;Common&nbsp;Lisp&nbsp;code&nbsp;with&nbsp;some&nbsp;syntax&nbsp;coloring</span>
<span class="sunlight-comment">;;;&nbsp;The&nbsp;syntax&nbsp;coloring&nbsp;is&nbsp;too&nbsp;simple&nbsp;to&nbsp;be&nbsp;100%&nbsp;accurate:</span>
<span class="sunlight-comment">;;;&nbsp;Improvements&nbsp;welcomed!</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-font-size*</span>&nbsp;<span class="sunlight-number">9</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-default-decoration*</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"courier"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-keyword-decoration*</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"courier"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0.8</span>&nbsp;<span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-common-lisp-decoration*</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"courier"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.4</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-string-decoration*</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"courier"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.5</span>&nbsp;<span class="sunlight-number">0.0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-comment-decoration*</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"courier"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0.2</span>&nbsp;<span class="sunlight-number">0.2</span>&nbsp;<span class="sunlight-number">0.6</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*pp-symbol-decoration-table*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">make-hash-table</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defparameter</span>&nbsp;<span class="sunlight-variable">*exceptions*</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defun</span>&nbsp;<span class="sunlight-named-ident">add-symbol-decoration</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">symbol</span>&nbsp;<span class="sunlight-ident">decoration</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">gethash</span>&nbsp;<span class="sunlight-ident">symbol</span>&nbsp;<span class="sunlight-variable">*pp-symbol-decoration-table*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">decoration</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">;(loop&nbsp;for&nbsp;(symbol&nbsp;.&nbsp;decoration)&nbsp;in&nbsp;'((defvar&nbsp;"courier-bold"&nbsp;(0.0&nbsp;0.0&nbsp;0.5))</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(defun&nbsp;"courier-bold"&nbsp;(0.0&nbsp;0.2&nbsp;0.5))</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(defmethod&nbsp;"courier-bold"&nbsp;(0.0&nbsp;0.2&nbsp;0.5)))</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;(add-symbol-decoration&nbsp;symbol&nbsp;decoration))</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">loop</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">symbol</span>&nbsp;<span class="sunlight-ident">being</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">external-symbols</span>&nbsp;<span class="sunlight-ident">of</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">common-lisp</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">eql</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">search</span>&nbsp;<span class="sunlight-string">"DEF"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">symbol-name</span>&nbsp;<span class="sunlight-ident">symbol</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">add-symbol-decoration</span>&nbsp;<span class="sunlight-ident">symbol</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"courier-bold"</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0.0</span>&nbsp;<span class="sunlight-number">0.2</span>&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defun</span>&nbsp;<span class="sunlight-named-ident">split-comment</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">let</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">comment-pos</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">position</span>&nbsp;<span class="sunlight-operator">#\</span><span class="sunlight-ident">;</span>&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">if</span>&nbsp;<span class="sunlight-ident">comment-pos</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">values</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">subseq</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-ident">comment-pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">subseq</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-ident">comment-pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defun</span>&nbsp;<span class="sunlight-named-ident">clean-line</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">copy-seq</span>&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">map-into</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">lambda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">char</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">find</span>&nbsp;<span class="sunlight-ident">char</span>&nbsp;<span class="sunlight-string">"()'`#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">#\</span><span class="sunlight-ident">Space</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">char</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defun</span>&nbsp;<span class="sunlight-named-ident">process-lisp-line</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">multiple-value-bind</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">code</span>&nbsp;<span class="sunlight-ident">comment</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">split-comment</span>&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">let*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cleaned-line</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">clean-line</span>&nbsp;<span class="sunlight-ident">code</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">cl-package</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">find-package</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-ident">common-lisp</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">decorations</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">length</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">length</span>&nbsp;<span class="sunlight-ident">cleaned-line</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">iter</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">position</span>&nbsp;<span class="sunlight-operator">#\</span><span class="sunlight-ident">Space</span>&nbsp;<span class="sunlight-ident">cleaned-line</span>&nbsp;<span class="sunlight-keywordArgument">:start</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-keywordArgument">:test</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-function">char/=</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">and</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">&lt;</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">values</span>&nbsp;<span class="sunlight-ident">obj</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">ignore-errors</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">read-from-string</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">cleaned-line</span>&nbsp;<span class="sunlight-constant">nil</span>&nbsp;<span class="sunlight-constant">nil</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:start</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-keywordArgument">:preserve-whitespace</span>&nbsp;<span class="sunlight-constant">t</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">unless</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">numberp</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">position</span>&nbsp;<span class="sunlight-operator">#\</span><span class="sunlight-ident">Space</span>&nbsp;<span class="sunlight-ident">cleaned-line</span>&nbsp;<span class="sunlight-keywordArgument">:start</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-keywordArgument">:test</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-function">char=</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">and</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">numberp</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">&lt;</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">cond</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">keywordp</span>&nbsp;<span class="sunlight-ident">obj</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">push</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">list*</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-variable">*pp-keyword-decoration*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">decorations</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">stringp</span>&nbsp;<span class="sunlight-ident">obj</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">push</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">list*</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-variable">*pp-string-decoration*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">decorations</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">gethash</span>&nbsp;<span class="sunlight-ident">obj</span>&nbsp;<span class="sunlight-variable">*pp-symbol-decoration-table*</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">push</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">list*</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">gethash</span>&nbsp;<span class="sunlight-ident">obj</span>&nbsp;<span class="sunlight-variable">*pp-symbol-decoration-table*</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">decorations</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-macro">and</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">symbolp</span>&nbsp;<span class="sunlight-ident">obj</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">or</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">eq</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">symbol-package</span>&nbsp;<span class="sunlight-ident">obj</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">cl-package</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">member</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">symbol-name</span>&nbsp;<span class="sunlight-ident">obj</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"FOR"</span>&nbsp;<span class="sunlight-string">"THEN"</span>&nbsp;<span class="sunlight-string">"WHILE"</span>&nbsp;<span class="sunlight-string">"COLLECT"</span>&nbsp;<span class="sunlight-string">"IN"</span>&nbsp;<span class="sunlight-string">"WITH"</span>&nbsp;<span class="sunlight-string">"FINALLY"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:test</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-function">string=</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">not</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">member</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">symbol-name</span>&nbsp;<span class="sunlight-ident">obj</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-variable">*exceptions*</span>&nbsp;<span class="sunlight-keywordArgument">:test</span>&nbsp;<span class="sunlight-operator">#'</span><span class="sunlight-function">string=</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">push</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">list*</span>&nbsp;<span class="sunlight-ident">trimmed</span>&nbsp;<span class="sunlight-ident">end</span>&nbsp;<span class="sunlight-variable">*pp-common-lisp-decoration*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">decorations</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">loop</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">start-tok</span>&nbsp;<span class="sunlight-ident">end-tok</span>&nbsp;<span class="sunlight-ident">font-name</span>&nbsp;<span class="sunlight-ident">color</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">nreverse</span>&nbsp;<span class="sunlight-ident">decorations</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">=</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-ident">start-tok</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-text-compilation</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">subseq</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-ident">start-tok</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-text-compilation</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-style</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keywordArgument">:font</span>&nbsp;<span class="sunlight-ident">font-name</span>&nbsp;<span class="sunlight-keywordArgument">:font-size</span>&nbsp;<span class="sunlight-variable">*pp-font-size*</span>&nbsp;<span class="sunlight-keywordArgument">:color</span>&nbsp;<span class="sunlight-ident">color</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">subseq</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-ident">start-tok</span>&nbsp;<span class="sunlight-ident">end-tok</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">setf</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-ident">end-tok</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-text-compilation</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">&lt;</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">subseq</span>&nbsp;<span class="sunlight-ident">code</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-style</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keywordArgument">:font</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">first</span>&nbsp;<span class="sunlight-variable">*pp-comment-decoration*</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:font-size</span>&nbsp;<span class="sunlight-variable">*pp-font-size*</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:color</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">second</span>&nbsp;<span class="sunlight-variable">*pp-comment-decoration*</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>&nbsp;<span class="sunlight-ident">comment</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">zerop</span>&nbsp;<span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keywordArgument">:eol</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defmethod</span>&nbsp;<span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">stream</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-text-compilation</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">paragraph</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keywordArgument">:h-align</span>&nbsp;<span class="sunlight-keywordArgument">:left</span>&nbsp;<span class="sunlight-keywordArgument">:top-margin</span>&nbsp;<span class="sunlight-number">10</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:left-margin</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-keywordArgument">:right-margin</span>&nbsp;<span class="sunlight-number">5</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:font</span>&nbsp;<span class="sunlight-string">"courier"</span>&nbsp;<span class="sunlight-keywordArgument">:font-size</span>&nbsp;<span class="sunlight-variable">*pp-font-size*</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">loop</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-punctuation">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">read-line</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-constant">nil</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-ident">line</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-text-compilation</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">process-lisp-line</span>&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defmethod</span>&nbsp;<span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">lisp-file</span>&nbsp;<span class="sunlight-ident">pathname</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">with-open-file</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">lisp-file</span>&nbsp;<span class="sunlight-keywordArgument">:direction</span>&nbsp;<span class="sunlight-keywordArgument">:input</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defmethod</span>&nbsp;<span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">lisp-string</span>&nbsp;<span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">with-input-from-string</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-ident">lisp-string</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defmethod</span>&nbsp;<span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">sexpr</span>&nbsp;<span class="sunlight-constant">t</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">process-lisp-code</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">with-output-to-string</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pprint</span>&nbsp;<span class="sunlight-ident">sexpr</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-punctuation">(</span><span class="sunlight-macro">defun</span>&nbsp;<span class="sunlight-named-ident">pprint-lisp-file</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lisp-code</span>&nbsp;<span class="sunlight-ident">pdf-file</span>&nbsp;<span class="sunlight-punctuation">&amp;</span><span class="sunlight-ident">optional</span>&nbsp;<span class="sunlight-ident">title</span>&nbsp;<span class="sunlight-variable">*exceptions*</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">with-document</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">let*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">margins</span>&nbsp;<span class="sunlight-operator">'</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">30</span>&nbsp;<span class="sunlight-number">50</span>&nbsp;<span class="sunlight-number">30</span>&nbsp;<span class="sunlight-number">50</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">print-stamp</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">multiple-value-bind</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">second</span>&nbsp;<span class="sunlight-ident">minute</span>&nbsp;<span class="sunlight-ident">hour</span>&nbsp;<span class="sunlight-ident">date</span>&nbsp;<span class="sunlight-ident">month</span>&nbsp;<span class="sunlight-ident">year</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">get-decoded-time</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialForm">declare</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">ignore</span>&nbsp;<span class="sunlight-ident">second</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">format</span>&nbsp;<span class="sunlight-constant">nil</span>&nbsp;<span class="sunlight-string">"Printed&nbsp;on&nbsp;~4D-~2,'0D-~2,'0D&nbsp;~2,'0D:~2,'0D"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">year</span>&nbsp;<span class="sunlight-ident">month</span>&nbsp;<span class="sunlight-ident">date</span>&nbsp;<span class="sunlight-ident">hour</span>&nbsp;<span class="sunlight-ident">minute</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">header</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">compile-text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">paragraph</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keywordArgument">:h-align</span>&nbsp;<span class="sunlight-keywordArgument">:center</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:font</span>&nbsp;<span class="sunlight-string">"Helvetica-BoldOblique"</span>&nbsp;<span class="sunlight-keywordArgument">:font-size</span>&nbsp;<span class="sunlight-number">12</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">put-string</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">cond</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">title</span>&nbsp;<span class="sunlight-ident">title</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">pathnamep</span>&nbsp;<span class="sunlight-ident">lisp-code</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">(</span><span class="sunlight-function">namestring</span>&nbsp;<span class="sunlight-ident">lisp-code</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-constant">t</span>&nbsp;<span class="sunlight-string">"Lisp&nbsp;Source&nbsp;Code"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">vspace</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">hrule</span>&nbsp;<span class="sunlight-keywordArgument">:dy</span>&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">footer</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">lambda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pdf</span><span class="sunlight-keywordArgument">:*page*</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">compile-text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keywordArgument">:font</span>&nbsp;<span class="sunlight-string">"Helvetica"</span>&nbsp;<span class="sunlight-keywordArgument">:font-size</span>&nbsp;<span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">hrule</span>&nbsp;<span class="sunlight-keywordArgument">:dy</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">/</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">hbox</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keywordArgument">:align</span>&nbsp;<span class="sunlight-keywordArgument">:center</span>&nbsp;<span class="sunlight-keywordArgument">:adjustable-p</span>&nbsp;<span class="sunlight-constant">t</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>&nbsp;<span class="sunlight-ident">print-stamp</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keywordArgument">:hfill</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">verbatim</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">format</span>&nbsp;<span class="sunlight-constant">nil</span>&nbsp;<span class="sunlight-string">"Page&nbsp;~d"</span>&nbsp;<span class="sunlight-ident">pdf</span><span class="sunlight-keywordArgument">:*page-number*</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">content</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">compile-text</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">process-lisp-code</span>&nbsp;<span class="sunlight-ident">lisp-code</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">draw-pages</span>&nbsp;<span class="sunlight-ident">content</span>&nbsp;<span class="sunlight-keywordArgument">:margins</span>&nbsp;<span class="sunlight-ident">margins</span>&nbsp;<span class="sunlight-keywordArgument">:header</span>&nbsp;<span class="sunlight-ident">header</span>&nbsp;<span class="sunlight-keywordArgument">:footer</span>&nbsp;<span class="sunlight-ident">footer</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-macro">when</span>&nbsp;<span class="sunlight-ident">pdf</span><span class="sunlight-keywordArgument">:*page*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">finalize-page</span>&nbsp;<span class="sunlight-ident">pdf</span><span class="sunlight-keywordArgument">:*page*</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pdf</span><span class="sunlight-keywordArgument">:write-document</span>&nbsp;<span class="sunlight-ident">pdf-file</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
</span></pre></div></div>
<h2 id="lua.lua">lua.lua</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-21-line-1" href="#sunlight-21-line-1">1</a>
<a name="sunlight-21-line-2" href="#sunlight-21-line-2">2</a>
<a name="sunlight-21-line-3" href="#sunlight-21-line-3">3</a>
<a name="sunlight-21-line-4" href="#sunlight-21-line-4">4</a>
<a name="sunlight-21-line-5" href="#sunlight-21-line-5">5</a>
<a name="sunlight-21-line-6" href="#sunlight-21-line-6">6</a>
<a name="sunlight-21-line-7" href="#sunlight-21-line-7">7</a>
<a name="sunlight-21-line-8" href="#sunlight-21-line-8">8</a>
<a name="sunlight-21-line-9" href="#sunlight-21-line-9">9</a>
<a name="sunlight-21-line-10" href="#sunlight-21-line-10">10</a>
<a name="sunlight-21-line-11" href="#sunlight-21-line-11">11</a>
<a name="sunlight-21-line-12" href="#sunlight-21-line-12">12</a>
<a name="sunlight-21-line-13" href="#sunlight-21-line-13">13</a>
<a name="sunlight-21-line-14" href="#sunlight-21-line-14">14</a>
<a name="sunlight-21-line-15" href="#sunlight-21-line-15">15</a>
<a name="sunlight-21-line-16" href="#sunlight-21-line-16">16</a>
<a name="sunlight-21-line-17" href="#sunlight-21-line-17">17</a>
<a name="sunlight-21-line-18" href="#sunlight-21-line-18">18</a>
<a name="sunlight-21-line-19" href="#sunlight-21-line-19">19</a>
<a name="sunlight-21-line-20" href="#sunlight-21-line-20">20</a>
<a name="sunlight-21-line-21" href="#sunlight-21-line-21">21</a>
<a name="sunlight-21-line-22" href="#sunlight-21-line-22">22</a>
<a name="sunlight-21-line-23" href="#sunlight-21-line-23">23</a>
<a name="sunlight-21-line-24" href="#sunlight-21-line-24">24</a>
<a name="sunlight-21-line-25" href="#sunlight-21-line-25">25</a>
<a name="sunlight-21-line-26" href="#sunlight-21-line-26">26</a>
<a name="sunlight-21-line-27" href="#sunlight-21-line-27">27</a>
<a name="sunlight-21-line-28" href="#sunlight-21-line-28">28</a>
<a name="sunlight-21-line-29" href="#sunlight-21-line-29">29</a>
<a name="sunlight-21-line-30" href="#sunlight-21-line-30">30</a>
<a name="sunlight-21-line-31" href="#sunlight-21-line-31">31</a>
<a name="sunlight-21-line-32" href="#sunlight-21-line-32">32</a>
<a name="sunlight-21-line-33" href="#sunlight-21-line-33">33</a>
<a name="sunlight-21-line-34" href="#sunlight-21-line-34">34</a>
<a name="sunlight-21-line-35" href="#sunlight-21-line-35">35</a>
<a name="sunlight-21-line-36" href="#sunlight-21-line-36">36</a>
<a name="sunlight-21-line-37" href="#sunlight-21-line-37">37</a>
<a name="sunlight-21-line-38" href="#sunlight-21-line-38">38</a>
<a name="sunlight-21-line-39" href="#sunlight-21-line-39">39</a>
<a name="sunlight-21-line-40" href="#sunlight-21-line-40">40</a>
<a name="sunlight-21-line-41" href="#sunlight-21-line-41">41</a>
<a name="sunlight-21-line-42" href="#sunlight-21-line-42">42</a>
<a name="sunlight-21-line-43" href="#sunlight-21-line-43">43</a>
<a name="sunlight-21-line-44" href="#sunlight-21-line-44">44</a>
<a name="sunlight-21-line-45" href="#sunlight-21-line-45">45</a>
<a name="sunlight-21-line-46" href="#sunlight-21-line-46">46</a>
<a name="sunlight-21-line-47" href="#sunlight-21-line-47">47</a>
<a name="sunlight-21-line-48" href="#sunlight-21-line-48">48</a>
<a name="sunlight-21-line-49" href="#sunlight-21-line-49">49</a>
<a name="sunlight-21-line-50" href="#sunlight-21-line-50">50</a>
<a name="sunlight-21-line-51" href="#sunlight-21-line-51">51</a>
<a name="sunlight-21-line-52" href="#sunlight-21-line-52">52</a>
<a name="sunlight-21-line-53" href="#sunlight-21-line-53">53</a>
<a name="sunlight-21-line-54" href="#sunlight-21-line-54">54</a>
<a name="sunlight-21-line-55" href="#sunlight-21-line-55">55</a>
<a name="sunlight-21-line-56" href="#sunlight-21-line-56">56</a>
<a name="sunlight-21-line-57" href="#sunlight-21-line-57">57</a>
<a name="sunlight-21-line-58" href="#sunlight-21-line-58">58</a>
<a name="sunlight-21-line-59" href="#sunlight-21-line-59">59</a>
<a name="sunlight-21-line-60" href="#sunlight-21-line-60">60</a>
<a name="sunlight-21-line-61" href="#sunlight-21-line-61">61</a>
<a name="sunlight-21-line-62" href="#sunlight-21-line-62">62</a>
<a name="sunlight-21-line-63" href="#sunlight-21-line-63">63</a>
<a name="sunlight-21-line-64" href="#sunlight-21-line-64">64</a>
<a name="sunlight-21-line-65" href="#sunlight-21-line-65">65</a>
<a name="sunlight-21-line-66" href="#sunlight-21-line-66">66</a>
<a name="sunlight-21-line-67" href="#sunlight-21-line-67">67</a>
<a name="sunlight-21-line-68" href="#sunlight-21-line-68">68</a>
<a name="sunlight-21-line-69" href="#sunlight-21-line-69">69</a>
<a name="sunlight-21-line-70" href="#sunlight-21-line-70">70</a>
<a name="sunlight-21-line-71" href="#sunlight-21-line-71">71</a>
<a name="sunlight-21-line-72" href="#sunlight-21-line-72">72</a>
<a name="sunlight-21-line-73" href="#sunlight-21-line-73">73</a>
<a name="sunlight-21-line-74" href="#sunlight-21-line-74">74</a>
<a name="sunlight-21-line-75" href="#sunlight-21-line-75">75</a>
<a name="sunlight-21-line-76" href="#sunlight-21-line-76">76</a>
<a name="sunlight-21-line-77" href="#sunlight-21-line-77">77</a>
<a name="sunlight-21-line-78" href="#sunlight-21-line-78">78</a>
<a name="sunlight-21-line-79" href="#sunlight-21-line-79">79</a>
<a name="sunlight-21-line-80" href="#sunlight-21-line-80">80</a>
<a name="sunlight-21-line-81" href="#sunlight-21-line-81">81</a>
<a name="sunlight-21-line-82" href="#sunlight-21-line-82">82</a>
<a name="sunlight-21-line-83" href="#sunlight-21-line-83">83</a>
<a name="sunlight-21-line-84" href="#sunlight-21-line-84">84</a>
<a name="sunlight-21-line-85" href="#sunlight-21-line-85">85</a>
<a name="sunlight-21-line-86" href="#sunlight-21-line-86">86</a>
<a name="sunlight-21-line-87" href="#sunlight-21-line-87">87</a>
<a name="sunlight-21-line-88" href="#sunlight-21-line-88">88</a>
<a name="sunlight-21-line-89" href="#sunlight-21-line-89">89</a>
<a name="sunlight-21-line-90" href="#sunlight-21-line-90">90</a>
<a name="sunlight-21-line-91" href="#sunlight-21-line-91">91</a>
<a name="sunlight-21-line-92" href="#sunlight-21-line-92">92</a>
<a name="sunlight-21-line-93" href="#sunlight-21-line-93">93</a>
<a name="sunlight-21-line-94" href="#sunlight-21-line-94">94</a>
<a name="sunlight-21-line-95" href="#sunlight-21-line-95">95</a>
<a name="sunlight-21-line-96" href="#sunlight-21-line-96">96</a>
<a name="sunlight-21-line-97" href="#sunlight-21-line-97">97</a>
<a name="sunlight-21-line-98" href="#sunlight-21-line-98">98</a>
<a name="sunlight-21-line-99" href="#sunlight-21-line-99">99</a>
<a name="sunlight-21-line-100" href="#sunlight-21-line-100">100</a>
<a name="sunlight-21-line-101" href="#sunlight-21-line-101">101</a>
<a name="sunlight-21-line-102" href="#sunlight-21-line-102">102</a>
</div><pre class="sunlight-highlight-lua sunlight-highlighted"><span class="sunlight-lua"><span class="sunlight-comment">--strings</span>
<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'alo\n123"'</span>
<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"alo\n123\""</span>
<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'\97lo\10\04923"'</span>
<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-verbatimString">[[alo
123"]]</span>
<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-verbatimString">[==[
alo
123"]==]</span>

<span class="sunlight-comment">--[[
multi
line
comment]]</span>

<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">BUFSIZE</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-operator">^</span><span class="sunlight-number">13</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;8K</span>
<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">io</span><span class="sunlight-operator">.</span><span class="sunlight-ident">input</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">arg</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;open&nbsp;input&nbsp;file</span>
<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">cc</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">lc</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">wc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;char,&nbsp;line,&nbsp;and&nbsp;word&nbsp;counts</span>
<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-keyword">true</span>&nbsp;<span class="sunlight-keyword">do</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">:</span><span class="sunlight-function">read</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">BUFSIZE</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"*line"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-keyword">not</span>&nbsp;<span class="sunlight-ident">lines</span>&nbsp;<span class="sunlight-keyword">then</span>&nbsp;<span class="sunlight-keyword">break</span>&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-keyword">then</span>&nbsp;<span class="sunlight-ident">lines</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lines</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-ident">rest</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-string">'\n'</span>&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">cc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">cc</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">len</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;count&nbsp;words&nbsp;in&nbsp;the&nbsp;chunk</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">_</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">gsub</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"%S+"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">wc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">wc</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">t</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;count&nbsp;newlines&nbsp;in&nbsp;the&nbsp;chunk</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">_</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">gsub</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"\n"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"\n"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lc</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">t</span>
<span class="sunlight-keyword">end</span>
<span class="sunlight-function">print</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">lc</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">wc</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">cc</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">--&nbsp;print&nbsp;the&nbsp;first&nbsp;non-empty&nbsp;line</span>
<span class="sunlight-keyword">repeat</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">os</span><span class="sunlight-operator">.</span><span class="sunlight-ident">read</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">until</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-operator">~=</span>&nbsp;<span class="sunlight-string">""</span>
<span class="sunlight-function">print</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">line</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">sortbygrade</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">names</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">grades</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-named-ident">table</span><span class="sunlight-operator">.</span><span class="sunlight-ident">sort</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">names</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">n2</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">grades</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">n1</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">grades</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">n2</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;compare&nbsp;the&nbsp;grades</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-comment">--&nbsp;Markov&nbsp;Chain&nbsp;Program&nbsp;in&nbsp;Lua</span>

<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">allwords</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">io</span><span class="sunlight-operator">.</span><span class="sunlight-ident">read</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;current&nbsp;line</span>
&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;line</span>
&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;iterator&nbsp;function</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;repeat&nbsp;while&nbsp;there&nbsp;are&nbsp;lines</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">find</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">line</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"%w+"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-keyword">then</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;found&nbsp;a&nbsp;word?</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;update&nbsp;next&nbsp;position</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-named-ident">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">sub</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">line</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;return&nbsp;the&nbsp;word</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">line</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">io</span><span class="sunlight-operator">.</span><span class="sunlight-ident">read</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;word&nbsp;not&nbsp;found;&nbsp;try&nbsp;next&nbsp;line</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;restart&nbsp;from&nbsp;first&nbsp;position</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">nil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;no&nbsp;more&nbsp;lines:&nbsp;end&nbsp;of&nbsp;traversal</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">prefix</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">w1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">w2</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">w1</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-string">'&nbsp;'</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-ident">w2</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">statetab</span>

<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">insert</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">value</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-keyword">not</span>&nbsp;<span class="sunlight-ident">statetab</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-keyword">then</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">statetab</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-ident">n</span><span class="sunlight-operator">=</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">table</span><span class="sunlight-operator">.</span><span class="sunlight-ident">insert</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">statetab</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">value</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">N</span>&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span>
<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">MAXGEN</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">10000</span>
<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">NOWORD</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"\n"</span>

<span class="sunlight-comment">--&nbsp;build&nbsp;table</span>
<span class="sunlight-ident">statetab</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>
<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">w1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">w2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NOWORD</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">NOWORD</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">allwords</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">insert</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">prefix</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">w1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">w2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">w</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">w1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">w2</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">w2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">w</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">end</span>
<span class="sunlight-ident">insert</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">prefix</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">w1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">w2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">NOWORD</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">--&nbsp;generate&nbsp;text</span>
<span class="sunlight-ident">w1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NOWORD</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">w2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">NOWORD</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;reinitialize</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">MAXGEN</span>&nbsp;<span class="sunlight-keyword">do</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">list</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">statetab</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">prefix</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">w1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">w2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">--&nbsp;choose&nbsp;a&nbsp;random&nbsp;item&nbsp;from&nbsp;list</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">math</span><span class="sunlight-operator">.</span><span class="sunlight-ident">random</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">table</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getn</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">list</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-ident">nextword</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">list</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">r</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">nextword</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">NOWORD</span>&nbsp;<span class="sunlight-keyword">then</span>&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">io</span><span class="sunlight-operator">.</span><span class="sunlight-ident">write</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">nextword</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">w1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">w2</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">w2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nextword</span>
<span class="sunlight-keyword">end</span>

</span></pre></div></div>
<h2 id="mysql.sql">mysql.sql</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-mysql sunlight-highlighted"><span class="sunlight-mysql"><span class="sunlight-comment">--comment&nbsp;1</span>
<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-keyword">from</span>&nbsp;<span class="sunlight-named-ident">db</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">my_table</span>&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">myTable</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">10</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-comment">/*&nbsp;multi
line&nbsp;comment&nbsp;*/</span>

<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-string">"escaped\\\""</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-string">'escaped\\\''</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-comment">#comment&nbsp;2</span>
<span class="sunlight-keyword">SELECT</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-quotedIdent">`foo`</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">bar</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-keyword">AS</span>&nbsp;<span class="sunlight-quotedIdent">`foo.name`</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-operator">.</span><span class="sunlight-ident">baz</span>
<span class="sunlight-keyword">FROM</span>&nbsp;<span class="sunlight-named-ident">foo</span>&nbsp;<span class="sunlight-ident">f</span>
<span class="sunlight-keyword">INNER</span>&nbsp;<span class="sunlight-keyword">JOIN</span>&nbsp;<span class="sunlight-named-ident">bar</span>&nbsp;<span class="sunlight-ident">b</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ON</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">bar_id</span>
<span class="sunlight-keyword">LEFT</span>&nbsp;<span class="sunlight-keyword">OUTER</span>&nbsp;<span class="sunlight-keyword">JOIN</span>&nbsp;<span class="sunlight-named-ident">baz</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ON</span>&nbsp;<span class="sunlight-ident">baz</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">AND</span>&nbsp;<span class="sunlight-ident">baz</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-keyword">IS</span>&nbsp;<span class="sunlight-keyword">NOT</span>&nbsp;<span class="sunlight-keyword">NULL</span>
<span class="sunlight-keyword">GROUP</span>&nbsp;<span class="sunlight-keyword">BY</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>
<span class="sunlight-keyword">HAVING</span>&nbsp;<span class="sunlight-function">COUNT</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">10</span>
<span class="sunlight-keyword">WHERE</span>&nbsp;<span class="sunlight-function">LENGTH</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">5</span>
<span class="sunlight-keyword">AND</span>&nbsp;<span class="sunlight-function">LEFT</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'f'</span>

<span class="sunlight-keyword">START&nbsp;TRANSACTION</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">SELECT</span>&nbsp;<span class="sunlight-punctuation">@</span><span class="sunlight-ident">A</span><span class="sunlight-operator">:=</span><span class="sunlight-function">SUM</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">salary</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">FROM</span>&nbsp;<span class="sunlight-named-ident">table1</span>&nbsp;<span class="sunlight-keyword">WHERE</span>&nbsp;<span class="sunlight-ident">type</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">UPDATE</span>&nbsp;<span class="sunlight-ident">table2</span>&nbsp;<span class="sunlight-keyword">SET</span>&nbsp;<span class="sunlight-ident">summary</span><span class="sunlight-operator">=</span><span class="sunlight-punctuation">@</span><span class="sunlight-ident">A</span>&nbsp;<span class="sunlight-keyword">WHERE</span>&nbsp;<span class="sunlight-ident">type</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">COMMIT</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">DELIMITER</span>&nbsp;<span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span>

<span class="sunlight-keyword">BEGIN</span>&nbsp;
<span class="sunlight-keyword">DECLARE</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'bar'</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">END</span>&nbsp;<span class="sunlight-punctuation">$</span><span class="sunlight-punctuation">$</span>
<span class="sunlight-keyword">DELIMITER</span>&nbsp;<span class="sunlight-punctuation">;</span>
</span></pre></div></div>
<h2 id="nginx.nginxconf">nginx.nginxconf</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-23-line-1" href="#sunlight-23-line-1">1</a>
<a name="sunlight-23-line-2" href="#sunlight-23-line-2">2</a>
<a name="sunlight-23-line-3" href="#sunlight-23-line-3">3</a>
<a name="sunlight-23-line-4" href="#sunlight-23-line-4">4</a>
<a name="sunlight-23-line-5" href="#sunlight-23-line-5">5</a>
<a name="sunlight-23-line-6" href="#sunlight-23-line-6">6</a>
<a name="sunlight-23-line-7" href="#sunlight-23-line-7">7</a>
<a name="sunlight-23-line-8" href="#sunlight-23-line-8">8</a>
<a name="sunlight-23-line-9" href="#sunlight-23-line-9">9</a>
<a name="sunlight-23-line-10" href="#sunlight-23-line-10">10</a>
<a name="sunlight-23-line-11" href="#sunlight-23-line-11">11</a>
<a name="sunlight-23-line-12" href="#sunlight-23-line-12">12</a>
<a name="sunlight-23-line-13" href="#sunlight-23-line-13">13</a>
<a name="sunlight-23-line-14" href="#sunlight-23-line-14">14</a>
<a name="sunlight-23-line-15" href="#sunlight-23-line-15">15</a>
<a name="sunlight-23-line-16" href="#sunlight-23-line-16">16</a>
<a name="sunlight-23-line-17" href="#sunlight-23-line-17">17</a>
<a name="sunlight-23-line-18" href="#sunlight-23-line-18">18</a>
<a name="sunlight-23-line-19" href="#sunlight-23-line-19">19</a>
<a name="sunlight-23-line-20" href="#sunlight-23-line-20">20</a>
<a name="sunlight-23-line-21" href="#sunlight-23-line-21">21</a>
<a name="sunlight-23-line-22" href="#sunlight-23-line-22">22</a>
<a name="sunlight-23-line-23" href="#sunlight-23-line-23">23</a>
<a name="sunlight-23-line-24" href="#sunlight-23-line-24">24</a>
<a name="sunlight-23-line-25" href="#sunlight-23-line-25">25</a>
<a name="sunlight-23-line-26" href="#sunlight-23-line-26">26</a>
<a name="sunlight-23-line-27" href="#sunlight-23-line-27">27</a>
<a name="sunlight-23-line-28" href="#sunlight-23-line-28">28</a>
<a name="sunlight-23-line-29" href="#sunlight-23-line-29">29</a>
<a name="sunlight-23-line-30" href="#sunlight-23-line-30">30</a>
<a name="sunlight-23-line-31" href="#sunlight-23-line-31">31</a>
<a name="sunlight-23-line-32" href="#sunlight-23-line-32">32</a>
<a name="sunlight-23-line-33" href="#sunlight-23-line-33">33</a>
<a name="sunlight-23-line-34" href="#sunlight-23-line-34">34</a>
<a name="sunlight-23-line-35" href="#sunlight-23-line-35">35</a>
<a name="sunlight-23-line-36" href="#sunlight-23-line-36">36</a>
<a name="sunlight-23-line-37" href="#sunlight-23-line-37">37</a>
<a name="sunlight-23-line-38" href="#sunlight-23-line-38">38</a>
<a name="sunlight-23-line-39" href="#sunlight-23-line-39">39</a>
<a name="sunlight-23-line-40" href="#sunlight-23-line-40">40</a>
<a name="sunlight-23-line-41" href="#sunlight-23-line-41">41</a>
<a name="sunlight-23-line-42" href="#sunlight-23-line-42">42</a>
<a name="sunlight-23-line-43" href="#sunlight-23-line-43">43</a>
<a name="sunlight-23-line-44" href="#sunlight-23-line-44">44</a>
<a name="sunlight-23-line-45" href="#sunlight-23-line-45">45</a>
<a name="sunlight-23-line-46" href="#sunlight-23-line-46">46</a>
<a name="sunlight-23-line-47" href="#sunlight-23-line-47">47</a>
<a name="sunlight-23-line-48" href="#sunlight-23-line-48">48</a>
<a name="sunlight-23-line-49" href="#sunlight-23-line-49">49</a>
<a name="sunlight-23-line-50" href="#sunlight-23-line-50">50</a>
<a name="sunlight-23-line-51" href="#sunlight-23-line-51">51</a>
<a name="sunlight-23-line-52" href="#sunlight-23-line-52">52</a>
<a name="sunlight-23-line-53" href="#sunlight-23-line-53">53</a>
<a name="sunlight-23-line-54" href="#sunlight-23-line-54">54</a>
<a name="sunlight-23-line-55" href="#sunlight-23-line-55">55</a>
<a name="sunlight-23-line-56" href="#sunlight-23-line-56">56</a>
<a name="sunlight-23-line-57" href="#sunlight-23-line-57">57</a>
<a name="sunlight-23-line-58" href="#sunlight-23-line-58">58</a>
<a name="sunlight-23-line-59" href="#sunlight-23-line-59">59</a>
<a name="sunlight-23-line-60" href="#sunlight-23-line-60">60</a>
<a name="sunlight-23-line-61" href="#sunlight-23-line-61">61</a>
<a name="sunlight-23-line-62" href="#sunlight-23-line-62">62</a>
<a name="sunlight-23-line-63" href="#sunlight-23-line-63">63</a>
<a name="sunlight-23-line-64" href="#sunlight-23-line-64">64</a>
<a name="sunlight-23-line-65" href="#sunlight-23-line-65">65</a>
<a name="sunlight-23-line-66" href="#sunlight-23-line-66">66</a>
<a name="sunlight-23-line-67" href="#sunlight-23-line-67">67</a>
<a name="sunlight-23-line-68" href="#sunlight-23-line-68">68</a>
<a name="sunlight-23-line-69" href="#sunlight-23-line-69">69</a>
<a name="sunlight-23-line-70" href="#sunlight-23-line-70">70</a>
<a name="sunlight-23-line-71" href="#sunlight-23-line-71">71</a>
<a name="sunlight-23-line-72" href="#sunlight-23-line-72">72</a>
<a name="sunlight-23-line-73" href="#sunlight-23-line-73">73</a>
<a name="sunlight-23-line-74" href="#sunlight-23-line-74">74</a>
<a name="sunlight-23-line-75" href="#sunlight-23-line-75">75</a>
<a name="sunlight-23-line-76" href="#sunlight-23-line-76">76</a>
<a name="sunlight-23-line-77" href="#sunlight-23-line-77">77</a>
<a name="sunlight-23-line-78" href="#sunlight-23-line-78">78</a>
<a name="sunlight-23-line-79" href="#sunlight-23-line-79">79</a>
<a name="sunlight-23-line-80" href="#sunlight-23-line-80">80</a>
<a name="sunlight-23-line-81" href="#sunlight-23-line-81">81</a>
<a name="sunlight-23-line-82" href="#sunlight-23-line-82">82</a>
<a name="sunlight-23-line-83" href="#sunlight-23-line-83">83</a>
<a name="sunlight-23-line-84" href="#sunlight-23-line-84">84</a>
<a name="sunlight-23-line-85" href="#sunlight-23-line-85">85</a>
<a name="sunlight-23-line-86" href="#sunlight-23-line-86">86</a>
<a name="sunlight-23-line-87" href="#sunlight-23-line-87">87</a>
<a name="sunlight-23-line-88" href="#sunlight-23-line-88">88</a>
<a name="sunlight-23-line-89" href="#sunlight-23-line-89">89</a>
<a name="sunlight-23-line-90" href="#sunlight-23-line-90">90</a>
<a name="sunlight-23-line-91" href="#sunlight-23-line-91">91</a>
<a name="sunlight-23-line-92" href="#sunlight-23-line-92">92</a>
<a name="sunlight-23-line-93" href="#sunlight-23-line-93">93</a>
<a name="sunlight-23-line-94" href="#sunlight-23-line-94">94</a>
<a name="sunlight-23-line-95" href="#sunlight-23-line-95">95</a>
<a name="sunlight-23-line-96" href="#sunlight-23-line-96">96</a>
<a name="sunlight-23-line-97" href="#sunlight-23-line-97">97</a>
<a name="sunlight-23-line-98" href="#sunlight-23-line-98">98</a>
<a name="sunlight-23-line-99" href="#sunlight-23-line-99">99</a>
<a name="sunlight-23-line-100" href="#sunlight-23-line-100">100</a>
<a name="sunlight-23-line-101" href="#sunlight-23-line-101">101</a>
<a name="sunlight-23-line-102" href="#sunlight-23-line-102">102</a>
<a name="sunlight-23-line-103" href="#sunlight-23-line-103">103</a>
<a name="sunlight-23-line-104" href="#sunlight-23-line-104">104</a>
<a name="sunlight-23-line-105" href="#sunlight-23-line-105">105</a>
<a name="sunlight-23-line-106" href="#sunlight-23-line-106">106</a>
<a name="sunlight-23-line-107" href="#sunlight-23-line-107">107</a>
<a name="sunlight-23-line-108" href="#sunlight-23-line-108">108</a>
<a name="sunlight-23-line-109" href="#sunlight-23-line-109">109</a>
<a name="sunlight-23-line-110" href="#sunlight-23-line-110">110</a>
<a name="sunlight-23-line-111" href="#sunlight-23-line-111">111</a>
<a name="sunlight-23-line-112" href="#sunlight-23-line-112">112</a>
<a name="sunlight-23-line-113" href="#sunlight-23-line-113">113</a>
<a name="sunlight-23-line-114" href="#sunlight-23-line-114">114</a>
<a name="sunlight-23-line-115" href="#sunlight-23-line-115">115</a>
<a name="sunlight-23-line-116" href="#sunlight-23-line-116">116</a>
<a name="sunlight-23-line-117" href="#sunlight-23-line-117">117</a>
<a name="sunlight-23-line-118" href="#sunlight-23-line-118">118</a>
<a name="sunlight-23-line-119" href="#sunlight-23-line-119">119</a>
</div><pre class="sunlight-highlight-nginx sunlight-highlighted"><span class="sunlight-nginx"><span class="sunlight-comment">#nginx&nbsp;test</span>
<span class="sunlight-context">http</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">error_page</span>&nbsp;<span class="sunlight-number">502</span>&nbsp;<span class="sunlight-number">503</span>&nbsp;<span class="sunlight-number">504</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-number">50x</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">html</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">gzip</span>&nbsp;<span class="sunlight-ident">on</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">gzip_static</span>&nbsp;<span class="sunlight-ident">on</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">gzip_disable</span>&nbsp;<span class="sunlight-string">"MSIE&nbsp;[1-6]\."</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">expires</span>&nbsp;<span class="sunlight-number">24h</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">index</span>&nbsp;<span class="sunlight-ident">index</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">html</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ssiCommand">&lt;!--#&nbsp;echo&nbsp;var="name"&nbsp;default="no"&nbsp;--&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">geo</span>&nbsp;<span class="sunlight-variable">$geo</span>&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-comment">#&nbsp;the&nbsp;variable&nbsp;created&nbsp;is&nbsp;$geo</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">127.0</span><span class="sunlight-number">.0</span><span class="sunlight-number">.1</span><span class="sunlight-punctuation">/</span><span class="sunlight-number">32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">192.168</span><span class="sunlight-number">.1</span><span class="sunlight-number">.0</span><span class="sunlight-punctuation">/</span><span class="sunlight-number">24</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">10.1</span><span class="sunlight-number">.0</span><span class="sunlight-number">.0</span><span class="sunlight-punctuation">/</span><span class="sunlight-number">16</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">map</span>&nbsp;<span class="sunlight-variable">$uri</span>&nbsp;<span class="sunlight-variable">$new</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">http</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">www</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">domain</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">home</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">aa</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">http</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">aa</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">domain</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">bb</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">http</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">bb</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">domain</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">john</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">http</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">my</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">domain</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">users</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">john</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">split-clients</span>&nbsp;<span class="sunlight-string">'${remote-addr}AAA'</span>&nbsp;<span class="sunlight-variable">$variant</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">%</span>&nbsp;<span class="sunlight-punctuation">.</span><span class="sunlight-ident">one</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">2.0</span><span class="sunlight-punctuation">%</span>&nbsp;<span class="sunlight-punctuation">.</span><span class="sunlight-ident">two</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">-</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">upstream</span>&nbsp;<span class="sunlight-ident">backend</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">server</span>&nbsp;<span class="sunlight-ident">backend1</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span>&nbsp;<span class="sunlight-ident">weight</span><span class="sunlight-operator">=</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">server</span>&nbsp;<span class="sunlight-ident">backend2</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span><span class="sunlight-operator">:</span><span class="sunlight-number">8080</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">server</span>&nbsp;<span class="sunlight-ident">unix</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">tmp</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">backend3</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-punctuation">/</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">error_page</span>&nbsp;<span class="sunlight-number">404</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-label">@fallback</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">proxy_set_header</span>&nbsp;<span class="sunlight-ident">X-Real-IP</span>&nbsp;<span class="sunlight-variable">$remote_addr</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">rewrite</span>&nbsp;<span class="sunlight-punctuation">^</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">prefix</span><span class="sunlight-punctuation">/</span><span class="sunlight-variable">$secure_link</span>&nbsp;<span class="sunlight-ident">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-label">@fallback</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">proxy_pass</span>&nbsp;<span class="sunlight-ident">http</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">/</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">backend</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">proxy_cache_path</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">nginx</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">cache</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">three</span>&nbsp;<span class="sunlight-ident">levels</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-operator">:</span><span class="sunlight-number">1</span><span class="sunlight-operator">:</span><span class="sunlight-number">2</span>&nbsp;<span class="sunlight-ident">keys_zone</span><span class="sunlight-operator">=</span><span class="sunlight-ident">three</span><span class="sunlight-operator">:</span><span class="sunlight-number">1000m</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">server</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">listen</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">fe80</span><span class="sunlight-operator">::</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">listen</span>&nbsp;&nbsp;<span class="sunlight-number">127.0</span><span class="sunlight-number">.0</span><span class="sunlight-number">.1</span>&nbsp;<span class="sunlight-ident">default</span>&nbsp;<span class="sunlight-ident">accept_filter</span><span class="sunlight-operator">=</span><span class="sunlight-ident">dataready</span>&nbsp;<span class="sunlight-ident">backlog</span><span class="sunlight-operator">=</span><span class="sunlight-number">1024</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">server_name</span>&nbsp;<span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span>&nbsp;<span class="sunlight-punctuation">*</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span>&nbsp;<span class="sunlight-ident">www</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-punctuation">*</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">root</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">var</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">www</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">server</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">listen</span>&nbsp;<span class="sunlight-punctuation">*</span><span class="sunlight-operator">:</span><span class="sunlight-number">8000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">listen</span>&nbsp;<span class="sunlight-ident">localhost</span><span class="sunlight-operator">:</span><span class="sunlight-number">8000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">listen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">443</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ssl</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">on</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ssl_certificate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">usr</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">local</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">nginx</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">conf</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">cert</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">pem</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ssl_certificate_key</span>&nbsp;&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">usr</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">local</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">nginx</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">conf</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">cert</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">key</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">server_name</span>&nbsp;<span class="sunlight-ident">server_name</span>&nbsp;<span class="sunlight-ident">www</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span>&nbsp;<span class="sunlight-regexLiteral">~^(www\.)?(?P&lt;domain&gt;.+)$</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">root</span>&nbsp;&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">sites</span><span class="sunlight-punctuation">/</span><span class="sunlight-variable">$domain</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$slow</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-variable">$limit_rate</span>&nbsp;<span class="sunlight-number">4k</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-operator">^~</span>&nbsp;<span class="sunlight-regexLiteral">/images/</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;matches&nbsp;any&nbsp;query&nbsp;beginning&nbsp;with&nbsp;/images/&nbsp;and&nbsp;halts&nbsp;searching,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;so&nbsp;regular&nbsp;expressions&nbsp;will&nbsp;not&nbsp;be&nbsp;checked.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">/</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;matches&nbsp;the&nbsp;query&nbsp;/&nbsp;only.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-operator">~*</span>&nbsp;<span class="sunlight-regexLiteral">\.(gif|jpg|jpeg)$</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">fastcgi_pass</span>&nbsp;<span class="sunlight-number">127.0</span><span class="sunlight-number">.0</span><span class="sunlight-number">.1</span><span class="sunlight-operator">:</span><span class="sunlight-number">9000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">fastcgi_param</span>&nbsp;<span class="sunlight-ident">SCRIPT_FILENAME</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">home</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">www</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">scripts</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">php</span><span class="sunlight-variable">$fastcgi_script_name</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">video</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">aio</span>&nbsp;<span class="sunlight-ident">on</span><span class="sunlight-punctuation">;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">directio</span>&nbsp;<span class="sunlight-number">512</span><span class="sunlight-punctuation">;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">output_buffers</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-number">128k</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">types</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">text</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">html</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">html</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">image</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">gif</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">gif</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">image</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">jpeg</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">jpg</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default_type</span>&nbsp;<span class="sunlight-ident">text</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">html</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">echo_after_body</span>&nbsp;<span class="sunlight-string">"after&nbsp;the&nbsp;body"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">location</span>&nbsp;<span class="sunlight-operator">~</span>&nbsp;<span class="sunlight-regexLiteral">^/download/(.*)$</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">alias</span>&nbsp;<span class="sunlight-punctuation">/</span><span class="sunlight-ident">home</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">website</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">files</span><span class="sunlight-punctuation">/</span><span class="sunlight-variable">$1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">internal</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">limit_except</span>&nbsp;<span class="sunlight-ident">GET</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">allow</span>&nbsp;&nbsp;<span class="sunlight-number">192.168</span><span class="sunlight-number">.1</span><span class="sunlight-number">.0</span><span class="sunlight-punctuation">/</span><span class="sunlight-number">32</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">deny</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">all</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-context">mail</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">imap_capabilities</span>&nbsp;<span class="sunlight-ident">NAMESPACE</span>&nbsp;<span class="sunlight-ident">SORT</span>&nbsp;<span class="sunlight-ident">QUOTA</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">listen</span>&nbsp;<span class="sunlight-number">127.0</span><span class="sunlight-number">.0</span><span class="sunlight-number">.1</span><span class="sunlight-operator">:</span><span class="sunlight-number">8000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-context">server</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">server_name</span>&nbsp;<span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span>&nbsp;<span class="sunlight-ident">www</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">example</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">com</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

</span></pre></div></div>
<h2 id="objective-c1.mm">objective-c1.mm</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-24-line-1" href="#sunlight-24-line-1">1</a>
<a name="sunlight-24-line-2" href="#sunlight-24-line-2">2</a>
<a name="sunlight-24-line-3" href="#sunlight-24-line-3">3</a>
<a name="sunlight-24-line-4" href="#sunlight-24-line-4">4</a>
<a name="sunlight-24-line-5" href="#sunlight-24-line-5">5</a>
<a name="sunlight-24-line-6" href="#sunlight-24-line-6">6</a>
<a name="sunlight-24-line-7" href="#sunlight-24-line-7">7</a>
<a name="sunlight-24-line-8" href="#sunlight-24-line-8">8</a>
<a name="sunlight-24-line-9" href="#sunlight-24-line-9">9</a>
<a name="sunlight-24-line-10" href="#sunlight-24-line-10">10</a>
<a name="sunlight-24-line-11" href="#sunlight-24-line-11">11</a>
<a name="sunlight-24-line-12" href="#sunlight-24-line-12">12</a>
<a name="sunlight-24-line-13" href="#sunlight-24-line-13">13</a>
<a name="sunlight-24-line-14" href="#sunlight-24-line-14">14</a>
<a name="sunlight-24-line-15" href="#sunlight-24-line-15">15</a>
<a name="sunlight-24-line-16" href="#sunlight-24-line-16">16</a>
<a name="sunlight-24-line-17" href="#sunlight-24-line-17">17</a>
<a name="sunlight-24-line-18" href="#sunlight-24-line-18">18</a>
<a name="sunlight-24-line-19" href="#sunlight-24-line-19">19</a>
<a name="sunlight-24-line-20" href="#sunlight-24-line-20">20</a>
<a name="sunlight-24-line-21" href="#sunlight-24-line-21">21</a>
<a name="sunlight-24-line-22" href="#sunlight-24-line-22">22</a>
<a name="sunlight-24-line-23" href="#sunlight-24-line-23">23</a>
<a name="sunlight-24-line-24" href="#sunlight-24-line-24">24</a>
<a name="sunlight-24-line-25" href="#sunlight-24-line-25">25</a>
<a name="sunlight-24-line-26" href="#sunlight-24-line-26">26</a>
<a name="sunlight-24-line-27" href="#sunlight-24-line-27">27</a>
<a name="sunlight-24-line-28" href="#sunlight-24-line-28">28</a>
<a name="sunlight-24-line-29" href="#sunlight-24-line-29">29</a>
<a name="sunlight-24-line-30" href="#sunlight-24-line-30">30</a>
<a name="sunlight-24-line-31" href="#sunlight-24-line-31">31</a>
<a name="sunlight-24-line-32" href="#sunlight-24-line-32">32</a>
<a name="sunlight-24-line-33" href="#sunlight-24-line-33">33</a>
<a name="sunlight-24-line-34" href="#sunlight-24-line-34">34</a>
<a name="sunlight-24-line-35" href="#sunlight-24-line-35">35</a>
<a name="sunlight-24-line-36" href="#sunlight-24-line-36">36</a>
<a name="sunlight-24-line-37" href="#sunlight-24-line-37">37</a>
<a name="sunlight-24-line-38" href="#sunlight-24-line-38">38</a>
<a name="sunlight-24-line-39" href="#sunlight-24-line-39">39</a>
<a name="sunlight-24-line-40" href="#sunlight-24-line-40">40</a>
<a name="sunlight-24-line-41" href="#sunlight-24-line-41">41</a>
<a name="sunlight-24-line-42" href="#sunlight-24-line-42">42</a>
<a name="sunlight-24-line-43" href="#sunlight-24-line-43">43</a>
<a name="sunlight-24-line-44" href="#sunlight-24-line-44">44</a>
<a name="sunlight-24-line-45" href="#sunlight-24-line-45">45</a>
<a name="sunlight-24-line-46" href="#sunlight-24-line-46">46</a>
<a name="sunlight-24-line-47" href="#sunlight-24-line-47">47</a>
<a name="sunlight-24-line-48" href="#sunlight-24-line-48">48</a>
<a name="sunlight-24-line-49" href="#sunlight-24-line-49">49</a>
<a name="sunlight-24-line-50" href="#sunlight-24-line-50">50</a>
<a name="sunlight-24-line-51" href="#sunlight-24-line-51">51</a>
<a name="sunlight-24-line-52" href="#sunlight-24-line-52">52</a>
<a name="sunlight-24-line-53" href="#sunlight-24-line-53">53</a>
<a name="sunlight-24-line-54" href="#sunlight-24-line-54">54</a>
<a name="sunlight-24-line-55" href="#sunlight-24-line-55">55</a>
<a name="sunlight-24-line-56" href="#sunlight-24-line-56">56</a>
<a name="sunlight-24-line-57" href="#sunlight-24-line-57">57</a>
<a name="sunlight-24-line-58" href="#sunlight-24-line-58">58</a>
<a name="sunlight-24-line-59" href="#sunlight-24-line-59">59</a>
<a name="sunlight-24-line-60" href="#sunlight-24-line-60">60</a>
<a name="sunlight-24-line-61" href="#sunlight-24-line-61">61</a>
<a name="sunlight-24-line-62" href="#sunlight-24-line-62">62</a>
<a name="sunlight-24-line-63" href="#sunlight-24-line-63">63</a>
<a name="sunlight-24-line-64" href="#sunlight-24-line-64">64</a>
<a name="sunlight-24-line-65" href="#sunlight-24-line-65">65</a>
<a name="sunlight-24-line-66" href="#sunlight-24-line-66">66</a>
<a name="sunlight-24-line-67" href="#sunlight-24-line-67">67</a>
<a name="sunlight-24-line-68" href="#sunlight-24-line-68">68</a>
<a name="sunlight-24-line-69" href="#sunlight-24-line-69">69</a>
<a name="sunlight-24-line-70" href="#sunlight-24-line-70">70</a>
<a name="sunlight-24-line-71" href="#sunlight-24-line-71">71</a>
<a name="sunlight-24-line-72" href="#sunlight-24-line-72">72</a>
<a name="sunlight-24-line-73" href="#sunlight-24-line-73">73</a>
<a name="sunlight-24-line-74" href="#sunlight-24-line-74">74</a>
<a name="sunlight-24-line-75" href="#sunlight-24-line-75">75</a>
<a name="sunlight-24-line-76" href="#sunlight-24-line-76">76</a>
<a name="sunlight-24-line-77" href="#sunlight-24-line-77">77</a>
<a name="sunlight-24-line-78" href="#sunlight-24-line-78">78</a>
<a name="sunlight-24-line-79" href="#sunlight-24-line-79">79</a>
<a name="sunlight-24-line-80" href="#sunlight-24-line-80">80</a>
<a name="sunlight-24-line-81" href="#sunlight-24-line-81">81</a>
<a name="sunlight-24-line-82" href="#sunlight-24-line-82">82</a>
<a name="sunlight-24-line-83" href="#sunlight-24-line-83">83</a>
<a name="sunlight-24-line-84" href="#sunlight-24-line-84">84</a>
<a name="sunlight-24-line-85" href="#sunlight-24-line-85">85</a>
<a name="sunlight-24-line-86" href="#sunlight-24-line-86">86</a>
<a name="sunlight-24-line-87" href="#sunlight-24-line-87">87</a>
<a name="sunlight-24-line-88" href="#sunlight-24-line-88">88</a>
<a name="sunlight-24-line-89" href="#sunlight-24-line-89">89</a>
<a name="sunlight-24-line-90" href="#sunlight-24-line-90">90</a>
<a name="sunlight-24-line-91" href="#sunlight-24-line-91">91</a>
<a name="sunlight-24-line-92" href="#sunlight-24-line-92">92</a>
<a name="sunlight-24-line-93" href="#sunlight-24-line-93">93</a>
<a name="sunlight-24-line-94" href="#sunlight-24-line-94">94</a>
<a name="sunlight-24-line-95" href="#sunlight-24-line-95">95</a>
<a name="sunlight-24-line-96" href="#sunlight-24-line-96">96</a>
<a name="sunlight-24-line-97" href="#sunlight-24-line-97">97</a>
<a name="sunlight-24-line-98" href="#sunlight-24-line-98">98</a>
<a name="sunlight-24-line-99" href="#sunlight-24-line-99">99</a>
<a name="sunlight-24-line-100" href="#sunlight-24-line-100">100</a>
<a name="sunlight-24-line-101" href="#sunlight-24-line-101">101</a>
<a name="sunlight-24-line-102" href="#sunlight-24-line-102">102</a>
<a name="sunlight-24-line-103" href="#sunlight-24-line-103">103</a>
<a name="sunlight-24-line-104" href="#sunlight-24-line-104">104</a>
<a name="sunlight-24-line-105" href="#sunlight-24-line-105">105</a>
<a name="sunlight-24-line-106" href="#sunlight-24-line-106">106</a>
<a name="sunlight-24-line-107" href="#sunlight-24-line-107">107</a>
<a name="sunlight-24-line-108" href="#sunlight-24-line-108">108</a>
<a name="sunlight-24-line-109" href="#sunlight-24-line-109">109</a>
<a name="sunlight-24-line-110" href="#sunlight-24-line-110">110</a>
<a name="sunlight-24-line-111" href="#sunlight-24-line-111">111</a>
<a name="sunlight-24-line-112" href="#sunlight-24-line-112">112</a>
<a name="sunlight-24-line-113" href="#sunlight-24-line-113">113</a>
<a name="sunlight-24-line-114" href="#sunlight-24-line-114">114</a>
<a name="sunlight-24-line-115" href="#sunlight-24-line-115">115</a>
<a name="sunlight-24-line-116" href="#sunlight-24-line-116">116</a>
<a name="sunlight-24-line-117" href="#sunlight-24-line-117">117</a>
<a name="sunlight-24-line-118" href="#sunlight-24-line-118">118</a>
<a name="sunlight-24-line-119" href="#sunlight-24-line-119">119</a>
<a name="sunlight-24-line-120" href="#sunlight-24-line-120">120</a>
<a name="sunlight-24-line-121" href="#sunlight-24-line-121">121</a>
<a name="sunlight-24-line-122" href="#sunlight-24-line-122">122</a>
<a name="sunlight-24-line-123" href="#sunlight-24-line-123">123</a>
<a name="sunlight-24-line-124" href="#sunlight-24-line-124">124</a>
<a name="sunlight-24-line-125" href="#sunlight-24-line-125">125</a>
<a name="sunlight-24-line-126" href="#sunlight-24-line-126">126</a>
<a name="sunlight-24-line-127" href="#sunlight-24-line-127">127</a>
<a name="sunlight-24-line-128" href="#sunlight-24-line-128">128</a>
<a name="sunlight-24-line-129" href="#sunlight-24-line-129">129</a>
<a name="sunlight-24-line-130" href="#sunlight-24-line-130">130</a>
<a name="sunlight-24-line-131" href="#sunlight-24-line-131">131</a>
<a name="sunlight-24-line-132" href="#sunlight-24-line-132">132</a>
<a name="sunlight-24-line-133" href="#sunlight-24-line-133">133</a>
<a name="sunlight-24-line-134" href="#sunlight-24-line-134">134</a>
<a name="sunlight-24-line-135" href="#sunlight-24-line-135">135</a>
<a name="sunlight-24-line-136" href="#sunlight-24-line-136">136</a>
<a name="sunlight-24-line-137" href="#sunlight-24-line-137">137</a>
<a name="sunlight-24-line-138" href="#sunlight-24-line-138">138</a>
<a name="sunlight-24-line-139" href="#sunlight-24-line-139">139</a>
<a name="sunlight-24-line-140" href="#sunlight-24-line-140">140</a>
<a name="sunlight-24-line-141" href="#sunlight-24-line-141">141</a>
<a name="sunlight-24-line-142" href="#sunlight-24-line-142">142</a>
<a name="sunlight-24-line-143" href="#sunlight-24-line-143">143</a>
<a name="sunlight-24-line-144" href="#sunlight-24-line-144">144</a>
<a name="sunlight-24-line-145" href="#sunlight-24-line-145">145</a>
<a name="sunlight-24-line-146" href="#sunlight-24-line-146">146</a>
<a name="sunlight-24-line-147" href="#sunlight-24-line-147">147</a>
<a name="sunlight-24-line-148" href="#sunlight-24-line-148">148</a>
<a name="sunlight-24-line-149" href="#sunlight-24-line-149">149</a>
<a name="sunlight-24-line-150" href="#sunlight-24-line-150">150</a>
<a name="sunlight-24-line-151" href="#sunlight-24-line-151">151</a>
<a name="sunlight-24-line-152" href="#sunlight-24-line-152">152</a>
<a name="sunlight-24-line-153" href="#sunlight-24-line-153">153</a>
<a name="sunlight-24-line-154" href="#sunlight-24-line-154">154</a>
<a name="sunlight-24-line-155" href="#sunlight-24-line-155">155</a>
<a name="sunlight-24-line-156" href="#sunlight-24-line-156">156</a>
<a name="sunlight-24-line-157" href="#sunlight-24-line-157">157</a>
<a name="sunlight-24-line-158" href="#sunlight-24-line-158">158</a>
<a name="sunlight-24-line-159" href="#sunlight-24-line-159">159</a>
<a name="sunlight-24-line-160" href="#sunlight-24-line-160">160</a>
<a name="sunlight-24-line-161" href="#sunlight-24-line-161">161</a>
<a name="sunlight-24-line-162" href="#sunlight-24-line-162">162</a>
<a name="sunlight-24-line-163" href="#sunlight-24-line-163">163</a>
<a name="sunlight-24-line-164" href="#sunlight-24-line-164">164</a>
<a name="sunlight-24-line-165" href="#sunlight-24-line-165">165</a>
<a name="sunlight-24-line-166" href="#sunlight-24-line-166">166</a>
<a name="sunlight-24-line-167" href="#sunlight-24-line-167">167</a>
<a name="sunlight-24-line-168" href="#sunlight-24-line-168">168</a>
<a name="sunlight-24-line-169" href="#sunlight-24-line-169">169</a>
<a name="sunlight-24-line-170" href="#sunlight-24-line-170">170</a>
<a name="sunlight-24-line-171" href="#sunlight-24-line-171">171</a>
<a name="sunlight-24-line-172" href="#sunlight-24-line-172">172</a>
<a name="sunlight-24-line-173" href="#sunlight-24-line-173">173</a>
<a name="sunlight-24-line-174" href="#sunlight-24-line-174">174</a>
<a name="sunlight-24-line-175" href="#sunlight-24-line-175">175</a>
<a name="sunlight-24-line-176" href="#sunlight-24-line-176">176</a>
<a name="sunlight-24-line-177" href="#sunlight-24-line-177">177</a>
</div><pre class="sunlight-highlight-objective-c sunlight-highlighted"><span class="sunlight-objective-c"><span class="sunlight-comment">//</span>
<span class="sunlight-comment">//&nbsp;&nbsp;GCPagedScrollView.m</span>
<span class="sunlight-comment">//&nbsp;&nbsp;GCLibrary</span>
<span class="sunlight-comment">//</span>
<span class="sunlight-comment">//&nbsp;&nbsp;Created&nbsp;by&nbsp;Guillaume&nbsp;Campagna&nbsp;on&nbsp;10-11-10.</span>
<span class="sunlight-comment">//&nbsp;&nbsp;Copyright&nbsp;(c)&nbsp;2010&nbsp;LittleKiwi.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
<span class="sunlight-comment">//</span>

<span class="sunlight-preprocessorDirective">#import&nbsp;"GCPagedScrollView.h"</span>
<span class="sunlight-preprocessorDirective">#import&nbsp;&lt;QuartzCore/CATransaction.h&gt;</span>

<span class="sunlight-named-ident">NSString</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-ident">GCPagedScrollViewContentOffsetKey</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">@"contentOffset"</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-named-ident">CGFloat</span>&nbsp;<span class="sunlight-ident">GCPagedScrollViewPageControlHeight</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">36.0</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">@interface</span>&nbsp;<span class="sunlight-named-ident">GCPagedScrollView</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-keyword">@property</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">nonatomic</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">readonly</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-named-ident">NSMutableArray</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">views</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">@property</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">nonatomic</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">readonly</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-named-ident">UIPageControl</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">pageControl</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">updateViewPositionAndPageControl</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">changePage</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIPageControl</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">aPageControl</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">@end</span>

<span class="sunlight-keyword">@implementation</span>&nbsp;<span class="sunlight-named-ident">GCPagedScrollView</span>

<span class="sunlight-keyword">@synthesize</span>&nbsp;<span class="sunlight-ident">views</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">@synthesize</span>&nbsp;<span class="sunlight-ident">pageControl</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;-</span>
<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;Subclass</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">id</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">initWithFrame</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CGRect</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">frame</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-messageDestination">initWithFrame</span><span class="sunlight-operator">:</span><span class="sunlight-ident">frame</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">pagingEnabled</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">YES</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">showsVerticalScrollIndicator</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">NO</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">showsHorizontalScrollIndicator</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">NO</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollsToTop</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">NO</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//Place&nbsp;page&nbsp;control</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">CGRect</span>&nbsp;<span class="sunlight-ident">frame</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CGRectMake</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">contentOffset</span><span class="sunlight-operator">.</span><span class="sunlight-ident">x</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-ident">GCPagedScrollViewPageControlHeight</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">UIPageControl</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">aPageControl</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">UIPageControl</span>&nbsp;<span class="sunlight-messageDestination">alloc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-messageDestination">initWithFrame</span><span class="sunlight-operator">:</span><span class="sunlight-ident">frame</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">aPageControl</span>&nbsp;<span class="sunlight-messageDestination">addTarget</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageArgumentName">action</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">@selector</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">changePage</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-messageArgumentName">forControlEvents</span><span class="sunlight-operator">:</span><span class="sunlight-ident">UIControlEventValueChanged</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">aPageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">defersCurrentPageDisplay</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">YES</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">aPageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">autoresizingMask</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">UIViewAutoresizingFlexibleWidth</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-ident">UIViewAutoresizingFlexibleTopMargin</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">addSubview</span><span class="sunlight-operator">:</span><span class="sunlight-ident">aPageControl</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pageControl</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">aPageControl</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">setPagingEnabled</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">BOOL</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">pagingEnabled</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pagingEnabled</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-messageDestination">setPagingEnabled</span><span class="sunlight-operator">:</span><span class="sunlight-ident">pagingEnabled</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">NSException</span>&nbsp;<span class="sunlight-messageDestination">raise</span><span class="sunlight-operator">:</span><span class="sunlight-string">@"Disabling&nbsp;pagingEnabled"</span>&nbsp;<span class="sunlight-messageArgumentName">format</span><span class="sunlight-operator">:</span><span class="sunlight-string">@"Paging&nbsp;enabled&nbsp;should&nbsp;not&nbsp;be&nbsp;disabled&nbsp;in&nbsp;GCPagedScrollView"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;-</span>
<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;Add/Remove&nbsp;content</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">addContentSubview</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIView</span>&nbsp;<span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">addContentSubview</span><span class="sunlight-operator">:</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-messageArgumentName">atIndex</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">count</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">addContentSubview</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIView</span>&nbsp;<span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-ident">atIndex</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">NSUInteger</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">index</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">insertSubview</span><span class="sunlight-operator">:</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-messageArgumentName">atIndex</span><span class="sunlight-operator">:</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">insertObject</span><span class="sunlight-operator">:</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-messageArgumentName">atIndex</span><span class="sunlight-operator">:</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">updateViewPositionAndPageControl</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">contentOffset</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CGPointMake</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollIndicatorInsets</span><span class="sunlight-operator">.</span><span class="sunlight-ident">top</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">removeContentSubview</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIView</span>&nbsp;<span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-messageDestination">removeFromSuperview</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">removeObject</span><span class="sunlight-operator">:</span><span class="sunlight-ident">view</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">updateViewPositionAndPageControl</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">removeContentSubviewAtIndex</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">NSUInteger</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">index</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">removeContentSubview</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">objectAtIndex</span><span class="sunlight-operator">:</span><span class="sunlight-ident">index</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">removeAllContentSubview</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIView</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-messageDestination">removeFromSuperview</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">removeAllObjects</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">updateViewPositionAndPageControl</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;-</span>
<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;Layout</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">updateViewPositionAndPageControl</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">NSUInteger</span>&nbsp;<span class="sunlight-ident">index</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIView</span><span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">view</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">view</span><span class="sunlight-operator">.</span><span class="sunlight-ident">center</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CGPointMake</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">index</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">height</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">GCPagedScrollViewPageControlHeight</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">index</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">UIEdgeInsets</span>&nbsp;<span class="sunlight-ident">inset</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollIndicatorInsets</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">CGFloat</span>&nbsp;<span class="sunlight-ident">heightInset</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">inset</span><span class="sunlight-operator">.</span><span class="sunlight-ident">top</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">inset</span><span class="sunlight-operator">.</span><span class="sunlight-ident">bottom</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">contentSize</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CGSizeMake</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">count</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">height</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">heightInset</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">pageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">numberOfPages</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">views</span><span class="sunlight-operator">.</span><span class="sunlight-ident">count</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">layoutSubviews</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-messageDestination">layoutSubviews</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//Avoid&nbsp;that&nbsp;the&nbsp;pageControl&nbsp;move</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">CATransaction</span>&nbsp;<span class="sunlight-messageDestination">begin</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">CATransaction</span>&nbsp;<span class="sunlight-messageDestination">setValue</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">id</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">kCFBooleanTrue</span>&nbsp;<span class="sunlight-messageArgumentName">forKey</span><span class="sunlight-operator">:</span><span class="sunlight-ident">kCATransactionDisableActions</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">CGRect</span>&nbsp;<span class="sunlight-ident">frame</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">pageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">origin</span><span class="sunlight-operator">.</span><span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">contentOffset</span><span class="sunlight-operator">.</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">origin</span><span class="sunlight-operator">.</span><span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">height</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">GCPagedScrollViewPageControlHeight</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollIndicatorInsets</span><span class="sunlight-operator">.</span><span class="sunlight-ident">bottom</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollIndicatorInsets</span><span class="sunlight-operator">.</span><span class="sunlight-ident">top</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">pageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">frame</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">CATransaction</span>&nbsp;<span class="sunlight-messageDestination">commit</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;-</span>
<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;Getters/Setters</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">setFrame</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CGRect</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">newFrame</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-messageDestination">setFrame</span><span class="sunlight-operator">:</span><span class="sunlight-ident">newFrame</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">updateViewPositionAndPageControl</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">changePage</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">UIPageControl</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">aPageControl</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">setPage</span><span class="sunlight-operator">:</span><span class="sunlight-ident">aPageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">currentPage</span>&nbsp;<span class="sunlight-messageArgumentName">animated</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">YES</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">setContentOffset</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">CGPoint</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">new</span><span class="sunlight-operator">.</span><span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollIndicatorInsets</span><span class="sunlight-operator">.</span><span class="sunlight-ident">top</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-messageDestination">setContentOffset</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">new</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">pageControl</span><span class="sunlight-operator">.</span><span class="sunlight-ident">currentPage</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">page</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//Update&nbsp;the&nbsp;page&nbsp;number</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">NSMutableArray</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-keyword">nil</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">NSMutableArray</span>&nbsp;<span class="sunlight-messageDestination">alloc</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-messageDestination">initWithCapacity</span><span class="sunlight-operator">:</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">views</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">NSUInteger</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">page</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">contentOffset</span><span class="sunlight-operator">.</span><span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">setPage</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">NSUInteger</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">page</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">setPage</span><span class="sunlight-operator">:</span><span class="sunlight-ident">page</span>&nbsp;<span class="sunlight-messageArgumentName">animated</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">NO</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">setPage</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">NSUInteger</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">page</span>&nbsp;<span class="sunlight-ident">animated</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">BOOL</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">animated</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-messageDestination">setContentOffset</span><span class="sunlight-operator">:</span><span class="sunlight-ident">CGPointMake</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">page</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">frame</span><span class="sunlight-operator">.</span><span class="sunlight-ident">size</span><span class="sunlight-operator">.</span><span class="sunlight-ident">width</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scrollIndicatorInsets</span><span class="sunlight-operator">.</span><span class="sunlight-ident">top</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-messageArgumentName">animated</span><span class="sunlight-operator">:</span><span class="sunlight-ident">animated</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;-</span>
<span class="sunlight-preprocessorDirective">#pragma&nbsp;mark&nbsp;Dealloc</span>

<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">dealloc</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">views</span>&nbsp;<span class="sunlight-messageDestination">release</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">pageControl</span>&nbsp;<span class="sunlight-messageDestination">release</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-messageDestination">dealloc</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>


<span class="sunlight-keyword">@end</span>
</span></pre></div></div>
<h2 id="objective-c2.mm">objective-c2.mm</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-objective-c sunlight-highlighted"><span class="sunlight-objective-c"><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">void</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">popToViewControllerOfType</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Class</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">lollersk8</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">animated</span><span class="sunlight-operator">:</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">BOOL</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">animated</span>
</span></pre></div></div>
<h2 id="perl.pl">perl.pl</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-26-line-1" href="#sunlight-26-line-1">1</a>
<a name="sunlight-26-line-2" href="#sunlight-26-line-2">2</a>
<a name="sunlight-26-line-3" href="#sunlight-26-line-3">3</a>
<a name="sunlight-26-line-4" href="#sunlight-26-line-4">4</a>
<a name="sunlight-26-line-5" href="#sunlight-26-line-5">5</a>
<a name="sunlight-26-line-6" href="#sunlight-26-line-6">6</a>
<a name="sunlight-26-line-7" href="#sunlight-26-line-7">7</a>
<a name="sunlight-26-line-8" href="#sunlight-26-line-8">8</a>
<a name="sunlight-26-line-9" href="#sunlight-26-line-9">9</a>
<a name="sunlight-26-line-10" href="#sunlight-26-line-10">10</a>
<a name="sunlight-26-line-11" href="#sunlight-26-line-11">11</a>
<a name="sunlight-26-line-12" href="#sunlight-26-line-12">12</a>
<a name="sunlight-26-line-13" href="#sunlight-26-line-13">13</a>
<a name="sunlight-26-line-14" href="#sunlight-26-line-14">14</a>
<a name="sunlight-26-line-15" href="#sunlight-26-line-15">15</a>
<a name="sunlight-26-line-16" href="#sunlight-26-line-16">16</a>
<a name="sunlight-26-line-17" href="#sunlight-26-line-17">17</a>
<a name="sunlight-26-line-18" href="#sunlight-26-line-18">18</a>
<a name="sunlight-26-line-19" href="#sunlight-26-line-19">19</a>
<a name="sunlight-26-line-20" href="#sunlight-26-line-20">20</a>
<a name="sunlight-26-line-21" href="#sunlight-26-line-21">21</a>
<a name="sunlight-26-line-22" href="#sunlight-26-line-22">22</a>
<a name="sunlight-26-line-23" href="#sunlight-26-line-23">23</a>
<a name="sunlight-26-line-24" href="#sunlight-26-line-24">24</a>
<a name="sunlight-26-line-25" href="#sunlight-26-line-25">25</a>
<a name="sunlight-26-line-26" href="#sunlight-26-line-26">26</a>
<a name="sunlight-26-line-27" href="#sunlight-26-line-27">27</a>
<a name="sunlight-26-line-28" href="#sunlight-26-line-28">28</a>
<a name="sunlight-26-line-29" href="#sunlight-26-line-29">29</a>
<a name="sunlight-26-line-30" href="#sunlight-26-line-30">30</a>
<a name="sunlight-26-line-31" href="#sunlight-26-line-31">31</a>
<a name="sunlight-26-line-32" href="#sunlight-26-line-32">32</a>
<a name="sunlight-26-line-33" href="#sunlight-26-line-33">33</a>
<a name="sunlight-26-line-34" href="#sunlight-26-line-34">34</a>
<a name="sunlight-26-line-35" href="#sunlight-26-line-35">35</a>
<a name="sunlight-26-line-36" href="#sunlight-26-line-36">36</a>
<a name="sunlight-26-line-37" href="#sunlight-26-line-37">37</a>
<a name="sunlight-26-line-38" href="#sunlight-26-line-38">38</a>
<a name="sunlight-26-line-39" href="#sunlight-26-line-39">39</a>
<a name="sunlight-26-line-40" href="#sunlight-26-line-40">40</a>
<a name="sunlight-26-line-41" href="#sunlight-26-line-41">41</a>
<a name="sunlight-26-line-42" href="#sunlight-26-line-42">42</a>
<a name="sunlight-26-line-43" href="#sunlight-26-line-43">43</a>
<a name="sunlight-26-line-44" href="#sunlight-26-line-44">44</a>
<a name="sunlight-26-line-45" href="#sunlight-26-line-45">45</a>
<a name="sunlight-26-line-46" href="#sunlight-26-line-46">46</a>
<a name="sunlight-26-line-47" href="#sunlight-26-line-47">47</a>
<a name="sunlight-26-line-48" href="#sunlight-26-line-48">48</a>
<a name="sunlight-26-line-49" href="#sunlight-26-line-49">49</a>
<a name="sunlight-26-line-50" href="#sunlight-26-line-50">50</a>
<a name="sunlight-26-line-51" href="#sunlight-26-line-51">51</a>
<a name="sunlight-26-line-52" href="#sunlight-26-line-52">52</a>
<a name="sunlight-26-line-53" href="#sunlight-26-line-53">53</a>
<a name="sunlight-26-line-54" href="#sunlight-26-line-54">54</a>
<a name="sunlight-26-line-55" href="#sunlight-26-line-55">55</a>
<a name="sunlight-26-line-56" href="#sunlight-26-line-56">56</a>
<a name="sunlight-26-line-57" href="#sunlight-26-line-57">57</a>
<a name="sunlight-26-line-58" href="#sunlight-26-line-58">58</a>
<a name="sunlight-26-line-59" href="#sunlight-26-line-59">59</a>
<a name="sunlight-26-line-60" href="#sunlight-26-line-60">60</a>
<a name="sunlight-26-line-61" href="#sunlight-26-line-61">61</a>
<a name="sunlight-26-line-62" href="#sunlight-26-line-62">62</a>
<a name="sunlight-26-line-63" href="#sunlight-26-line-63">63</a>
<a name="sunlight-26-line-64" href="#sunlight-26-line-64">64</a>
<a name="sunlight-26-line-65" href="#sunlight-26-line-65">65</a>
<a name="sunlight-26-line-66" href="#sunlight-26-line-66">66</a>
<a name="sunlight-26-line-67" href="#sunlight-26-line-67">67</a>
<a name="sunlight-26-line-68" href="#sunlight-26-line-68">68</a>
<a name="sunlight-26-line-69" href="#sunlight-26-line-69">69</a>
<a name="sunlight-26-line-70" href="#sunlight-26-line-70">70</a>
<a name="sunlight-26-line-71" href="#sunlight-26-line-71">71</a>
<a name="sunlight-26-line-72" href="#sunlight-26-line-72">72</a>
<a name="sunlight-26-line-73" href="#sunlight-26-line-73">73</a>
<a name="sunlight-26-line-74" href="#sunlight-26-line-74">74</a>
<a name="sunlight-26-line-75" href="#sunlight-26-line-75">75</a>
<a name="sunlight-26-line-76" href="#sunlight-26-line-76">76</a>
<a name="sunlight-26-line-77" href="#sunlight-26-line-77">77</a>
<a name="sunlight-26-line-78" href="#sunlight-26-line-78">78</a>
<a name="sunlight-26-line-79" href="#sunlight-26-line-79">79</a>
<a name="sunlight-26-line-80" href="#sunlight-26-line-80">80</a>
<a name="sunlight-26-line-81" href="#sunlight-26-line-81">81</a>
<a name="sunlight-26-line-82" href="#sunlight-26-line-82">82</a>
<a name="sunlight-26-line-83" href="#sunlight-26-line-83">83</a>
<a name="sunlight-26-line-84" href="#sunlight-26-line-84">84</a>
<a name="sunlight-26-line-85" href="#sunlight-26-line-85">85</a>
<a name="sunlight-26-line-86" href="#sunlight-26-line-86">86</a>
<a name="sunlight-26-line-87" href="#sunlight-26-line-87">87</a>
<a name="sunlight-26-line-88" href="#sunlight-26-line-88">88</a>
<a name="sunlight-26-line-89" href="#sunlight-26-line-89">89</a>
<a name="sunlight-26-line-90" href="#sunlight-26-line-90">90</a>
<a name="sunlight-26-line-91" href="#sunlight-26-line-91">91</a>
<a name="sunlight-26-line-92" href="#sunlight-26-line-92">92</a>
<a name="sunlight-26-line-93" href="#sunlight-26-line-93">93</a>
<a name="sunlight-26-line-94" href="#sunlight-26-line-94">94</a>
<a name="sunlight-26-line-95" href="#sunlight-26-line-95">95</a>
<a name="sunlight-26-line-96" href="#sunlight-26-line-96">96</a>
<a name="sunlight-26-line-97" href="#sunlight-26-line-97">97</a>
<a name="sunlight-26-line-98" href="#sunlight-26-line-98">98</a>
<a name="sunlight-26-line-99" href="#sunlight-26-line-99">99</a>
<a name="sunlight-26-line-100" href="#sunlight-26-line-100">100</a>
<a name="sunlight-26-line-101" href="#sunlight-26-line-101">101</a>
<a name="sunlight-26-line-102" href="#sunlight-26-line-102">102</a>
<a name="sunlight-26-line-103" href="#sunlight-26-line-103">103</a>
<a name="sunlight-26-line-104" href="#sunlight-26-line-104">104</a>
<a name="sunlight-26-line-105" href="#sunlight-26-line-105">105</a>
<a name="sunlight-26-line-106" href="#sunlight-26-line-106">106</a>
<a name="sunlight-26-line-107" href="#sunlight-26-line-107">107</a>
<a name="sunlight-26-line-108" href="#sunlight-26-line-108">108</a>
<a name="sunlight-26-line-109" href="#sunlight-26-line-109">109</a>
<a name="sunlight-26-line-110" href="#sunlight-26-line-110">110</a>
<a name="sunlight-26-line-111" href="#sunlight-26-line-111">111</a>
<a name="sunlight-26-line-112" href="#sunlight-26-line-112">112</a>
<a name="sunlight-26-line-113" href="#sunlight-26-line-113">113</a>
<a name="sunlight-26-line-114" href="#sunlight-26-line-114">114</a>
<a name="sunlight-26-line-115" href="#sunlight-26-line-115">115</a>
<a name="sunlight-26-line-116" href="#sunlight-26-line-116">116</a>
<a name="sunlight-26-line-117" href="#sunlight-26-line-117">117</a>
<a name="sunlight-26-line-118" href="#sunlight-26-line-118">118</a>
<a name="sunlight-26-line-119" href="#sunlight-26-line-119">119</a>
<a name="sunlight-26-line-120" href="#sunlight-26-line-120">120</a>
<a name="sunlight-26-line-121" href="#sunlight-26-line-121">121</a>
<a name="sunlight-26-line-122" href="#sunlight-26-line-122">122</a>
<a name="sunlight-26-line-123" href="#sunlight-26-line-123">123</a>
<a name="sunlight-26-line-124" href="#sunlight-26-line-124">124</a>
<a name="sunlight-26-line-125" href="#sunlight-26-line-125">125</a>
<a name="sunlight-26-line-126" href="#sunlight-26-line-126">126</a>
<a name="sunlight-26-line-127" href="#sunlight-26-line-127">127</a>
<a name="sunlight-26-line-128" href="#sunlight-26-line-128">128</a>
<a name="sunlight-26-line-129" href="#sunlight-26-line-129">129</a>
<a name="sunlight-26-line-130" href="#sunlight-26-line-130">130</a>
<a name="sunlight-26-line-131" href="#sunlight-26-line-131">131</a>
<a name="sunlight-26-line-132" href="#sunlight-26-line-132">132</a>
<a name="sunlight-26-line-133" href="#sunlight-26-line-133">133</a>
<a name="sunlight-26-line-134" href="#sunlight-26-line-134">134</a>
<a name="sunlight-26-line-135" href="#sunlight-26-line-135">135</a>
<a name="sunlight-26-line-136" href="#sunlight-26-line-136">136</a>
<a name="sunlight-26-line-137" href="#sunlight-26-line-137">137</a>
<a name="sunlight-26-line-138" href="#sunlight-26-line-138">138</a>
<a name="sunlight-26-line-139" href="#sunlight-26-line-139">139</a>
<a name="sunlight-26-line-140" href="#sunlight-26-line-140">140</a>
</div><pre class="sunlight-highlight-perl sunlight-highlighted"><span class="sunlight-perl"><span class="sunlight-comment">#!/usr/bin/perl</span>
<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">strict</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">warnings</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">IO</span><span class="sunlight-operator">::</span><span class="sunlight-ident">Handle</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">feature</span>&nbsp;<span class="sunlight-string">":5.10"</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">"Hello&nbsp;\"world\\\""</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">'Hello&nbsp;\'world\\\'s&nbsp;best'</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-number">42</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">$animal</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"camel"</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">$content</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">''</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-function">open</span>&nbsp;<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">$fh</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-string">"&lt;"</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-string">"foo"</span>&nbsp;<span class="sunlight-keyword">or</span>&nbsp;<span class="sunlight-keyword">die</span>&nbsp;<span class="sunlight-specialVariable">$!</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-specialVariable">$/</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$content</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-variable">$fh</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>
<span class="sunlight-function">close</span>&nbsp;<span class="sunlight-variable">$fh</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">sub</span>&nbsp;<span class="sunlight-named-ident">handler</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-comment">#&nbsp;1st&nbsp;argument&nbsp;is&nbsp;signal&nbsp;name</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">my</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$sig</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-specialVariable">@_</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">"Caught&nbsp;a&nbsp;SIG$sig--shutting&nbsp;down\n"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">LOG</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">exit</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>
<span class="sunlight-specialVariable">$SIG</span><span class="sunlight-punctuation">{</span><span class="sunlight-string">'INT'</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">\&amp;</span><span class="sunlight-named-ident">referenceOrSomethingIGuess</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">local</span>&nbsp;<span class="sunlight-specialVariable">$SIG</span><span class="sunlight-punctuation">{</span><span class="sunlight-ident">__WARN__</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">sub</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">die</span>&nbsp;<span class="sunlight-specialVariable">$_</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-function">eval</span>&nbsp;<span class="sunlight-variable">$proggie</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">@mixed</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-string">"camel"</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-number">42</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-number">101.23</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-variable">$mixed</span><span class="sunlight-punctuation">[</span><span class="sunlight-variable">$#mixed</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">#how&nbsp;do&nbsp;perl&nbsp;programmers&nbsp;remember&nbsp;all&nbsp;this&nbsp;stuff?</span>
<span class="sunlight-variable">@animals</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-operator">..</span><span class="sunlight-variable">$#animals</span><span class="sunlight-punctuation">]</span>

<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">%fruit_color</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">apple</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-string">"red"</span><span class="sunlight-operator">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">banana</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-string">"yellow"</span><span class="sunlight-operator">,</span>
<span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">@fruits</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">keys</span>&nbsp;<span class="sunlight-variable">%fruit_colors</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">@colors</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">values</span>&nbsp;<span class="sunlight-variable">%fruit_colors</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">given</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">undef</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">say</span>&nbsp;<span class="sunlight-string">'$foo&nbsp;is&nbsp;undefined'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">say</span>&nbsp;<span class="sunlight-string">'$foo&nbsp;is&nbsp;the&nbsp;string&nbsp;"foo"'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-operator">,</span><span class="sunlight-number">3</span><span class="sunlight-operator">,</span><span class="sunlight-number">5</span><span class="sunlight-operator">,</span><span class="sunlight-number">7</span><span class="sunlight-operator">,</span><span class="sunlight-number">9</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">say</span>&nbsp;<span class="sunlight-string">'$foo&nbsp;is&nbsp;an&nbsp;odd&nbsp;digit'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">continue</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">#&nbsp;Fall&nbsp;through</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-specialVariable">$_</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">100</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">say</span>&nbsp;<span class="sunlight-string">'$foo&nbsp;is&nbsp;numerically&nbsp;less&nbsp;than&nbsp;100'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">\&amp;</span><span class="sunlight-named-ident">complicated_check</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">say</span>&nbsp;<span class="sunlight-string">'a&nbsp;complicated&nbsp;check&nbsp;for&nbsp;$foo&nbsp;is&nbsp;true'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">die</span>&nbsp;<span class="sunlight-rawString">q(I&nbsp;don't&nbsp;know&nbsp;what&nbsp;to&nbsp;do&nbsp;(with)&nbsp;$foo)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#do&nbsp;stuff</span>
<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">elsif</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#do&nbsp;other&nbsp;stuff</span>
<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">until</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-keyword">my</span>&nbsp;<span class="sunlight-variable">$key</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">keys</span>&nbsp;<span class="sunlight-variable">%hash</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">"The&nbsp;value&nbsp;of&nbsp;$key&nbsp;is&nbsp;$hash{$key}\n"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">#regex&nbsp;literal&nbsp;mayhem</span>

<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">?^$?</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;blank&nbsp;line&nbsp;between&nbsp;header&nbsp;and&nbsp;body</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">continue</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">reset</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-function">eof</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">#&nbsp;clear&nbsp;??&nbsp;status&nbsp;for&nbsp;next&nbsp;file</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-variable">$re</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">qr/$pattern/</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-variable">$string</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">/foo${re}bar/</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-variable">$string</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">//</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-variable">$string</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">??</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-variable">$string</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">/$re/</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-variable">$count</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$paragraph</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">s/Mister\b/Mr./g</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-specialVariable">$ARGV</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">tr/A-Z/a-z/</span><span class="sunlight-punctuation">;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;canonicalize&nbsp;to&nbsp;lower&nbsp;case</span>
<span class="sunlight-regexLiteral">tr&nbsp;[\200-\377]
&nbsp;&nbsp;&nbsp;&nbsp;[\000-\177]</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-regexLiteral">y/i/hate/perl</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">#seriously</span>

<span class="sunlight-variable">$cnt</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">tr/0-9//</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">#&nbsp;count&nbsp;the&nbsp;digits&nbsp;in&nbsp;$_</span>

<span class="sunlight-comment">#remove&nbsp;C-like&nbsp;comments&nbsp;I&nbsp;can't&nbsp;believe&nbsp;I&nbsp;got&nbsp;this&nbsp;pile&nbsp;of&nbsp;sewage&nbsp;to&nbsp;parse&nbsp;correctly</span>
<span class="sunlight-variable">$program</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">s&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;/\*&nbsp;#&nbsp;Match&nbsp;the&nbsp;opening&nbsp;delimiter.
&nbsp;&nbsp;&nbsp;&nbsp;.*?&nbsp;#&nbsp;Match&nbsp;a&nbsp;minimal&nbsp;number&nbsp;of&nbsp;characters.
&nbsp;&nbsp;&nbsp;&nbsp;\*/&nbsp;#&nbsp;Match&nbsp;the&nbsp;closing&nbsp;delimiter.
}&nbsp;[]gsx</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-comment">#friggin'&nbsp;heredocs...</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;HEREDOC</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-heredoc">Default&nbsp;heredoc&nbsp;body
HEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;"QUOTEDHEREDOC"</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-heredoc">Quoted&nbsp;heredoc&nbsp;body
QUOTEDHEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;`BACKQUOTEDHEREDOC`</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-heredoc">echo&nbsp;back&nbsp;quoted&nbsp;heredoc&nbsp;body
BACKQUOTEDHEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;'SINGLEQUOTEDHEREDOC'</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-heredoc">single&nbsp;quoted&nbsp;heredoc&nbsp;body
SINGLEQUOTEDHEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;"stacked1"</span><span class="sunlight-operator">,</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;"stacked2"</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-heredoc">stacked&nbsp;heredoc&nbsp;#1
stacked1
</span><span class="sunlight-heredoc">stacked&nbsp;heredoc&nbsp;#2
stacked2
</span>
<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$quote</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;'FINIS'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-regexLiteral">s/^\s+//gm</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-heredoc">The&nbsp;Road&nbsp;goes&nbsp;ever&nbsp;on&nbsp;and&nbsp;on,
&nbsp;&nbsp;&nbsp;&nbsp;down&nbsp;from&nbsp;the&nbsp;door&nbsp;where&nbsp;it&nbsp;began.
FINIS
</span>
<span class="sunlight-comment">#doc&nbsp;comments</span>
<span class="sunlight-docComment">=pod
=head1&nbsp;Heading&nbsp;Text
=cut&nbsp;this&nbsp;should&nbsp;not&nbsp;be&nbsp;parsed</span>
<span class="sunlight-keyword">sub</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-function">say</span>&nbsp;<span class="sunlight-string">"yay!"</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2 id="php1.php">php1.php</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-php sunlight-highlighted"><span class="sunlight-php"><span class="sunlight-openTag">&lt;?php</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">namespace</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-named-ident">UseThisClass</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-named-ident">AlsoUseThis</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">AndUseThis</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Favorite</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">UseMePlease</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">Other</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">UseMe</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">Other</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">NoUseMe</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">interface</span>&nbsp;<span class="sunlight-named-ident">Kissable</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Countable</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">kiss</span><span class="sunlight-punctuation">(</span><span class="sunlight-languageConstruct">array</span>&nbsp;<span class="sunlight-variable">$foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">HenryKissable</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">ExtendedClass</span>&nbsp;<span class="sunlight-keyword">implements</span>&nbsp;<span class="sunlight-named-ident">ImplementedInterface1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ImplementedInterface2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ImplementedInterface3</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-ident">KISS</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'kiss'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-variable">$myPrivateVar</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-variable">$publicVar</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#Perl-style&nbsp;comments&nbsp;are&nbsp;stupid</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">__construct</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Iterator</span>&nbsp;<span class="sunlight-variable">$bar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-languageConstruct">array</span>&nbsp;<span class="sunlight-variable">$kiss</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-languageConstruct">array</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">parent</span><span class="sunlight-operator">::</span><span class="sunlight-ident">__construct</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$this</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">myPrivateVar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$this</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">publicVar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$bar</span>&nbsp;<span class="sunlight-operator">?:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$kiss</span>&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-variable">$key</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-variable">$value</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//unset&nbsp;stuff</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">unset</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$this</span><span class="sunlight-punctuation">[</span><span class="sunlight-variable">$key</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-operator">\</span><span class="sunlight-ident">My</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">InstanceOfClassName1</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-named-ident">InstanceOfClassName2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">endif</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$this</span><span class="sunlight-punctuation">[</span><span class="sunlight-variable">$key</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">is_int</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$value</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">string</span><span class="sunlight-punctuation">)</span><span class="sunlight-variable">$value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">final</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">invokeStatic</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">StaticClass</span><span class="sunlight-operator">::</span><span class="sunlight-ident">invoke</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"this&nbsp;is&nbsp;a&nbsp;\"string\""</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">static</span><span class="sunlight-operator">::</span><span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">switch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">KISS</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">0x1a</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">KISS</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-string">'foo'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">elseif</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">KISS</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-string">'bar'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">1e3</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">OutOfBoundsException</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">noModifier</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">Fully1</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Qualified1</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">FullyQualifiedClassName1</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-operator">\</span><span class="sunlight-ident">Fully2</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Qualified2</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">FullyQualifiedClassName2</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$notFullyQualified</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">NotFullyQualified</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$closure</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-languageConstruct">array</span>&nbsp;<span class="sunlight-variable">$bar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Fully3</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Qualified3</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">ClassName3</span>&nbsp;<span class="sunlight-variable">$fqc</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-variable">$fqc</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">TypeHinted</span>&nbsp;<span class="sunlight-variable">$var</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;does&nbsp;something
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$emptyheredoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-heredoc">&lt;&lt;&lt;EMPTYHEREDOC
EMPTYHEREDOC</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$emptynowdoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-nowdoc">&lt;&lt;&lt;'EMPTYNOWDOC'
EMPTYNOWDOC</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$heredoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"this&nbsp;one&nbsp;is&nbsp;my&nbsp;\"favorite\""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$heredoc</span>&nbsp;<span class="sunlight-operator">.=</span>&nbsp;<span class="sunlight-heredoc">&lt;&lt;&lt;LOL
oh&nbsp;'look'
a&nbsp;heredoc!
LOL</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$nowdoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-nowdoc">&lt;&lt;&lt;'LULZ'
oh&nbsp;look
a&nbsp;nowdoc!
LULZ</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-closeTag">?&gt;</span>

<span class="sunlight-shortOpenTag">&lt;?</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//short&nbsp;tags&nbsp;</span>
<span class="sunlight-closeTag">?&gt;</span>

<span class="sunlight-shortOpenTag">&lt;?=</span>&nbsp;<span class="sunlight-string">'lol'</span>&nbsp;<span class="sunlight-closeTag">?&gt;</span>
</span></pre></div></div>
<h2 id="php2.php">php2.php</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-28-line-1" href="#sunlight-28-line-1">1</a>
<a name="sunlight-28-line-2" href="#sunlight-28-line-2">2</a>
</div><pre class="sunlight-highlight-php sunlight-highlighted"><span class="sunlight-php"><span class="sunlight-variable">$foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-heredoc">&lt;&lt;&lt;HEREDOC
unclosed&nbsp;heredoc
</span></span></pre></div></div>
<h2 id="plaintext.txt">plaintext.txt</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-29-line-1" href="#sunlight-29-line-1">1</a>
<a name="sunlight-29-line-2" href="#sunlight-29-line-2">2</a>
<a name="sunlight-29-line-3" href="#sunlight-29-line-3">3</a>
</div><pre class="sunlight-highlight-plaintext sunlight-highlighted"><span class="sunlight-plaintext">Lorem&nbsp;ipsum&nbsp;dolor&nbsp;sit&nbsp;amet,&nbsp;consectetur&nbsp;adipisicing&nbsp;elit,
sed&nbsp;do&nbsp;eiusmod&nbsp;tempor&nbsp;incididunt&nbsp;ut&nbsp;labore&nbsp;et&nbsp;dolore&nbsp;magna&nbsp;aliqua.&nbsp;This&nbsp;is&nbsp;a&nbsp;number:&nbsp;12.&nbsp;It&nbsp;should&nbsp;not
be&nbsp;parsed&nbsp;as&nbsp;anything&nbsp;or&nbsp;else&nbsp;this&nbsp;is&nbsp;not&nbsp;working&nbsp;correctly!
</span></pre></div></div>
<h2 id="powershell.ps1">powershell.ps1</h2>
<p>Theme: <b>light</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-30-line-1" href="#sunlight-30-line-1">1</a>
<a name="sunlight-30-line-2" href="#sunlight-30-line-2">2</a>
<a name="sunlight-30-line-3" href="#sunlight-30-line-3">3</a>
<a name="sunlight-30-line-4" href="#sunlight-30-line-4">4</a>
<a name="sunlight-30-line-5" href="#sunlight-30-line-5">5</a>
<a name="sunlight-30-line-6" href="#sunlight-30-line-6">6</a>
<a name="sunlight-30-line-7" href="#sunlight-30-line-7">7</a>
<a name="sunlight-30-line-8" href="#sunlight-30-line-8">8</a>
<a name="sunlight-30-line-9" href="#sunlight-30-line-9">9</a>
<a name="sunlight-30-line-10" href="#sunlight-30-line-10">10</a>
<a name="sunlight-30-line-11" href="#sunlight-30-line-11">11</a>
<a name="sunlight-30-line-12" href="#sunlight-30-line-12">12</a>
<a name="sunlight-30-line-13" href="#sunlight-30-line-13">13</a>
<a name="sunlight-30-line-14" href="#sunlight-30-line-14">14</a>
<a name="sunlight-30-line-15" href="#sunlight-30-line-15">15</a>
<a name="sunlight-30-line-16" href="#sunlight-30-line-16">16</a>
<a name="sunlight-30-line-17" href="#sunlight-30-line-17">17</a>
<a name="sunlight-30-line-18" href="#sunlight-30-line-18">18</a>
<a name="sunlight-30-line-19" href="#sunlight-30-line-19">19</a>
<a name="sunlight-30-line-20" href="#sunlight-30-line-20">20</a>
<a name="sunlight-30-line-21" href="#sunlight-30-line-21">21</a>
<a name="sunlight-30-line-22" href="#sunlight-30-line-22">22</a>
<a name="sunlight-30-line-23" href="#sunlight-30-line-23">23</a>
<a name="sunlight-30-line-24" href="#sunlight-30-line-24">24</a>
<a name="sunlight-30-line-25" href="#sunlight-30-line-25">25</a>
<a name="sunlight-30-line-26" href="#sunlight-30-line-26">26</a>
<a name="sunlight-30-line-27" href="#sunlight-30-line-27">27</a>
<a name="sunlight-30-line-28" href="#sunlight-30-line-28">28</a>
<a name="sunlight-30-line-29" href="#sunlight-30-line-29">29</a>
<a name="sunlight-30-line-30" href="#sunlight-30-line-30">30</a>
<a name="sunlight-30-line-31" href="#sunlight-30-line-31">31</a>
<a name="sunlight-30-line-32" href="#sunlight-30-line-32">32</a>
<a name="sunlight-30-line-33" href="#sunlight-30-line-33">33</a>
<a name="sunlight-30-line-34" href="#sunlight-30-line-34">34</a>
<a name="sunlight-30-line-35" href="#sunlight-30-line-35">35</a>
<a name="sunlight-30-line-36" href="#sunlight-30-line-36">36</a>
<a name="sunlight-30-line-37" href="#sunlight-30-line-37">37</a>
<a name="sunlight-30-line-38" href="#sunlight-30-line-38">38</a>
<a name="sunlight-30-line-39" href="#sunlight-30-line-39">39</a>
<a name="sunlight-30-line-40" href="#sunlight-30-line-40">40</a>
<a name="sunlight-30-line-41" href="#sunlight-30-line-41">41</a>
<a name="sunlight-30-line-42" href="#sunlight-30-line-42">42</a>
<a name="sunlight-30-line-43" href="#sunlight-30-line-43">43</a>
<a name="sunlight-30-line-44" href="#sunlight-30-line-44">44</a>
<a name="sunlight-30-line-45" href="#sunlight-30-line-45">45</a>
<a name="sunlight-30-line-46" href="#sunlight-30-line-46">46</a>
<a name="sunlight-30-line-47" href="#sunlight-30-line-47">47</a>
<a name="sunlight-30-line-48" href="#sunlight-30-line-48">48</a>
<a name="sunlight-30-line-49" href="#sunlight-30-line-49">49</a>
<a name="sunlight-30-line-50" href="#sunlight-30-line-50">50</a>
</div><pre class="sunlight-highlight-powershell sunlight-highlighted"><span class="sunlight-powershell"><span class="sunlight-variable">$strComputer</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Read-Host</span>&nbsp;<span class="sunlight-string">"Printer&nbsp;Report&nbsp;-&nbsp;Enter&nbsp;Computer&nbsp;Name"</span>
<span class="sunlight-variable">$OS</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Get-WmiObject</span>&nbsp;<span class="sunlight-switch">-Class</span>&nbsp;<span class="sunlight-ident">win32_OperatingSystem</span>&nbsp;<span class="sunlight-switch">-namespace</span>&nbsp;<span class="sunlight-string">"root\CIMV2"</span>&nbsp;<span class="sunlight-operator">`</span>
<span class="sunlight-switch">-ComputerName</span>&nbsp;<span class="sunlight-variable">$strComputer</span>

<span class="sunlight-comment">#&nbsp;if&nbsp;statement&nbsp;to&nbsp;run&nbsp;code&nbsp;for&nbsp;Windows&nbsp;XP&nbsp;and&nbsp;Windows&nbsp;2003&nbsp;Server.</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$OS</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Version</span>&nbsp;<span class="sunlight-specialOperator">-eq</span>&nbsp;<span class="sunlight-string">"5.1.2600"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-specialOperator">-or</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$OS</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Version</span>&nbsp;<span class="sunlight-specialOperator">-eq</span>&nbsp;<span class="sunlight-string">"5.2.3790"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"Computer&nbsp;Name:&nbsp;"</span>&nbsp;<span class="sunlight-variable">$strComputer</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#nested&nbsp;if&nbsp;statement</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$OS</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Version</span>&nbsp;<span class="sunlight-specialOperator">-eq</span>&nbsp;<span class="sunlight-string">"5.1.2600"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"OS&nbsp;Version:&nbsp;Windows&nbsp;XP"</span><span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">elseif</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$OS</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Version</span>&nbsp;<span class="sunlight-specialOperator">-eq</span>&nbsp;<span class="sunlight-string">"5.2.3790"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"OS&nbsp;Version:&nbsp;Windows&nbsp;2003"</span><span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$colPrinters</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Get-WmiObject</span>&nbsp;<span class="sunlight-switch">-Class</span>&nbsp;<span class="sunlight-ident">win32_Printer</span>&nbsp;<span class="sunlight-switch">-namespace</span>&nbsp;<span class="sunlight-string">"root\CIMV2"</span>&nbsp;<span class="sunlight-operator">`</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-switch">-computerName</span>&nbsp;<span class="sunlight-variable">$strComputer</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$objPrinter</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-variable">$colPrinters)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"Name:&nbsp;"</span>&nbsp;<span class="sunlight-variable">$objPrinter</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Name</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"Description:&nbsp;"</span>&nbsp;<span class="sunlight-variable">$objPrinter</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Description</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">#&nbsp;if&nbsp;statement&nbsp;to&nbsp;run&nbsp;code&nbsp;for&nbsp;Windows&nbsp;2000&nbsp;Server</span>
<span class="sunlight-keyword">elseif</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$OS</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Version</span>&nbsp;<span class="sunlight-specialOperator">-eq</span>&nbsp;<span class="sunlight-string">"5.0.2195"</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"Computer&nbsp;Name:&nbsp;"</span>&nbsp;<span class="sunlight-variable">$strComputer</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"OS&nbsp;Version:&nbsp;Windows&nbsp;2000&nbsp;Server"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$colPrinters</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Get-WmiObject</span>&nbsp;<span class="sunlight-switch">-Class</span>&nbsp;<span class="sunlight-ident">win32_PrintJob</span>&nbsp;<span class="sunlight-switch">-namespace</span>&nbsp;<span class="sunlight-string">"root\CIMV2"</span>&nbsp;<span class="sunlight-operator">`</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-switch">-computername</span>&nbsp;<span class="sunlight-variable">$strComputer</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$objPrinter</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-variable">$colPrinters)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"Name:&nbsp;"</span>&nbsp;<span class="sunlight-variable">$objPrinter</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Name</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"Description:&nbsp;"</span>&nbsp;<span class="sunlight-variable">$objPrinter</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Description</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">write-host</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>
<span class="sunlight-comment">#&nbsp;if&nbsp;OS&nbsp;not&nbsp;identified</span>
<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"The&nbsp;OS&nbsp;for:&nbsp;$strComputer&nbsp;is&nbsp;not&nbsp;supported."</span><span class="sunlight-punctuation">}</span>
<span class="sunlight-named-ident">write-host</span>&nbsp;<span class="sunlight-string">"-END&nbsp;OF&nbsp;REPORT-"</span>

<span class="sunlight-comment">#prints&nbsp;all&nbsp;powershell&nbsp;keywords</span>
<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">type</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">::</span><span class="sunlight-ident">gettype</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"System.Management.Automation.KeywordTokenReader"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">|</span><span class="sunlight-operator">`</span>
<span class="sunlight-operator">%{</span><span class="sunlight-specialVariable">$_</span><span class="sunlight-operator">.</span><span class="sunlight-ident">InvokeMember</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"_keywordTokens"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"NonPublic,Static,GetField"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-specialVariable">$null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-specialVariable">$_</span><span class="sunlight-punctuation">,</span><span class="sunlight-operator">@(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">#http://weblogs.asp.net/steveschofield/archive/2007/01/25/basic-powershell-examples-couple-useful-commands.aspx</span>
<span class="sunlight-variable">$request</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">Fully</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Qualified</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">WebRequest</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">::</span><span class="sunlight-ident">Create</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"http://www.iislogs.com/testlink.aspx"</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-variable">$response</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$request</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GetResponse</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-variable">$requestStream</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$response</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GetResponseStream</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-variable">$readStream</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">new-object</span>&nbsp;<span class="sunlight-ident">System</span><span class="sunlight-operator">.</span><span class="sunlight-ident">IO</span><span class="sunlight-operator">.</span><span class="sunlight-ident">StreamReader</span>&nbsp;<span class="sunlight-variable">$requestStream</span>
<span class="sunlight-named-ident">new-variable</span>&nbsp;<span class="sunlight-ident">db</span>
<span class="sunlight-variable">$db</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$readStream</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ReadToEnd</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-variable">$readStream</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Close</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-variable">$response</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Close</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
</span></pre></div></div>
<h2 id="python.py">python.py</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-python sunlight-highlighted"><span class="sunlight-python"><span class="sunlight-comment">#normal&nbsp;strings</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">'Hello,&nbsp;world!'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">"Hello,&nbsp;world!"</span>

<span class="sunlight-comment">#looooooooooooooong&nbsp;strings</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-longString">"""Hello,&nbsp;world!"""</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-longString">'''Hello,&nbsp;world!'''</span>

<span class="sunlight-comment">#raw&nbsp;strings</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawString">r"hello"</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawString">r'hello'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawString">R"hello"</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawString">R'hello'</span>

<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawLongString">r'''hello'''</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawLongString">R'''hello'''</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawLongString">r"""hello"""</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-rawLongString">R"""hello"""</span>

<span class="sunlight-comment">#binary&nbsp;strings</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">br"hello"</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">br'hello'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">bR"hello"</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">bR'hello'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">Br"hello"</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">Br'hello'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">BR"hello"</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryString">BR'hello'</span>

<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">br"""hello"""</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">br'''hello'''</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">bR"""hello"""</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">bR'''hello'''</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">Br"""hello"""</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">Br'''hello'''</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">BR"""hello"""</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-binaryLongString">BR'''hello'''</span>

<span class="sunlight-comment">#fibonacci&nbsp;tuple&nbsp;assignment</span>
<span class="sunlight-ident">parents</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">babies</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-delimiter">(</span><span class="sunlight-number">1</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-delimiter">)</span>
<span class="sunlight-keyword">while</span>&nbsp;<span class="sunlight-ident">babies</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">100</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">'This&nbsp;generation&nbsp;has&nbsp;%d&nbsp;babies'</span>&nbsp;<span class="sunlight-operator">%</span>&nbsp;<span class="sunlight-ident">babies</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">parents</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">babies</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-delimiter">(</span><span class="sunlight-ident">babies</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">parents</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">babies</span><span class="sunlight-delimiter">)</span>

<span class="sunlight-comment">#import,&nbsp;regex</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">re</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">test_string</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-delimiter">[</span><span class="sunlight-string">'555-1212'</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-string">'ILL-EGAL'</span><span class="sunlight-delimiter">]</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">re</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">match</span><span class="sunlight-delimiter">(</span><span class="sunlight-rawString">r'^\d{3}-\d{4}$'</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">test_string</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-ident">test_string</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-string">'is&nbsp;a&nbsp;valid&nbsp;US&nbsp;local&nbsp;phone&nbsp;number'</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">else</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-ident">test_string</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-string">'rejected'</span>

<span class="sunlight-comment">#!/usr/bin/env&nbsp;python</span>
<span class="sunlight-comment">#&nbsp;This&nbsp;program&nbsp;adds&nbsp;up&nbsp;integers&nbsp;in&nbsp;the&nbsp;command&nbsp;line</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">sys</span>
<span class="sunlight-keyword">try</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">total</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-function">sum</span><span class="sunlight-delimiter">(</span><span class="sunlight-function">int</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">arg</span><span class="sunlight-delimiter">)</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">arg</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">sys</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">argv</span><span class="sunlight-delimiter">[</span><span class="sunlight-number">1</span><span class="sunlight-delimiter">:</span><span class="sunlight-delimiter">]</span><span class="sunlight-delimiter">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">'sum&nbsp;='</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">total</span>
<span class="sunlight-keyword">except</span>&nbsp;<span class="sunlight-named-ident">ValueError</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">'Please&nbsp;supply&nbsp;integer&nbsp;arguments'</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">BankAccount</span><span class="sunlight-delimiter">(</span><span class="sunlight-function">object</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-specialMethod">__init__</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">self</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">initial_balance</span><span class="sunlight-delimiter">=</span><span class="sunlight-number">0</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">self</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">balance</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">initial_balance</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">deposit</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">self</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">amount</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">self</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">balance</span>&nbsp;<span class="sunlight-delimiter">+=</span>&nbsp;<span class="sunlight-ident">amount</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">withdraw</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">self</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">amount</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">self</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">balance</span>&nbsp;<span class="sunlight-delimiter">-=</span>&nbsp;<span class="sunlight-ident">amount</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">overdrawn</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">self</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">self</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">balance</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">0</span>
<span class="sunlight-ident">my_account</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">BankAccount</span><span class="sunlight-delimiter">(</span><span class="sunlight-number">15</span><span class="sunlight-delimiter">)</span>
<span class="sunlight-ident">my_account</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">withdraw</span><span class="sunlight-delimiter">(</span><span class="sunlight-number">5</span><span class="sunlight-delimiter">)</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-ident">my_account</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">balance</span>


<span class="sunlight-comment">#8-Queens</span>
<span class="sunlight-ident">BOARD_SIZE</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-number">8</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">BailOut</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">Exception</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">pass</span>

<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">validate</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">queens</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">left</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">right</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">col</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">queens</span><span class="sunlight-delimiter">[</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-delimiter">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-function">reversed</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">queens</span><span class="sunlight-delimiter">[</span><span class="sunlight-delimiter">:</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-delimiter">]</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">left</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">right</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">left</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">right</span><span class="sunlight-operator">+</span><span class="sunlight-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">r</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-delimiter">(</span><span class="sunlight-ident">left</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">col</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-ident">right</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">raise</span>&nbsp;<span class="sunlight-named-ident">BailOut</span>

<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">add_queen</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">queens</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-function">range</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">BOARD_SIZE</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">test_queens</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">queens</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-delimiter">[</span><span class="sunlight-ident">i</span><span class="sunlight-delimiter">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">validate</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">test_queens</span><span class="sunlight-delimiter">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-function">len</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">test_queens</span><span class="sunlight-delimiter">)</span>&nbsp;<span class="sunlight-delimiter">=</span><span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">BOARD_SIZE</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">test_queens</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">else</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">add_queen</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">test_queens</span><span class="sunlight-delimiter">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">except</span>&nbsp;<span class="sunlight-named-ident">BailOut</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">pass</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">raise</span>&nbsp;<span class="sunlight-named-ident">BailOut</span>

<span class="sunlight-ident">queens</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ident">add_queen</span><span class="sunlight-delimiter">(</span><span class="sunlight-delimiter">[</span><span class="sunlight-delimiter">]</span><span class="sunlight-delimiter">)</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-ident">queens</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">"\n"</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">join</span><span class="sunlight-delimiter">(</span><span class="sunlight-string">".&nbsp;"</span><span class="sunlight-operator">*</span><span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"Q&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">".&nbsp;"</span><span class="sunlight-operator">*</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">BOARD_SIZE</span><span class="sunlight-operator">-</span><span class="sunlight-ident">q</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-delimiter">)</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-ident">q</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">queens</span><span class="sunlight-delimiter">)</span>

<span class="sunlight-ident">variableName</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-operator">**</span><span class="sunlight-number">5</span>
<span class="sunlight-ident">complexNumber</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-number">4j</span>&nbsp;<span class="sunlight-delimiter">+=</span>&nbsp;<span class="sunlight-number">1</span>

<span class="sunlight-ident">constants</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-delimiter">(</span><span class="sunlight-constant">None</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-constant">True</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-constant">False</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-constant">NotImplemented</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-constant">__debug__</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-constant">Ellipsis</span><span class="sunlight-delimiter">)</span>
<span class="sunlight-ident">ellipsis</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-ellipsis">...</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">unittest</span>
<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">median</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">pool</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">copy</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-function">sorted</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">pool</span><span class="sunlight-delimiter">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">size</span>&nbsp;<span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-function">len</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">copy</span><span class="sunlight-delimiter">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">size</span>&nbsp;<span class="sunlight-operator">%</span>&nbsp;<span class="sunlight-number">2</span>&nbsp;<span class="sunlight-delimiter">=</span><span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">copy</span><span class="sunlight-delimiter">[</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">size</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-delimiter">)</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-delimiter">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">else</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-delimiter">(</span><span class="sunlight-ident">copy</span><span class="sunlight-delimiter">[</span><span class="sunlight-ident">size</span><span class="sunlight-operator">/</span><span class="sunlight-number">2</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-delimiter">]</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">copy</span><span class="sunlight-delimiter">[</span><span class="sunlight-ident">size</span><span class="sunlight-operator">/</span><span class="sunlight-number">2</span><span class="sunlight-delimiter">]</span><span class="sunlight-delimiter">)</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span>
<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">TestMedian</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">unittest</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">TestCase</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">testMedian</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">self</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">self</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">failUnlessEqual</span><span class="sunlight-delimiter">(</span><span class="sunlight-ident">median</span><span class="sunlight-delimiter">(</span><span class="sunlight-delimiter">[</span><span class="sunlight-number">2</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">9</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">9</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">7</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">9</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">8</span><span class="sunlight-delimiter">]</span><span class="sunlight-delimiter">)</span><span class="sunlight-delimiter">,</span>&nbsp;<span class="sunlight-number">7</span><span class="sunlight-delimiter">)</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-attribute">__name__</span>&nbsp;<span class="sunlight-delimiter">=</span><span class="sunlight-delimiter">=</span>&nbsp;<span class="sunlight-string">'__main__'</span><span class="sunlight-delimiter">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">unittest</span><span class="sunlight-delimiter">.</span><span class="sunlight-ident">main</span><span class="sunlight-delimiter">(</span><span class="sunlight-delimiter">)</span>

</span></pre></div></div>
<h2 id="ruby.rb">ruby.rb</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-32-line-1" href="#sunlight-32-line-1">1</a>
<a name="sunlight-32-line-2" href="#sunlight-32-line-2">2</a>
<a name="sunlight-32-line-3" href="#sunlight-32-line-3">3</a>
<a name="sunlight-32-line-4" href="#sunlight-32-line-4">4</a>
<a name="sunlight-32-line-5" href="#sunlight-32-line-5">5</a>
<a name="sunlight-32-line-6" href="#sunlight-32-line-6">6</a>
<a name="sunlight-32-line-7" href="#sunlight-32-line-7">7</a>
<a name="sunlight-32-line-8" href="#sunlight-32-line-8">8</a>
<a name="sunlight-32-line-9" href="#sunlight-32-line-9">9</a>
<a name="sunlight-32-line-10" href="#sunlight-32-line-10">10</a>
<a name="sunlight-32-line-11" href="#sunlight-32-line-11">11</a>
<a name="sunlight-32-line-12" href="#sunlight-32-line-12">12</a>
<a name="sunlight-32-line-13" href="#sunlight-32-line-13">13</a>
<a name="sunlight-32-line-14" href="#sunlight-32-line-14">14</a>
<a name="sunlight-32-line-15" href="#sunlight-32-line-15">15</a>
<a name="sunlight-32-line-16" href="#sunlight-32-line-16">16</a>
<a name="sunlight-32-line-17" href="#sunlight-32-line-17">17</a>
<a name="sunlight-32-line-18" href="#sunlight-32-line-18">18</a>
<a name="sunlight-32-line-19" href="#sunlight-32-line-19">19</a>
<a name="sunlight-32-line-20" href="#sunlight-32-line-20">20</a>
<a name="sunlight-32-line-21" href="#sunlight-32-line-21">21</a>
<a name="sunlight-32-line-22" href="#sunlight-32-line-22">22</a>
<a name="sunlight-32-line-23" href="#sunlight-32-line-23">23</a>
<a name="sunlight-32-line-24" href="#sunlight-32-line-24">24</a>
<a name="sunlight-32-line-25" href="#sunlight-32-line-25">25</a>
<a name="sunlight-32-line-26" href="#sunlight-32-line-26">26</a>
<a name="sunlight-32-line-27" href="#sunlight-32-line-27">27</a>
<a name="sunlight-32-line-28" href="#sunlight-32-line-28">28</a>
<a name="sunlight-32-line-29" href="#sunlight-32-line-29">29</a>
<a name="sunlight-32-line-30" href="#sunlight-32-line-30">30</a>
<a name="sunlight-32-line-31" href="#sunlight-32-line-31">31</a>
<a name="sunlight-32-line-32" href="#sunlight-32-line-32">32</a>
<a name="sunlight-32-line-33" href="#sunlight-32-line-33">33</a>
<a name="sunlight-32-line-34" href="#sunlight-32-line-34">34</a>
<a name="sunlight-32-line-35" href="#sunlight-32-line-35">35</a>
<a name="sunlight-32-line-36" href="#sunlight-32-line-36">36</a>
<a name="sunlight-32-line-37" href="#sunlight-32-line-37">37</a>
<a name="sunlight-32-line-38" href="#sunlight-32-line-38">38</a>
<a name="sunlight-32-line-39" href="#sunlight-32-line-39">39</a>
<a name="sunlight-32-line-40" href="#sunlight-32-line-40">40</a>
<a name="sunlight-32-line-41" href="#sunlight-32-line-41">41</a>
<a name="sunlight-32-line-42" href="#sunlight-32-line-42">42</a>
<a name="sunlight-32-line-43" href="#sunlight-32-line-43">43</a>
<a name="sunlight-32-line-44" href="#sunlight-32-line-44">44</a>
<a name="sunlight-32-line-45" href="#sunlight-32-line-45">45</a>
<a name="sunlight-32-line-46" href="#sunlight-32-line-46">46</a>
<a name="sunlight-32-line-47" href="#sunlight-32-line-47">47</a>
<a name="sunlight-32-line-48" href="#sunlight-32-line-48">48</a>
<a name="sunlight-32-line-49" href="#sunlight-32-line-49">49</a>
<a name="sunlight-32-line-50" href="#sunlight-32-line-50">50</a>
<a name="sunlight-32-line-51" href="#sunlight-32-line-51">51</a>
<a name="sunlight-32-line-52" href="#sunlight-32-line-52">52</a>
<a name="sunlight-32-line-53" href="#sunlight-32-line-53">53</a>
<a name="sunlight-32-line-54" href="#sunlight-32-line-54">54</a>
<a name="sunlight-32-line-55" href="#sunlight-32-line-55">55</a>
<a name="sunlight-32-line-56" href="#sunlight-32-line-56">56</a>
<a name="sunlight-32-line-57" href="#sunlight-32-line-57">57</a>
<a name="sunlight-32-line-58" href="#sunlight-32-line-58">58</a>
<a name="sunlight-32-line-59" href="#sunlight-32-line-59">59</a>
<a name="sunlight-32-line-60" href="#sunlight-32-line-60">60</a>
<a name="sunlight-32-line-61" href="#sunlight-32-line-61">61</a>
<a name="sunlight-32-line-62" href="#sunlight-32-line-62">62</a>
<a name="sunlight-32-line-63" href="#sunlight-32-line-63">63</a>
<a name="sunlight-32-line-64" href="#sunlight-32-line-64">64</a>
<a name="sunlight-32-line-65" href="#sunlight-32-line-65">65</a>
<a name="sunlight-32-line-66" href="#sunlight-32-line-66">66</a>
<a name="sunlight-32-line-67" href="#sunlight-32-line-67">67</a>
<a name="sunlight-32-line-68" href="#sunlight-32-line-68">68</a>
<a name="sunlight-32-line-69" href="#sunlight-32-line-69">69</a>
<a name="sunlight-32-line-70" href="#sunlight-32-line-70">70</a>
<a name="sunlight-32-line-71" href="#sunlight-32-line-71">71</a>
<a name="sunlight-32-line-72" href="#sunlight-32-line-72">72</a>
<a name="sunlight-32-line-73" href="#sunlight-32-line-73">73</a>
<a name="sunlight-32-line-74" href="#sunlight-32-line-74">74</a>
<a name="sunlight-32-line-75" href="#sunlight-32-line-75">75</a>
<a name="sunlight-32-line-76" href="#sunlight-32-line-76">76</a>
<a name="sunlight-32-line-77" href="#sunlight-32-line-77">77</a>
<a name="sunlight-32-line-78" href="#sunlight-32-line-78">78</a>
<a name="sunlight-32-line-79" href="#sunlight-32-line-79">79</a>
<a name="sunlight-32-line-80" href="#sunlight-32-line-80">80</a>
<a name="sunlight-32-line-81" href="#sunlight-32-line-81">81</a>
<a name="sunlight-32-line-82" href="#sunlight-32-line-82">82</a>
<a name="sunlight-32-line-83" href="#sunlight-32-line-83">83</a>
<a name="sunlight-32-line-84" href="#sunlight-32-line-84">84</a>
<a name="sunlight-32-line-85" href="#sunlight-32-line-85">85</a>
<a name="sunlight-32-line-86" href="#sunlight-32-line-86">86</a>
<a name="sunlight-32-line-87" href="#sunlight-32-line-87">87</a>
<a name="sunlight-32-line-88" href="#sunlight-32-line-88">88</a>
<a name="sunlight-32-line-89" href="#sunlight-32-line-89">89</a>
<a name="sunlight-32-line-90" href="#sunlight-32-line-90">90</a>
<a name="sunlight-32-line-91" href="#sunlight-32-line-91">91</a>
<a name="sunlight-32-line-92" href="#sunlight-32-line-92">92</a>
<a name="sunlight-32-line-93" href="#sunlight-32-line-93">93</a>
<a name="sunlight-32-line-94" href="#sunlight-32-line-94">94</a>
<a name="sunlight-32-line-95" href="#sunlight-32-line-95">95</a>
<a name="sunlight-32-line-96" href="#sunlight-32-line-96">96</a>
<a name="sunlight-32-line-97" href="#sunlight-32-line-97">97</a>
<a name="sunlight-32-line-98" href="#sunlight-32-line-98">98</a>
<a name="sunlight-32-line-99" href="#sunlight-32-line-99">99</a>
<a name="sunlight-32-line-100" href="#sunlight-32-line-100">100</a>
<a name="sunlight-32-line-101" href="#sunlight-32-line-101">101</a>
<a name="sunlight-32-line-102" href="#sunlight-32-line-102">102</a>
<a name="sunlight-32-line-103" href="#sunlight-32-line-103">103</a>
<a name="sunlight-32-line-104" href="#sunlight-32-line-104">104</a>
<a name="sunlight-32-line-105" href="#sunlight-32-line-105">105</a>
<a name="sunlight-32-line-106" href="#sunlight-32-line-106">106</a>
<a name="sunlight-32-line-107" href="#sunlight-32-line-107">107</a>
<a name="sunlight-32-line-108" href="#sunlight-32-line-108">108</a>
<a name="sunlight-32-line-109" href="#sunlight-32-line-109">109</a>
<a name="sunlight-32-line-110" href="#sunlight-32-line-110">110</a>
<a name="sunlight-32-line-111" href="#sunlight-32-line-111">111</a>
<a name="sunlight-32-line-112" href="#sunlight-32-line-112">112</a>
<a name="sunlight-32-line-113" href="#sunlight-32-line-113">113</a>
<a name="sunlight-32-line-114" href="#sunlight-32-line-114">114</a>
<a name="sunlight-32-line-115" href="#sunlight-32-line-115">115</a>
<a name="sunlight-32-line-116" href="#sunlight-32-line-116">116</a>
<a name="sunlight-32-line-117" href="#sunlight-32-line-117">117</a>
<a name="sunlight-32-line-118" href="#sunlight-32-line-118">118</a>
<a name="sunlight-32-line-119" href="#sunlight-32-line-119">119</a>
<a name="sunlight-32-line-120" href="#sunlight-32-line-120">120</a>
<a name="sunlight-32-line-121" href="#sunlight-32-line-121">121</a>
<a name="sunlight-32-line-122" href="#sunlight-32-line-122">122</a>
<a name="sunlight-32-line-123" href="#sunlight-32-line-123">123</a>
<a name="sunlight-32-line-124" href="#sunlight-32-line-124">124</a>
<a name="sunlight-32-line-125" href="#sunlight-32-line-125">125</a>
<a name="sunlight-32-line-126" href="#sunlight-32-line-126">126</a>
<a name="sunlight-32-line-127" href="#sunlight-32-line-127">127</a>
<a name="sunlight-32-line-128" href="#sunlight-32-line-128">128</a>
<a name="sunlight-32-line-129" href="#sunlight-32-line-129">129</a>
<a name="sunlight-32-line-130" href="#sunlight-32-line-130">130</a>
<a name="sunlight-32-line-131" href="#sunlight-32-line-131">131</a>
<a name="sunlight-32-line-132" href="#sunlight-32-line-132">132</a>
<a name="sunlight-32-line-133" href="#sunlight-32-line-133">133</a>
<a name="sunlight-32-line-134" href="#sunlight-32-line-134">134</a>
<a name="sunlight-32-line-135" href="#sunlight-32-line-135">135</a>
<a name="sunlight-32-line-136" href="#sunlight-32-line-136">136</a>
<a name="sunlight-32-line-137" href="#sunlight-32-line-137">137</a>
<a name="sunlight-32-line-138" href="#sunlight-32-line-138">138</a>
<a name="sunlight-32-line-139" href="#sunlight-32-line-139">139</a>
<a name="sunlight-32-line-140" href="#sunlight-32-line-140">140</a>
<a name="sunlight-32-line-141" href="#sunlight-32-line-141">141</a>
<a name="sunlight-32-line-142" href="#sunlight-32-line-142">142</a>
<a name="sunlight-32-line-143" href="#sunlight-32-line-143">143</a>
<a name="sunlight-32-line-144" href="#sunlight-32-line-144">144</a>
<a name="sunlight-32-line-145" href="#sunlight-32-line-145">145</a>
<a name="sunlight-32-line-146" href="#sunlight-32-line-146">146</a>
<a name="sunlight-32-line-147" href="#sunlight-32-line-147">147</a>
<a name="sunlight-32-line-148" href="#sunlight-32-line-148">148</a>
<a name="sunlight-32-line-149" href="#sunlight-32-line-149">149</a>
<a name="sunlight-32-line-150" href="#sunlight-32-line-150">150</a>
<a name="sunlight-32-line-151" href="#sunlight-32-line-151">151</a>
<a name="sunlight-32-line-152" href="#sunlight-32-line-152">152</a>
<a name="sunlight-32-line-153" href="#sunlight-32-line-153">153</a>
<a name="sunlight-32-line-154" href="#sunlight-32-line-154">154</a>
<a name="sunlight-32-line-155" href="#sunlight-32-line-155">155</a>
<a name="sunlight-32-line-156" href="#sunlight-32-line-156">156</a>
<a name="sunlight-32-line-157" href="#sunlight-32-line-157">157</a>
<a name="sunlight-32-line-158" href="#sunlight-32-line-158">158</a>
<a name="sunlight-32-line-159" href="#sunlight-32-line-159">159</a>
<a name="sunlight-32-line-160" href="#sunlight-32-line-160">160</a>
<a name="sunlight-32-line-161" href="#sunlight-32-line-161">161</a>
<a name="sunlight-32-line-162" href="#sunlight-32-line-162">162</a>
<a name="sunlight-32-line-163" href="#sunlight-32-line-163">163</a>
</div><pre class="sunlight-highlight-ruby sunlight-highlighted"><span class="sunlight-ruby"><span class="sunlight-comment">#!/usr/bin/ruby</span>

<span class="sunlight-comment">#single&nbsp;line&nbsp;comment</span>
<span class="sunlight-function">puts</span>&nbsp;<span class="sunlight-string">'Hello&nbsp;world!'</span>
<span class="sunlight-function">puts</span>&nbsp;<span class="sunlight-string">"Hello&nbsp;world!"</span>

<span class="sunlight-docComment">=begin&nbsp;This&nbsp;is&nbsp;a&nbsp;"comment"&nbsp;that&nbsp;begins&nbsp;with
=begin&nbsp;and&nbsp;apparently&nbsp;doesn't&nbsp;end&nbsp;until
you&nbsp;get&nbsp;to&nbsp;a&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;=end
=end&nbsp;this&nbsp;is&nbsp;also&nbsp;ignored&nbsp;by&nbsp;the&nbsp;interpreter</span>
<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">factorial</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">1</span>
&nbsp;&nbsp;<span class="sunlight-keyword">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">n</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">factorial</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-subshellCommand">`ls&nbsp;-l`</span>

<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">%=</span>&nbsp;<span class="sunlight-keyword">not</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-specialOperator">defined?</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-operator">.</span><span class="sunlight-specialOperator">eql?</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-operator">.</span><span class="sunlight-specialOperator">equal?</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">10.0</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-string">"stringToChomp1"</span><span class="sunlight-operator">.</span><span class="sunlight-function">chomp!</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-string">"stringToChomp2"</span><span class="sunlight-operator">.</span><span class="sunlight-function">chomp</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-rawString">%q(raw&nbsp;string&nbsp;1)</span>
<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-rawString">%Q[raw&nbsp;string&nbsp;2]</span>
<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-rawString">%{raw&nbsp;string&nbsp;3}</span>
<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-rawString">%!raw&nbsp;string\\\!&nbsp;4!</span>

<span class="sunlight-comment">#regex&nbsp;stuff</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-regexLiteral">/regextest1/</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-string">'regextest'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-regexLiteral">/regextest2/i</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-string">'regextest'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">regextest3</span><span class="sunlight-operator">/</span><span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-comment">#not&nbsp;a&nbsp;regex</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-regexLiteral">%r[regextest4]xm</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-string">'regextest'</span>&nbsp;<span class="sunlight-comment">#dear&nbsp;god&nbsp;why&nbsp;does&nbsp;ruby&nbsp;have&nbsp;so&nbsp;many&nbsp;different&nbsp;syntaxes&nbsp;for&nbsp;the&nbsp;same&nbsp;thing?</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-regexLiteral">%r|regextest5|</span>&nbsp;<span class="sunlight-operator">=~</span>&nbsp;<span class="sunlight-string">'regextest'</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-regexLiteral">/\/\\/</span>&nbsp;<span class="sunlight-comment">#escape&nbsp;test</span>

<span class="sunlight-named-ident">StaticVariableAccess</span><span class="sunlight-operator">::</span><span class="sunlight-ident">Bar</span>

<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-globalVariable">$age</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-number">2</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"baby"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-number">3</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-number">6</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"little&nbsp;child"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-number">7</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-number">12</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"child"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">when</span>&nbsp;<span class="sunlight-number">12</span>&nbsp;<span class="sunlight-operator">..</span>&nbsp;<span class="sunlight-number">18</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;Note:&nbsp;12&nbsp;already&nbsp;matched&nbsp;by&nbsp;"child"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"youth"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"adult"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">end</span>

<span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">,</span><span class="sunlight-number">3</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">each</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-operator">|</span><span class="sunlight-ident">i</span><span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">*</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"\n"</span>&nbsp;<span class="sunlight-keyword">end</span>

<span class="sunlight-keyword">begin</span>
&nbsp;&nbsp;<span class="sunlight-ident">do_something</span>
<span class="sunlight-keyword">rescue</span>
&nbsp;&nbsp;<span class="sunlight-ident">recover</span>
<span class="sunlight-keyword">ensure</span>
&nbsp;&nbsp;<span class="sunlight-ident">must_to_do</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-keyword">BEGIN</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#oh&nbsp;god,&nbsp;the&nbsp;colons!</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">not_true</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">false</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">false</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-symbol">:symbol1</span>&nbsp;<span class="sunlight-operator">:</span><span class="sunlight-ident">not_a_symbol1</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">false</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">true</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-symbol">:symbol2</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-symbol">:symbol3</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">:</span><span class="sunlight-ident">not_a_symbol2</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">END</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#do&nbsp;stuff</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Person</span>
&nbsp;&nbsp;<span class="sunlight-ident">attr_reader</span>&nbsp;<span class="sunlight-symbol">:name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-symbol">:age</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">initialize</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">age</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-instanceVariable">@name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-instanceVariable">@age</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">age</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-operator">&lt;=&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">person</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-comment">#&nbsp;Comparison&nbsp;operator&nbsp;for&nbsp;sorting</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-instanceVariable">@age</span>&nbsp;<span class="sunlight-operator">&lt;=&gt;</span>&nbsp;<span class="sunlight-ident">person</span><span class="sunlight-operator">.</span><span class="sunlight-ident">age</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">to_s</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"#@name&nbsp;(#@age)"</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">ParseError</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-named-ident">ExtendedException</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">initialize</span>&nbsp;<span class="sunlight-ident">input</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">line</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">super</span>&nbsp;<span class="sunlight-string">"Could&nbsp;not&nbsp;parse&nbsp;'#{input}'&nbsp;at&nbsp;line&nbsp;#{line},&nbsp;position&nbsp;#{pos}"</span>
&nbsp;&nbsp;<span class="sunlight-keyword">end</span>
<span class="sunlight-keyword">end</span>
&nbsp;
<span class="sunlight-function">raise</span>&nbsp;<span class="sunlight-named-ident">IdentBeforeNew</span><span class="sunlight-operator">.</span><span class="sunlight-ident">new</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"Foo"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">9</span><span class="sunlight-punctuation">)</span>

<span class="sunlight-comment">#friggin'&nbsp;heredocs...</span>
<span class="sunlight-comment">#http://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#here_doc</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;HEREDOC</span>
<span class="sunlight-heredoc">Default&nbsp;heredoc&nbsp;body
HEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;"QUOTEDHEREDOC"</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-heredoc">Quoted&nbsp;heredoc&nbsp;body
QUOTEDHEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;`BACKQUOTEDHEREDOC`</span>
<span class="sunlight-heredoc">echo&nbsp;back&nbsp;quoted&nbsp;heredoc&nbsp;body
BACKQUOTEDHEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;'SINGLEQUOTEDHEREDOC'</span>
<span class="sunlight-heredoc">single&nbsp;quoted&nbsp;heredoc&nbsp;body
SINGLEQUOTEDHEREDOC
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;"stacked1"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;"stacked2"</span>
<span class="sunlight-heredoc">stacked&nbsp;heredoc&nbsp;#1
stacked1
</span><span class="sunlight-heredoc">stacked&nbsp;heredoc&nbsp;#2
stacked2
</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">need_define_foo</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">eval</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;-INDENTED</span>&nbsp;&nbsp;<span class="sunlight-comment">#&nbsp;delimiters&nbsp;can&nbsp;be&nbsp;indented</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-heredoc">def&nbsp;foo
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"foo\n"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end
&nbsp;&nbsp;&nbsp;&nbsp;INDENTED
</span><span class="sunlight-keyword">end</span>

<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;-'THERE'</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-heredoc">This&nbsp;is&nbsp;single&nbsp;quoted.
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;above&nbsp;used&nbsp;#{a&nbsp;+&nbsp;1}
&nbsp;&nbsp;&nbsp;&nbsp;THERE
</span>&nbsp;&nbsp;&nbsp;&nbsp;
<span class="sunlight-named-ident">File</span><span class="sunlight-operator">::</span><span class="sunlight-function">open</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"grocery-list"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"w"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-operator">|</span><span class="sunlight-ident">f</span><span class="sunlight-operator">|</span>
&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">&lt;&lt;</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;GROCERY_LIST</span>
<span class="sunlight-heredoc">Grocery&nbsp;list
------------
1.&nbsp;Salad&nbsp;mix.
2.&nbsp;Strawberries.*
3.&nbsp;Cereal.
4.&nbsp;Milk.*
&nbsp;
*&nbsp;Organic
GROCERY_LIST
</span><span class="sunlight-keyword">end</span>

<span class="sunlight-comment">#&lt;&lt;&nbsp;operator&nbsp;should&nbsp;not&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;heredoc</span>
<span class="sunlight-keyword">self</span>&nbsp;<span class="sunlight-operator">&lt;&lt;</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span>

<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-named-ident">foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">s</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">puts</span>&nbsp;<span class="sunlight-ident">s</span>
<span class="sunlight-keyword">end</span>

<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;afterIdent</span>
<span class="sunlight-heredoc">lol
afterIdent
</span>
<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-heredocDeclaration">&lt;&lt;1_a2</span>
<span class="sunlight-heredoc">lol
1_a2
</span>
<span class="sunlight-function">print</span>&nbsp;<span class="sunlight-string">"we're&nbsp;still&nbsp;good"</span>
</span></pre></div></div>
<h2 id="scala.scala">scala.scala</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-33-line-1" href="#sunlight-33-line-1">1</a>
<a name="sunlight-33-line-2" href="#sunlight-33-line-2">2</a>
<a name="sunlight-33-line-3" href="#sunlight-33-line-3">3</a>
<a name="sunlight-33-line-4" href="#sunlight-33-line-4">4</a>
<a name="sunlight-33-line-5" href="#sunlight-33-line-5">5</a>
<a name="sunlight-33-line-6" href="#sunlight-33-line-6">6</a>
<a name="sunlight-33-line-7" href="#sunlight-33-line-7">7</a>
<a name="sunlight-33-line-8" href="#sunlight-33-line-8">8</a>
<a name="sunlight-33-line-9" href="#sunlight-33-line-9">9</a>
<a name="sunlight-33-line-10" href="#sunlight-33-line-10">10</a>
<a name="sunlight-33-line-11" href="#sunlight-33-line-11">11</a>
<a name="sunlight-33-line-12" href="#sunlight-33-line-12">12</a>
<a name="sunlight-33-line-13" href="#sunlight-33-line-13">13</a>
<a name="sunlight-33-line-14" href="#sunlight-33-line-14">14</a>
<a name="sunlight-33-line-15" href="#sunlight-33-line-15">15</a>
<a name="sunlight-33-line-16" href="#sunlight-33-line-16">16</a>
<a name="sunlight-33-line-17" href="#sunlight-33-line-17">17</a>
<a name="sunlight-33-line-18" href="#sunlight-33-line-18">18</a>
<a name="sunlight-33-line-19" href="#sunlight-33-line-19">19</a>
<a name="sunlight-33-line-20" href="#sunlight-33-line-20">20</a>
<a name="sunlight-33-line-21" href="#sunlight-33-line-21">21</a>
<a name="sunlight-33-line-22" href="#sunlight-33-line-22">22</a>
<a name="sunlight-33-line-23" href="#sunlight-33-line-23">23</a>
<a name="sunlight-33-line-24" href="#sunlight-33-line-24">24</a>
<a name="sunlight-33-line-25" href="#sunlight-33-line-25">25</a>
<a name="sunlight-33-line-26" href="#sunlight-33-line-26">26</a>
<a name="sunlight-33-line-27" href="#sunlight-33-line-27">27</a>
<a name="sunlight-33-line-28" href="#sunlight-33-line-28">28</a>
<a name="sunlight-33-line-29" href="#sunlight-33-line-29">29</a>
<a name="sunlight-33-line-30" href="#sunlight-33-line-30">30</a>
<a name="sunlight-33-line-31" href="#sunlight-33-line-31">31</a>
<a name="sunlight-33-line-32" href="#sunlight-33-line-32">32</a>
<a name="sunlight-33-line-33" href="#sunlight-33-line-33">33</a>
<a name="sunlight-33-line-34" href="#sunlight-33-line-34">34</a>
<a name="sunlight-33-line-35" href="#sunlight-33-line-35">35</a>
<a name="sunlight-33-line-36" href="#sunlight-33-line-36">36</a>
<a name="sunlight-33-line-37" href="#sunlight-33-line-37">37</a>
<a name="sunlight-33-line-38" href="#sunlight-33-line-38">38</a>
<a name="sunlight-33-line-39" href="#sunlight-33-line-39">39</a>
<a name="sunlight-33-line-40" href="#sunlight-33-line-40">40</a>
<a name="sunlight-33-line-41" href="#sunlight-33-line-41">41</a>
<a name="sunlight-33-line-42" href="#sunlight-33-line-42">42</a>
<a name="sunlight-33-line-43" href="#sunlight-33-line-43">43</a>
<a name="sunlight-33-line-44" href="#sunlight-33-line-44">44</a>
<a name="sunlight-33-line-45" href="#sunlight-33-line-45">45</a>
<a name="sunlight-33-line-46" href="#sunlight-33-line-46">46</a>
<a name="sunlight-33-line-47" href="#sunlight-33-line-47">47</a>
<a name="sunlight-33-line-48" href="#sunlight-33-line-48">48</a>
<a name="sunlight-33-line-49" href="#sunlight-33-line-49">49</a>
<a name="sunlight-33-line-50" href="#sunlight-33-line-50">50</a>
<a name="sunlight-33-line-51" href="#sunlight-33-line-51">51</a>
<a name="sunlight-33-line-52" href="#sunlight-33-line-52">52</a>
<a name="sunlight-33-line-53" href="#sunlight-33-line-53">53</a>
<a name="sunlight-33-line-54" href="#sunlight-33-line-54">54</a>
<a name="sunlight-33-line-55" href="#sunlight-33-line-55">55</a>
<a name="sunlight-33-line-56" href="#sunlight-33-line-56">56</a>
<a name="sunlight-33-line-57" href="#sunlight-33-line-57">57</a>
<a name="sunlight-33-line-58" href="#sunlight-33-line-58">58</a>
<a name="sunlight-33-line-59" href="#sunlight-33-line-59">59</a>
<a name="sunlight-33-line-60" href="#sunlight-33-line-60">60</a>
<a name="sunlight-33-line-61" href="#sunlight-33-line-61">61</a>
<a name="sunlight-33-line-62" href="#sunlight-33-line-62">62</a>
<a name="sunlight-33-line-63" href="#sunlight-33-line-63">63</a>
<a name="sunlight-33-line-64" href="#sunlight-33-line-64">64</a>
<a name="sunlight-33-line-65" href="#sunlight-33-line-65">65</a>
<a name="sunlight-33-line-66" href="#sunlight-33-line-66">66</a>
<a name="sunlight-33-line-67" href="#sunlight-33-line-67">67</a>
<a name="sunlight-33-line-68" href="#sunlight-33-line-68">68</a>
<a name="sunlight-33-line-69" href="#sunlight-33-line-69">69</a>
<a name="sunlight-33-line-70" href="#sunlight-33-line-70">70</a>
<a name="sunlight-33-line-71" href="#sunlight-33-line-71">71</a>
<a name="sunlight-33-line-72" href="#sunlight-33-line-72">72</a>
<a name="sunlight-33-line-73" href="#sunlight-33-line-73">73</a>
<a name="sunlight-33-line-74" href="#sunlight-33-line-74">74</a>
<a name="sunlight-33-line-75" href="#sunlight-33-line-75">75</a>
<a name="sunlight-33-line-76" href="#sunlight-33-line-76">76</a>
<a name="sunlight-33-line-77" href="#sunlight-33-line-77">77</a>
<a name="sunlight-33-line-78" href="#sunlight-33-line-78">78</a>
<a name="sunlight-33-line-79" href="#sunlight-33-line-79">79</a>
<a name="sunlight-33-line-80" href="#sunlight-33-line-80">80</a>
<a name="sunlight-33-line-81" href="#sunlight-33-line-81">81</a>
<a name="sunlight-33-line-82" href="#sunlight-33-line-82">82</a>
<a name="sunlight-33-line-83" href="#sunlight-33-line-83">83</a>
<a name="sunlight-33-line-84" href="#sunlight-33-line-84">84</a>
<a name="sunlight-33-line-85" href="#sunlight-33-line-85">85</a>
<a name="sunlight-33-line-86" href="#sunlight-33-line-86">86</a>
<a name="sunlight-33-line-87" href="#sunlight-33-line-87">87</a>
<a name="sunlight-33-line-88" href="#sunlight-33-line-88">88</a>
<a name="sunlight-33-line-89" href="#sunlight-33-line-89">89</a>
<a name="sunlight-33-line-90" href="#sunlight-33-line-90">90</a>
<a name="sunlight-33-line-91" href="#sunlight-33-line-91">91</a>
<a name="sunlight-33-line-92" href="#sunlight-33-line-92">92</a>
<a name="sunlight-33-line-93" href="#sunlight-33-line-93">93</a>
<a name="sunlight-33-line-94" href="#sunlight-33-line-94">94</a>
<a name="sunlight-33-line-95" href="#sunlight-33-line-95">95</a>
<a name="sunlight-33-line-96" href="#sunlight-33-line-96">96</a>
<a name="sunlight-33-line-97" href="#sunlight-33-line-97">97</a>
<a name="sunlight-33-line-98" href="#sunlight-33-line-98">98</a>
<a name="sunlight-33-line-99" href="#sunlight-33-line-99">99</a>
<a name="sunlight-33-line-100" href="#sunlight-33-line-100">100</a>
<a name="sunlight-33-line-101" href="#sunlight-33-line-101">101</a>
<a name="sunlight-33-line-102" href="#sunlight-33-line-102">102</a>
<a name="sunlight-33-line-103" href="#sunlight-33-line-103">103</a>
<a name="sunlight-33-line-104" href="#sunlight-33-line-104">104</a>
<a name="sunlight-33-line-105" href="#sunlight-33-line-105">105</a>
<a name="sunlight-33-line-106" href="#sunlight-33-line-106">106</a>
<a name="sunlight-33-line-107" href="#sunlight-33-line-107">107</a>
<a name="sunlight-33-line-108" href="#sunlight-33-line-108">108</a>
<a name="sunlight-33-line-109" href="#sunlight-33-line-109">109</a>
<a name="sunlight-33-line-110" href="#sunlight-33-line-110">110</a>
<a name="sunlight-33-line-111" href="#sunlight-33-line-111">111</a>
<a name="sunlight-33-line-112" href="#sunlight-33-line-112">112</a>
<a name="sunlight-33-line-113" href="#sunlight-33-line-113">113</a>
<a name="sunlight-33-line-114" href="#sunlight-33-line-114">114</a>
<a name="sunlight-33-line-115" href="#sunlight-33-line-115">115</a>
<a name="sunlight-33-line-116" href="#sunlight-33-line-116">116</a>
<a name="sunlight-33-line-117" href="#sunlight-33-line-117">117</a>
<a name="sunlight-33-line-118" href="#sunlight-33-line-118">118</a>
<a name="sunlight-33-line-119" href="#sunlight-33-line-119">119</a>
<a name="sunlight-33-line-120" href="#sunlight-33-line-120">120</a>
<a name="sunlight-33-line-121" href="#sunlight-33-line-121">121</a>
<a name="sunlight-33-line-122" href="#sunlight-33-line-122">122</a>
<a name="sunlight-33-line-123" href="#sunlight-33-line-123">123</a>
<a name="sunlight-33-line-124" href="#sunlight-33-line-124">124</a>
<a name="sunlight-33-line-125" href="#sunlight-33-line-125">125</a>
<a name="sunlight-33-line-126" href="#sunlight-33-line-126">126</a>
<a name="sunlight-33-line-127" href="#sunlight-33-line-127">127</a>
<a name="sunlight-33-line-128" href="#sunlight-33-line-128">128</a>
<a name="sunlight-33-line-129" href="#sunlight-33-line-129">129</a>
<a name="sunlight-33-line-130" href="#sunlight-33-line-130">130</a>
<a name="sunlight-33-line-131" href="#sunlight-33-line-131">131</a>
<a name="sunlight-33-line-132" href="#sunlight-33-line-132">132</a>
<a name="sunlight-33-line-133" href="#sunlight-33-line-133">133</a>
<a name="sunlight-33-line-134" href="#sunlight-33-line-134">134</a>
<a name="sunlight-33-line-135" href="#sunlight-33-line-135">135</a>
<a name="sunlight-33-line-136" href="#sunlight-33-line-136">136</a>
<a name="sunlight-33-line-137" href="#sunlight-33-line-137">137</a>
<a name="sunlight-33-line-138" href="#sunlight-33-line-138">138</a>
<a name="sunlight-33-line-139" href="#sunlight-33-line-139">139</a>
<a name="sunlight-33-line-140" href="#sunlight-33-line-140">140</a>
<a name="sunlight-33-line-141" href="#sunlight-33-line-141">141</a>
<a name="sunlight-33-line-142" href="#sunlight-33-line-142">142</a>
<a name="sunlight-33-line-143" href="#sunlight-33-line-143">143</a>
<a name="sunlight-33-line-144" href="#sunlight-33-line-144">144</a>
<a name="sunlight-33-line-145" href="#sunlight-33-line-145">145</a>
<a name="sunlight-33-line-146" href="#sunlight-33-line-146">146</a>
<a name="sunlight-33-line-147" href="#sunlight-33-line-147">147</a>
<a name="sunlight-33-line-148" href="#sunlight-33-line-148">148</a>
<a name="sunlight-33-line-149" href="#sunlight-33-line-149">149</a>
<a name="sunlight-33-line-150" href="#sunlight-33-line-150">150</a>
<a name="sunlight-33-line-151" href="#sunlight-33-line-151">151</a>
<a name="sunlight-33-line-152" href="#sunlight-33-line-152">152</a>
<a name="sunlight-33-line-153" href="#sunlight-33-line-153">153</a>
<a name="sunlight-33-line-154" href="#sunlight-33-line-154">154</a>
<a name="sunlight-33-line-155" href="#sunlight-33-line-155">155</a>
<a name="sunlight-33-line-156" href="#sunlight-33-line-156">156</a>
<a name="sunlight-33-line-157" href="#sunlight-33-line-157">157</a>
<a name="sunlight-33-line-158" href="#sunlight-33-line-158">158</a>
<a name="sunlight-33-line-159" href="#sunlight-33-line-159">159</a>
<a name="sunlight-33-line-160" href="#sunlight-33-line-160">160</a>
<a name="sunlight-33-line-161" href="#sunlight-33-line-161">161</a>
<a name="sunlight-33-line-162" href="#sunlight-33-line-162">162</a>
<a name="sunlight-33-line-163" href="#sunlight-33-line-163">163</a>
<a name="sunlight-33-line-164" href="#sunlight-33-line-164">164</a>
<a name="sunlight-33-line-165" href="#sunlight-33-line-165">165</a>
<a name="sunlight-33-line-166" href="#sunlight-33-line-166">166</a>
<a name="sunlight-33-line-167" href="#sunlight-33-line-167">167</a>
<a name="sunlight-33-line-168" href="#sunlight-33-line-168">168</a>
<a name="sunlight-33-line-169" href="#sunlight-33-line-169">169</a>
<a name="sunlight-33-line-170" href="#sunlight-33-line-170">170</a>
<a name="sunlight-33-line-171" href="#sunlight-33-line-171">171</a>
<a name="sunlight-33-line-172" href="#sunlight-33-line-172">172</a>
<a name="sunlight-33-line-173" href="#sunlight-33-line-173">173</a>
<a name="sunlight-33-line-174" href="#sunlight-33-line-174">174</a>
<a name="sunlight-33-line-175" href="#sunlight-33-line-175">175</a>
<a name="sunlight-33-line-176" href="#sunlight-33-line-176">176</a>
<a name="sunlight-33-line-177" href="#sunlight-33-line-177">177</a>
<a name="sunlight-33-line-178" href="#sunlight-33-line-178">178</a>
<a name="sunlight-33-line-179" href="#sunlight-33-line-179">179</a>
<a name="sunlight-33-line-180" href="#sunlight-33-line-180">180</a>
<a name="sunlight-33-line-181" href="#sunlight-33-line-181">181</a>
<a name="sunlight-33-line-182" href="#sunlight-33-line-182">182</a>
<a name="sunlight-33-line-183" href="#sunlight-33-line-183">183</a>
<a name="sunlight-33-line-184" href="#sunlight-33-line-184">184</a>
<a name="sunlight-33-line-185" href="#sunlight-33-line-185">185</a>
<a name="sunlight-33-line-186" href="#sunlight-33-line-186">186</a>
<a name="sunlight-33-line-187" href="#sunlight-33-line-187">187</a>
<a name="sunlight-33-line-188" href="#sunlight-33-line-188">188</a>
<a name="sunlight-33-line-189" href="#sunlight-33-line-189">189</a>
<a name="sunlight-33-line-190" href="#sunlight-33-line-190">190</a>
<a name="sunlight-33-line-191" href="#sunlight-33-line-191">191</a>
<a name="sunlight-33-line-192" href="#sunlight-33-line-192">192</a>
<a name="sunlight-33-line-193" href="#sunlight-33-line-193">193</a>
<a name="sunlight-33-line-194" href="#sunlight-33-line-194">194</a>
<a name="sunlight-33-line-195" href="#sunlight-33-line-195">195</a>
<a name="sunlight-33-line-196" href="#sunlight-33-line-196">196</a>
<a name="sunlight-33-line-197" href="#sunlight-33-line-197">197</a>
<a name="sunlight-33-line-198" href="#sunlight-33-line-198">198</a>
<a name="sunlight-33-line-199" href="#sunlight-33-line-199">199</a>
<a name="sunlight-33-line-200" href="#sunlight-33-line-200">200</a>
<a name="sunlight-33-line-201" href="#sunlight-33-line-201">201</a>
<a name="sunlight-33-line-202" href="#sunlight-33-line-202">202</a>
<a name="sunlight-33-line-203" href="#sunlight-33-line-203">203</a>
<a name="sunlight-33-line-204" href="#sunlight-33-line-204">204</a>
<a name="sunlight-33-line-205" href="#sunlight-33-line-205">205</a>
<a name="sunlight-33-line-206" href="#sunlight-33-line-206">206</a>
<a name="sunlight-33-line-207" href="#sunlight-33-line-207">207</a>
<a name="sunlight-33-line-208" href="#sunlight-33-line-208">208</a>
<a name="sunlight-33-line-209" href="#sunlight-33-line-209">209</a>
<a name="sunlight-33-line-210" href="#sunlight-33-line-210">210</a>
<a name="sunlight-33-line-211" href="#sunlight-33-line-211">211</a>
<a name="sunlight-33-line-212" href="#sunlight-33-line-212">212</a>
<a name="sunlight-33-line-213" href="#sunlight-33-line-213">213</a>
<a name="sunlight-33-line-214" href="#sunlight-33-line-214">214</a>
<a name="sunlight-33-line-215" href="#sunlight-33-line-215">215</a>
<a name="sunlight-33-line-216" href="#sunlight-33-line-216">216</a>
<a name="sunlight-33-line-217" href="#sunlight-33-line-217">217</a>
<a name="sunlight-33-line-218" href="#sunlight-33-line-218">218</a>
<a name="sunlight-33-line-219" href="#sunlight-33-line-219">219</a>
<a name="sunlight-33-line-220" href="#sunlight-33-line-220">220</a>
<a name="sunlight-33-line-221" href="#sunlight-33-line-221">221</a>
<a name="sunlight-33-line-222" href="#sunlight-33-line-222">222</a>
<a name="sunlight-33-line-223" href="#sunlight-33-line-223">223</a>
<a name="sunlight-33-line-224" href="#sunlight-33-line-224">224</a>
<a name="sunlight-33-line-225" href="#sunlight-33-line-225">225</a>
<a name="sunlight-33-line-226" href="#sunlight-33-line-226">226</a>
<a name="sunlight-33-line-227" href="#sunlight-33-line-227">227</a>
<a name="sunlight-33-line-228" href="#sunlight-33-line-228">228</a>
<a name="sunlight-33-line-229" href="#sunlight-33-line-229">229</a>
<a name="sunlight-33-line-230" href="#sunlight-33-line-230">230</a>
<a name="sunlight-33-line-231" href="#sunlight-33-line-231">231</a>
<a name="sunlight-33-line-232" href="#sunlight-33-line-232">232</a>
<a name="sunlight-33-line-233" href="#sunlight-33-line-233">233</a>
<a name="sunlight-33-line-234" href="#sunlight-33-line-234">234</a>
</div><pre class="sunlight-highlight-scala sunlight-highlighted"><span class="sunlight-scala"><span class="sunlight-keyword">object</span>&nbsp;<span class="sunlight-named-ident">addressbook</span>&nbsp;<span class="sunlight-punctuation">{</span>

&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Person</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">name</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">age</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**&nbsp;An&nbsp;AddressBook&nbsp;takes&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;arguments
&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;which&nbsp;are&nbsp;accessed&nbsp;as&nbsp;a&nbsp;Sequence
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">AddressBook</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Person</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">people</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Person</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toList</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**&nbsp;Serialize&nbsp;to&nbsp;XHTML.&nbsp;Scala&nbsp;supports&nbsp;XML&nbsp;literals
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;which&nbsp;may&nbsp;contain&nbsp;Scala&nbsp;expressions&nbsp;between&nbsp;braces,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;which&nbsp;are&nbsp;replaced&nbsp;by&nbsp;their&nbsp;evaluation
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">toXHTML</span>&nbsp;<span class="sunlight-operator">=</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">table</span>&nbsp;<span class="sunlight-attribute">cellpadding</span><span class="sunlight-operator">=</span><span class="sunlight-string">"2"</span>&nbsp;<span class="sunlight-attribute">cellspacing</span><span class="sunlight-operator">=</span><span class="sunlight-string">"0"</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">tr</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">th</span><span class="sunlight-operator">&gt;</span>Name<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">th</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">th</span><span class="sunlight-operator">&gt;</span>Age<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">th</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">tr</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">people</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">yield</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">tr</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">td</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">td</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">td</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-operator">.</span><span class="sunlight-ident">age</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">td</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">tr</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">table</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala"><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**&nbsp;We&nbsp;introduce&nbsp;CSS&nbsp;using&nbsp;raw&nbsp;strings&nbsp;(between&nbsp;triple
&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;quotes).&nbsp;Raw&nbsp;strings&nbsp;may&nbsp;contain&nbsp;newlines&nbsp;and&nbsp;special
&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;characters&nbsp;(like&nbsp;\)&nbsp;are&nbsp;not&nbsp;interpreted.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">header</span>&nbsp;<span class="sunlight-operator">=</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">head</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">title</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-string">"My&nbsp;Address&nbsp;Book"</span>&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">title</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">style</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/css"</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"""table&nbsp;{&nbsp;border-right:&nbsp;1px&nbsp;solid&nbsp;#cccccc;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th&nbsp;{&nbsp;background-color:&nbsp;#cccccc;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;td&nbsp;{&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;#acacac;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;td&nbsp;{&nbsp;border-bottom:&nbsp;1px&nbsp;solid&nbsp;#acacac;"""</span><span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">head</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala"><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">people</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">AddressBook</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Person</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"Tom"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">20</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Person</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"Bob"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">22</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Person</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"James"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">19</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">page</span>&nbsp;<span class="sunlight-operator">=</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">html</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">header</span>&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">body</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">people</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toXHTML</span>&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">body</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">html</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-scala"><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">main</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">args</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Array</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">String</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">println</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">page</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">object</span>&nbsp;<span class="sunlight-named-ident">callccInterpreter</span>&nbsp;<span class="sunlight-punctuation">{</span>

&nbsp;&nbsp;<span class="sunlight-keyword">type</span>&nbsp;<span class="sunlight-named-ident">Answer</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**&nbsp;
&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;continuation&nbsp;monad.&nbsp;
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">in</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">A</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">Answer</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">Answer</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">bind</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">A</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">in</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">in</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">map</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">A</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">B</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">bind</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">flatMap</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">A</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">B</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">bind</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">A</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">A</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">x</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">showM</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span>&nbsp;<span class="sunlight-ident">in</span>&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">callCC</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">h</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">A</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">h</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">A</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">in</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;<span class="sunlight-keyword">type</span>&nbsp;<span class="sunlight-named-ident">Name</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">String</span>

&nbsp;&nbsp;<span class="sunlight-keyword">trait</span>&nbsp;<span class="sunlight-named-ident">Term</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Var</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Name</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Term</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">int</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Term</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Add</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">l</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">r</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Term</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Lam</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">body</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Term</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">App</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">fun</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">arg</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Term</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Ccc</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Term</span>

&nbsp;&nbsp;<span class="sunlight-keyword">trait</span>&nbsp;<span class="sunlight-named-ident">Value</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">object</span>&nbsp;<span class="sunlight-named-ident">Wrong</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Value</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"wrong"</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Num</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Value</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Fun</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Value</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Value</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"&lt;function&gt;"</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">type</span>&nbsp;<span class="sunlight-named-ident">Environment</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Pair</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">lookup</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Name</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Environment</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Wrong</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Pair</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">y</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">e1</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">y</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-ident">lookup</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e1</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Pair</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Pair</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Num</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Num</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Num</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-operator">_</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Wrong</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">apply</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Fun</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-operator">_</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Wrong</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Environment</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">M</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Value</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Var</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">lookup</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Num</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">n</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Add</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">l</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">r</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">l</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">r</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">yield</span>&nbsp;<span class="sunlight-ident">c</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Lam</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">t</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">unitM</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Fun</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Pair</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">a</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">App</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">t</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">b</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">apply</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">yield</span>&nbsp;<span class="sunlight-ident">c</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-named-ident">Ccc</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">t</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">callCC</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Pair</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Fun</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">k</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Term</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">showM</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">interp</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">term0</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">App</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Lam</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"x"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Add</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Var</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"x"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Var</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"x"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Add</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">11</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">term1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">App</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">term2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Add</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Ccc</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"k"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Add</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">App</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Var</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"k"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Con</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">main</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">args</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Array</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">String</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">println</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">term0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">println</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">term1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">println</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">term2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">//&nbsp;Contributed&nbsp;by&nbsp;Daniel&nbsp;Gronau</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">scala</span><span class="sunlight-operator">.</span><span class="sunlight-ident">annotation</span><span class="sunlight-operator">.</span><span class="sunlight-operator">_</span>

<span class="sunlight-keyword">trait</span>&nbsp;<span class="sunlight-named-ident">Func</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">zero</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">inc</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">dec</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">in</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">out</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Unit</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">object</span>&nbsp;<span class="sunlight-named-ident">ByteFunc</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Func</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Byte</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">zero</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Byte</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span>
&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">inc</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Byte</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-number">0xFF</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toByte</span>
&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">dec</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Byte</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-number">0xFF</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toByte</span>
&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">in</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Byte</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readByte</span>
&nbsp;&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">out</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Byte</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-ident">print</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">t</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toChar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Tape</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">left</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">cell</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">right</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">implicit</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Func</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">headOf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">list</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">list</span><span class="sunlight-operator">.</span><span class="sunlight-ident">isEmpty</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">zero</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-ident">list</span><span class="sunlight-operator">.</span><span class="sunlight-ident">head</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">tailOf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">list</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">list</span><span class="sunlight-operator">.</span><span class="sunlight-ident">isEmpty</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-named-ident">Nil</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-ident">list</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tail</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">isZero</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">cell</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">zero</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">execute</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ch</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Char</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">ch</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-annotation">@switch</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'+'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">copy</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">inc</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'-'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">copy</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dec</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'&lt;'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">Tape</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">tailOf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">left</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">headOf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">left</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">cell</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">right</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'&gt;'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-named-ident">Tape</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">left</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">headOf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">right</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">tailOf</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">right</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'.'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">out</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-keyword">this</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">','</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">copy</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">cell</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">in</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'['</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-char">']'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-keyword">this</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-operator">_</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">error</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"Unexpected&nbsp;token:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">ch</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">object</span>&nbsp;<span class="sunlight-named-ident">Tape</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">empty</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">func</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Func</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-named-ident">Tape</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Nil</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-operator">.</span><span class="sunlight-ident">zero</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Nil</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">func</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Brainfuck</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">func</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Func</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>

&nbsp;&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">execute</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">p</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">String</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">prog</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">p</span><span class="sunlight-operator">.</span><span class="sunlight-ident">replaceAll</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"[^\\+\\-\\[\\]\\.\\,\\&gt;\\&lt;]"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-annotation">@tailrec</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">braceMatcher</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">stack</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">o2c</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Map</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Map</span><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">,</span><span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">prog</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">o2c</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">prog</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-annotation">@switch</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'['</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">braceMatcher</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">::</span>&nbsp;<span class="sunlight-ident">stack</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">o2c</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">']'</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">braceMatcher</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">stack</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tail</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">o2c</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">stack</span><span class="sunlight-operator">.</span><span class="sunlight-ident">head</span>&nbsp;<span class="sunlight-operator">-&gt;</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-operator">_</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">braceMatcher</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">stack</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">o2c</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">open2close</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">braceMatcher</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Nil</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Map</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">close2open</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">open2close</span><span class="sunlight-operator">.</span><span class="sunlight-ident">map</span><span class="sunlight-punctuation">(</span><span class="sunlight-operator">_</span><span class="sunlight-operator">.</span><span class="sunlight-ident">swap</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-annotation">@tailrec</span>&nbsp;<span class="sunlight-keyword">def</span>&nbsp;<span class="sunlight-ident">ex</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">tape</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Tape</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">T</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">Unit</span>&nbsp;<span class="sunlight-operator">=</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">prog</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">ex</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">prog</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-annotation">@switch</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">match</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">'['</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-ident">tape</span><span class="sunlight-operator">.</span><span class="sunlight-ident">isZero</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">open2close</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-char">']'</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-operator">!</span>&nbsp;<span class="sunlight-ident">tape</span><span class="sunlight-operator">.</span><span class="sunlight-ident">isZero</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">close2open</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-operator">_</span>&nbsp;<span class="sunlight-operator">=</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">tape</span><span class="sunlight-operator">.</span><span class="sunlight-ident">execute</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">prog</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">println</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"---running---"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ex</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Tape</span><span class="sunlight-operator">.</span><span class="sunlight-ident">empty</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">func</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">println</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"\n---done---"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>&nbsp;

<span class="sunlight-comment">/*
&nbsp;&nbsp;Run&nbsp;with:
&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;bf&nbsp;=&nbsp;new&nbsp;Brainfuck(ByteFunc)
&nbsp;&nbsp;&nbsp;&nbsp;bf.execute("""&gt;+++++++++[&lt;++++++++&gt;-]&lt;.&gt;+++++++[&lt;++
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&gt;-]&lt;+.+++++++..+++.[-]&gt;++++++++[&lt;++++&gt;-]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;.#&gt;+++++++++++[&lt;+++++&gt;-]&lt;.&gt;++++++++[&lt;++
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&gt;-]&lt;.+++.------.--------.[-]&gt;++++++++[&lt;++++&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-]&lt;+.[-]++++++++++.""")
*/</span>

<span class="sunlight-comment">//symbol&nbsp;literals&nbsp;and&nbsp;chars</span>
<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">aSymbol</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-symbolLiteral">'aSymbol</span>
<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">notASymbol</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-char">'&nbsp;'</span>
<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">aChar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-char">'a'</span>
<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">aChar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-char">'\u0041'</span>
<span class="sunlight-keyword">val</span>&nbsp;<span class="sunlight-ident">rawString</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"""123"""</span>
</span></pre></div></div>
<h2 id="tsql.tsql">tsql.tsql</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-tsql sunlight-highlighted"><span class="sunlight-tsql"><span class="sunlight-comment">--comment&nbsp;1</span>
<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-keyword">from</span>&nbsp;<span class="sunlight-named-ident">db</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">my_table</span>&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">myTable</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">10</span>

<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-constant">@@IDENTITY</span>

<span class="sunlight-comment">/*&nbsp;multi
line&nbsp;comment&nbsp;*/</span>

<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-string">"escaped\\\""</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">select</span>&nbsp;<span class="sunlight-string">'escaped\\\''</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">SELECT</span>&nbsp;<span class="sunlight-keyword">TOP</span>&nbsp;<span class="sunlight-number">1000</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-quotedIdent">[foo]</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">bar</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-quotedIdent">[foo.name]</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-operator">.</span><span class="sunlight-ident">baz</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-constant">@@ROWCOUNT</span>
<span class="sunlight-keyword">FROM</span>&nbsp;<span class="sunlight-named-ident">foo</span>&nbsp;<span class="sunlight-ident">f</span>
<span class="sunlight-keyword">INNER</span>&nbsp;<span class="sunlight-keyword">JOIN</span>&nbsp;<span class="sunlight-named-ident">bar</span>&nbsp;<span class="sunlight-ident">b</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ON</span>&nbsp;<span class="sunlight-ident">b</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">bar_id</span>
<span class="sunlight-keyword">LEFT</span>&nbsp;<span class="sunlight-keyword">OUTER</span>&nbsp;<span class="sunlight-keyword">JOIN</span>&nbsp;<span class="sunlight-named-ident">baz</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ON</span>&nbsp;<span class="sunlight-ident">baz</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">AND</span>&nbsp;<span class="sunlight-ident">baz</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-keyword">IS</span>&nbsp;<span class="sunlight-keyword">NOT</span>&nbsp;<span class="sunlight-keyword">NULL</span>
<span class="sunlight-keyword">GROUP</span>&nbsp;<span class="sunlight-keyword">BY</span>&nbsp;<span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>
<span class="sunlight-keyword">HAVING</span>&nbsp;<span class="sunlight-function">COUNT</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">10</span>
<span class="sunlight-keyword">WHERE</span>&nbsp;<span class="sunlight-function">LEN</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">5</span>
<span class="sunlight-keyword">AND</span>&nbsp;<span class="sunlight-function">LEFT</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">f</span><span class="sunlight-operator">.</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'f'</span>
</span></pre></div></div>
<h2 id="vb1.vb">vb1.vb</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-vb sunlight-highlighted"><span class="sunlight-vb"><span class="sunlight-keyword">Imports</span>&nbsp;<span class="sunlight-ident">System</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Runtime</span><span class="sunlight-operator">.</span><span class="sunlight-ident">InteropServices</span>

<span class="sunlight-comment">'comment</span>

<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;summary&gt;</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;How&nbsp;about&nbsp;an&nbsp;XML&nbsp;doc&nbsp;comment?</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;This&nbsp;class&nbsp;does&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;c&nbsp;cref="Foo"&gt;</span><span class="sunlight-xmlDocCommentContent">something</span><span class="sunlight-xmlDocCommentMeta">&lt;/c&gt;</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;/summary&gt;</span>
<span class="sunlight-xmlDocCommentMeta">'''</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;param&nbsp;name="foos"&gt;</span><span class="sunlight-xmlDocCommentContent">Collection&nbsp;of&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;see&nbsp;cref="Foo"&nbsp;/&gt;</span><span class="sunlight-xmlDocCommentMeta">&lt;/param&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Attribute1</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"DEBUG"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Attribute2</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"TEST1"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-ident">System</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Runtime</span><span class="sunlight-operator">.</span><span class="sunlight-ident">InteropServices</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">DllImport</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"user32.dll"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Class</span>&nbsp;<span class="sunlight-named-ident">thisClass</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">Of</span>&nbsp;<span class="sunlight-named-ident">t</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-named-ident">GenericConstraint1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">GenericConstraint2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">Class</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">New</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Insert&nbsp;code&nbsp;that&nbsp;defines&nbsp;class&nbsp;members.</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Class</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Class</span>&nbsp;<span class="sunlight-named-ident">Dictionary</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">Of</span>&nbsp;<span class="sunlight-named-ident">entryType</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">keyType</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">IComparable</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-escapedKeyword">[In]</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ICanHazAttribute</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&gt;</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">entryType</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">keyType</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">dk</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">keyType</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'array&nbsp;initialization&nbsp;and&nbsp;char&nbsp;literals</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">testChars</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Char</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">New</span>&nbsp;<span class="sunlight-keyword">Char</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-string">"%"</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"&amp;"</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"@"</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'casting&nbsp;stuff</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">CType</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">CType</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">OohNestedCast</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">CastToThisType</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">DirectCast</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">NoCastToThisType</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">CType</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar3</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">CastToArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">objAsConvertible</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">IConvertible</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">TryCast</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar4</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">TryToCastToThisType</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">GetType</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">GetTypeTest</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ToString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">If</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CompareTo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">dk</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-keyword">Then</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">If</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">find</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">keyType</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">entryType</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Function</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Class</span>


<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Class</span>&nbsp;<span class="sunlight-named-ident">ThisClass</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Inherits</span>&nbsp;<span class="sunlight-named-ident">BaseClass</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Implements</span>&nbsp;<span class="sunlight-named-ident">IInterface1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface3</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">New</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">SomeValue</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Call&nbsp;MyBase.New&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;derived&nbsp;class.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">MyBase</span><span class="sunlight-operator">.</span><span class="sunlight-ident">New</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"ThisClass&nbsp;is&nbsp;initializing&nbsp;with&nbsp;Sub&nbsp;New."</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Place&nbsp;initialization&nbsp;statements&nbsp;here.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">SomeValue</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Private</span>&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Property</span>&nbsp;<span class="sunlight-ident">ThisProperty</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">CheckIfDisposed</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ThisProperty</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Set</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">Value</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">CheckIfDisposed</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Value</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Set</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Property</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Private</span>&nbsp;<span class="sunlight-ident">disposed</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Boolean</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">False</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">CheckIfDisposed</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">If</span>&nbsp;<span class="sunlight-keyword">Me</span><span class="sunlight-operator">.</span><span class="sunlight-ident">disposed</span>&nbsp;<span class="sunlight-keyword">AndAlso</span>&nbsp;<span class="sunlight-keyword">True</span>&nbsp;<span class="sunlight-keyword">Then</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Throw</span>&nbsp;<span class="sunlight-keyword">New</span>&nbsp;<span class="sunlight-named-ident">ObjectDisposedException</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">Me</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GetType</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ToString</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">_</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"This&nbsp;object&nbsp;has&nbsp;been&nbsp;disposed."</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">If</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Class</span>

<span class="sunlight-keyword">Delegate</span>&nbsp;<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">MathOperator</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>

<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">AddNumbers</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Return</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">y</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Function</span>

<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">SubtractNumbers</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Return</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">y</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Function</span>

<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">DelegateTest</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">op</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">MathOperator</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">ret</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ret</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">op</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Invoke</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">y</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-comment">'&nbsp;Call&nbsp;the&nbsp;method.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ret</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>

<span class="sunlight-keyword">Protected</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">Test</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DelegateTest</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">AddressOf</span>&nbsp;<span class="sunlight-named-ident">AddNumbers</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DelegateTest</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">9</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">AddressOf</span>&nbsp;<span class="sunlight-named-ident">SubtractNumbers</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Interface</span>&nbsp;<span class="sunlight-named-ident">thisInterface</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Property</span>&nbsp;<span class="sunlight-ident">thisProp</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">thisStr</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Char</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">thisFunc</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">thisInt</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Interface</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Structure</span>&nbsp;<span class="sunlight-named-ident">employee</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-ident">firstName</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-ident">middleName</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">maximum</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Long</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">459</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Friend</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">calculateBonus</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">rate</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Single</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bonus</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">salary</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-keyword">CDbl</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">rate</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Property&nbsp;member&nbsp;to&nbsp;return&nbsp;employee's&nbsp;eligibility.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Friend</span>&nbsp;<span class="sunlight-keyword">ReadOnly</span>&nbsp;<span class="sunlight-keyword">Property</span>&nbsp;<span class="sunlight-ident">eligible</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Boolean</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Return</span>&nbsp;<span class="sunlight-ident">level</span>&nbsp;<span class="sunlight-operator">&gt;=</span>&nbsp;<span class="sunlight-number">25</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Property</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Event&nbsp;member,&nbsp;raised&nbsp;when&nbsp;business&nbsp;phone&nbsp;number&nbsp;has&nbsp;changed.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Event</span>&nbsp;<span class="sunlight-named-ident">changedWorkPhone</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">newPhone</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Long</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Structure</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Module</span>&nbsp;<span class="sunlight-named-ident">thisModule</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">Main</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-escapedKeyword">[True]</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">InputBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"What&nbsp;is&nbsp;your&nbsp;name?"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"User&nbsp;name&nbsp;is"</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-escapedKeyword">[True]</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Insert&nbsp;variable,&nbsp;property,&nbsp;procedure,&nbsp;and&nbsp;event&nbsp;declarations.</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Module</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Enum</span>&nbsp;<span class="sunlight-named-ident">InterfaceColors</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MistyRose</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;HE1E4FF</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SlateGray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H908070</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DodgerBlue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;HFF901E</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DeepSkyBlue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;HFFBF00</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SpringGreen</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H7FFF00</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ForestGreen</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H228B22</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Goldenrod</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H20A5DA</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Firebrick</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H2222B2</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Enum</span>
</span></pre></div></div>
<h2 id="vb2.vb">vb2.vb</h2>
<p>Theme: <b>gitbook</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-gitbook"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-36-line-1" href="#sunlight-36-line-1">1</a>
<a name="sunlight-36-line-2" href="#sunlight-36-line-2">2</a>
<a name="sunlight-36-line-3" href="#sunlight-36-line-3">3</a>
<a name="sunlight-36-line-4" href="#sunlight-36-line-4">4</a>
<a name="sunlight-36-line-5" href="#sunlight-36-line-5">5</a>
<a name="sunlight-36-line-6" href="#sunlight-36-line-6">6</a>
<a name="sunlight-36-line-7" href="#sunlight-36-line-7">7</a>
<a name="sunlight-36-line-8" href="#sunlight-36-line-8">8</a>
<a name="sunlight-36-line-9" href="#sunlight-36-line-9">9</a>
<a name="sunlight-36-line-10" href="#sunlight-36-line-10">10</a>
<a name="sunlight-36-line-11" href="#sunlight-36-line-11">11</a>
<a name="sunlight-36-line-12" href="#sunlight-36-line-12">12</a>
<a name="sunlight-36-line-13" href="#sunlight-36-line-13">13</a>
<a name="sunlight-36-line-14" href="#sunlight-36-line-14">14</a>
<a name="sunlight-36-line-15" href="#sunlight-36-line-15">15</a>
<a name="sunlight-36-line-16" href="#sunlight-36-line-16">16</a>
<a name="sunlight-36-line-17" href="#sunlight-36-line-17">17</a>
<a name="sunlight-36-line-18" href="#sunlight-36-line-18">18</a>
<a name="sunlight-36-line-19" href="#sunlight-36-line-19">19</a>
<a name="sunlight-36-line-20" href="#sunlight-36-line-20">20</a>
<a name="sunlight-36-line-21" href="#sunlight-36-line-21">21</a>
<a name="sunlight-36-line-22" href="#sunlight-36-line-22">22</a>
</div><pre class="sunlight-highlight-vb sunlight-highlighted"><span class="sunlight-vb"><span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Module</span>&nbsp;<span class="sunlight-named-ident">thisModule</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i1_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">12_34_5%</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i2_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;ha_BC_d23_8&amp;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i3_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;O42_7i</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i4_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;B01_1_0l</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i5_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">+</span><span class="sunlight-number">123S</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i6_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">123UI</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i7_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">+</span><span class="sunlight-number">123uL</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i8_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">123us</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i9_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2398</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i1_ERROR</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">_123</span>&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;This&nbsp;should&nbsp;be&nbsp;an&nbsp;identifier.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i2_ERROR</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">123</span><span class="sunlight-ident">_</span>&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;_&nbsp;is&nbsp;an&nbsp;invalid&nbsp;identifier&nbsp;(still&nbsp;highlighted)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f1_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1F</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f2_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2.0E3R</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f3_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">.3E+8D</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f4_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">4E-9</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f5_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5___2.3_1_3e-4_6_4!</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f6_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">6.2#</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f7_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">7@</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Module</span>
</span></pre></div></div>
<h2 id="vssolution.sln">vssolution.sln</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-sln sunlight-highlighted"><span class="sunlight-sln"><span class="sunlight-formatDeclaration">Microsoft&nbsp;Visual&nbsp;Studio&nbsp;Solution&nbsp;File,&nbsp;Format&nbsp;Version&nbsp;11.00</span>
<span class="sunlight-comment">#&nbsp;Visual&nbsp;Studio&nbsp;2010</span>

<span class="sunlight-keyword">Project</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"{F184B08F-C81C-45F6-A57F-5ABD9991F28F}"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"Project1"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"Project1.vbproj"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"{8CDD8387-B905-44A8-B5D5-07BB50E05BEA}"</span>
<span class="sunlight-keyword">EndProject</span>
<span class="sunlight-keyword">Global</span>
&nbsp;&nbsp;<span class="sunlight-keyword">GlobalSection</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">SolutionNotes</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-sectionName">postSolution</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Name1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Note2</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Issue1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">N</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Text1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">This</span>&nbsp;<span class="sunlight-ident">is</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">shared</span>&nbsp;<span class="sunlight-ident">note.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Name2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Note3</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Issue2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">N</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Text2</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">This</span>&nbsp;<span class="sunlight-ident">is</span>&nbsp;<span class="sunlight-ident">also</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">shared</span>&nbsp;<span class="sunlight-ident">note.</span>&nbsp;<span class="sunlight-ident">The</span>&nbsp;<span class="sunlight-ident">second</span>&nbsp;<span class="sunlight-ident">of</span>&nbsp;<span class="sunlight-ident">two</span>&nbsp;<span class="sunlight-ident">shared</span>&nbsp;<span class="sunlight-ident">notes.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">NumNotes</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span>
&nbsp;&nbsp;<span class="sunlight-keyword">EndGlobalSection</span>
&nbsp;&nbsp;<span class="sunlight-keyword">GlobalSection</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">SolutionConfiguration</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-sectionName">preSolution</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ConfigName.0</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Debug</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ConfigName.1</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Release</span>
&nbsp;&nbsp;<span class="sunlight-keyword">EndGlobalSection</span>
&nbsp;&nbsp;<span class="sunlight-keyword">GlobalSection</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ProjectDependencies</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-sectionName">postSolution</span>
&nbsp;&nbsp;<span class="sunlight-keyword">EndGlobalSection</span>
&nbsp;&nbsp;<span class="sunlight-keyword">GlobalSection</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ProjectConfiguration</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-sectionName">postSolution</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-guid">{8CDD8387-B905-44A8-B5D5-07BB50E05BEA}</span><span class="sunlight-ident">.Debug.ActiveCfg</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Debug</span><span class="sunlight-operator">|</span><span class="sunlight-ident">.NET</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-guid">{8CDD8387-B905-44A8-B5D5-07BB50E05BEA}</span><span class="sunlight-ident">.Debug.Build.0</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Debug</span><span class="sunlight-operator">|</span><span class="sunlight-ident">.NET</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-guid">{8CDD8387-B905-44A8-B5D5-07BB50E05BEA}</span><span class="sunlight-ident">.Release.ActiveCfg</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Release</span><span class="sunlight-operator">|</span><span class="sunlight-ident">.NET</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-guid">{8CDD8387-B905-44A8-B5D5-07BB50E05BEA}</span><span class="sunlight-ident">.Release.Build.0</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Release</span><span class="sunlight-operator">|</span><span class="sunlight-ident">.NET</span>
&nbsp;&nbsp;<span class="sunlight-keyword">EndGlobalSection</span>
&nbsp;&nbsp;<span class="sunlight-keyword">GlobalSection</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ExtensibilityGlobals</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-sectionName">postSolution</span>
&nbsp;&nbsp;<span class="sunlight-keyword">EndGlobalSection</span>
&nbsp;&nbsp;<span class="sunlight-keyword">GlobalSection</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ExtensibilityAddIns</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-sectionName">postSolution</span>
&nbsp;&nbsp;<span class="sunlight-keyword">EndGlobalSection</span>
<span class="sunlight-keyword">EndGlobal</span>
</span></pre></div></div>
<h2 id="xml-multilang.xml">xml-multilang.xml</h2>
<p>Theme: <b>dark</b>, Line numbers: <b>true</b></p>
<div class="sunlight-container sunlight-theme-dark"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-38-line-1" href="#sunlight-38-line-1">1</a>
<a name="sunlight-38-line-2" href="#sunlight-38-line-2">2</a>
<a name="sunlight-38-line-3" href="#sunlight-38-line-3">3</a>
<a name="sunlight-38-line-4" href="#sunlight-38-line-4">4</a>
<a name="sunlight-38-line-5" href="#sunlight-38-line-5">5</a>
<a name="sunlight-38-line-6" href="#sunlight-38-line-6">6</a>
<a name="sunlight-38-line-7" href="#sunlight-38-line-7">7</a>
<a name="sunlight-38-line-8" href="#sunlight-38-line-8">8</a>
<a name="sunlight-38-line-9" href="#sunlight-38-line-9">9</a>
<a name="sunlight-38-line-10" href="#sunlight-38-line-10">10</a>
<a name="sunlight-38-line-11" href="#sunlight-38-line-11">11</a>
<a name="sunlight-38-line-12" href="#sunlight-38-line-12">12</a>
<a name="sunlight-38-line-13" href="#sunlight-38-line-13">13</a>
<a name="sunlight-38-line-14" href="#sunlight-38-line-14">14</a>
<a name="sunlight-38-line-15" href="#sunlight-38-line-15">15</a>
<a name="sunlight-38-line-16" href="#sunlight-38-line-16">16</a>
<a name="sunlight-38-line-17" href="#sunlight-38-line-17">17</a>
<a name="sunlight-38-line-18" href="#sunlight-38-line-18">18</a>
<a name="sunlight-38-line-19" href="#sunlight-38-line-19">19</a>
<a name="sunlight-38-line-20" href="#sunlight-38-line-20">20</a>
<a name="sunlight-38-line-21" href="#sunlight-38-line-21">21</a>
<a name="sunlight-38-line-22" href="#sunlight-38-line-22">22</a>
<a name="sunlight-38-line-23" href="#sunlight-38-line-23">23</a>
<a name="sunlight-38-line-24" href="#sunlight-38-line-24">24</a>
<a name="sunlight-38-line-25" href="#sunlight-38-line-25">25</a>
<a name="sunlight-38-line-26" href="#sunlight-38-line-26">26</a>
<a name="sunlight-38-line-27" href="#sunlight-38-line-27">27</a>
<a name="sunlight-38-line-28" href="#sunlight-38-line-28">28</a>
<a name="sunlight-38-line-29" href="#sunlight-38-line-29">29</a>
<a name="sunlight-38-line-30" href="#sunlight-38-line-30">30</a>
<a name="sunlight-38-line-31" href="#sunlight-38-line-31">31</a>
<a name="sunlight-38-line-32" href="#sunlight-38-line-32">32</a>
<a name="sunlight-38-line-33" href="#sunlight-38-line-33">33</a>
<a name="sunlight-38-line-34" href="#sunlight-38-line-34">34</a>
<a name="sunlight-38-line-35" href="#sunlight-38-line-35">35</a>
<a name="sunlight-38-line-36" href="#sunlight-38-line-36">36</a>
<a name="sunlight-38-line-37" href="#sunlight-38-line-37">37</a>
<a name="sunlight-38-line-38" href="#sunlight-38-line-38">38</a>
<a name="sunlight-38-line-39" href="#sunlight-38-line-39">39</a>
<a name="sunlight-38-line-40" href="#sunlight-38-line-40">40</a>
<a name="sunlight-38-line-41" href="#sunlight-38-line-41">41</a>
<a name="sunlight-38-line-42" href="#sunlight-38-line-42">42</a>
<a name="sunlight-38-line-43" href="#sunlight-38-line-43">43</a>
<a name="sunlight-38-line-44" href="#sunlight-38-line-44">44</a>
<a name="sunlight-38-line-45" href="#sunlight-38-line-45">45</a>
<a name="sunlight-38-line-46" href="#sunlight-38-line-46">46</a>
<a name="sunlight-38-line-47" href="#sunlight-38-line-47">47</a>
<a name="sunlight-38-line-48" href="#sunlight-38-line-48">48</a>
<a name="sunlight-38-line-49" href="#sunlight-38-line-49">49</a>
<a name="sunlight-38-line-50" href="#sunlight-38-line-50">50</a>
<a name="sunlight-38-line-51" href="#sunlight-38-line-51">51</a>
<a name="sunlight-38-line-52" href="#sunlight-38-line-52">52</a>
<a name="sunlight-38-line-53" href="#sunlight-38-line-53">53</a>
<a name="sunlight-38-line-54" href="#sunlight-38-line-54">54</a>
<a name="sunlight-38-line-55" href="#sunlight-38-line-55">55</a>
<a name="sunlight-38-line-56" href="#sunlight-38-line-56">56</a>
<a name="sunlight-38-line-57" href="#sunlight-38-line-57">57</a>
<a name="sunlight-38-line-58" href="#sunlight-38-line-58">58</a>
<a name="sunlight-38-line-59" href="#sunlight-38-line-59">59</a>
<a name="sunlight-38-line-60" href="#sunlight-38-line-60">60</a>
<a name="sunlight-38-line-61" href="#sunlight-38-line-61">61</a>
<a name="sunlight-38-line-62" href="#sunlight-38-line-62">62</a>
<a name="sunlight-38-line-63" href="#sunlight-38-line-63">63</a>
<a name="sunlight-38-line-64" href="#sunlight-38-line-64">64</a>
<a name="sunlight-38-line-65" href="#sunlight-38-line-65">65</a>
</div><pre class="sunlight-highlight-xml sunlight-highlighted"><span class="sunlight-xml"><span class="sunlight-doctype">&lt;!doctype&nbsp;html&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">html</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">head</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">script</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/javascript"</span>&nbsp;<span class="sunlight-attribute">src</span><span class="sunlight-operator">=</span><span class="sunlight-string">"/sunlight.js"</span><span class="sunlight-operator">&gt;</span><span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">script</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span><span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">style</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/css"</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-css">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-rule">@font-face</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-family</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">Custom</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">src</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">fonts</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">custom</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ttf</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-element">body</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">black</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-family</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"Courier&nbsp;New"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">width</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">100%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">min-height</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">200px</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">attention</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">red</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">2px</span>&nbsp;<span class="sunlight-ident">solid</span>&nbsp;<span class="sunlight-hexColor">#000000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">script</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/javascript"</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-javascript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-operator">.</span><span class="sunlight-ident">onload</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">xhr</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">XMLHttpRequest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">open</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"GET"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"/ajax.php"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">onreadystatechange</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">status</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-number">200</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getElementById</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">innerHTML</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">responseText</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">send</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">script</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">head</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">body</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Let's&nbsp;try&nbsp;some&nbsp;PHP<span class="sunlight-operator">:</span></span><span class="sunlight-php">&nbsp;Hello&nbsp;<span class="sunlight-shortOpenTag">&lt;?=</span>&nbsp;<span class="sunlight-variable">$_GET</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">'username'</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-closeTag">?&gt;</span></span><span class="sunlight-xml">!&nbsp;Long&nbsp;tags&nbsp;work,&nbsp;too<span class="sunlight-operator">:</span></span><span class="sunlight-php">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-openTag">&lt;?php</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">echo</span>&nbsp;<span class="sunlight-string">'Hello&nbsp;world'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">range</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-variable">$i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print_r</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$i</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//prints&nbsp;$i&nbsp;lol</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-closeTag">?&gt;</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Now&nbsp;let's&nbsp;try&nbsp;some&nbsp;C#<span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">&lt;%--&nbsp;server&nbsp;side&nbsp;comment&nbsp;--%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">User</span><span class="sunlight-operator">.</span><span class="sunlight-ident">IsInRole</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"admin"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;see&nbsp;this
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;are&nbsp;no&nbsp;admin&nbsp;fool!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%=</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-string">"Short&nbsp;tag&nbsp;ftw"</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">body</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">html</span><span class="sunlight-operator">&gt;</span>
</span></pre></div></div>
<h2 id="xml.xml">xml.xml</h2>
<p>Theme: <b>light</b>, Line numbers: <b>false</b></p>
<div class="sunlight-container sunlight-theme-light"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined;"><pre class="sunlight-highlight-xml sunlight-highlighted"><span class="sunlight-xml"><span class="sunlight-xmlOpenTag">&lt;?xml</span>&nbsp;<span class="sunlight-attribute">version</span><span class="sunlight-operator">=</span><span class="sunlight-string">"1.0"</span>&nbsp;<span class="sunlight-xmlCloseTag">?&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">config</span>&nbsp;<span class="sunlight-attribute">xmlns</span><span class="sunlight-operator">:</span><span class="sunlight-attribute">foo</span><span class="sunlight-operator">=</span><span class="sunlight-string">"http://example.com"</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">&lt;!--&nbsp;sections&nbsp;--&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span>&nbsp;<span class="sunlight-attribute">name</span><span class="sunlight-operator">=</span><span class="sunlight-string">"foo"</span><span class="sunlight-operator">&gt;</span>Content&nbsp;of&nbsp;the&nbsp;section<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span>&nbsp;<span class="sunlight-attribute">name</span><span class="sunlight-operator">=</span><span class="sunlight-string">"bar"</span><span class="sunlight-operator">&gt;</span>Content&nbsp;of&nbsp;the&nbsp;section<span class="sunlight-entity">&amp;beforeopentag;</span><span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span>&nbsp;<span class="sunlight-attribute">foo</span><span class="sunlight-operator">:</span><span class="sunlight-attribute">id</span><span class="sunlight-operator">=</span><span class="sunlight-string">"12"</span>&nbsp;<span class="sunlight-attribute">name</span><span class="sunlight-operator">=</span><span class="sunlight-string">"foo"</span><span class="sunlight-operator">&gt;</span>Content&nbsp;of&nbsp;the&nbsp;"section"&nbsp;&amp;&nbsp;stuff<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">System.Net</span>&nbsp;<span class="sunlight-operator">/&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">&lt;!--&nbsp;cdata&nbsp;--&gt;</span>
<span class="sunlight-cdata">&lt;![CDATA[I&nbsp;can&nbsp;put&nbsp;whatever&nbsp;I&nbsp;want&nbsp;here&nbsp;HAHAHA!
&lt;tags&gt;&nbsp;that&nbsp;shouldn't&nbsp;be&nbsp;tags&lt;/tags&gt;
&lt;?xml&nbsp;lol!&nbsp;?&gt;]]&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">_self-closing</span>&nbsp;<span class="sunlight-operator">/&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">nested</span>&nbsp;<span class="sunlight-attribute">lulz</span><span class="sunlight-operator">=</span><span class="sunlight-string">"asdf"</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;again<span class="sunlight-entity">&amp;hellip;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">again</span><span class="sunlight-operator">&gt;</span>nested&nbsp;content<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">again</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">nested</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">config</span><span class="sunlight-operator">&gt;</span>
</span></pre></div></div>

    </main>
  </div>
</body>
</html>
