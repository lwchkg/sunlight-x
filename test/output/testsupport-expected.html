<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../../compiled-assets/sunlight-defaultfont.css">
  <title>TestSupport Tests</title>
</head>
<body>
<h1>TestSupport Tests</h1>
<h2>6502asm.6502asm</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-15-line-1" href="#sunlight-15-line-1">1</a>
<a name="sunlight-15-line-2" href="#sunlight-15-line-2">2</a>
<a name="sunlight-15-line-3" href="#sunlight-15-line-3">3</a>
<a name="sunlight-15-line-4" href="#sunlight-15-line-4">4</a>
<a name="sunlight-15-line-5" href="#sunlight-15-line-5">5</a>
<a name="sunlight-15-line-6" href="#sunlight-15-line-6">6</a>
<a name="sunlight-15-line-7" href="#sunlight-15-line-7">7</a>
<a name="sunlight-15-line-8" href="#sunlight-15-line-8">8</a>
<a name="sunlight-15-line-9" href="#sunlight-15-line-9">9</a>
<a name="sunlight-15-line-10" href="#sunlight-15-line-10">10</a>
<a name="sunlight-15-line-11" href="#sunlight-15-line-11">11</a>
<a name="sunlight-15-line-12" href="#sunlight-15-line-12">12</a>
<a name="sunlight-15-line-13" href="#sunlight-15-line-13">13</a>
<a name="sunlight-15-line-14" href="#sunlight-15-line-14">14</a>
<a name="sunlight-15-line-15" href="#sunlight-15-line-15">15</a>
<a name="sunlight-15-line-16" href="#sunlight-15-line-16">16</a>
<a name="sunlight-15-line-17" href="#sunlight-15-line-17">17</a>
<a name="sunlight-15-line-18" href="#sunlight-15-line-18">18</a>
<a name="sunlight-15-line-19" href="#sunlight-15-line-19">19</a>
<a name="sunlight-15-line-20" href="#sunlight-15-line-20">20</a>
<a name="sunlight-15-line-21" href="#sunlight-15-line-21">21</a>
<a name="sunlight-15-line-22" href="#sunlight-15-line-22">22</a>
<a name="sunlight-15-line-23" href="#sunlight-15-line-23">23</a>
<a name="sunlight-15-line-24" href="#sunlight-15-line-24">24</a>
<a name="sunlight-15-line-25" href="#sunlight-15-line-25">25</a>
<a name="sunlight-15-line-26" href="#sunlight-15-line-26">26</a>
<a name="sunlight-15-line-27" href="#sunlight-15-line-27">27</a>
<a name="sunlight-15-line-28" href="#sunlight-15-line-28">28</a>
<a name="sunlight-15-line-29" href="#sunlight-15-line-29">29</a>
<a name="sunlight-15-line-30" href="#sunlight-15-line-30">30</a>
<a name="sunlight-15-line-31" href="#sunlight-15-line-31">31</a>
<a name="sunlight-15-line-32" href="#sunlight-15-line-32">32</a>
<a name="sunlight-15-line-33" href="#sunlight-15-line-33">33</a>
<a name="sunlight-15-line-34" href="#sunlight-15-line-34">34</a>
<a name="sunlight-15-line-35" href="#sunlight-15-line-35">35</a>
<a name="sunlight-15-line-36" href="#sunlight-15-line-36">36</a>
<a name="sunlight-15-line-37" href="#sunlight-15-line-37">37</a>
<a name="sunlight-15-line-38" href="#sunlight-15-line-38">38</a>
<a name="sunlight-15-line-39" href="#sunlight-15-line-39">39</a>
<a name="sunlight-15-line-40" href="#sunlight-15-line-40">40</a>
<a name="sunlight-15-line-41" href="#sunlight-15-line-41">41</a>
<a name="sunlight-15-line-42" href="#sunlight-15-line-42">42</a>
<a name="sunlight-15-line-43" href="#sunlight-15-line-43">43</a>
<a name="sunlight-15-line-44" href="#sunlight-15-line-44">44</a>
<a name="sunlight-15-line-45" href="#sunlight-15-line-45">45</a>
<a name="sunlight-15-line-46" href="#sunlight-15-line-46">46</a>
<a name="sunlight-15-line-47" href="#sunlight-15-line-47">47</a>
<a name="sunlight-15-line-48" href="#sunlight-15-line-48">48</a>
<a name="sunlight-15-line-49" href="#sunlight-15-line-49">49</a>
<a name="sunlight-15-line-50" href="#sunlight-15-line-50">50</a>
<a name="sunlight-15-line-51" href="#sunlight-15-line-51">51</a>
<a name="sunlight-15-line-52" href="#sunlight-15-line-52">52</a>
<a name="sunlight-15-line-53" href="#sunlight-15-line-53">53</a>
<a name="sunlight-15-line-54" href="#sunlight-15-line-54">54</a>
<a name="sunlight-15-line-55" href="#sunlight-15-line-55">55</a>
<a name="sunlight-15-line-56" href="#sunlight-15-line-56">56</a>
<a name="sunlight-15-line-57" href="#sunlight-15-line-57">57</a>
<a name="sunlight-15-line-58" href="#sunlight-15-line-58">58</a>
<a name="sunlight-15-line-59" href="#sunlight-15-line-59">59</a>
<a name="sunlight-15-line-60" href="#sunlight-15-line-60">60</a>
<a name="sunlight-15-line-61" href="#sunlight-15-line-61">61</a>
<a name="sunlight-15-line-62" href="#sunlight-15-line-62">62</a>
<a name="sunlight-15-line-63" href="#sunlight-15-line-63">63</a>
<a name="sunlight-15-line-64" href="#sunlight-15-line-64">64</a>
<a name="sunlight-15-line-65" href="#sunlight-15-line-65">65</a>
<a name="sunlight-15-line-66" href="#sunlight-15-line-66">66</a>
<a name="sunlight-15-line-67" href="#sunlight-15-line-67">67</a>
<a name="sunlight-15-line-68" href="#sunlight-15-line-68">68</a>
<a name="sunlight-15-line-69" href="#sunlight-15-line-69">69</a>
<a name="sunlight-15-line-70" href="#sunlight-15-line-70">70</a>
<a name="sunlight-15-line-71" href="#sunlight-15-line-71">71</a>
<a name="sunlight-15-line-72" href="#sunlight-15-line-72">72</a>
<a name="sunlight-15-line-73" href="#sunlight-15-line-73">73</a>
<a name="sunlight-15-line-74" href="#sunlight-15-line-74">74</a>
<a name="sunlight-15-line-75" href="#sunlight-15-line-75">75</a>
<a name="sunlight-15-line-76" href="#sunlight-15-line-76">76</a>
<a name="sunlight-15-line-77" href="#sunlight-15-line-77">77</a>
<a name="sunlight-15-line-78" href="#sunlight-15-line-78">78</a>
<a name="sunlight-15-line-79" href="#sunlight-15-line-79">79</a>
<a name="sunlight-15-line-80" href="#sunlight-15-line-80">80</a>
<a name="sunlight-15-line-81" href="#sunlight-15-line-81">81</a>
<a name="sunlight-15-line-82" href="#sunlight-15-line-82">82</a>
<a name="sunlight-15-line-83" href="#sunlight-15-line-83">83</a>
<a name="sunlight-15-line-84" href="#sunlight-15-line-84">84</a>
<a name="sunlight-15-line-85" href="#sunlight-15-line-85">85</a>
<a name="sunlight-15-line-86" href="#sunlight-15-line-86">86</a>
<a name="sunlight-15-line-87" href="#sunlight-15-line-87">87</a>
<a name="sunlight-15-line-88" href="#sunlight-15-line-88">88</a>
<a name="sunlight-15-line-89" href="#sunlight-15-line-89">89</a>
<a name="sunlight-15-line-90" href="#sunlight-15-line-90">90</a>
<a name="sunlight-15-line-91" href="#sunlight-15-line-91">91</a>
</div><pre class="sunlight-highlight-6502asm sunlight-highlighted"><span class="sunlight-6502asm"><span class="sunlight-label">MainKernel</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">nop</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ldy</span>&nbsp;<span class="sunlight-constant">#PLAYAREAHEIGHT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;72</span>

<span class="sunlight-label">KernelLoopOuter</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;72</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SLEEP</span>&nbsp;<span class="sunlight-number">4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76</span>
<span class="sunlight-label">KernelLoopInner</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMOVE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#MAID_HEIGHT</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-illegalOpcode">dcp</span>&nbsp;<span class="sunlight-ident">MaidLineCounter2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bcs</span>&nbsp;<span class="sunlight-label">DoDraw2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">.</span><span class="sunlight-pseudoOp">byte</span>&nbsp;<span class="sunlight-number">$2C</span>
<span class="sunlight-label">DoDraw2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx1Ptra</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">GRP0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;33</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">NUM_RAMBANDS</span><span class="sunlight-operator">*</span><span class="sunlight-number">3</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;40</span>
<span class="sunlight-label">BackFromNoSpritesKernelMain</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">StairCaseTable</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMBL</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;47</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">beq</span>&nbsp;<span class="sunlight-label">NoSpritesKernelMain</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;49</span>


&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#MAID_HEIGHT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cpy</span>&nbsp;<span class="sunlight-ident">HeroTop0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bpl</span>&nbsp;<span class="sunlight-label">SwitchDraw1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;56</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-illegalOpcode">dcp</span>&nbsp;<span class="sunlight-ident">MaidLineCounter2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;61</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx0Ptra</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">GRP1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VDEL</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroColorPtra</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMOVE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">COLUP1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</span>
<span class="sunlight-label">BackFromSwitchDraw1</span>


&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">GameFlags3</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">eor</span>&nbsp;<span class="sunlight-ident">BackgroundColorTable</span><span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">COLUBK</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14</span>


&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;--can't&nbsp;use&nbsp;SwitchDraw&nbsp;for&nbsp;P1&nbsp;since&nbsp;P0&nbsp;is&nbsp;VDELed&nbsp;-&nbsp;have&nbsp;to</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;use&nbsp;DoDraw,&nbsp;which&nbsp;draws&nbsp;*something*&nbsp;every&nbsp;line.</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;lda&nbsp;#MAID_HEIGHT</span>
<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;dcp&nbsp;MaidLineCounter2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bcc</span>&nbsp;<span class="sunlight-label">NoDraw1</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx1Ptrb</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">GRP0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too&nbsp;late?&nbsp;&nbsp;No.</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-constant">#&lt;[3.14&nbsp;*&nbsp;100]</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">pi</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too&nbsp;late?&nbsp;&nbsp;Maybe.</span>
<span class="sunlight-label">BackFromNoDraw1</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-operator">+</span><span class="sunlight-ident">NUM_RAMBANDS</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;36</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">HMCLR</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-ident">ElevRAM</span><span class="sunlight-operator">+</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">NUM_RAMBANDS</span><span class="sunlight-operator">*</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cpy</span>&nbsp;<span class="sunlight-ident">HeroTop0</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">PF2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;50</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bpl</span>&nbsp;<span class="sunlight-label">WaitDraw3</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">lda</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">HeroGfx0Ptrb</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">Y</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span><span class="sunlight-punctuation">.</span><span class="sunlight-ident">w</span>&nbsp;<span class="sunlight-ident">GRP1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VDEL</span>
<span class="sunlight-label">BackFromSwitchDraw3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;61</span>

<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;nop</span>

&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">dey</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">tya</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cmp</span>&nbsp;<span class="sunlight-ident">ElevBandHeight</span><span class="sunlight-punctuation">,</span><span class="sunlight-ident">X</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bne</span>&nbsp;<span class="sunlight-label">KernelLoopOuter</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+11&nbsp;&nbsp;&nbsp;&nbsp;(72)</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">dex</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bpl</span>&nbsp;<span class="sunlight-label">KernelLoopInner</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;75</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">sta</span>&nbsp;<span class="sunlight-ident">HMOVE</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">cpy</span>&nbsp;<span class="sunlight-constant">#0</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">bne</span>&nbsp;<span class="sunlight-label">NotDoneWithPlayAreaKernels</span>&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;+5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6</span>
&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">beq</span>&nbsp;<span class="sunlight-label">DoneWithPlayAreaKernels</span>&nbsp;<span class="sunlight-comment">;+3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;branch&nbsp;always</span>
</span></pre></div></div>
<h2>actionscript.as</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-16-line-1" href="#sunlight-16-line-1">1</a>
<a name="sunlight-16-line-2" href="#sunlight-16-line-2">2</a>
<a name="sunlight-16-line-3" href="#sunlight-16-line-3">3</a>
<a name="sunlight-16-line-4" href="#sunlight-16-line-4">4</a>
<a name="sunlight-16-line-5" href="#sunlight-16-line-5">5</a>
<a name="sunlight-16-line-6" href="#sunlight-16-line-6">6</a>
<a name="sunlight-16-line-7" href="#sunlight-16-line-7">7</a>
<a name="sunlight-16-line-8" href="#sunlight-16-line-8">8</a>
<a name="sunlight-16-line-9" href="#sunlight-16-line-9">9</a>
<a name="sunlight-16-line-10" href="#sunlight-16-line-10">10</a>
<a name="sunlight-16-line-11" href="#sunlight-16-line-11">11</a>
<a name="sunlight-16-line-12" href="#sunlight-16-line-12">12</a>
<a name="sunlight-16-line-13" href="#sunlight-16-line-13">13</a>
<a name="sunlight-16-line-14" href="#sunlight-16-line-14">14</a>
<a name="sunlight-16-line-15" href="#sunlight-16-line-15">15</a>
<a name="sunlight-16-line-16" href="#sunlight-16-line-16">16</a>
<a name="sunlight-16-line-17" href="#sunlight-16-line-17">17</a>
<a name="sunlight-16-line-18" href="#sunlight-16-line-18">18</a>
<a name="sunlight-16-line-19" href="#sunlight-16-line-19">19</a>
<a name="sunlight-16-line-20" href="#sunlight-16-line-20">20</a>
<a name="sunlight-16-line-21" href="#sunlight-16-line-21">21</a>
<a name="sunlight-16-line-22" href="#sunlight-16-line-22">22</a>
<a name="sunlight-16-line-23" href="#sunlight-16-line-23">23</a>
<a name="sunlight-16-line-24" href="#sunlight-16-line-24">24</a>
<a name="sunlight-16-line-25" href="#sunlight-16-line-25">25</a>
<a name="sunlight-16-line-26" href="#sunlight-16-line-26">26</a>
<a name="sunlight-16-line-27" href="#sunlight-16-line-27">27</a>
<a name="sunlight-16-line-28" href="#sunlight-16-line-28">28</a>
<a name="sunlight-16-line-29" href="#sunlight-16-line-29">29</a>
<a name="sunlight-16-line-30" href="#sunlight-16-line-30">30</a>
<a name="sunlight-16-line-31" href="#sunlight-16-line-31">31</a>
<a name="sunlight-16-line-32" href="#sunlight-16-line-32">32</a>
<a name="sunlight-16-line-33" href="#sunlight-16-line-33">33</a>
<a name="sunlight-16-line-34" href="#sunlight-16-line-34">34</a>
<a name="sunlight-16-line-35" href="#sunlight-16-line-35">35</a>
<a name="sunlight-16-line-36" href="#sunlight-16-line-36">36</a>
<a name="sunlight-16-line-37" href="#sunlight-16-line-37">37</a>
<a name="sunlight-16-line-38" href="#sunlight-16-line-38">38</a>
<a name="sunlight-16-line-39" href="#sunlight-16-line-39">39</a>
<a name="sunlight-16-line-40" href="#sunlight-16-line-40">40</a>
<a name="sunlight-16-line-41" href="#sunlight-16-line-41">41</a>
<a name="sunlight-16-line-42" href="#sunlight-16-line-42">42</a>
<a name="sunlight-16-line-43" href="#sunlight-16-line-43">43</a>
<a name="sunlight-16-line-44" href="#sunlight-16-line-44">44</a>
<a name="sunlight-16-line-45" href="#sunlight-16-line-45">45</a>
<a name="sunlight-16-line-46" href="#sunlight-16-line-46">46</a>
<a name="sunlight-16-line-47" href="#sunlight-16-line-47">47</a>
<a name="sunlight-16-line-48" href="#sunlight-16-line-48">48</a>
<a name="sunlight-16-line-49" href="#sunlight-16-line-49">49</a>
<a name="sunlight-16-line-50" href="#sunlight-16-line-50">50</a>
<a name="sunlight-16-line-51" href="#sunlight-16-line-51">51</a>
<a name="sunlight-16-line-52" href="#sunlight-16-line-52">52</a>
<a name="sunlight-16-line-53" href="#sunlight-16-line-53">53</a>
<a name="sunlight-16-line-54" href="#sunlight-16-line-54">54</a>
<a name="sunlight-16-line-55" href="#sunlight-16-line-55">55</a>
<a name="sunlight-16-line-56" href="#sunlight-16-line-56">56</a>
<a name="sunlight-16-line-57" href="#sunlight-16-line-57">57</a>
<a name="sunlight-16-line-58" href="#sunlight-16-line-58">58</a>
<a name="sunlight-16-line-59" href="#sunlight-16-line-59">59</a>
<a name="sunlight-16-line-60" href="#sunlight-16-line-60">60</a>
<a name="sunlight-16-line-61" href="#sunlight-16-line-61">61</a>
<a name="sunlight-16-line-62" href="#sunlight-16-line-62">62</a>
<a name="sunlight-16-line-63" href="#sunlight-16-line-63">63</a>
<a name="sunlight-16-line-64" href="#sunlight-16-line-64">64</a>
<a name="sunlight-16-line-65" href="#sunlight-16-line-65">65</a>
<a name="sunlight-16-line-66" href="#sunlight-16-line-66">66</a>
<a name="sunlight-16-line-67" href="#sunlight-16-line-67">67</a>
<a name="sunlight-16-line-68" href="#sunlight-16-line-68">68</a>
<a name="sunlight-16-line-69" href="#sunlight-16-line-69">69</a>
<a name="sunlight-16-line-70" href="#sunlight-16-line-70">70</a>
<a name="sunlight-16-line-71" href="#sunlight-16-line-71">71</a>
<a name="sunlight-16-line-72" href="#sunlight-16-line-72">72</a>
<a name="sunlight-16-line-73" href="#sunlight-16-line-73">73</a>
<a name="sunlight-16-line-74" href="#sunlight-16-line-74">74</a>
<a name="sunlight-16-line-75" href="#sunlight-16-line-75">75</a>
<a name="sunlight-16-line-76" href="#sunlight-16-line-76">76</a>
<a name="sunlight-16-line-77" href="#sunlight-16-line-77">77</a>
<a name="sunlight-16-line-78" href="#sunlight-16-line-78">78</a>
<a name="sunlight-16-line-79" href="#sunlight-16-line-79">79</a>
<a name="sunlight-16-line-80" href="#sunlight-16-line-80">80</a>
<a name="sunlight-16-line-81" href="#sunlight-16-line-81">81</a>
<a name="sunlight-16-line-82" href="#sunlight-16-line-82">82</a>
<a name="sunlight-16-line-83" href="#sunlight-16-line-83">83</a>
<a name="sunlight-16-line-84" href="#sunlight-16-line-84">84</a>
<a name="sunlight-16-line-85" href="#sunlight-16-line-85">85</a>
<a name="sunlight-16-line-86" href="#sunlight-16-line-86">86</a>
<a name="sunlight-16-line-87" href="#sunlight-16-line-87">87</a>
<a name="sunlight-16-line-88" href="#sunlight-16-line-88">88</a>
<a name="sunlight-16-line-89" href="#sunlight-16-line-89">89</a>
<a name="sunlight-16-line-90" href="#sunlight-16-line-90">90</a>
<a name="sunlight-16-line-91" href="#sunlight-16-line-91">91</a>
<a name="sunlight-16-line-92" href="#sunlight-16-line-92">92</a>
<a name="sunlight-16-line-93" href="#sunlight-16-line-93">93</a>
<a name="sunlight-16-line-94" href="#sunlight-16-line-94">94</a>
<a name="sunlight-16-line-95" href="#sunlight-16-line-95">95</a>
<a name="sunlight-16-line-96" href="#sunlight-16-line-96">96</a>
<a name="sunlight-16-line-97" href="#sunlight-16-line-97">97</a>
<a name="sunlight-16-line-98" href="#sunlight-16-line-98">98</a>
<a name="sunlight-16-line-99" href="#sunlight-16-line-99">99</a>
<a name="sunlight-16-line-100" href="#sunlight-16-line-100">100</a>
<a name="sunlight-16-line-101" href="#sunlight-16-line-101">101</a>
<a name="sunlight-16-line-102" href="#sunlight-16-line-102">102</a>
<a name="sunlight-16-line-103" href="#sunlight-16-line-103">103</a>
<a name="sunlight-16-line-104" href="#sunlight-16-line-104">104</a>
<a name="sunlight-16-line-105" href="#sunlight-16-line-105">105</a>
<a name="sunlight-16-line-106" href="#sunlight-16-line-106">106</a>
<a name="sunlight-16-line-107" href="#sunlight-16-line-107">107</a>
<a name="sunlight-16-line-108" href="#sunlight-16-line-108">108</a>
<a name="sunlight-16-line-109" href="#sunlight-16-line-109">109</a>
<a name="sunlight-16-line-110" href="#sunlight-16-line-110">110</a>
<a name="sunlight-16-line-111" href="#sunlight-16-line-111">111</a>
<a name="sunlight-16-line-112" href="#sunlight-16-line-112">112</a>
<a name="sunlight-16-line-113" href="#sunlight-16-line-113">113</a>
<a name="sunlight-16-line-114" href="#sunlight-16-line-114">114</a>
<a name="sunlight-16-line-115" href="#sunlight-16-line-115">115</a>
<a name="sunlight-16-line-116" href="#sunlight-16-line-116">116</a>
<a name="sunlight-16-line-117" href="#sunlight-16-line-117">117</a>
<a name="sunlight-16-line-118" href="#sunlight-16-line-118">118</a>
<a name="sunlight-16-line-119" href="#sunlight-16-line-119">119</a>
<a name="sunlight-16-line-120" href="#sunlight-16-line-120">120</a>
<a name="sunlight-16-line-121" href="#sunlight-16-line-121">121</a>
<a name="sunlight-16-line-122" href="#sunlight-16-line-122">122</a>
<a name="sunlight-16-line-123" href="#sunlight-16-line-123">123</a>
<a name="sunlight-16-line-124" href="#sunlight-16-line-124">124</a>
<a name="sunlight-16-line-125" href="#sunlight-16-line-125">125</a>
<a name="sunlight-16-line-126" href="#sunlight-16-line-126">126</a>
<a name="sunlight-16-line-127" href="#sunlight-16-line-127">127</a>
<a name="sunlight-16-line-128" href="#sunlight-16-line-128">128</a>
<a name="sunlight-16-line-129" href="#sunlight-16-line-129">129</a>
<a name="sunlight-16-line-130" href="#sunlight-16-line-130">130</a>
<a name="sunlight-16-line-131" href="#sunlight-16-line-131">131</a>
<a name="sunlight-16-line-132" href="#sunlight-16-line-132">132</a>
<a name="sunlight-16-line-133" href="#sunlight-16-line-133">133</a>
<a name="sunlight-16-line-134" href="#sunlight-16-line-134">134</a>
<a name="sunlight-16-line-135" href="#sunlight-16-line-135">135</a>
<a name="sunlight-16-line-136" href="#sunlight-16-line-136">136</a>
<a name="sunlight-16-line-137" href="#sunlight-16-line-137">137</a>
<a name="sunlight-16-line-138" href="#sunlight-16-line-138">138</a>
<a name="sunlight-16-line-139" href="#sunlight-16-line-139">139</a>
<a name="sunlight-16-line-140" href="#sunlight-16-line-140">140</a>
<a name="sunlight-16-line-141" href="#sunlight-16-line-141">141</a>
<a name="sunlight-16-line-142" href="#sunlight-16-line-142">142</a>
<a name="sunlight-16-line-143" href="#sunlight-16-line-143">143</a>
<a name="sunlight-16-line-144" href="#sunlight-16-line-144">144</a>
<a name="sunlight-16-line-145" href="#sunlight-16-line-145">145</a>
<a name="sunlight-16-line-146" href="#sunlight-16-line-146">146</a>
<a name="sunlight-16-line-147" href="#sunlight-16-line-147">147</a>
<a name="sunlight-16-line-148" href="#sunlight-16-line-148">148</a>
<a name="sunlight-16-line-149" href="#sunlight-16-line-149">149</a>
<a name="sunlight-16-line-150" href="#sunlight-16-line-150">150</a>
<a name="sunlight-16-line-151" href="#sunlight-16-line-151">151</a>
<a name="sunlight-16-line-152" href="#sunlight-16-line-152">152</a>
<a name="sunlight-16-line-153" href="#sunlight-16-line-153">153</a>
<a name="sunlight-16-line-154" href="#sunlight-16-line-154">154</a>
<a name="sunlight-16-line-155" href="#sunlight-16-line-155">155</a>
<a name="sunlight-16-line-156" href="#sunlight-16-line-156">156</a>
<a name="sunlight-16-line-157" href="#sunlight-16-line-157">157</a>
<a name="sunlight-16-line-158" href="#sunlight-16-line-158">158</a>
<a name="sunlight-16-line-159" href="#sunlight-16-line-159">159</a>
<a name="sunlight-16-line-160" href="#sunlight-16-line-160">160</a>
<a name="sunlight-16-line-161" href="#sunlight-16-line-161">161</a>
<a name="sunlight-16-line-162" href="#sunlight-16-line-162">162</a>
<a name="sunlight-16-line-163" href="#sunlight-16-line-163">163</a>
<a name="sunlight-16-line-164" href="#sunlight-16-line-164">164</a>
<a name="sunlight-16-line-165" href="#sunlight-16-line-165">165</a>
<a name="sunlight-16-line-166" href="#sunlight-16-line-166">166</a>
<a name="sunlight-16-line-167" href="#sunlight-16-line-167">167</a>
<a name="sunlight-16-line-168" href="#sunlight-16-line-168">168</a>
<a name="sunlight-16-line-169" href="#sunlight-16-line-169">169</a>
<a name="sunlight-16-line-170" href="#sunlight-16-line-170">170</a>
<a name="sunlight-16-line-171" href="#sunlight-16-line-171">171</a>
<a name="sunlight-16-line-172" href="#sunlight-16-line-172">172</a>
<a name="sunlight-16-line-173" href="#sunlight-16-line-173">173</a>
<a name="sunlight-16-line-174" href="#sunlight-16-line-174">174</a>
<a name="sunlight-16-line-175" href="#sunlight-16-line-175">175</a>
<a name="sunlight-16-line-176" href="#sunlight-16-line-176">176</a>
<a name="sunlight-16-line-177" href="#sunlight-16-line-177">177</a>
<a name="sunlight-16-line-178" href="#sunlight-16-line-178">178</a>
<a name="sunlight-16-line-179" href="#sunlight-16-line-179">179</a>
<a name="sunlight-16-line-180" href="#sunlight-16-line-180">180</a>
<a name="sunlight-16-line-181" href="#sunlight-16-line-181">181</a>
<a name="sunlight-16-line-182" href="#sunlight-16-line-182">182</a>
<a name="sunlight-16-line-183" href="#sunlight-16-line-183">183</a>
<a name="sunlight-16-line-184" href="#sunlight-16-line-184">184</a>
<a name="sunlight-16-line-185" href="#sunlight-16-line-185">185</a>
<a name="sunlight-16-line-186" href="#sunlight-16-line-186">186</a>
<a name="sunlight-16-line-187" href="#sunlight-16-line-187">187</a>
<a name="sunlight-16-line-188" href="#sunlight-16-line-188">188</a>
<a name="sunlight-16-line-189" href="#sunlight-16-line-189">189</a>
<a name="sunlight-16-line-190" href="#sunlight-16-line-190">190</a>
<a name="sunlight-16-line-191" href="#sunlight-16-line-191">191</a>
<a name="sunlight-16-line-192" href="#sunlight-16-line-192">192</a>
<a name="sunlight-16-line-193" href="#sunlight-16-line-193">193</a>
<a name="sunlight-16-line-194" href="#sunlight-16-line-194">194</a>
<a name="sunlight-16-line-195" href="#sunlight-16-line-195">195</a>
<a name="sunlight-16-line-196" href="#sunlight-16-line-196">196</a>
<a name="sunlight-16-line-197" href="#sunlight-16-line-197">197</a>
<a name="sunlight-16-line-198" href="#sunlight-16-line-198">198</a>
<a name="sunlight-16-line-199" href="#sunlight-16-line-199">199</a>
<a name="sunlight-16-line-200" href="#sunlight-16-line-200">200</a>
<a name="sunlight-16-line-201" href="#sunlight-16-line-201">201</a>
<a name="sunlight-16-line-202" href="#sunlight-16-line-202">202</a>
<a name="sunlight-16-line-203" href="#sunlight-16-line-203">203</a>
<a name="sunlight-16-line-204" href="#sunlight-16-line-204">204</a>
<a name="sunlight-16-line-205" href="#sunlight-16-line-205">205</a>
<a name="sunlight-16-line-206" href="#sunlight-16-line-206">206</a>
<a name="sunlight-16-line-207" href="#sunlight-16-line-207">207</a>
<a name="sunlight-16-line-208" href="#sunlight-16-line-208">208</a>
<a name="sunlight-16-line-209" href="#sunlight-16-line-209">209</a>
<a name="sunlight-16-line-210" href="#sunlight-16-line-210">210</a>
<a name="sunlight-16-line-211" href="#sunlight-16-line-211">211</a>
<a name="sunlight-16-line-212" href="#sunlight-16-line-212">212</a>
<a name="sunlight-16-line-213" href="#sunlight-16-line-213">213</a>
<a name="sunlight-16-line-214" href="#sunlight-16-line-214">214</a>
<a name="sunlight-16-line-215" href="#sunlight-16-line-215">215</a>
<a name="sunlight-16-line-216" href="#sunlight-16-line-216">216</a>
<a name="sunlight-16-line-217" href="#sunlight-16-line-217">217</a>
<a name="sunlight-16-line-218" href="#sunlight-16-line-218">218</a>
<a name="sunlight-16-line-219" href="#sunlight-16-line-219">219</a>
<a name="sunlight-16-line-220" href="#sunlight-16-line-220">220</a>
<a name="sunlight-16-line-221" href="#sunlight-16-line-221">221</a>
<a name="sunlight-16-line-222" href="#sunlight-16-line-222">222</a>
<a name="sunlight-16-line-223" href="#sunlight-16-line-223">223</a>
<a name="sunlight-16-line-224" href="#sunlight-16-line-224">224</a>
<a name="sunlight-16-line-225" href="#sunlight-16-line-225">225</a>
<a name="sunlight-16-line-226" href="#sunlight-16-line-226">226</a>
<a name="sunlight-16-line-227" href="#sunlight-16-line-227">227</a>
<a name="sunlight-16-line-228" href="#sunlight-16-line-228">228</a>
<a name="sunlight-16-line-229" href="#sunlight-16-line-229">229</a>
<a name="sunlight-16-line-230" href="#sunlight-16-line-230">230</a>
<a name="sunlight-16-line-231" href="#sunlight-16-line-231">231</a>
<a name="sunlight-16-line-232" href="#sunlight-16-line-232">232</a>
<a name="sunlight-16-line-233" href="#sunlight-16-line-233">233</a>
<a name="sunlight-16-line-234" href="#sunlight-16-line-234">234</a>
<a name="sunlight-16-line-235" href="#sunlight-16-line-235">235</a>
<a name="sunlight-16-line-236" href="#sunlight-16-line-236">236</a>
<a name="sunlight-16-line-237" href="#sunlight-16-line-237">237</a>
<a name="sunlight-16-line-238" href="#sunlight-16-line-238">238</a>
<a name="sunlight-16-line-239" href="#sunlight-16-line-239">239</a>
<a name="sunlight-16-line-240" href="#sunlight-16-line-240">240</a>
<a name="sunlight-16-line-241" href="#sunlight-16-line-241">241</a>
<a name="sunlight-16-line-242" href="#sunlight-16-line-242">242</a>
<a name="sunlight-16-line-243" href="#sunlight-16-line-243">243</a>
<a name="sunlight-16-line-244" href="#sunlight-16-line-244">244</a>
<a name="sunlight-16-line-245" href="#sunlight-16-line-245">245</a>
<a name="sunlight-16-line-246" href="#sunlight-16-line-246">246</a>
<a name="sunlight-16-line-247" href="#sunlight-16-line-247">247</a>
<a name="sunlight-16-line-248" href="#sunlight-16-line-248">248</a>
<a name="sunlight-16-line-249" href="#sunlight-16-line-249">249</a>
<a name="sunlight-16-line-250" href="#sunlight-16-line-250">250</a>
<a name="sunlight-16-line-251" href="#sunlight-16-line-251">251</a>
<a name="sunlight-16-line-252" href="#sunlight-16-line-252">252</a>
<a name="sunlight-16-line-253" href="#sunlight-16-line-253">253</a>
<a name="sunlight-16-line-254" href="#sunlight-16-line-254">254</a>
<a name="sunlight-16-line-255" href="#sunlight-16-line-255">255</a>
<a name="sunlight-16-line-256" href="#sunlight-16-line-256">256</a>
<a name="sunlight-16-line-257" href="#sunlight-16-line-257">257</a>
<a name="sunlight-16-line-258" href="#sunlight-16-line-258">258</a>
<a name="sunlight-16-line-259" href="#sunlight-16-line-259">259</a>
<a name="sunlight-16-line-260" href="#sunlight-16-line-260">260</a>
<a name="sunlight-16-line-261" href="#sunlight-16-line-261">261</a>
<a name="sunlight-16-line-262" href="#sunlight-16-line-262">262</a>
<a name="sunlight-16-line-263" href="#sunlight-16-line-263">263</a>
<a name="sunlight-16-line-264" href="#sunlight-16-line-264">264</a>
<a name="sunlight-16-line-265" href="#sunlight-16-line-265">265</a>
<a name="sunlight-16-line-266" href="#sunlight-16-line-266">266</a>
<a name="sunlight-16-line-267" href="#sunlight-16-line-267">267</a>
<a name="sunlight-16-line-268" href="#sunlight-16-line-268">268</a>
<a name="sunlight-16-line-269" href="#sunlight-16-line-269">269</a>
<a name="sunlight-16-line-270" href="#sunlight-16-line-270">270</a>
<a name="sunlight-16-line-271" href="#sunlight-16-line-271">271</a>
<a name="sunlight-16-line-272" href="#sunlight-16-line-272">272</a>
<a name="sunlight-16-line-273" href="#sunlight-16-line-273">273</a>
<a name="sunlight-16-line-274" href="#sunlight-16-line-274">274</a>
<a name="sunlight-16-line-275" href="#sunlight-16-line-275">275</a>
<a name="sunlight-16-line-276" href="#sunlight-16-line-276">276</a>
<a name="sunlight-16-line-277" href="#sunlight-16-line-277">277</a>
<a name="sunlight-16-line-278" href="#sunlight-16-line-278">278</a>
<a name="sunlight-16-line-279" href="#sunlight-16-line-279">279</a>
<a name="sunlight-16-line-280" href="#sunlight-16-line-280">280</a>
<a name="sunlight-16-line-281" href="#sunlight-16-line-281">281</a>
<a name="sunlight-16-line-282" href="#sunlight-16-line-282">282</a>
<a name="sunlight-16-line-283" href="#sunlight-16-line-283">283</a>
<a name="sunlight-16-line-284" href="#sunlight-16-line-284">284</a>
<a name="sunlight-16-line-285" href="#sunlight-16-line-285">285</a>
<a name="sunlight-16-line-286" href="#sunlight-16-line-286">286</a>
<a name="sunlight-16-line-287" href="#sunlight-16-line-287">287</a>
<a name="sunlight-16-line-288" href="#sunlight-16-line-288">288</a>
<a name="sunlight-16-line-289" href="#sunlight-16-line-289">289</a>
<a name="sunlight-16-line-290" href="#sunlight-16-line-290">290</a>
<a name="sunlight-16-line-291" href="#sunlight-16-line-291">291</a>
<a name="sunlight-16-line-292" href="#sunlight-16-line-292">292</a>
<a name="sunlight-16-line-293" href="#sunlight-16-line-293">293</a>
<a name="sunlight-16-line-294" href="#sunlight-16-line-294">294</a>
<a name="sunlight-16-line-295" href="#sunlight-16-line-295">295</a>
<a name="sunlight-16-line-296" href="#sunlight-16-line-296">296</a>
<a name="sunlight-16-line-297" href="#sunlight-16-line-297">297</a>
<a name="sunlight-16-line-298" href="#sunlight-16-line-298">298</a>
<a name="sunlight-16-line-299" href="#sunlight-16-line-299">299</a>
<a name="sunlight-16-line-300" href="#sunlight-16-line-300">300</a>
<a name="sunlight-16-line-301" href="#sunlight-16-line-301">301</a>
<a name="sunlight-16-line-302" href="#sunlight-16-line-302">302</a>
<a name="sunlight-16-line-303" href="#sunlight-16-line-303">303</a>
<a name="sunlight-16-line-304" href="#sunlight-16-line-304">304</a>
<a name="sunlight-16-line-305" href="#sunlight-16-line-305">305</a>
<a name="sunlight-16-line-306" href="#sunlight-16-line-306">306</a>
<a name="sunlight-16-line-307" href="#sunlight-16-line-307">307</a>
<a name="sunlight-16-line-308" href="#sunlight-16-line-308">308</a>
<a name="sunlight-16-line-309" href="#sunlight-16-line-309">309</a>
<a name="sunlight-16-line-310" href="#sunlight-16-line-310">310</a>
<a name="sunlight-16-line-311" href="#sunlight-16-line-311">311</a>
<a name="sunlight-16-line-312" href="#sunlight-16-line-312">312</a>
<a name="sunlight-16-line-313" href="#sunlight-16-line-313">313</a>
<a name="sunlight-16-line-314" href="#sunlight-16-line-314">314</a>
<a name="sunlight-16-line-315" href="#sunlight-16-line-315">315</a>
<a name="sunlight-16-line-316" href="#sunlight-16-line-316">316</a>
<a name="sunlight-16-line-317" href="#sunlight-16-line-317">317</a>
<a name="sunlight-16-line-318" href="#sunlight-16-line-318">318</a>
<a name="sunlight-16-line-319" href="#sunlight-16-line-319">319</a>
<a name="sunlight-16-line-320" href="#sunlight-16-line-320">320</a>
<a name="sunlight-16-line-321" href="#sunlight-16-line-321">321</a>
<a name="sunlight-16-line-322" href="#sunlight-16-line-322">322</a>
<a name="sunlight-16-line-323" href="#sunlight-16-line-323">323</a>
<a name="sunlight-16-line-324" href="#sunlight-16-line-324">324</a>
<a name="sunlight-16-line-325" href="#sunlight-16-line-325">325</a>
<a name="sunlight-16-line-326" href="#sunlight-16-line-326">326</a>
<a name="sunlight-16-line-327" href="#sunlight-16-line-327">327</a>
<a name="sunlight-16-line-328" href="#sunlight-16-line-328">328</a>
<a name="sunlight-16-line-329" href="#sunlight-16-line-329">329</a>
<a name="sunlight-16-line-330" href="#sunlight-16-line-330">330</a>
<a name="sunlight-16-line-331" href="#sunlight-16-line-331">331</a>
<a name="sunlight-16-line-332" href="#sunlight-16-line-332">332</a>
<a name="sunlight-16-line-333" href="#sunlight-16-line-333">333</a>
<a name="sunlight-16-line-334" href="#sunlight-16-line-334">334</a>
<a name="sunlight-16-line-335" href="#sunlight-16-line-335">335</a>
<a name="sunlight-16-line-336" href="#sunlight-16-line-336">336</a>
<a name="sunlight-16-line-337" href="#sunlight-16-line-337">337</a>
<a name="sunlight-16-line-338" href="#sunlight-16-line-338">338</a>
<a name="sunlight-16-line-339" href="#sunlight-16-line-339">339</a>
<a name="sunlight-16-line-340" href="#sunlight-16-line-340">340</a>
<a name="sunlight-16-line-341" href="#sunlight-16-line-341">341</a>
<a name="sunlight-16-line-342" href="#sunlight-16-line-342">342</a>
<a name="sunlight-16-line-343" href="#sunlight-16-line-343">343</a>
<a name="sunlight-16-line-344" href="#sunlight-16-line-344">344</a>
<a name="sunlight-16-line-345" href="#sunlight-16-line-345">345</a>
<a name="sunlight-16-line-346" href="#sunlight-16-line-346">346</a>
<a name="sunlight-16-line-347" href="#sunlight-16-line-347">347</a>
<a name="sunlight-16-line-348" href="#sunlight-16-line-348">348</a>
<a name="sunlight-16-line-349" href="#sunlight-16-line-349">349</a>
<a name="sunlight-16-line-350" href="#sunlight-16-line-350">350</a>
<a name="sunlight-16-line-351" href="#sunlight-16-line-351">351</a>
<a name="sunlight-16-line-352" href="#sunlight-16-line-352">352</a>
<a name="sunlight-16-line-353" href="#sunlight-16-line-353">353</a>
<a name="sunlight-16-line-354" href="#sunlight-16-line-354">354</a>
<a name="sunlight-16-line-355" href="#sunlight-16-line-355">355</a>
<a name="sunlight-16-line-356" href="#sunlight-16-line-356">356</a>
<a name="sunlight-16-line-357" href="#sunlight-16-line-357">357</a>
<a name="sunlight-16-line-358" href="#sunlight-16-line-358">358</a>
<a name="sunlight-16-line-359" href="#sunlight-16-line-359">359</a>
<a name="sunlight-16-line-360" href="#sunlight-16-line-360">360</a>
<a name="sunlight-16-line-361" href="#sunlight-16-line-361">361</a>
<a name="sunlight-16-line-362" href="#sunlight-16-line-362">362</a>
<a name="sunlight-16-line-363" href="#sunlight-16-line-363">363</a>
<a name="sunlight-16-line-364" href="#sunlight-16-line-364">364</a>
<a name="sunlight-16-line-365" href="#sunlight-16-line-365">365</a>
<a name="sunlight-16-line-366" href="#sunlight-16-line-366">366</a>
<a name="sunlight-16-line-367" href="#sunlight-16-line-367">367</a>
<a name="sunlight-16-line-368" href="#sunlight-16-line-368">368</a>
<a name="sunlight-16-line-369" href="#sunlight-16-line-369">369</a>
<a name="sunlight-16-line-370" href="#sunlight-16-line-370">370</a>
<a name="sunlight-16-line-371" href="#sunlight-16-line-371">371</a>
<a name="sunlight-16-line-372" href="#sunlight-16-line-372">372</a>
<a name="sunlight-16-line-373" href="#sunlight-16-line-373">373</a>
<a name="sunlight-16-line-374" href="#sunlight-16-line-374">374</a>
<a name="sunlight-16-line-375" href="#sunlight-16-line-375">375</a>
<a name="sunlight-16-line-376" href="#sunlight-16-line-376">376</a>
<a name="sunlight-16-line-377" href="#sunlight-16-line-377">377</a>
<a name="sunlight-16-line-378" href="#sunlight-16-line-378">378</a>
<a name="sunlight-16-line-379" href="#sunlight-16-line-379">379</a>
<a name="sunlight-16-line-380" href="#sunlight-16-line-380">380</a>
<a name="sunlight-16-line-381" href="#sunlight-16-line-381">381</a>
<a name="sunlight-16-line-382" href="#sunlight-16-line-382">382</a>
<a name="sunlight-16-line-383" href="#sunlight-16-line-383">383</a>
<a name="sunlight-16-line-384" href="#sunlight-16-line-384">384</a>
<a name="sunlight-16-line-385" href="#sunlight-16-line-385">385</a>
<a name="sunlight-16-line-386" href="#sunlight-16-line-386">386</a>
<a name="sunlight-16-line-387" href="#sunlight-16-line-387">387</a>
<a name="sunlight-16-line-388" href="#sunlight-16-line-388">388</a>
<a name="sunlight-16-line-389" href="#sunlight-16-line-389">389</a>
<a name="sunlight-16-line-390" href="#sunlight-16-line-390">390</a>
<a name="sunlight-16-line-391" href="#sunlight-16-line-391">391</a>
<a name="sunlight-16-line-392" href="#sunlight-16-line-392">392</a>
<a name="sunlight-16-line-393" href="#sunlight-16-line-393">393</a>
<a name="sunlight-16-line-394" href="#sunlight-16-line-394">394</a>
<a name="sunlight-16-line-395" href="#sunlight-16-line-395">395</a>
<a name="sunlight-16-line-396" href="#sunlight-16-line-396">396</a>
<a name="sunlight-16-line-397" href="#sunlight-16-line-397">397</a>
<a name="sunlight-16-line-398" href="#sunlight-16-line-398">398</a>
<a name="sunlight-16-line-399" href="#sunlight-16-line-399">399</a>
<a name="sunlight-16-line-400" href="#sunlight-16-line-400">400</a>
<a name="sunlight-16-line-401" href="#sunlight-16-line-401">401</a>
<a name="sunlight-16-line-402" href="#sunlight-16-line-402">402</a>
<a name="sunlight-16-line-403" href="#sunlight-16-line-403">403</a>
<a name="sunlight-16-line-404" href="#sunlight-16-line-404">404</a>
<a name="sunlight-16-line-405" href="#sunlight-16-line-405">405</a>
<a name="sunlight-16-line-406" href="#sunlight-16-line-406">406</a>
<a name="sunlight-16-line-407" href="#sunlight-16-line-407">407</a>
<a name="sunlight-16-line-408" href="#sunlight-16-line-408">408</a>
<a name="sunlight-16-line-409" href="#sunlight-16-line-409">409</a>
<a name="sunlight-16-line-410" href="#sunlight-16-line-410">410</a>
<a name="sunlight-16-line-411" href="#sunlight-16-line-411">411</a>
<a name="sunlight-16-line-412" href="#sunlight-16-line-412">412</a>
<a name="sunlight-16-line-413" href="#sunlight-16-line-413">413</a>
<a name="sunlight-16-line-414" href="#sunlight-16-line-414">414</a>
<a name="sunlight-16-line-415" href="#sunlight-16-line-415">415</a>
<a name="sunlight-16-line-416" href="#sunlight-16-line-416">416</a>
<a name="sunlight-16-line-417" href="#sunlight-16-line-417">417</a>
<a name="sunlight-16-line-418" href="#sunlight-16-line-418">418</a>
<a name="sunlight-16-line-419" href="#sunlight-16-line-419">419</a>
<a name="sunlight-16-line-420" href="#sunlight-16-line-420">420</a>
<a name="sunlight-16-line-421" href="#sunlight-16-line-421">421</a>
<a name="sunlight-16-line-422" href="#sunlight-16-line-422">422</a>
<a name="sunlight-16-line-423" href="#sunlight-16-line-423">423</a>
<a name="sunlight-16-line-424" href="#sunlight-16-line-424">424</a>
<a name="sunlight-16-line-425" href="#sunlight-16-line-425">425</a>
<a name="sunlight-16-line-426" href="#sunlight-16-line-426">426</a>
<a name="sunlight-16-line-427" href="#sunlight-16-line-427">427</a>
<a name="sunlight-16-line-428" href="#sunlight-16-line-428">428</a>
<a name="sunlight-16-line-429" href="#sunlight-16-line-429">429</a>
<a name="sunlight-16-line-430" href="#sunlight-16-line-430">430</a>
<a name="sunlight-16-line-431" href="#sunlight-16-line-431">431</a>
<a name="sunlight-16-line-432" href="#sunlight-16-line-432">432</a>
<a name="sunlight-16-line-433" href="#sunlight-16-line-433">433</a>
<a name="sunlight-16-line-434" href="#sunlight-16-line-434">434</a>
<a name="sunlight-16-line-435" href="#sunlight-16-line-435">435</a>
<a name="sunlight-16-line-436" href="#sunlight-16-line-436">436</a>
<a name="sunlight-16-line-437" href="#sunlight-16-line-437">437</a>
<a name="sunlight-16-line-438" href="#sunlight-16-line-438">438</a>
<a name="sunlight-16-line-439" href="#sunlight-16-line-439">439</a>
<a name="sunlight-16-line-440" href="#sunlight-16-line-440">440</a>
<a name="sunlight-16-line-441" href="#sunlight-16-line-441">441</a>
<a name="sunlight-16-line-442" href="#sunlight-16-line-442">442</a>
<a name="sunlight-16-line-443" href="#sunlight-16-line-443">443</a>
<a name="sunlight-16-line-444" href="#sunlight-16-line-444">444</a>
<a name="sunlight-16-line-445" href="#sunlight-16-line-445">445</a>
<a name="sunlight-16-line-446" href="#sunlight-16-line-446">446</a>
<a name="sunlight-16-line-447" href="#sunlight-16-line-447">447</a>
<a name="sunlight-16-line-448" href="#sunlight-16-line-448">448</a>
<a name="sunlight-16-line-449" href="#sunlight-16-line-449">449</a>
<a name="sunlight-16-line-450" href="#sunlight-16-line-450">450</a>
<a name="sunlight-16-line-451" href="#sunlight-16-line-451">451</a>
<a name="sunlight-16-line-452" href="#sunlight-16-line-452">452</a>
<a name="sunlight-16-line-453" href="#sunlight-16-line-453">453</a>
<a name="sunlight-16-line-454" href="#sunlight-16-line-454">454</a>
<a name="sunlight-16-line-455" href="#sunlight-16-line-455">455</a>
</div><pre class="sunlight-highlight-actionscript sunlight-highlighted"><span class="sunlight-actionscript"><span class="sunlight-comment">//&nbsp;Copyright:&nbsp;Hiroshi&nbsp;Ichikawa&nbsp;&lt;http://gimite.net/en/&gt;</span>
<span class="sunlight-comment">//&nbsp;License:&nbsp;New&nbsp;BSD&nbsp;License</span>
<span class="sunlight-comment">//&nbsp;Reference:&nbsp;http://dev.w3.org/html5/websockets/</span>
<span class="sunlight-comment">//&nbsp;Reference:&nbsp;http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76</span>

<span class="sunlight-keyword">package</span>&nbsp;<span class="sunlight-punctuation">{</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">adobe</span><span class="sunlight-operator">.</span><span class="sunlight-ident">net</span><span class="sunlight-operator">.</span><span class="sunlight-ident">proxies</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">RFC2817Socket</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">gsolo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">encryption</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">MD5</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSConfig</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSEngine</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSSecurityParameters</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">com</span><span class="sunlight-operator">.</span><span class="sunlight-ident">hurlant</span><span class="sunlight-operator">.</span><span class="sunlight-ident">crypto</span><span class="sunlight-operator">.</span><span class="sunlight-ident">tls</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TLSSocket</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">display</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">events</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">external</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">net</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">system</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">flash</span><span class="sunlight-operator">.</span><span class="sunlight-ident">utils</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">controls</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">core</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">events</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">import</span>&nbsp;<span class="sunlight-ident">mx</span><span class="sunlight-operator">.</span><span class="sunlight-ident">utils</span><span class="sunlight-operator">.</span><span class="sunlight-operator">*</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">WebSocket</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">EventDispatcher</span>&nbsp;<span class="sunlight-punctuation">{</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">OPEN</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">CLOSING</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Socket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">TLSSocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">TLSConfig</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Socket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">scheme</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">host</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">port</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">path</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">headerState</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">readyState</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">expectedDigest</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">IWebSocketLogger</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">WebSocket</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">proxyHost</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">proxyPort</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">IWebSocketLogger</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">logger</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">id</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">initNoiseChars</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-operator">.</span><span class="sunlight-ident">match</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/^(\w+):\/\/([^\/:]+)(:(\d+))?(\/.*)?(\?.*)?$/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"SYNTAX_ERR:&nbsp;invalid&nbsp;url:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">host</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">port</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">parseInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">4</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-string">"80"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">path</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-string">"/"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">6</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">origin</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">cookie</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;if&nbsp;present&nbsp;and&nbsp;not&nbsp;the&nbsp;empty&nbsp;string,&nbsp;headers&nbsp;MUST&nbsp;end&nbsp;with&nbsp;\r\n</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;headers&nbsp;should&nbsp;be&nbsp;zero&nbsp;or&nbsp;more&nbsp;complete&nbsp;lines,&nbsp;for&nbsp;example</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;"Header1:&nbsp;xxx\r\nHeader2:&nbsp;yyyy\r\n"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">headers</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">proxyHost</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-keyword">null</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">proxyPort</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"wss"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"wss&nbsp;with&nbsp;proxy&nbsp;is&nbsp;not&nbsp;supported"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">RFC2817Socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">RFC2817Socket</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">setProxyInfo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">proxyHost</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">proxyPort</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ProgressEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SOCKET_DATA</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">proxySocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Socket</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"wss"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">TLSConfig</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">TLSEngine</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CLIENT</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">TLSSecurityParameters</span><span class="sunlight-operator">.</span><span class="sunlight-ident">PROTOCOL_VERSION</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">.</span><span class="sunlight-ident">trustAllCertificates</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ignoreCommonNameMismatch</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsSocket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">TLSSocket</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ProgressEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SOCKET_DATA</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ProgressEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SOCKET_DATA</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Event</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CLOSE</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketClose</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">Event</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CONNECT</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketConnect</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">IOErrorEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">IO_ERROR</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketIoError</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">addEventListener</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">SecurityErrorEvent</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SECURITY_ERROR</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">onSocketSecurityError</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">rawSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">connect</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">host</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">port</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;&nbsp;This&nbsp;WebSocket's&nbsp;ID.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">getId</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">id</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;this&nbsp;WebSocket's&nbsp;readyState.
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">getReadyState</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readyState</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">send</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">encData</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">decodeURIComponent</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">encData</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">OPEN</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"sent:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CLOSING</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//&nbsp;not&nbsp;sure&nbsp;whether&nbsp;it&nbsp;should&nbsp;include&nbsp;\x00&nbsp;and&nbsp;\xff</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"invalid&nbsp;state"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">isError</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Boolean</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"close"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">OPEN</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-operator">!</span><span class="sunlight-ident">isError</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">ex</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Error</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">isError</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-string">"error"</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"close"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketConnect</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Event</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"connected"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">scheme</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"wss"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"starting&nbsp;SSL/TLS"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">tlsSocket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">startTLS</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">rawSocket</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">host</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">tlsConfig</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">hostValue</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">host</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">port</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">80</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-string">""</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">":"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">port</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key1</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">generateKey</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">generateKey</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">generateKey3</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">expectedDigest</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">getSecurityDigest</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">opt</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">protocol</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">opt</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-string">"Sec-WebSocket-Protocol:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"\r\n"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;if&nbsp;caller&nbsp;passes&nbsp;additional&nbsp;headers&nbsp;they&nbsp;must&nbsp;end&nbsp;with&nbsp;"\r\n"</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headers</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">opt</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">headers</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">StringUtil</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substitute</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"GET&nbsp;{0}&nbsp;HTTP/1.1\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Upgrade:&nbsp;WebSocket\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Connection:&nbsp;Upgrade\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Host:&nbsp;{1}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Origin:&nbsp;{2}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Cookie:&nbsp;{3}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Sec-WebSocket-Key1:&nbsp;{4}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Sec-WebSocket-Key2:&nbsp;{5}\r\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"{6}"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"\r\n"</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">path</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">hostValue</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">cookie</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">opt</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"request&nbsp;header:\n"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">req</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"sent&nbsp;key3:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">writeBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">flush</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketClose</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">Event</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"closed"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"close"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketIoError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">IOErrorEvent</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"cannot&nbsp;connect&nbsp;to&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(IoError)"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"error&nbsp;communicating&nbsp;with&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(IoError)"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketSecurityError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">SecurityErrorEvent</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"cannot&nbsp;connect&nbsp;to&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(SecurityError)\n"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"make&nbsp;sure&nbsp;the&nbsp;server&nbsp;is&nbsp;running&nbsp;and&nbsp;Flash&nbsp;socket&nbsp;policy&nbsp;file&nbsp;is&nbsp;correctly&nbsp;placed"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"error&nbsp;communicating&nbsp;with&nbsp;Web&nbsp;Socket&nbsp;server&nbsp;at&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">url</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;(SecurityError)"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-ident">CLOSED</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">error</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">CONNECTING</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">onSocketData</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">event</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ProgressEvent</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;try&nbsp;to&nbsp;find&nbsp;"\r\n\r\n"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x0d</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">headerState</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x0a</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">headerState</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">headerStr</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"response&nbsp;header:\n"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">headerStr</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">validateHeader</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerStr</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">15</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">replyDigest</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">16</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"reply&nbsp;digest:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">replyDigest</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">replyDigest</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">expectedDigest</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"digest&nbsp;doesn't&nbsp;match:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">replyDigest</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;!=&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">expectedDigest</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">headerState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">OPEN</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"open"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0xff</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"data&nbsp;must&nbsp;start&nbsp;with&nbsp;\\x00"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"received:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">dispatchEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">WebSocketEvent</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"message"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-globalFunction">encodeURIComponent</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">data</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0xff</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-comment">//&nbsp;closing</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"received&nbsp;closing&nbsp;packet"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">close</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">validateHeader</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">headerStr</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Boolean</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">headerStr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">split</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/\r\n/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">match</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/^HTTP\/1.1&nbsp;101&nbsp;/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"bad&nbsp;response:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Object</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">lowerHeader</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Object</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">continue</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">Array</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">match</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/^(\S+):&nbsp;(.*)$/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"failed&nbsp;to&nbsp;parse&nbsp;response&nbsp;header&nbsp;line:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">lines</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toLowerCase</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toLowerCase</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toLowerCase</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"upgrade"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-string">"websocket"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"invalid&nbsp;Upgrade:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"Upgrade"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"connection"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-string">"upgrade"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"invalid&nbsp;Connection:&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"Connection"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"sec-websocket-origin"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"websocket-origin"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"The&nbsp;WebSocket&nbsp;server&nbsp;speaks&nbsp;old&nbsp;WebSocket&nbsp;protocol,&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"which&nbsp;is&nbsp;not&nbsp;supported&nbsp;by&nbsp;web-socket-js.&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"It&nbsp;requires&nbsp;WebSocket&nbsp;protocol&nbsp;76&nbsp;or&nbsp;later.&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"Try&nbsp;newer&nbsp;version&nbsp;of&nbsp;the&nbsp;server&nbsp;if&nbsp;available."</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"header&nbsp;Sec-WebSocket-Origin&nbsp;is&nbsp;missing"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">resOrigin</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">lowerHeader</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"sec-websocket-origin"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">resOrigin</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">origin</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"origin&nbsp;doesn't&nbsp;match:&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">resOrigin</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'&nbsp;!=&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">origin</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"sec-websocket-protocol"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">!=</span>&nbsp;<span class="sunlight-ident">protocol</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">onError</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"protocol&nbsp;doesn't&nbsp;match:&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">header</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"websocket-protocol"</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'&nbsp;!=&nbsp;'"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">protocol</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"'"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">removeBufferBefore</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">return</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">nextBuffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">nextBuffer</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">nextBuffer</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">initNoiseChars</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">noiseChars</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">Array</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0x21</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;=</span>&nbsp;<span class="sunlight-number">0x2f</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">.</span><span class="sunlight-ident">push</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">j</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0x3a</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">&lt;=</span>&nbsp;<span class="sunlight-number">0x7a</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">.</span><span class="sunlight-ident">push</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">generateKey</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">12</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalObject">uint</span><span class="sunlight-operator">.</span><span class="sunlight-ident">MAX_VALUE</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">number</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">number</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">noises</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">12</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">noises</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">char</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">noiseChars</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">key</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">char</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">j</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">pos</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">key</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">substr</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">pos</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">generateKey3</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">8</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">key3</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">255</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">getSecurityDigest</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key1</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key2</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes1</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">keyToBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes2</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">keyToBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key2</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">MD5</span><span class="sunlight-operator">.</span><span class="sunlight-ident">rstr_md5</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes1</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">bytes2</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">key3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">keyToBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">keyNum</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">parseInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">replace</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/[^\d]/g</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">key</span><span class="sunlight-operator">.</span><span class="sunlight-ident">charAt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">resultNum</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">keyNum</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-ident">spaces</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">j</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">&gt;=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">--</span><span class="sunlight-ident">j</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bytes</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">resultNum</span>&nbsp;<span class="sunlight-operator">&gt;&gt;</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">j</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-number">8</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;Writes&nbsp;byte&nbsp;sequence&nbsp;to&nbsp;socket.</span>
&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;bytes&nbsp;is&nbsp;String&nbsp;in&nbsp;special&nbsp;format&nbsp;where&nbsp;bytes[i]&nbsp;is&nbsp;i-th&nbsp;byte,&nbsp;not&nbsp;i-th&nbsp;character.</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">writeBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">socket</span><span class="sunlight-operator">.</span><span class="sunlight-ident">writeByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">charCodeAt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;Reads&nbsp;specified&nbsp;number&nbsp;of&nbsp;bytes&nbsp;from&nbsp;buffer,&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;special&nbsp;format&nbsp;String</span>
&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;where&nbsp;bytes[i]&nbsp;is&nbsp;i-th&nbsp;byte&nbsp;(not&nbsp;i-th&nbsp;character).</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">readBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;&amp;&nbsp;0xff&nbsp;is&nbsp;to&nbsp;make&nbsp;\x80-\xff&nbsp;positive&nbsp;number.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bytes</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-operator">.</span><span class="sunlight-ident">fromCharCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readByte</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-number">0xff</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-operator">:</span><span class="sunlight-named-ident">ByteArray</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">start</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">numBytes</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;Workaround&nbsp;of&nbsp;a&nbsp;bug&nbsp;of&nbsp;ByteArray#readUTFBytes()&nbsp;that&nbsp;bytes&nbsp;after&nbsp;"\x00"&nbsp;is&nbsp;discarded.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">buffer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0x00</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">data</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">"\x00"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">data</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readUTFBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">start</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">numBytes</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">buffer</span><span class="sunlight-operator">.</span><span class="sunlight-ident">position</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">data</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">randomInt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">min</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">max</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">uint</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">min</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-globalObject">Math</span><span class="sunlight-operator">.</span><span class="sunlight-ident">floor</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalObject">Math</span><span class="sunlight-operator">.</span><span class="sunlight-ident">random</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-globalFunction">Number</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">max</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">min</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">fatal</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">error</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">message</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;<span class="sunlight-comment">//&nbsp;for&nbsp;debug</span>
&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">dumpBytes</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bytes</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span><span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">output</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">:</span><span class="sunlight-globalObject">int</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-operator">++</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">output</span>&nbsp;<span class="sunlight-operator">+=</span>&nbsp;<span class="sunlight-ident">bytes</span><span class="sunlight-operator">.</span><span class="sunlight-ident">charCodeAt</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">",&nbsp;"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">logger</span><span class="sunlight-operator">.</span><span class="sunlight-ident">log</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">output</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

<span class="sunlight-punctuation">}</span>

<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">//other&nbsp;tests</span>
<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Foo</span>&nbsp;<span class="sunlight-keyword">implements</span>&nbsp;<span class="sunlight-named-ident">IInterface1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface3</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2>batch1.bat</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-17-line-1" href="#sunlight-17-line-1">1</a>
<a name="sunlight-17-line-2" href="#sunlight-17-line-2">2</a>
<a name="sunlight-17-line-3" href="#sunlight-17-line-3">3</a>
<a name="sunlight-17-line-4" href="#sunlight-17-line-4">4</a>
<a name="sunlight-17-line-5" href="#sunlight-17-line-5">5</a>
<a name="sunlight-17-line-6" href="#sunlight-17-line-6">6</a>
<a name="sunlight-17-line-7" href="#sunlight-17-line-7">7</a>
<a name="sunlight-17-line-8" href="#sunlight-17-line-8">8</a>
<a name="sunlight-17-line-9" href="#sunlight-17-line-9">9</a>
<a name="sunlight-17-line-10" href="#sunlight-17-line-10">10</a>
<a name="sunlight-17-line-11" href="#sunlight-17-line-11">11</a>
<a name="sunlight-17-line-12" href="#sunlight-17-line-12">12</a>
<a name="sunlight-17-line-13" href="#sunlight-17-line-13">13</a>
<a name="sunlight-17-line-14" href="#sunlight-17-line-14">14</a>
<a name="sunlight-17-line-15" href="#sunlight-17-line-15">15</a>
<a name="sunlight-17-line-16" href="#sunlight-17-line-16">16</a>
<a name="sunlight-17-line-17" href="#sunlight-17-line-17">17</a>
<a name="sunlight-17-line-18" href="#sunlight-17-line-18">18</a>
<a name="sunlight-17-line-19" href="#sunlight-17-line-19">19</a>
<a name="sunlight-17-line-20" href="#sunlight-17-line-20">20</a>
<a name="sunlight-17-line-21" href="#sunlight-17-line-21">21</a>
<a name="sunlight-17-line-22" href="#sunlight-17-line-22">22</a>
<a name="sunlight-17-line-23" href="#sunlight-17-line-23">23</a>
<a name="sunlight-17-line-24" href="#sunlight-17-line-24">24</a>
<a name="sunlight-17-line-25" href="#sunlight-17-line-25">25</a>
<a name="sunlight-17-line-26" href="#sunlight-17-line-26">26</a>
<a name="sunlight-17-line-27" href="#sunlight-17-line-27">27</a>
<a name="sunlight-17-line-28" href="#sunlight-17-line-28">28</a>
<a name="sunlight-17-line-29" href="#sunlight-17-line-29">29</a>
<a name="sunlight-17-line-30" href="#sunlight-17-line-30">30</a>
<a name="sunlight-17-line-31" href="#sunlight-17-line-31">31</a>
<a name="sunlight-17-line-32" href="#sunlight-17-line-32">32</a>
<a name="sunlight-17-line-33" href="#sunlight-17-line-33">33</a>
<a name="sunlight-17-line-34" href="#sunlight-17-line-34">34</a>
<a name="sunlight-17-line-35" href="#sunlight-17-line-35">35</a>
<a name="sunlight-17-line-36" href="#sunlight-17-line-36">36</a>
<a name="sunlight-17-line-37" href="#sunlight-17-line-37">37</a>
<a name="sunlight-17-line-38" href="#sunlight-17-line-38">38</a>
<a name="sunlight-17-line-39" href="#sunlight-17-line-39">39</a>
</div><pre class="sunlight-highlight-batch sunlight-highlighted"><span class="sunlight-batch"><span class="sunlight-comment">REM&nbsp;http://en.wikipedia.org/wiki/Batch_file#Advanced_batch_example_-_conditional_shutdown</span>
<span class="sunlight-operator">@</span><span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">off</span>
<span class="sunlight-keyword">color</span>&nbsp;<span class="sunlight-number">3</span>
<span class="sunlight-keyword">title</span>&nbsp;<span class="sunlight-ident">Conditional</span>&nbsp;<span class="sunlight-ident">Shutdown</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">name</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">name</span><span class="sunlight-operator">:</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">start</span>
<span class="sunlight-keyword">cls</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">Hi</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-variable">%name%</span>
<span class="sunlight-keyword">echo</span><span class="sunlight-ident">.</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-ident">.Shutdown</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-ident">.Quit</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">invalid_choice</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">choice</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">your</span>&nbsp;<span class="sunlight-ident">choice</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span><span class="sunlight-number">2</span><span class="sunlight-operator">:</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%choice%</span><span class="sunlight-operator">==</span><span class="sunlight-number">1</span>&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">shutdown</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%choice%</span><span class="sunlight-operator">==</span><span class="sunlight-number">2</span>&nbsp;<span class="sunlight-keyword">exit</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">invalid</span>&nbsp;<span class="sunlight-ident">choice</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-variable">%choice%</span>
<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">invalid_choice</span>

<span class="sunlight-operator">:</span><span class="sunlight-label">shutdown</span>
<span class="sunlight-keyword">cls</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">sec</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">number</span>&nbsp;<span class="sunlight-ident">of</span>&nbsp;<span class="sunlight-ident">seconds</span>&nbsp;<span class="sunlight-ident">that</span>&nbsp;<span class="sunlight-ident">you</span>&nbsp;<span class="sunlight-ident">wish</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">computer</span>&nbsp;<span class="sunlight-ident">to</span>&nbsp;<span class="sunlight-ident">shutdown</span>&nbsp;<span class="sunlight-ident">in</span><span class="sunlight-operator">:</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">message</span><span class="sunlight-operator">=</span><span class="sunlight-ident">enter</span>&nbsp;<span class="sunlight-ident">the</span>&nbsp;<span class="sunlight-ident">shutdown</span>&nbsp;<span class="sunlight-ident">message</span>&nbsp;<span class="sunlight-ident">you</span>&nbsp;<span class="sunlight-ident">wish</span>&nbsp;<span class="sunlight-ident">to</span>&nbsp;<span class="sunlight-ident">display</span><span class="sunlight-operator">:</span>
<span class="sunlight-keyword">shutdown</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">t</span>&nbsp;<span class="sunlight-variable">%sec%</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">c</span>&nbsp;<span class="sunlight-string">"%message%"</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">shutdown</span>&nbsp;<span class="sunlight-ident">initiated</span>&nbsp;<span class="sunlight-ident">at</span>&nbsp;<span class="sunlight-variable">%time%</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">cancel</span><span class="sunlight-operator">=</span><span class="sunlight-ident">type</span>&nbsp;<span class="sunlight-ident">cancel</span>&nbsp;<span class="sunlight-ident">to</span>&nbsp;<span class="sunlight-ident">stop</span>&nbsp;<span class="sunlight-ident">shutdown</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%cancel%</span><span class="sunlight-operator">==</span><span class="sunlight-ident">cancel</span>&nbsp;<span class="sunlight-keyword">shutdown</span>&nbsp;<span class="sunlight-punctuation">-</span><span class="sunlight-ident">a</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%cancel%</span><span class="sunlight-operator">==</span><span class="sunlight-ident">cancel</span>&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">start</span>

<span class="sunlight-comment">::&nbsp;http://en.wikipedia.org/wiki/Batch_file#Text_output_with_stripped_CR.2FLF</span>
<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-operator">=</span><span class="sunlight-ident">Line</span>&nbsp;<span class="sunlight-number">1</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-operator">|</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">p</span>&nbsp;<span class="sunlight-ident">tmp</span><span class="sunlight-operator">=</span><span class="sunlight-string">"%foo%"</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">Line</span>&nbsp;<span class="sunlight-number">2</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">Line</span>&nbsp;<span class="sunlight-number">3</span>

<span class="sunlight-comment">REM&nbsp;http://en.wikipedia.org/wiki/Batch_file#Sleep_.2F_Scripted_Delay</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-string">"tokens=1-3&nbsp;delims=:.,"</span>&nbsp;<span class="sunlight-variable">%%a</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-string">"%time%"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">h</span><span class="sunlight-operator">=</span><span class="sunlight-variable">%%a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%b%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%c%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">end</span><span class="sunlight-operator">=</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">h</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">s</span><span class="sunlight-operator">+</span><span class="sunlight-variable">%1</span>
<span class="sunlight-operator">:</span><span class="sunlight-label">wait</span>
<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-string">"tokens=1-3&nbsp;delims=:.,"</span>&nbsp;<span class="sunlight-variable">%%a</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-string">"%time%"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">do</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">a</span>&nbsp;<span class="sunlight-ident">h</span><span class="sunlight-operator">=</span><span class="sunlight-variable">%%a</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">m</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%b%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">s</span><span class="sunlight-operator">=</span><span class="sunlight-number">1</span><span class="sunlight-variable">%%c%%100</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">current</span><span class="sunlight-operator">=</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">h</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">m</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">*</span><span class="sunlight-number">60</span><span class="sunlight-operator">+</span><span class="sunlight-ident">s</span>
<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-variable">%current%</span>&nbsp;<span class="sunlight-keyword">lss</span>&nbsp;<span class="sunlight-variable">%end%</span>&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">wait</span>
</span></pre></div></div>
<h2>batch2.bat</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-18-line-1" href="#sunlight-18-line-1">1</a>
<a name="sunlight-18-line-2" href="#sunlight-18-line-2">2</a>
<a name="sunlight-18-line-3" href="#sunlight-18-line-3">3</a>
<a name="sunlight-18-line-4" href="#sunlight-18-line-4">4</a>
<a name="sunlight-18-line-5" href="#sunlight-18-line-5">5</a>
</div><pre class="sunlight-highlight-batch sunlight-highlighted"><span class="sunlight-batch"><span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-label">label1</span>

<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">This</span>&nbsp;<span class="sunlight-ident">should</span>&nbsp;<span class="sunlight-ident">not</span>&nbsp;<span class="sunlight-ident">be</span>&nbsp;<span class="sunlight-ident">printed</span><span class="sunlight-ident">.</span>
&nbsp;&nbsp;<span class="sunlight-operator">:</span><span class="sunlight-label">label1</span>
<span class="sunlight-keyword">echo</span>&nbsp;<span class="sunlight-ident">This</span>&nbsp;<span class="sunlight-ident">should</span>&nbsp;<span class="sunlight-ident">be</span>&nbsp;<span class="sunlight-ident">printed</span><span class="sunlight-ident">.</span>
</span></pre></div></div>
<h2>brainfuck.bf</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-19-line-1" href="#sunlight-19-line-1">1</a>
<a name="sunlight-19-line-2" href="#sunlight-19-line-2">2</a>
<a name="sunlight-19-line-3" href="#sunlight-19-line-3">3</a>
<a name="sunlight-19-line-4" href="#sunlight-19-line-4">4</a>
<a name="sunlight-19-line-5" href="#sunlight-19-line-5">5</a>
<a name="sunlight-19-line-6" href="#sunlight-19-line-6">6</a>
</div><pre class="sunlight-highlight-brainfuck sunlight-highlighted"><span class="sunlight-brainfuck"><span class="sunlight-openLoop">[</span>&nbsp;http://bf<span class="sunlight-write">.</span>doleczek<span class="sunlight-write">.</span>pl&nbsp;<span class="sunlight-closeLoop">]</span>
wypisuje&nbsp;kody&nbsp;wpisanych&nbsp;znakw

<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span>
<span class="sunlight-openLoop">[</span><span class="sunlight-read">,</span><span class="sunlight-write">.</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-write">.</span><span class="sunlight-increment">&gt;</span><span class="sunlight-write">.</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-openLoop">[</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span>
<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-increment">&gt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-increment">&gt;</span><span class="sunlight-increment">&gt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-increment">&gt;</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-openLoop">[</span><span class="sunlight-write">.</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span>&nbsp;<span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-incrementPointer">+</span><span class="sunlight-write">.</span><span class="sunlight-openLoop">[</span><span class="sunlight-decrementPointer">-</span><span class="sunlight-closeLoop">]</span><span class="sunlight-decrement">&lt;</span><span class="sunlight-closeLoop">]</span>
</span></pre></div></div>
<h2>csharp1.cs</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-20-line-1" href="#sunlight-20-line-1">1</a>
<a name="sunlight-20-line-2" href="#sunlight-20-line-2">2</a>
<a name="sunlight-20-line-3" href="#sunlight-20-line-3">3</a>
<a name="sunlight-20-line-4" href="#sunlight-20-line-4">4</a>
<a name="sunlight-20-line-5" href="#sunlight-20-line-5">5</a>
<a name="sunlight-20-line-6" href="#sunlight-20-line-6">6</a>
<a name="sunlight-20-line-7" href="#sunlight-20-line-7">7</a>
<a name="sunlight-20-line-8" href="#sunlight-20-line-8">8</a>
<a name="sunlight-20-line-9" href="#sunlight-20-line-9">9</a>
<a name="sunlight-20-line-10" href="#sunlight-20-line-10">10</a>
<a name="sunlight-20-line-11" href="#sunlight-20-line-11">11</a>
<a name="sunlight-20-line-12" href="#sunlight-20-line-12">12</a>
<a name="sunlight-20-line-13" href="#sunlight-20-line-13">13</a>
<a name="sunlight-20-line-14" href="#sunlight-20-line-14">14</a>
<a name="sunlight-20-line-15" href="#sunlight-20-line-15">15</a>
<a name="sunlight-20-line-16" href="#sunlight-20-line-16">16</a>
<a name="sunlight-20-line-17" href="#sunlight-20-line-17">17</a>
<a name="sunlight-20-line-18" href="#sunlight-20-line-18">18</a>
<a name="sunlight-20-line-19" href="#sunlight-20-line-19">19</a>
<a name="sunlight-20-line-20" href="#sunlight-20-line-20">20</a>
<a name="sunlight-20-line-21" href="#sunlight-20-line-21">21</a>
<a name="sunlight-20-line-22" href="#sunlight-20-line-22">22</a>
<a name="sunlight-20-line-23" href="#sunlight-20-line-23">23</a>
<a name="sunlight-20-line-24" href="#sunlight-20-line-24">24</a>
<a name="sunlight-20-line-25" href="#sunlight-20-line-25">25</a>
<a name="sunlight-20-line-26" href="#sunlight-20-line-26">26</a>
<a name="sunlight-20-line-27" href="#sunlight-20-line-27">27</a>
<a name="sunlight-20-line-28" href="#sunlight-20-line-28">28</a>
<a name="sunlight-20-line-29" href="#sunlight-20-line-29">29</a>
<a name="sunlight-20-line-30" href="#sunlight-20-line-30">30</a>
<a name="sunlight-20-line-31" href="#sunlight-20-line-31">31</a>
<a name="sunlight-20-line-32" href="#sunlight-20-line-32">32</a>
<a name="sunlight-20-line-33" href="#sunlight-20-line-33">33</a>
<a name="sunlight-20-line-34" href="#sunlight-20-line-34">34</a>
<a name="sunlight-20-line-35" href="#sunlight-20-line-35">35</a>
<a name="sunlight-20-line-36" href="#sunlight-20-line-36">36</a>
<a name="sunlight-20-line-37" href="#sunlight-20-line-37">37</a>
<a name="sunlight-20-line-38" href="#sunlight-20-line-38">38</a>
<a name="sunlight-20-line-39" href="#sunlight-20-line-39">39</a>
<a name="sunlight-20-line-40" href="#sunlight-20-line-40">40</a>
<a name="sunlight-20-line-41" href="#sunlight-20-line-41">41</a>
<a name="sunlight-20-line-42" href="#sunlight-20-line-42">42</a>
<a name="sunlight-20-line-43" href="#sunlight-20-line-43">43</a>
<a name="sunlight-20-line-44" href="#sunlight-20-line-44">44</a>
<a name="sunlight-20-line-45" href="#sunlight-20-line-45">45</a>
<a name="sunlight-20-line-46" href="#sunlight-20-line-46">46</a>
<a name="sunlight-20-line-47" href="#sunlight-20-line-47">47</a>
<a name="sunlight-20-line-48" href="#sunlight-20-line-48">48</a>
<a name="sunlight-20-line-49" href="#sunlight-20-line-49">49</a>
<a name="sunlight-20-line-50" href="#sunlight-20-line-50">50</a>
<a name="sunlight-20-line-51" href="#sunlight-20-line-51">51</a>
<a name="sunlight-20-line-52" href="#sunlight-20-line-52">52</a>
<a name="sunlight-20-line-53" href="#sunlight-20-line-53">53</a>
<a name="sunlight-20-line-54" href="#sunlight-20-line-54">54</a>
<a name="sunlight-20-line-55" href="#sunlight-20-line-55">55</a>
<a name="sunlight-20-line-56" href="#sunlight-20-line-56">56</a>
<a name="sunlight-20-line-57" href="#sunlight-20-line-57">57</a>
<a name="sunlight-20-line-58" href="#sunlight-20-line-58">58</a>
<a name="sunlight-20-line-59" href="#sunlight-20-line-59">59</a>
<a name="sunlight-20-line-60" href="#sunlight-20-line-60">60</a>
<a name="sunlight-20-line-61" href="#sunlight-20-line-61">61</a>
<a name="sunlight-20-line-62" href="#sunlight-20-line-62">62</a>
<a name="sunlight-20-line-63" href="#sunlight-20-line-63">63</a>
<a name="sunlight-20-line-64" href="#sunlight-20-line-64">64</a>
<a name="sunlight-20-line-65" href="#sunlight-20-line-65">65</a>
<a name="sunlight-20-line-66" href="#sunlight-20-line-66">66</a>
<a name="sunlight-20-line-67" href="#sunlight-20-line-67">67</a>
<a name="sunlight-20-line-68" href="#sunlight-20-line-68">68</a>
<a name="sunlight-20-line-69" href="#sunlight-20-line-69">69</a>
<a name="sunlight-20-line-70" href="#sunlight-20-line-70">70</a>
<a name="sunlight-20-line-71" href="#sunlight-20-line-71">71</a>
<a name="sunlight-20-line-72" href="#sunlight-20-line-72">72</a>
<a name="sunlight-20-line-73" href="#sunlight-20-line-73">73</a>
<a name="sunlight-20-line-74" href="#sunlight-20-line-74">74</a>
<a name="sunlight-20-line-75" href="#sunlight-20-line-75">75</a>
<a name="sunlight-20-line-76" href="#sunlight-20-line-76">76</a>
<a name="sunlight-20-line-77" href="#sunlight-20-line-77">77</a>
<a name="sunlight-20-line-78" href="#sunlight-20-line-78">78</a>
<a name="sunlight-20-line-79" href="#sunlight-20-line-79">79</a>
<a name="sunlight-20-line-80" href="#sunlight-20-line-80">80</a>
<a name="sunlight-20-line-81" href="#sunlight-20-line-81">81</a>
<a name="sunlight-20-line-82" href="#sunlight-20-line-82">82</a>
<a name="sunlight-20-line-83" href="#sunlight-20-line-83">83</a>
<a name="sunlight-20-line-84" href="#sunlight-20-line-84">84</a>
<a name="sunlight-20-line-85" href="#sunlight-20-line-85">85</a>
<a name="sunlight-20-line-86" href="#sunlight-20-line-86">86</a>
<a name="sunlight-20-line-87" href="#sunlight-20-line-87">87</a>
<a name="sunlight-20-line-88" href="#sunlight-20-line-88">88</a>
<a name="sunlight-20-line-89" href="#sunlight-20-line-89">89</a>
<a name="sunlight-20-line-90" href="#sunlight-20-line-90">90</a>
<a name="sunlight-20-line-91" href="#sunlight-20-line-91">91</a>
<a name="sunlight-20-line-92" href="#sunlight-20-line-92">92</a>
<a name="sunlight-20-line-93" href="#sunlight-20-line-93">93</a>
<a name="sunlight-20-line-94" href="#sunlight-20-line-94">94</a>
<a name="sunlight-20-line-95" href="#sunlight-20-line-95">95</a>
<a name="sunlight-20-line-96" href="#sunlight-20-line-96">96</a>
<a name="sunlight-20-line-97" href="#sunlight-20-line-97">97</a>
<a name="sunlight-20-line-98" href="#sunlight-20-line-98">98</a>
<a name="sunlight-20-line-99" href="#sunlight-20-line-99">99</a>
<a name="sunlight-20-line-100" href="#sunlight-20-line-100">100</a>
<a name="sunlight-20-line-101" href="#sunlight-20-line-101">101</a>
<a name="sunlight-20-line-102" href="#sunlight-20-line-102">102</a>
<a name="sunlight-20-line-103" href="#sunlight-20-line-103">103</a>
<a name="sunlight-20-line-104" href="#sunlight-20-line-104">104</a>
<a name="sunlight-20-line-105" href="#sunlight-20-line-105">105</a>
<a name="sunlight-20-line-106" href="#sunlight-20-line-106">106</a>
<a name="sunlight-20-line-107" href="#sunlight-20-line-107">107</a>
<a name="sunlight-20-line-108" href="#sunlight-20-line-108">108</a>
<a name="sunlight-20-line-109" href="#sunlight-20-line-109">109</a>
<a name="sunlight-20-line-110" href="#sunlight-20-line-110">110</a>
<a name="sunlight-20-line-111" href="#sunlight-20-line-111">111</a>
<a name="sunlight-20-line-112" href="#sunlight-20-line-112">112</a>
<a name="sunlight-20-line-113" href="#sunlight-20-line-113">113</a>
<a name="sunlight-20-line-114" href="#sunlight-20-line-114">114</a>
<a name="sunlight-20-line-115" href="#sunlight-20-line-115">115</a>
<a name="sunlight-20-line-116" href="#sunlight-20-line-116">116</a>
<a name="sunlight-20-line-117" href="#sunlight-20-line-117">117</a>
<a name="sunlight-20-line-118" href="#sunlight-20-line-118">118</a>
<a name="sunlight-20-line-119" href="#sunlight-20-line-119">119</a>
<a name="sunlight-20-line-120" href="#sunlight-20-line-120">120</a>
<a name="sunlight-20-line-121" href="#sunlight-20-line-121">121</a>
<a name="sunlight-20-line-122" href="#sunlight-20-line-122">122</a>
<a name="sunlight-20-line-123" href="#sunlight-20-line-123">123</a>
<a name="sunlight-20-line-124" href="#sunlight-20-line-124">124</a>
<a name="sunlight-20-line-125" href="#sunlight-20-line-125">125</a>
<a name="sunlight-20-line-126" href="#sunlight-20-line-126">126</a>
<a name="sunlight-20-line-127" href="#sunlight-20-line-127">127</a>
<a name="sunlight-20-line-128" href="#sunlight-20-line-128">128</a>
<a name="sunlight-20-line-129" href="#sunlight-20-line-129">129</a>
<a name="sunlight-20-line-130" href="#sunlight-20-line-130">130</a>
<a name="sunlight-20-line-131" href="#sunlight-20-line-131">131</a>
<a name="sunlight-20-line-132" href="#sunlight-20-line-132">132</a>
<a name="sunlight-20-line-133" href="#sunlight-20-line-133">133</a>
<a name="sunlight-20-line-134" href="#sunlight-20-line-134">134</a>
<a name="sunlight-20-line-135" href="#sunlight-20-line-135">135</a>
<a name="sunlight-20-line-136" href="#sunlight-20-line-136">136</a>
<a name="sunlight-20-line-137" href="#sunlight-20-line-137">137</a>
<a name="sunlight-20-line-138" href="#sunlight-20-line-138">138</a>
<a name="sunlight-20-line-139" href="#sunlight-20-line-139">139</a>
<a name="sunlight-20-line-140" href="#sunlight-20-line-140">140</a>
<a name="sunlight-20-line-141" href="#sunlight-20-line-141">141</a>
<a name="sunlight-20-line-142" href="#sunlight-20-line-142">142</a>
<a name="sunlight-20-line-143" href="#sunlight-20-line-143">143</a>
</div><pre class="sunlight-highlight-csharp sunlight-highlighted"><span class="sunlight-csharp"><span class="sunlight-keyword">extern&nbsp;alias</span>&nbsp;<span class="sunlight-ident">GridV1</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">using</span>&nbsp;<span class="sunlight-ident">System</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-keyword">using</span>&nbsp;<span class="sunlight-named-ident">UsingAlias</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">UsingThisClass</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-keyword">namespace</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Namespace</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-ident">NotAnAttribute</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">FullyQualifiedAttribute</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">ValueHandlerFactoryBase</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">T2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">TClass1</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">MarshalByRefObject</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IValueHandlerFactory</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IAmAnInterface</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">TClass1Constraint</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">IAmATypeConstraint</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">T2</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">T1</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Obsolete</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-named-ident">Skank</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-named-ident">Stripper</span>&nbsp;<span class="sunlight-ident">bar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">readonly</span>&nbsp;<span class="sunlight-named-ident">DirtyWhore</span>&nbsp;<span class="sunlight-ident">baz</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0xffffff</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-pragma">#if&nbsp;NET_20</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-named-ident">ArrayList</span>&nbsp;<span class="sunlight-ident">list</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ArrayList</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-pragma">#endif</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">AnAttribute</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">typeof</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Exception</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">Message</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">internal</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">InternalClass</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TClass2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">out</span>&nbsp;<span class="sunlight-ident">TClass3</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-named-ident">ICloneable</span>&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">TClass2Constraint</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">class</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IAfterClassConstraint</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ISecondConstraint</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">Iterate</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">ICollection</span><span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">object</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">foos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">foos</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">is</span>&nbsp;<span class="sunlight-ident">MyNamespace</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">TypeAfterIs</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">SomeMethod</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ref</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">out</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">chars</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-char">'c'</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-char">'\''</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-char">'\\'</span>&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-pragma">#region&nbsp;verify&nbsp;that&nbsp;casts&nbsp;are&nbsp;properly&nbsp;colored</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">partial</span>&nbsp;<span class="sunlight-keyword">void</span>&nbsp;<span class="sunlight-ident">Meh</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">AnotherArrayOfSomething</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">somethings</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">IDisposable</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-named-ident">ICloneable</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Dispose</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">)</span><span class="sunlight-keyword">this</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Dispose</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">lame</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">typeof</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">notACast</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">methodCall</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-pragma">#endregion</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;or&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;an&nbsp;integer
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;and&nbsp;such.&nbsp;This&nbsp;is&nbsp;a&nbsp;useful&nbsp;comment.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Object</span>&nbsp;<span class="sunlight-ident">PropertyAccessor</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">get</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">get</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Integer</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">initialArrayLength</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Integer</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-operator">&lt;</span><span class="sunlight-keyword">object</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">set</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">set</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">value</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">value</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-keyword">value</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-ident">DoSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">DoSomethingElse</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">this</span><span class="sunlight-operator">.</span><span class="sunlight-ident">value</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">set</span>&nbsp;<span class="sunlight-operator">??</span>&nbsp;<span class="sunlight-keyword">value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">string</span>&nbsp;<span class="sunlight-ident">AutomaticProperty</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">get</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">set</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-named-ident">Func</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Object</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">char</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">GetFunction</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">Object</span>&nbsp;<span class="sunlight-ident">o</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Character</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Integer</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">integers</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-ident">Object</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ReferenceEquals</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">o</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">c</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">ArgumentException</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">value</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">char</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">value</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GetHashCode</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;Tests&nbsp;the&nbsp;coloring&nbsp;of&nbsp;generic&nbsp;method&nbsp;definitions&nbsp;and</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;and&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;c&nbsp;cref="Foo"&gt;</span><span class="sunlight-xmlDocCommentContent">generic&nbsp;parameters</span><span class="sunlight-xmlDocCommentMeta">&lt;/c&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-xmlDocCommentMeta">///</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;param&nbsp;name="foos"&gt;</span><span class="sunlight-xmlDocCommentContent">Collection&nbsp;of&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;see&nbsp;cref="Foo"&nbsp;/&gt;</span><span class="sunlight-xmlDocCommentMeta">&lt;/param&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">FirstAttribute</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Pure</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">typeof</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">OutOfThisWorld</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ThirdAttribute</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">OutOfThisWorld</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">AttributeNamedParameter</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">Another</span><span class="sunlight-punctuation">]</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Action</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">DoOtherStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">IEnumerable</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Foo</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">fooEnumerable</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">string</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">strings</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Action</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Func</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">SecondGeneric</span><span class="sunlight-operator">&gt;&gt;</span>&nbsp;<span class="sunlight-ident">action</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-ident">disposable</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">Foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//neither&nbsp;foo&nbsp;below&nbsp;should&nbsp;be&nbsp;a&nbsp;named&nbsp;ident</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">&lt;</span>&nbsp;<span class="sunlight-number">1</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-named-ident">IEnumerable</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TReturnValue</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">GenericMethod</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TMethod</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">GenericCollection1</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TParameter</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">shouldNotBeNamed</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">GenericCollection2</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">TGenericTest4</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">somethingElse</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">container</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GenericMethodInvocation</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">GenericMethodDefinition</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">options</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">OptionParser</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Parse</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Contract</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">args</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">expression</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ArrayAccess</span><span class="sunlight-punctuation">[</span><span class="sunlight-number">0</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Name</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//ArrayAccess&nbsp;should&nbsp;not&nbsp;be&nbsp;a&nbsp;named&nbsp;ident</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//method&nbsp;without&nbsp;an&nbsp;access&nbsp;modifier:&nbsp;"Action"&nbsp;should&nbsp;be&nbsp;a&nbsp;named&nbsp;ident</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">Action</span>&nbsp;<span class="sunlight-ident">DoStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Fully1</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Qualified1</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">FullyQualifiedClass1</span>&nbsp;<span class="sunlight-ident">fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">Fully2</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Qualified2</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">FullyQualifiedClass2</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">override</span>&nbsp;<span class="sunlight-keyword">sealed</span>&nbsp;<span class="sunlight-ident">TNotNamed</span>&nbsp;<span class="sunlight-ident">NumbersTest</span><span class="sunlight-operator">&lt;</span><span class="sunlight-ident">T</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ref</span>&nbsp;<span class="sunlight-named-ident">Foo</span>&nbsp;<span class="sunlight-ident">foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">out</span>&nbsp;<span class="sunlight-named-ident">Bar</span>&nbsp;<span class="sunlight-ident">@class</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">params</span>&nbsp;<span class="sunlight-named-ident">ArrayOfSomething</span><span class="sunlight-punctuation">[</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-ident">somethings</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">where</span>&nbsp;<span class="sunlight-ident">T</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">event</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IDisposable</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IFoo</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//let's&nbsp;test&nbsp;out&nbsp;numbers</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">double</span>&nbsp;<span class="sunlight-ident">d</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1.5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">float</span>&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">1.7f</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">1.2d</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">12</span>&nbsp;<span class="sunlight-operator">%</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">decimal</span>&nbsp;<span class="sunlight-ident">dec</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1.2d</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">int</span>&nbsp;<span class="sunlight-ident">hex</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0x1a</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//ooh!&nbsp;hex!</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">TAlsoNotNamed</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">virtual</span>&nbsp;<span class="sunlight-named-ident">IValueHandler</span>&nbsp;<span class="sunlight-ident">Create</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">string</span>&nbsp;<span class="sunlight-ident">resourceName</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">string</span>&nbsp;<span class="sunlight-ident">criterionFieldName</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//1)&nbsp;check&nbsp;for&nbsp;resource-specific&nbsp;value&nbsp;handler</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">VerifyStuff</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-ident">resourceName</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*&nbsp;multi
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;comment
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"this&nbsp;is&nbsp;\"a\"&nbsp;string"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">s</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">@"this&nbsp;is&nbsp;""another""
multi&nbsp;line
string"</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">switch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Foo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Bar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">2</span>&nbsp;<span class="sunlight-operator">|=</span>&nbsp;<span class="sunlight-ident">Foo</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">InvalidOperationException</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">string</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Format</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"fail"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-string">"bar"</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">goto</span>&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-ident">Empty</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">yield&nbsp;return</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">TanningBooth</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2>csharp2.cs</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-21-line-1" href="#sunlight-21-line-1">1</a>
</div><pre class="sunlight-highlight-csharp sunlight-highlighted"><span class="sunlight-csharp"><span class="sunlight-named-ident">UndefinedTokenFix</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Foo</span><span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-ident">undefinedTokenFix</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">List</span><span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Foo</span><span class="sunlight-operator">&gt;</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
</span></pre></div></div>
<h2>csharp3.cs</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-22-line-1" href="#sunlight-22-line-1">1</a>
<a name="sunlight-22-line-2" href="#sunlight-22-line-2">2</a>
</div><pre class="sunlight-highlight-csharp sunlight-highlighted"><span class="sunlight-csharp"><span class="sunlight-punctuation">[</span><span class="sunlight-named-ident">FirstToken</span><span class="sunlight-punctuation">]</span>
<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">Foo</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2>css.css</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-23-line-1" href="#sunlight-23-line-1">1</a>
<a name="sunlight-23-line-2" href="#sunlight-23-line-2">2</a>
<a name="sunlight-23-line-3" href="#sunlight-23-line-3">3</a>
<a name="sunlight-23-line-4" href="#sunlight-23-line-4">4</a>
<a name="sunlight-23-line-5" href="#sunlight-23-line-5">5</a>
<a name="sunlight-23-line-6" href="#sunlight-23-line-6">6</a>
<a name="sunlight-23-line-7" href="#sunlight-23-line-7">7</a>
<a name="sunlight-23-line-8" href="#sunlight-23-line-8">8</a>
<a name="sunlight-23-line-9" href="#sunlight-23-line-9">9</a>
<a name="sunlight-23-line-10" href="#sunlight-23-line-10">10</a>
<a name="sunlight-23-line-11" href="#sunlight-23-line-11">11</a>
<a name="sunlight-23-line-12" href="#sunlight-23-line-12">12</a>
<a name="sunlight-23-line-13" href="#sunlight-23-line-13">13</a>
<a name="sunlight-23-line-14" href="#sunlight-23-line-14">14</a>
<a name="sunlight-23-line-15" href="#sunlight-23-line-15">15</a>
<a name="sunlight-23-line-16" href="#sunlight-23-line-16">16</a>
<a name="sunlight-23-line-17" href="#sunlight-23-line-17">17</a>
<a name="sunlight-23-line-18" href="#sunlight-23-line-18">18</a>
<a name="sunlight-23-line-19" href="#sunlight-23-line-19">19</a>
<a name="sunlight-23-line-20" href="#sunlight-23-line-20">20</a>
<a name="sunlight-23-line-21" href="#sunlight-23-line-21">21</a>
<a name="sunlight-23-line-22" href="#sunlight-23-line-22">22</a>
<a name="sunlight-23-line-23" href="#sunlight-23-line-23">23</a>
<a name="sunlight-23-line-24" href="#sunlight-23-line-24">24</a>
<a name="sunlight-23-line-25" href="#sunlight-23-line-25">25</a>
<a name="sunlight-23-line-26" href="#sunlight-23-line-26">26</a>
<a name="sunlight-23-line-27" href="#sunlight-23-line-27">27</a>
<a name="sunlight-23-line-28" href="#sunlight-23-line-28">28</a>
<a name="sunlight-23-line-29" href="#sunlight-23-line-29">29</a>
<a name="sunlight-23-line-30" href="#sunlight-23-line-30">30</a>
<a name="sunlight-23-line-31" href="#sunlight-23-line-31">31</a>
<a name="sunlight-23-line-32" href="#sunlight-23-line-32">32</a>
<a name="sunlight-23-line-33" href="#sunlight-23-line-33">33</a>
<a name="sunlight-23-line-34" href="#sunlight-23-line-34">34</a>
<a name="sunlight-23-line-35" href="#sunlight-23-line-35">35</a>
<a name="sunlight-23-line-36" href="#sunlight-23-line-36">36</a>
<a name="sunlight-23-line-37" href="#sunlight-23-line-37">37</a>
<a name="sunlight-23-line-38" href="#sunlight-23-line-38">38</a>
<a name="sunlight-23-line-39" href="#sunlight-23-line-39">39</a>
<a name="sunlight-23-line-40" href="#sunlight-23-line-40">40</a>
<a name="sunlight-23-line-41" href="#sunlight-23-line-41">41</a>
<a name="sunlight-23-line-42" href="#sunlight-23-line-42">42</a>
<a name="sunlight-23-line-43" href="#sunlight-23-line-43">43</a>
<a name="sunlight-23-line-44" href="#sunlight-23-line-44">44</a>
<a name="sunlight-23-line-45" href="#sunlight-23-line-45">45</a>
<a name="sunlight-23-line-46" href="#sunlight-23-line-46">46</a>
<a name="sunlight-23-line-47" href="#sunlight-23-line-47">47</a>
<a name="sunlight-23-line-48" href="#sunlight-23-line-48">48</a>
<a name="sunlight-23-line-49" href="#sunlight-23-line-49">49</a>
<a name="sunlight-23-line-50" href="#sunlight-23-line-50">50</a>
<a name="sunlight-23-line-51" href="#sunlight-23-line-51">51</a>
<a name="sunlight-23-line-52" href="#sunlight-23-line-52">52</a>
<a name="sunlight-23-line-53" href="#sunlight-23-line-53">53</a>
<a name="sunlight-23-line-54" href="#sunlight-23-line-54">54</a>
<a name="sunlight-23-line-55" href="#sunlight-23-line-55">55</a>
<a name="sunlight-23-line-56" href="#sunlight-23-line-56">56</a>
<a name="sunlight-23-line-57" href="#sunlight-23-line-57">57</a>
<a name="sunlight-23-line-58" href="#sunlight-23-line-58">58</a>
<a name="sunlight-23-line-59" href="#sunlight-23-line-59">59</a>
<a name="sunlight-23-line-60" href="#sunlight-23-line-60">60</a>
<a name="sunlight-23-line-61" href="#sunlight-23-line-61">61</a>
<a name="sunlight-23-line-62" href="#sunlight-23-line-62">62</a>
<a name="sunlight-23-line-63" href="#sunlight-23-line-63">63</a>
<a name="sunlight-23-line-64" href="#sunlight-23-line-64">64</a>
<a name="sunlight-23-line-65" href="#sunlight-23-line-65">65</a>
</div><pre class="sunlight-highlight-css sunlight-highlighted"><span class="sunlight-css"><span class="sunlight-rule">@import</span>&nbsp;<span class="sunlight-string">"/my/style/sheet.css"</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-rule">@import</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">my</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">style</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">sheet</span><span class="sunlight-operator">.</span><span class="sunlight-ident">css</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">screen</span>&nbsp;<span class="sunlight-string">"Print&nbsp;style\"s"</span><span class="sunlight-punctuation">;</span>

<span class="sunlight-element">html</span>&nbsp;<span class="sunlight-element">div</span><span class="sunlight-operator">.</span><span class="sunlight-class">myClass</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">width</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">100%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">min-height</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">100%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">opacity</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0.0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">transparent</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-ident">no-repeat</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#000000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">white</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-family</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"Courier&nbsp;New"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">'Arialola\'s'</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">sans-serif</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-element">body</span>&nbsp;<span class="sunlight-operator">&gt;</span>&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">warning</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#FF0000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-image</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">warning</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">/*&nbsp;".png"&nbsp;should&nbsp;not&nbsp;be&nbsp;colored&nbsp;as&nbsp;a&nbsp;class&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">2px</span>&nbsp;<span class="sunlight-ident">solid</span>&nbsp;<span class="sunlight-ident">none</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-image</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">warning</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-radius</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">warning</span><span class="sunlight-operator">.</span><span class="sunlight-ident">png</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-top</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1px</span>&nbsp;<span class="sunlight-ident">dotted</span>&nbsp;<span class="sunlight-hexColor">#FFFFFF</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border-top-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">magenta</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">filter</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-microsoftFilterPrefix">progid:DXImageTransform.Microsoft</span><span class="sunlight-operator">.</span><span class="sunlight-function">Alpha</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">opacity</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">50</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">filter</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">alpha</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">opacity</span><span class="sunlight-operator">=</span><span class="sunlight-number">50</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">opacity</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-id">#wrapper</span>&nbsp;<span class="sunlight-element">div</span><span class="sunlight-punctuation">[</span><span class="sunlight-element">lang</span><span class="sunlight-operator">~=</span><span class="sunlight-string">"en"</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">first-child</span><span class="sunlight-operator">::</span><span class="sunlight-pseudoElement">before</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">text-decoration</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">underline</span>&nbsp;<span class="sunlight-ident">overline</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">padding-left</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">12px</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">width</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">50%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">position</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">fixed</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">display</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">inline-block</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-element">a</span><span class="sunlight-operator">:</span><span class="sunlight-ident">fake-pseudo-class</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">transform</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">rotate</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">5deg</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-moz-background-inline-policy</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">-moz-initial</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-o-device-pixel-ratio</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">meh</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-webkit-background-origin</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">lolwut</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">-ms-accelerator</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">snoo-snoo</span>&nbsp;<span class="sunlight-importantFlag">!important</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">zoom</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">/*&nbsp;IE&nbsp;crap&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">vertical-align</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">middle</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">/*&nbsp;new&nbsp;clearfix&nbsp;*/</span>
<span class="sunlight-operator">.</span><span class="sunlight-class">clearfix</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">after</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">visibility</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">hidden</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">display</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">block</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-size</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">content</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"&nbsp;"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">clear</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">both</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">height</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>
<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-element">html</span>&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">clearfix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">zoom</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">/*&nbsp;IE6&nbsp;*/</span>
<span class="sunlight-operator">*</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">first-child</span><span class="sunlight-operator">+</span><span class="sunlight-element">shouldBeNamed</span>&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">shouldBeNamed</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-keyword">zoom</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">/*&nbsp;IE7&nbsp;*/</span>

<span class="sunlight-element">pseudotest1</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">before</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-element">pseudotest2</span><span class="sunlight-operator">:</span><span class="sunlight-pseudoClass">after</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*&nbsp;stuff&nbsp;goes&nbsp;here&nbsp;*/</span>
<span class="sunlight-punctuation">}</span>

<span class="sunlight-comment">/*&nbsp;do&nbsp;not&nbsp;mix&nbsp;up&nbsp;id&nbsp;selectors&nbsp;and&nbsp;hex&nbsp;color&nbsp;*/</span>
<span class="sunlight-id">#abc</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#12345678</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-hexColor">#def</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span>
</span></pre></div></div>
<h2>invalid-lang.txt</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-24-line-1" href="#sunlight-24-line-1">1</a>
</div><pre class="sunlight-highlight-plaintext sunlight-highlighted"><span class="sunlight-plaintext">foo
</span></pre></div></div>
<h2>javascript.js</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-25-line-1" href="#sunlight-25-line-1">1</a>
<a name="sunlight-25-line-2" href="#sunlight-25-line-2">2</a>
<a name="sunlight-25-line-3" href="#sunlight-25-line-3">3</a>
<a name="sunlight-25-line-4" href="#sunlight-25-line-4">4</a>
<a name="sunlight-25-line-5" href="#sunlight-25-line-5">5</a>
<a name="sunlight-25-line-6" href="#sunlight-25-line-6">6</a>
<a name="sunlight-25-line-7" href="#sunlight-25-line-7">7</a>
<a name="sunlight-25-line-8" href="#sunlight-25-line-8">8</a>
<a name="sunlight-25-line-9" href="#sunlight-25-line-9">9</a>
<a name="sunlight-25-line-10" href="#sunlight-25-line-10">10</a>
<a name="sunlight-25-line-11" href="#sunlight-25-line-11">11</a>
<a name="sunlight-25-line-12" href="#sunlight-25-line-12">12</a>
<a name="sunlight-25-line-13" href="#sunlight-25-line-13">13</a>
<a name="sunlight-25-line-14" href="#sunlight-25-line-14">14</a>
<a name="sunlight-25-line-15" href="#sunlight-25-line-15">15</a>
<a name="sunlight-25-line-16" href="#sunlight-25-line-16">16</a>
<a name="sunlight-25-line-17" href="#sunlight-25-line-17">17</a>
<a name="sunlight-25-line-18" href="#sunlight-25-line-18">18</a>
<a name="sunlight-25-line-19" href="#sunlight-25-line-19">19</a>
<a name="sunlight-25-line-20" href="#sunlight-25-line-20">20</a>
<a name="sunlight-25-line-21" href="#sunlight-25-line-21">21</a>
<a name="sunlight-25-line-22" href="#sunlight-25-line-22">22</a>
<a name="sunlight-25-line-23" href="#sunlight-25-line-23">23</a>
<a name="sunlight-25-line-24" href="#sunlight-25-line-24">24</a>
<a name="sunlight-25-line-25" href="#sunlight-25-line-25">25</a>
<a name="sunlight-25-line-26" href="#sunlight-25-line-26">26</a>
<a name="sunlight-25-line-27" href="#sunlight-25-line-27">27</a>
<a name="sunlight-25-line-28" href="#sunlight-25-line-28">28</a>
<a name="sunlight-25-line-29" href="#sunlight-25-line-29">29</a>
<a name="sunlight-25-line-30" href="#sunlight-25-line-30">30</a>
<a name="sunlight-25-line-31" href="#sunlight-25-line-31">31</a>
<a name="sunlight-25-line-32" href="#sunlight-25-line-32">32</a>
<a name="sunlight-25-line-33" href="#sunlight-25-line-33">33</a>
<a name="sunlight-25-line-34" href="#sunlight-25-line-34">34</a>
<a name="sunlight-25-line-35" href="#sunlight-25-line-35">35</a>
<a name="sunlight-25-line-36" href="#sunlight-25-line-36">36</a>
<a name="sunlight-25-line-37" href="#sunlight-25-line-37">37</a>
<a name="sunlight-25-line-38" href="#sunlight-25-line-38">38</a>
<a name="sunlight-25-line-39" href="#sunlight-25-line-39">39</a>
<a name="sunlight-25-line-40" href="#sunlight-25-line-40">40</a>
<a name="sunlight-25-line-41" href="#sunlight-25-line-41">41</a>
<a name="sunlight-25-line-42" href="#sunlight-25-line-42">42</a>
<a name="sunlight-25-line-43" href="#sunlight-25-line-43">43</a>
<a name="sunlight-25-line-44" href="#sunlight-25-line-44">44</a>
<a name="sunlight-25-line-45" href="#sunlight-25-line-45">45</a>
<a name="sunlight-25-line-46" href="#sunlight-25-line-46">46</a>
<a name="sunlight-25-line-47" href="#sunlight-25-line-47">47</a>
<a name="sunlight-25-line-48" href="#sunlight-25-line-48">48</a>
<a name="sunlight-25-line-49" href="#sunlight-25-line-49">49</a>
<a name="sunlight-25-line-50" href="#sunlight-25-line-50">50</a>
<a name="sunlight-25-line-51" href="#sunlight-25-line-51">51</a>
<a name="sunlight-25-line-52" href="#sunlight-25-line-52">52</a>
<a name="sunlight-25-line-53" href="#sunlight-25-line-53">53</a>
<a name="sunlight-25-line-54" href="#sunlight-25-line-54">54</a>
<a name="sunlight-25-line-55" href="#sunlight-25-line-55">55</a>
<a name="sunlight-25-line-56" href="#sunlight-25-line-56">56</a>
<a name="sunlight-25-line-57" href="#sunlight-25-line-57">57</a>
<a name="sunlight-25-line-58" href="#sunlight-25-line-58">58</a>
<a name="sunlight-25-line-59" href="#sunlight-25-line-59">59</a>
<a name="sunlight-25-line-60" href="#sunlight-25-line-60">60</a>
<a name="sunlight-25-line-61" href="#sunlight-25-line-61">61</a>
<a name="sunlight-25-line-62" href="#sunlight-25-line-62">62</a>
<a name="sunlight-25-line-63" href="#sunlight-25-line-63">63</a>
<a name="sunlight-25-line-64" href="#sunlight-25-line-64">64</a>
<a name="sunlight-25-line-65" href="#sunlight-25-line-65">65</a>
<a name="sunlight-25-line-66" href="#sunlight-25-line-66">66</a>
<a name="sunlight-25-line-67" href="#sunlight-25-line-67">67</a>
<a name="sunlight-25-line-68" href="#sunlight-25-line-68">68</a>
<a name="sunlight-25-line-69" href="#sunlight-25-line-69">69</a>
<a name="sunlight-25-line-70" href="#sunlight-25-line-70">70</a>
<a name="sunlight-25-line-71" href="#sunlight-25-line-71">71</a>
<a name="sunlight-25-line-72" href="#sunlight-25-line-72">72</a>
<a name="sunlight-25-line-73" href="#sunlight-25-line-73">73</a>
<a name="sunlight-25-line-74" href="#sunlight-25-line-74">74</a>
<a name="sunlight-25-line-75" href="#sunlight-25-line-75">75</a>
<a name="sunlight-25-line-76" href="#sunlight-25-line-76">76</a>
<a name="sunlight-25-line-77" href="#sunlight-25-line-77">77</a>
<a name="sunlight-25-line-78" href="#sunlight-25-line-78">78</a>
<a name="sunlight-25-line-79" href="#sunlight-25-line-79">79</a>
<a name="sunlight-25-line-80" href="#sunlight-25-line-80">80</a>
<a name="sunlight-25-line-81" href="#sunlight-25-line-81">81</a>
<a name="sunlight-25-line-82" href="#sunlight-25-line-82">82</a>
<a name="sunlight-25-line-83" href="#sunlight-25-line-83">83</a>
<a name="sunlight-25-line-84" href="#sunlight-25-line-84">84</a>
<a name="sunlight-25-line-85" href="#sunlight-25-line-85">85</a>
<a name="sunlight-25-line-86" href="#sunlight-25-line-86">86</a>
<a name="sunlight-25-line-87" href="#sunlight-25-line-87">87</a>
<a name="sunlight-25-line-88" href="#sunlight-25-line-88">88</a>
<a name="sunlight-25-line-89" href="#sunlight-25-line-89">89</a>
<a name="sunlight-25-line-90" href="#sunlight-25-line-90">90</a>
<a name="sunlight-25-line-91" href="#sunlight-25-line-91">91</a>
<a name="sunlight-25-line-92" href="#sunlight-25-line-92">92</a>
<a name="sunlight-25-line-93" href="#sunlight-25-line-93">93</a>
<a name="sunlight-25-line-94" href="#sunlight-25-line-94">94</a>
<a name="sunlight-25-line-95" href="#sunlight-25-line-95">95</a>
<a name="sunlight-25-line-96" href="#sunlight-25-line-96">96</a>
<a name="sunlight-25-line-97" href="#sunlight-25-line-97">97</a>
<a name="sunlight-25-line-98" href="#sunlight-25-line-98">98</a>
<a name="sunlight-25-line-99" href="#sunlight-25-line-99">99</a>
<a name="sunlight-25-line-100" href="#sunlight-25-line-100">100</a>
<a name="sunlight-25-line-101" href="#sunlight-25-line-101">101</a>
<a name="sunlight-25-line-102" href="#sunlight-25-line-102">102</a>
<a name="sunlight-25-line-103" href="#sunlight-25-line-103">103</a>
<a name="sunlight-25-line-104" href="#sunlight-25-line-104">104</a>
<a name="sunlight-25-line-105" href="#sunlight-25-line-105">105</a>
<a name="sunlight-25-line-106" href="#sunlight-25-line-106">106</a>
<a name="sunlight-25-line-107" href="#sunlight-25-line-107">107</a>
<a name="sunlight-25-line-108" href="#sunlight-25-line-108">108</a>
<a name="sunlight-25-line-109" href="#sunlight-25-line-109">109</a>
<a name="sunlight-25-line-110" href="#sunlight-25-line-110">110</a>
<a name="sunlight-25-line-111" href="#sunlight-25-line-111">111</a>
<a name="sunlight-25-line-112" href="#sunlight-25-line-112">112</a>
<a name="sunlight-25-line-113" href="#sunlight-25-line-113">113</a>
<a name="sunlight-25-line-114" href="#sunlight-25-line-114">114</a>
<a name="sunlight-25-line-115" href="#sunlight-25-line-115">115</a>
<a name="sunlight-25-line-116" href="#sunlight-25-line-116">116</a>
<a name="sunlight-25-line-117" href="#sunlight-25-line-117">117</a>
<a name="sunlight-25-line-118" href="#sunlight-25-line-118">118</a>
<a name="sunlight-25-line-119" href="#sunlight-25-line-119">119</a>
<a name="sunlight-25-line-120" href="#sunlight-25-line-120">120</a>
<a name="sunlight-25-line-121" href="#sunlight-25-line-121">121</a>
</div><pre class="sunlight-highlight-javascript sunlight-highlighted"><span class="sunlight-javascript"><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">$</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-globalVariable">undefined</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">$</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-globalVariable">undefined</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-string">'missing&nbsp;jQuery\'s&nbsp;dependency'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">$$</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">id</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">element</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getElementById</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">id</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">property</span>&nbsp;<span class="sunlight-keyword">in</span>&nbsp;<span class="sunlight-ident">element</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">write</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">property</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-string">":&nbsp;"</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">element</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">property</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">toString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-named-ident">foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">bar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-operator">.</span><span class="sunlight-ident">alert</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"oh&nbsp;noes!!"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-reservedWord">abstract</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-globalFunction">encodeURIComponent</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalFunction">parseFloat</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"abstract&nbsp;is&nbsp;a&nbsp;reserved&nbsp;word"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">elements</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getElementsByTagName</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">for</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span>&nbsp;<span class="sunlight-operator">&amp;</span><span class="sunlight-ident">lt</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">elements</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-ident">i</span><span class="sunlight-operator">++</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">element</span><span class="sunlight-punctuation">[</span><span class="sunlight-ident">i</span><span class="sunlight-punctuation">]</span><span class="sunlight-operator">.</span><span class="sunlight-ident">name</span>&nbsp;<span class="sunlight-operator">!==</span>&nbsp;<span class="sunlight-string">'foo\'s'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">XMLHttpRequest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">XDomainRequest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">ActiveXObject</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"MSXML2.HTTP"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-globalObject">Object</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-ident">e</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">finally</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">!==</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-operator">.</span><span class="sunlight-ident">open</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"http://google.com/"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">req</span><span class="sunlight-operator">.</span><span class="sunlight-ident">send</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">req</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">Error</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"FAIL"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-ident">bar</span>&nbsp;<span class="sunlight-operator">==</span>&nbsp;<span class="sunlight-number">0.5</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">stringify</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">return</span>&nbsp;<span class="sunlight-globalObject">JSON</span>&nbsp;<span class="sunlight-operator">!==</span>&nbsp;<span class="sunlight-globalVariable">undefined</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-globalObject">JSON</span><span class="sunlight-operator">.</span><span class="sunlight-ident">stringify</span><span class="sunlight-operator">.</span><span class="sunlight-ident">call</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">String</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">string</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">switch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">foo</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"he\\\"ad"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">length</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">1</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//fall&nbsp;through</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">0x2</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">1e3</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/*&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;default&nbsp;implementation
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;of&nbsp;something
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-globalFunction">isNaN</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-keyword">this</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-globalVariable">NaN</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-globalVariable">Infinity</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">Boolean</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">true</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/\w[^A-Z0-9]$/g</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//regex&nbsp;literal&nbsp;parsing</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\//</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"/"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\\/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">/f\/oo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-operator">!</span><span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">||</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-regexLiteral">/foo/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-comment">//all&nbsp;should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-regexLiteral">/regexafteroperator/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/regexatstartofline/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[/]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[\/]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[\]]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/[\[]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\[/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/\]/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">'/'</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/foo/gim</span><span class="sunlight-operator">.</span><span class="sunlight-ident">test</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex&nbsp;with&nbsp;modifiers</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-regexLiteral">/foo/asdfasdf</span>&nbsp;<span class="sunlight-comment">//should&nbsp;be&nbsp;a&nbsp;regex&nbsp;with&nbsp;non-existent&nbsp;modifiers</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-number">2</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">arr</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">[</span><span class="sunlight-regexLiteral">/regexafterbracket/</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-regexLiteral">/regexaftercomma/</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">4</span><span class="sunlight-operator">/</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">regex</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>&nbsp;<span class="sunlight-regexLiteral">/regexafterbrace/</span><span class="sunlight-operator">.</span><span class="sunlight-ident">text</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">regex</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">func</span><span class="sunlight-punctuation">(</span><span class="sunlight-regexLiteral">/regexafterparen/</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-regexLiteral">/regexaftersemicolon/</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//.test("foo");&nbsp;//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">identafterdivision1</span><span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-operator">/</span><span class="sunlight-ident">identafterdivision2</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">identafterdivision3</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-operator">/</span><span class="sunlight-ident">regexafterkeyword</span><span class="sunlight-operator">/</span>&nbsp;<span class="sunlight-comment">//should&nbsp;not&nbsp;be&nbsp;a&nbsp;regex</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">jsonLiteral</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">regex</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-regexLiteral">/regexaftercolon/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">jQuery</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
</span></pre></div></div>
<h2>php1.php</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-26-line-1" href="#sunlight-26-line-1">1</a>
<a name="sunlight-26-line-2" href="#sunlight-26-line-2">2</a>
<a name="sunlight-26-line-3" href="#sunlight-26-line-3">3</a>
<a name="sunlight-26-line-4" href="#sunlight-26-line-4">4</a>
<a name="sunlight-26-line-5" href="#sunlight-26-line-5">5</a>
<a name="sunlight-26-line-6" href="#sunlight-26-line-6">6</a>
<a name="sunlight-26-line-7" href="#sunlight-26-line-7">7</a>
<a name="sunlight-26-line-8" href="#sunlight-26-line-8">8</a>
<a name="sunlight-26-line-9" href="#sunlight-26-line-9">9</a>
<a name="sunlight-26-line-10" href="#sunlight-26-line-10">10</a>
<a name="sunlight-26-line-11" href="#sunlight-26-line-11">11</a>
<a name="sunlight-26-line-12" href="#sunlight-26-line-12">12</a>
<a name="sunlight-26-line-13" href="#sunlight-26-line-13">13</a>
<a name="sunlight-26-line-14" href="#sunlight-26-line-14">14</a>
<a name="sunlight-26-line-15" href="#sunlight-26-line-15">15</a>
<a name="sunlight-26-line-16" href="#sunlight-26-line-16">16</a>
<a name="sunlight-26-line-17" href="#sunlight-26-line-17">17</a>
<a name="sunlight-26-line-18" href="#sunlight-26-line-18">18</a>
<a name="sunlight-26-line-19" href="#sunlight-26-line-19">19</a>
<a name="sunlight-26-line-20" href="#sunlight-26-line-20">20</a>
<a name="sunlight-26-line-21" href="#sunlight-26-line-21">21</a>
<a name="sunlight-26-line-22" href="#sunlight-26-line-22">22</a>
<a name="sunlight-26-line-23" href="#sunlight-26-line-23">23</a>
<a name="sunlight-26-line-24" href="#sunlight-26-line-24">24</a>
<a name="sunlight-26-line-25" href="#sunlight-26-line-25">25</a>
<a name="sunlight-26-line-26" href="#sunlight-26-line-26">26</a>
<a name="sunlight-26-line-27" href="#sunlight-26-line-27">27</a>
<a name="sunlight-26-line-28" href="#sunlight-26-line-28">28</a>
<a name="sunlight-26-line-29" href="#sunlight-26-line-29">29</a>
<a name="sunlight-26-line-30" href="#sunlight-26-line-30">30</a>
<a name="sunlight-26-line-31" href="#sunlight-26-line-31">31</a>
<a name="sunlight-26-line-32" href="#sunlight-26-line-32">32</a>
<a name="sunlight-26-line-33" href="#sunlight-26-line-33">33</a>
<a name="sunlight-26-line-34" href="#sunlight-26-line-34">34</a>
<a name="sunlight-26-line-35" href="#sunlight-26-line-35">35</a>
<a name="sunlight-26-line-36" href="#sunlight-26-line-36">36</a>
<a name="sunlight-26-line-37" href="#sunlight-26-line-37">37</a>
<a name="sunlight-26-line-38" href="#sunlight-26-line-38">38</a>
<a name="sunlight-26-line-39" href="#sunlight-26-line-39">39</a>
<a name="sunlight-26-line-40" href="#sunlight-26-line-40">40</a>
<a name="sunlight-26-line-41" href="#sunlight-26-line-41">41</a>
<a name="sunlight-26-line-42" href="#sunlight-26-line-42">42</a>
<a name="sunlight-26-line-43" href="#sunlight-26-line-43">43</a>
<a name="sunlight-26-line-44" href="#sunlight-26-line-44">44</a>
<a name="sunlight-26-line-45" href="#sunlight-26-line-45">45</a>
<a name="sunlight-26-line-46" href="#sunlight-26-line-46">46</a>
<a name="sunlight-26-line-47" href="#sunlight-26-line-47">47</a>
<a name="sunlight-26-line-48" href="#sunlight-26-line-48">48</a>
<a name="sunlight-26-line-49" href="#sunlight-26-line-49">49</a>
<a name="sunlight-26-line-50" href="#sunlight-26-line-50">50</a>
<a name="sunlight-26-line-51" href="#sunlight-26-line-51">51</a>
<a name="sunlight-26-line-52" href="#sunlight-26-line-52">52</a>
<a name="sunlight-26-line-53" href="#sunlight-26-line-53">53</a>
<a name="sunlight-26-line-54" href="#sunlight-26-line-54">54</a>
<a name="sunlight-26-line-55" href="#sunlight-26-line-55">55</a>
<a name="sunlight-26-line-56" href="#sunlight-26-line-56">56</a>
<a name="sunlight-26-line-57" href="#sunlight-26-line-57">57</a>
<a name="sunlight-26-line-58" href="#sunlight-26-line-58">58</a>
<a name="sunlight-26-line-59" href="#sunlight-26-line-59">59</a>
<a name="sunlight-26-line-60" href="#sunlight-26-line-60">60</a>
<a name="sunlight-26-line-61" href="#sunlight-26-line-61">61</a>
<a name="sunlight-26-line-62" href="#sunlight-26-line-62">62</a>
<a name="sunlight-26-line-63" href="#sunlight-26-line-63">63</a>
<a name="sunlight-26-line-64" href="#sunlight-26-line-64">64</a>
<a name="sunlight-26-line-65" href="#sunlight-26-line-65">65</a>
<a name="sunlight-26-line-66" href="#sunlight-26-line-66">66</a>
<a name="sunlight-26-line-67" href="#sunlight-26-line-67">67</a>
<a name="sunlight-26-line-68" href="#sunlight-26-line-68">68</a>
<a name="sunlight-26-line-69" href="#sunlight-26-line-69">69</a>
<a name="sunlight-26-line-70" href="#sunlight-26-line-70">70</a>
<a name="sunlight-26-line-71" href="#sunlight-26-line-71">71</a>
<a name="sunlight-26-line-72" href="#sunlight-26-line-72">72</a>
<a name="sunlight-26-line-73" href="#sunlight-26-line-73">73</a>
<a name="sunlight-26-line-74" href="#sunlight-26-line-74">74</a>
<a name="sunlight-26-line-75" href="#sunlight-26-line-75">75</a>
<a name="sunlight-26-line-76" href="#sunlight-26-line-76">76</a>
<a name="sunlight-26-line-77" href="#sunlight-26-line-77">77</a>
<a name="sunlight-26-line-78" href="#sunlight-26-line-78">78</a>
<a name="sunlight-26-line-79" href="#sunlight-26-line-79">79</a>
<a name="sunlight-26-line-80" href="#sunlight-26-line-80">80</a>
<a name="sunlight-26-line-81" href="#sunlight-26-line-81">81</a>
<a name="sunlight-26-line-82" href="#sunlight-26-line-82">82</a>
<a name="sunlight-26-line-83" href="#sunlight-26-line-83">83</a>
<a name="sunlight-26-line-84" href="#sunlight-26-line-84">84</a>
<a name="sunlight-26-line-85" href="#sunlight-26-line-85">85</a>
<a name="sunlight-26-line-86" href="#sunlight-26-line-86">86</a>
<a name="sunlight-26-line-87" href="#sunlight-26-line-87">87</a>
<a name="sunlight-26-line-88" href="#sunlight-26-line-88">88</a>
<a name="sunlight-26-line-89" href="#sunlight-26-line-89">89</a>
<a name="sunlight-26-line-90" href="#sunlight-26-line-90">90</a>
<a name="sunlight-26-line-91" href="#sunlight-26-line-91">91</a>
<a name="sunlight-26-line-92" href="#sunlight-26-line-92">92</a>
<a name="sunlight-26-line-93" href="#sunlight-26-line-93">93</a>
<a name="sunlight-26-line-94" href="#sunlight-26-line-94">94</a>
<a name="sunlight-26-line-95" href="#sunlight-26-line-95">95</a>
</div><pre class="sunlight-highlight-php sunlight-highlighted"><span class="sunlight-php"><span class="sunlight-openTag">&lt;?php</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">namespace</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-named-ident">UseThisClass</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-named-ident">AlsoUseThis</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">AndUseThis</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">My</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Favorite</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">UseMePlease</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-ident">Other</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">UseMe</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">Other</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">NoUseMe</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">interface</span>&nbsp;<span class="sunlight-named-ident">Kissable</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">Countable</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">kiss</span><span class="sunlight-punctuation">(</span><span class="sunlight-languageConstruct">array</span>&nbsp;<span class="sunlight-variable">$foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">class</span>&nbsp;<span class="sunlight-named-ident">HenryKissable</span>&nbsp;<span class="sunlight-keyword">extends</span>&nbsp;<span class="sunlight-named-ident">ExtendedClass</span>&nbsp;<span class="sunlight-keyword">implements</span>&nbsp;<span class="sunlight-named-ident">ImplementedInterface1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ImplementedInterface2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ImplementedInterface3</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">const</span>&nbsp;<span class="sunlight-ident">KISS</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">'kiss'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-variable">$myPrivateVar</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-variable">$publicVar</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">#Perl-style&nbsp;comments&nbsp;are&nbsp;stupid</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">__construct</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Iterator</span>&nbsp;<span class="sunlight-variable">$bar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-languageConstruct">array</span>&nbsp;<span class="sunlight-variable">$kiss</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-languageConstruct">array</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">parent</span><span class="sunlight-operator">::</span><span class="sunlight-ident">__construct</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$this</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">myPrivateVar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$this</span><span class="sunlight-operator">-&gt;</span><span class="sunlight-ident">publicVar</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$bar</span>&nbsp;<span class="sunlight-operator">?:</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-keyword">self</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$kiss</span>&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-variable">$key</span>&nbsp;<span class="sunlight-operator">=&gt;</span>&nbsp;<span class="sunlight-variable">$value</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//unset&nbsp;stuff</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">unset</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$this</span><span class="sunlight-punctuation">[</span><span class="sunlight-variable">$key</span><span class="sunlight-punctuation">]</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-operator">\</span><span class="sunlight-ident">My</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Namespace</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">InstanceOfClassName1</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-keyword">instanceof</span>&nbsp;<span class="sunlight-named-ident">InstanceOfClassName2</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">endif</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$this</span><span class="sunlight-punctuation">[</span><span class="sunlight-variable">$key</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-function">is_int</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$value</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">?</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">int</span><span class="sunlight-punctuation">)</span><span class="sunlight-variable">$value</span>&nbsp;<span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-keyword">string</span><span class="sunlight-punctuation">)</span><span class="sunlight-variable">$value</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">protected</span>&nbsp;<span class="sunlight-keyword">final</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">invokeStatic</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-named-ident">StaticClass</span><span class="sunlight-operator">::</span><span class="sunlight-ident">invoke</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"this&nbsp;is&nbsp;a&nbsp;\"string\""</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">static</span><span class="sunlight-operator">::</span><span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">switch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">KISS</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">5</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">0x1a</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">KISS</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-string">'foo'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-keyword">null</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">elseif</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">KISS</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-string">'bar'</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-keyword">false</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">case</span>&nbsp;<span class="sunlight-number">1e3</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">break</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">default</span><span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">throw</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">OutOfBoundsException</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">noModifier</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-ident">Fully1</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Qualified1</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">FullyQualifiedClassName1</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$fqc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-operator">\</span><span class="sunlight-ident">Fully2</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Qualified2</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">FullyQualifiedClassName2</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$notFullyQualified</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-named-ident">NotFullyQualified</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$closure</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$foo</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-languageConstruct">array</span>&nbsp;<span class="sunlight-variable">$bar</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">use</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">Fully3</span><span class="sunlight-operator">\</span><span class="sunlight-ident">Qualified3</span><span class="sunlight-operator">\</span><span class="sunlight-named-ident">ClassName3</span>&nbsp;<span class="sunlight-variable">$fqc</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">return</span>&nbsp;<span class="sunlight-variable">$fqc</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">public</span>&nbsp;<span class="sunlight-keyword">abstract</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">TypeHinted</span>&nbsp;<span class="sunlight-variable">$var</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;does&nbsp;something
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">private</span>&nbsp;<span class="sunlight-keyword">static</span>&nbsp;<span class="sunlight-keyword">function</span>&nbsp;<span class="sunlight-ident">doSomething</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$emptyheredoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-heredoc">&lt;&lt;&lt;EMPTYHEREDOC
EMPTYHEREDOC</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$emptynowdoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-nowdoc">&lt;&lt;&lt;'EMPTYNOWDOC'
EMPTYNOWDOC</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$heredoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-string">"this&nbsp;one&nbsp;is&nbsp;my&nbsp;\"favorite\""</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$heredoc</span>&nbsp;<span class="sunlight-operator">.=</span>&nbsp;<span class="sunlight-heredoc">&lt;&lt;&lt;LOL
oh&nbsp;'look'
a&nbsp;heredoc!
LOL</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-variable">$nowdoc</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-nowdoc">&lt;&lt;&lt;'LULZ'
oh&nbsp;look
a&nbsp;nowdoc!
LULZ</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
<span class="sunlight-closeTag">?&gt;</span>

<span class="sunlight-shortOpenTag">&lt;?</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">//short&nbsp;tags&nbsp;</span>
<span class="sunlight-closeTag">?&gt;</span>

<span class="sunlight-shortOpenTag">&lt;?=</span>&nbsp;<span class="sunlight-string">'lol'</span>&nbsp;<span class="sunlight-closeTag">?&gt;</span>
</span></pre></div></div>
<h2>php2.php</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-27-line-1" href="#sunlight-27-line-1">1</a>
<a name="sunlight-27-line-2" href="#sunlight-27-line-2">2</a>
</div><pre class="sunlight-highlight-php sunlight-highlighted"><span class="sunlight-php"><span class="sunlight-variable">$foo</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-heredoc">&lt;&lt;&lt;HEREDOC
unclosed&nbsp;heredoc
</span></span></pre></div></div>
<h2>plaintext.txt</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-28-line-1" href="#sunlight-28-line-1">1</a>
<a name="sunlight-28-line-2" href="#sunlight-28-line-2">2</a>
<a name="sunlight-28-line-3" href="#sunlight-28-line-3">3</a>
</div><pre class="sunlight-highlight-plaintext sunlight-highlighted"><span class="sunlight-plaintext">Lorem&nbsp;ipsum&nbsp;dolor&nbsp;sit&nbsp;amet,&nbsp;consectetur&nbsp;adipisicing&nbsp;elit,
sed&nbsp;do&nbsp;eiusmod&nbsp;tempor&nbsp;incididunt&nbsp;ut&nbsp;labore&nbsp;et&nbsp;dolore&nbsp;magna&nbsp;aliqua.&nbsp;This&nbsp;is&nbsp;a&nbsp;number:&nbsp;12.&nbsp;It&nbsp;should&nbsp;not
be&nbsp;parsed&nbsp;as&nbsp;anything&nbsp;or&nbsp;else&nbsp;this&nbsp;is&nbsp;not&nbsp;working&nbsp;correctly!
</span></pre></div></div>
<h2>vb1.vb</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-29-line-1" href="#sunlight-29-line-1">1</a>
<a name="sunlight-29-line-2" href="#sunlight-29-line-2">2</a>
<a name="sunlight-29-line-3" href="#sunlight-29-line-3">3</a>
<a name="sunlight-29-line-4" href="#sunlight-29-line-4">4</a>
<a name="sunlight-29-line-5" href="#sunlight-29-line-5">5</a>
<a name="sunlight-29-line-6" href="#sunlight-29-line-6">6</a>
<a name="sunlight-29-line-7" href="#sunlight-29-line-7">7</a>
<a name="sunlight-29-line-8" href="#sunlight-29-line-8">8</a>
<a name="sunlight-29-line-9" href="#sunlight-29-line-9">9</a>
<a name="sunlight-29-line-10" href="#sunlight-29-line-10">10</a>
<a name="sunlight-29-line-11" href="#sunlight-29-line-11">11</a>
<a name="sunlight-29-line-12" href="#sunlight-29-line-12">12</a>
<a name="sunlight-29-line-13" href="#sunlight-29-line-13">13</a>
<a name="sunlight-29-line-14" href="#sunlight-29-line-14">14</a>
<a name="sunlight-29-line-15" href="#sunlight-29-line-15">15</a>
<a name="sunlight-29-line-16" href="#sunlight-29-line-16">16</a>
<a name="sunlight-29-line-17" href="#sunlight-29-line-17">17</a>
<a name="sunlight-29-line-18" href="#sunlight-29-line-18">18</a>
<a name="sunlight-29-line-19" href="#sunlight-29-line-19">19</a>
<a name="sunlight-29-line-20" href="#sunlight-29-line-20">20</a>
<a name="sunlight-29-line-21" href="#sunlight-29-line-21">21</a>
<a name="sunlight-29-line-22" href="#sunlight-29-line-22">22</a>
<a name="sunlight-29-line-23" href="#sunlight-29-line-23">23</a>
<a name="sunlight-29-line-24" href="#sunlight-29-line-24">24</a>
<a name="sunlight-29-line-25" href="#sunlight-29-line-25">25</a>
<a name="sunlight-29-line-26" href="#sunlight-29-line-26">26</a>
<a name="sunlight-29-line-27" href="#sunlight-29-line-27">27</a>
<a name="sunlight-29-line-28" href="#sunlight-29-line-28">28</a>
<a name="sunlight-29-line-29" href="#sunlight-29-line-29">29</a>
<a name="sunlight-29-line-30" href="#sunlight-29-line-30">30</a>
<a name="sunlight-29-line-31" href="#sunlight-29-line-31">31</a>
<a name="sunlight-29-line-32" href="#sunlight-29-line-32">32</a>
<a name="sunlight-29-line-33" href="#sunlight-29-line-33">33</a>
<a name="sunlight-29-line-34" href="#sunlight-29-line-34">34</a>
<a name="sunlight-29-line-35" href="#sunlight-29-line-35">35</a>
<a name="sunlight-29-line-36" href="#sunlight-29-line-36">36</a>
<a name="sunlight-29-line-37" href="#sunlight-29-line-37">37</a>
<a name="sunlight-29-line-38" href="#sunlight-29-line-38">38</a>
<a name="sunlight-29-line-39" href="#sunlight-29-line-39">39</a>
<a name="sunlight-29-line-40" href="#sunlight-29-line-40">40</a>
<a name="sunlight-29-line-41" href="#sunlight-29-line-41">41</a>
<a name="sunlight-29-line-42" href="#sunlight-29-line-42">42</a>
<a name="sunlight-29-line-43" href="#sunlight-29-line-43">43</a>
<a name="sunlight-29-line-44" href="#sunlight-29-line-44">44</a>
<a name="sunlight-29-line-45" href="#sunlight-29-line-45">45</a>
<a name="sunlight-29-line-46" href="#sunlight-29-line-46">46</a>
<a name="sunlight-29-line-47" href="#sunlight-29-line-47">47</a>
<a name="sunlight-29-line-48" href="#sunlight-29-line-48">48</a>
<a name="sunlight-29-line-49" href="#sunlight-29-line-49">49</a>
<a name="sunlight-29-line-50" href="#sunlight-29-line-50">50</a>
<a name="sunlight-29-line-51" href="#sunlight-29-line-51">51</a>
<a name="sunlight-29-line-52" href="#sunlight-29-line-52">52</a>
<a name="sunlight-29-line-53" href="#sunlight-29-line-53">53</a>
<a name="sunlight-29-line-54" href="#sunlight-29-line-54">54</a>
<a name="sunlight-29-line-55" href="#sunlight-29-line-55">55</a>
<a name="sunlight-29-line-56" href="#sunlight-29-line-56">56</a>
<a name="sunlight-29-line-57" href="#sunlight-29-line-57">57</a>
<a name="sunlight-29-line-58" href="#sunlight-29-line-58">58</a>
<a name="sunlight-29-line-59" href="#sunlight-29-line-59">59</a>
<a name="sunlight-29-line-60" href="#sunlight-29-line-60">60</a>
<a name="sunlight-29-line-61" href="#sunlight-29-line-61">61</a>
<a name="sunlight-29-line-62" href="#sunlight-29-line-62">62</a>
<a name="sunlight-29-line-63" href="#sunlight-29-line-63">63</a>
<a name="sunlight-29-line-64" href="#sunlight-29-line-64">64</a>
<a name="sunlight-29-line-65" href="#sunlight-29-line-65">65</a>
<a name="sunlight-29-line-66" href="#sunlight-29-line-66">66</a>
<a name="sunlight-29-line-67" href="#sunlight-29-line-67">67</a>
<a name="sunlight-29-line-68" href="#sunlight-29-line-68">68</a>
<a name="sunlight-29-line-69" href="#sunlight-29-line-69">69</a>
<a name="sunlight-29-line-70" href="#sunlight-29-line-70">70</a>
<a name="sunlight-29-line-71" href="#sunlight-29-line-71">71</a>
<a name="sunlight-29-line-72" href="#sunlight-29-line-72">72</a>
<a name="sunlight-29-line-73" href="#sunlight-29-line-73">73</a>
<a name="sunlight-29-line-74" href="#sunlight-29-line-74">74</a>
<a name="sunlight-29-line-75" href="#sunlight-29-line-75">75</a>
<a name="sunlight-29-line-76" href="#sunlight-29-line-76">76</a>
<a name="sunlight-29-line-77" href="#sunlight-29-line-77">77</a>
<a name="sunlight-29-line-78" href="#sunlight-29-line-78">78</a>
<a name="sunlight-29-line-79" href="#sunlight-29-line-79">79</a>
<a name="sunlight-29-line-80" href="#sunlight-29-line-80">80</a>
<a name="sunlight-29-line-81" href="#sunlight-29-line-81">81</a>
<a name="sunlight-29-line-82" href="#sunlight-29-line-82">82</a>
<a name="sunlight-29-line-83" href="#sunlight-29-line-83">83</a>
<a name="sunlight-29-line-84" href="#sunlight-29-line-84">84</a>
<a name="sunlight-29-line-85" href="#sunlight-29-line-85">85</a>
<a name="sunlight-29-line-86" href="#sunlight-29-line-86">86</a>
<a name="sunlight-29-line-87" href="#sunlight-29-line-87">87</a>
<a name="sunlight-29-line-88" href="#sunlight-29-line-88">88</a>
<a name="sunlight-29-line-89" href="#sunlight-29-line-89">89</a>
<a name="sunlight-29-line-90" href="#sunlight-29-line-90">90</a>
<a name="sunlight-29-line-91" href="#sunlight-29-line-91">91</a>
<a name="sunlight-29-line-92" href="#sunlight-29-line-92">92</a>
<a name="sunlight-29-line-93" href="#sunlight-29-line-93">93</a>
<a name="sunlight-29-line-94" href="#sunlight-29-line-94">94</a>
<a name="sunlight-29-line-95" href="#sunlight-29-line-95">95</a>
<a name="sunlight-29-line-96" href="#sunlight-29-line-96">96</a>
<a name="sunlight-29-line-97" href="#sunlight-29-line-97">97</a>
<a name="sunlight-29-line-98" href="#sunlight-29-line-98">98</a>
<a name="sunlight-29-line-99" href="#sunlight-29-line-99">99</a>
<a name="sunlight-29-line-100" href="#sunlight-29-line-100">100</a>
<a name="sunlight-29-line-101" href="#sunlight-29-line-101">101</a>
<a name="sunlight-29-line-102" href="#sunlight-29-line-102">102</a>
<a name="sunlight-29-line-103" href="#sunlight-29-line-103">103</a>
<a name="sunlight-29-line-104" href="#sunlight-29-line-104">104</a>
<a name="sunlight-29-line-105" href="#sunlight-29-line-105">105</a>
<a name="sunlight-29-line-106" href="#sunlight-29-line-106">106</a>
<a name="sunlight-29-line-107" href="#sunlight-29-line-107">107</a>
<a name="sunlight-29-line-108" href="#sunlight-29-line-108">108</a>
<a name="sunlight-29-line-109" href="#sunlight-29-line-109">109</a>
<a name="sunlight-29-line-110" href="#sunlight-29-line-110">110</a>
<a name="sunlight-29-line-111" href="#sunlight-29-line-111">111</a>
<a name="sunlight-29-line-112" href="#sunlight-29-line-112">112</a>
<a name="sunlight-29-line-113" href="#sunlight-29-line-113">113</a>
<a name="sunlight-29-line-114" href="#sunlight-29-line-114">114</a>
<a name="sunlight-29-line-115" href="#sunlight-29-line-115">115</a>
<a name="sunlight-29-line-116" href="#sunlight-29-line-116">116</a>
<a name="sunlight-29-line-117" href="#sunlight-29-line-117">117</a>
<a name="sunlight-29-line-118" href="#sunlight-29-line-118">118</a>
<a name="sunlight-29-line-119" href="#sunlight-29-line-119">119</a>
<a name="sunlight-29-line-120" href="#sunlight-29-line-120">120</a>
<a name="sunlight-29-line-121" href="#sunlight-29-line-121">121</a>
<a name="sunlight-29-line-122" href="#sunlight-29-line-122">122</a>
<a name="sunlight-29-line-123" href="#sunlight-29-line-123">123</a>
<a name="sunlight-29-line-124" href="#sunlight-29-line-124">124</a>
<a name="sunlight-29-line-125" href="#sunlight-29-line-125">125</a>
<a name="sunlight-29-line-126" href="#sunlight-29-line-126">126</a>
<a name="sunlight-29-line-127" href="#sunlight-29-line-127">127</a>
<a name="sunlight-29-line-128" href="#sunlight-29-line-128">128</a>
<a name="sunlight-29-line-129" href="#sunlight-29-line-129">129</a>
<a name="sunlight-29-line-130" href="#sunlight-29-line-130">130</a>
<a name="sunlight-29-line-131" href="#sunlight-29-line-131">131</a>
<a name="sunlight-29-line-132" href="#sunlight-29-line-132">132</a>
<a name="sunlight-29-line-133" href="#sunlight-29-line-133">133</a>
<a name="sunlight-29-line-134" href="#sunlight-29-line-134">134</a>
<a name="sunlight-29-line-135" href="#sunlight-29-line-135">135</a>
<a name="sunlight-29-line-136" href="#sunlight-29-line-136">136</a>
<a name="sunlight-29-line-137" href="#sunlight-29-line-137">137</a>
<a name="sunlight-29-line-138" href="#sunlight-29-line-138">138</a>
<a name="sunlight-29-line-139" href="#sunlight-29-line-139">139</a>
<a name="sunlight-29-line-140" href="#sunlight-29-line-140">140</a>
<a name="sunlight-29-line-141" href="#sunlight-29-line-141">141</a>
<a name="sunlight-29-line-142" href="#sunlight-29-line-142">142</a>
<a name="sunlight-29-line-143" href="#sunlight-29-line-143">143</a>
<a name="sunlight-29-line-144" href="#sunlight-29-line-144">144</a>
<a name="sunlight-29-line-145" href="#sunlight-29-line-145">145</a>
<a name="sunlight-29-line-146" href="#sunlight-29-line-146">146</a>
</div><pre class="sunlight-highlight-vb sunlight-highlighted"><span class="sunlight-vb"><span class="sunlight-keyword">Imports</span>&nbsp;<span class="sunlight-ident">System</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Runtime</span><span class="sunlight-operator">.</span><span class="sunlight-ident">InteropServices</span>

<span class="sunlight-comment">'comment</span>

<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;summary&gt;</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;How&nbsp;about&nbsp;an&nbsp;XML&nbsp;doc&nbsp;comment?</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;This&nbsp;class&nbsp;does&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;c&nbsp;cref="Foo"&gt;</span><span class="sunlight-xmlDocCommentContent">something</span><span class="sunlight-xmlDocCommentMeta">&lt;/c&gt;</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;/summary&gt;</span>
<span class="sunlight-xmlDocCommentMeta">'''</span>
<span class="sunlight-xmlDocCommentMeta">'''</span><span class="sunlight-xmlDocCommentContent">&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;param&nbsp;name="foos"&gt;</span><span class="sunlight-xmlDocCommentContent">Collection&nbsp;of&nbsp;</span><span class="sunlight-xmlDocCommentMeta">&lt;see&nbsp;cref="Foo"&nbsp;/&gt;</span><span class="sunlight-xmlDocCommentMeta">&lt;/param&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-named-ident">Attribute1</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"DEBUG"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">Attribute2</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"TEST1"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-ident">System</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Runtime</span><span class="sunlight-operator">.</span><span class="sunlight-ident">InteropServices</span><span class="sunlight-operator">.</span><span class="sunlight-named-ident">DllImport</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"user32.dll"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Class</span>&nbsp;<span class="sunlight-named-ident">thisClass</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">Of</span>&nbsp;<span class="sunlight-named-ident">t</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-named-ident">GenericConstraint1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">GenericConstraint2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">Class</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">New</span><span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Insert&nbsp;code&nbsp;that&nbsp;defines&nbsp;class&nbsp;members.</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Class</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Class</span>&nbsp;<span class="sunlight-named-ident">Dictionary</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">Of</span>&nbsp;<span class="sunlight-named-ident">entryType</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">keyType</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">IComparable</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">add</span><span class="sunlight-punctuation">(</span><span class="sunlight-operator">&lt;</span><span class="sunlight-escapedKeyword">[In]</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">ICanHazAttribute</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">&gt;</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">e</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">entryType</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">keyType</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">dk</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">keyType</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'array&nbsp;initialization&nbsp;and&nbsp;char&nbsp;literals</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">testChars</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Char</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">New</span>&nbsp;<span class="sunlight-keyword">Char</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">2</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-string">"%"</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"&amp;"</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"@"</span><span class="sunlight-ident">c</span><span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'casting&nbsp;stuff</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">CType</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">CType</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">OohNestedCast</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">CastToThisType</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">DirectCast</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">NoCastToThisType</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">f</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">CType</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar3</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">CastToArray</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">objAsConvertible</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">IConvertible</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">TryCast</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">castVar4</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">TryToCastToThisType</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">GetType</span><span class="sunlight-punctuation">(</span><span class="sunlight-named-ident">GetTypeTest</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ToString</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">If</span>&nbsp;<span class="sunlight-ident">k</span><span class="sunlight-operator">.</span><span class="sunlight-ident">CompareTo</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">dk</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">0</span>&nbsp;<span class="sunlight-keyword">Then</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">If</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">find</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">k</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">keyType</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">entryType</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Function</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Class</span>


<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Class</span>&nbsp;<span class="sunlight-named-ident">ThisClass</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Inherits</span>&nbsp;<span class="sunlight-named-ident">BaseClass</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Implements</span>&nbsp;<span class="sunlight-named-ident">IInterface1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface2</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-named-ident">IInterface3</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">New</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">SomeValue</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Call&nbsp;MyBase.New&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;derived&nbsp;class.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">MyBase</span><span class="sunlight-operator">.</span><span class="sunlight-ident">New</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"ThisClass&nbsp;is&nbsp;initializing&nbsp;with&nbsp;Sub&nbsp;New."</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Place&nbsp;initialization&nbsp;statements&nbsp;here.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">SomeValue</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Private</span>&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Property</span>&nbsp;<span class="sunlight-ident">ThisProperty</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">CheckIfDisposed</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ThisProperty</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Set</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">Value</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">CheckIfDisposed</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ThisPropertyValue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">Value</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Set</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Property</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Private</span>&nbsp;<span class="sunlight-ident">disposed</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Boolean</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">False</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">CheckIfDisposed</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">If</span>&nbsp;<span class="sunlight-keyword">Me</span><span class="sunlight-operator">.</span><span class="sunlight-ident">disposed</span>&nbsp;<span class="sunlight-keyword">AndAlso</span>&nbsp;<span class="sunlight-keyword">True</span>&nbsp;<span class="sunlight-keyword">Then</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Throw</span>&nbsp;<span class="sunlight-keyword">New</span>&nbsp;<span class="sunlight-named-ident">ObjectDisposedException</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">Me</span><span class="sunlight-operator">.</span><span class="sunlight-ident">GetType</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ToString</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">_</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-string">"This&nbsp;object&nbsp;has&nbsp;been&nbsp;disposed."</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">If</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Class</span>

<span class="sunlight-keyword">Delegate</span>&nbsp;<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">MathOperator</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>

<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">AddNumbers</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Return</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">+</span>&nbsp;<span class="sunlight-ident">y</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Function</span>

<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">SubtractNumbers</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Return</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-operator">-</span>&nbsp;<span class="sunlight-ident">y</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Function</span>

<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">DelegateTest</span><span class="sunlight-punctuation">(</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">x</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">op</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-named-ident">MathOperator</span><span class="sunlight-punctuation">,</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">y</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
<span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-ident">ret</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Double</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ret</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">op</span><span class="sunlight-operator">.</span><span class="sunlight-ident">Invoke</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">x</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-ident">y</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-comment">'&nbsp;Call&nbsp;the&nbsp;method.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">ret</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>

<span class="sunlight-keyword">Protected</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">Test</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DelegateTest</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">5</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">AddressOf</span>&nbsp;<span class="sunlight-named-ident">AddNumbers</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DelegateTest</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">9</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">AddressOf</span>&nbsp;<span class="sunlight-named-ident">SubtractNumbers</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">3</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Interface</span>&nbsp;<span class="sunlight-named-ident">thisInterface</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Property</span>&nbsp;<span class="sunlight-ident">thisProp</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">thisStr</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Char</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Function</span>&nbsp;<span class="sunlight-ident">thisFunc</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">thisInt</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Integer</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Interface</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Structure</span>&nbsp;<span class="sunlight-named-ident">employee</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-ident">firstName</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-ident">middleName</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">maximum</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Long</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">459</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Friend</span>&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">calculateBonus</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">rate</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Single</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">bonus</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">salary</span>&nbsp;<span class="sunlight-operator">*</span>&nbsp;<span class="sunlight-keyword">CDbl</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">rate</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Property&nbsp;member&nbsp;to&nbsp;return&nbsp;employee's&nbsp;eligibility.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Friend</span>&nbsp;<span class="sunlight-keyword">ReadOnly</span>&nbsp;<span class="sunlight-keyword">Property</span>&nbsp;<span class="sunlight-ident">eligible</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Boolean</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Return</span>&nbsp;<span class="sunlight-ident">level</span>&nbsp;<span class="sunlight-operator">&gt;=</span>&nbsp;<span class="sunlight-number">25</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Get</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Property</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Event&nbsp;member,&nbsp;raised&nbsp;when&nbsp;business&nbsp;phone&nbsp;number&nbsp;has&nbsp;changed.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Event</span>&nbsp;<span class="sunlight-named-ident">changedWorkPhone</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">ByVal</span>&nbsp;<span class="sunlight-ident">newPhone</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">Long</span><span class="sunlight-punctuation">)</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Structure</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Module</span>&nbsp;<span class="sunlight-named-ident">thisModule</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Sub</span>&nbsp;<span class="sunlight-ident">Main</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Dim</span>&nbsp;<span class="sunlight-escapedKeyword">[True]</span>&nbsp;<span class="sunlight-keyword">As</span>&nbsp;<span class="sunlight-keyword">String</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">InputBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"What&nbsp;is&nbsp;your&nbsp;name?"</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MsgBox</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"User&nbsp;name&nbsp;is"</span>&nbsp;<span class="sunlight-operator">&amp;</span>&nbsp;<span class="sunlight-escapedKeyword">[True]</span><span class="sunlight-punctuation">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Sub</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;Insert&nbsp;variable,&nbsp;property,&nbsp;procedure,&nbsp;and&nbsp;event&nbsp;declarations.</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Module</span>

<span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Enum</span>&nbsp;<span class="sunlight-named-ident">InterfaceColors</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">MistyRose</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;HE1E4FF</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SlateGray</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H908070</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DodgerBlue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;HFF901E</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">DeepSkyBlue</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;HFFBF00</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">SpringGreen</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H7FFF00</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">ForestGreen</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H228B22</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Goldenrod</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H20A5DA</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">Firebrick</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;H2222B2</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Enum</span>
</span></pre></div></div>
<h2>vb2.vb</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-30-line-1" href="#sunlight-30-line-1">1</a>
<a name="sunlight-30-line-2" href="#sunlight-30-line-2">2</a>
<a name="sunlight-30-line-3" href="#sunlight-30-line-3">3</a>
<a name="sunlight-30-line-4" href="#sunlight-30-line-4">4</a>
<a name="sunlight-30-line-5" href="#sunlight-30-line-5">5</a>
<a name="sunlight-30-line-6" href="#sunlight-30-line-6">6</a>
<a name="sunlight-30-line-7" href="#sunlight-30-line-7">7</a>
<a name="sunlight-30-line-8" href="#sunlight-30-line-8">8</a>
<a name="sunlight-30-line-9" href="#sunlight-30-line-9">9</a>
<a name="sunlight-30-line-10" href="#sunlight-30-line-10">10</a>
<a name="sunlight-30-line-11" href="#sunlight-30-line-11">11</a>
<a name="sunlight-30-line-12" href="#sunlight-30-line-12">12</a>
<a name="sunlight-30-line-13" href="#sunlight-30-line-13">13</a>
<a name="sunlight-30-line-14" href="#sunlight-30-line-14">14</a>
<a name="sunlight-30-line-15" href="#sunlight-30-line-15">15</a>
<a name="sunlight-30-line-16" href="#sunlight-30-line-16">16</a>
<a name="sunlight-30-line-17" href="#sunlight-30-line-17">17</a>
<a name="sunlight-30-line-18" href="#sunlight-30-line-18">18</a>
<a name="sunlight-30-line-19" href="#sunlight-30-line-19">19</a>
<a name="sunlight-30-line-20" href="#sunlight-30-line-20">20</a>
<a name="sunlight-30-line-21" href="#sunlight-30-line-21">21</a>
<a name="sunlight-30-line-22" href="#sunlight-30-line-22">22</a>
</div><pre class="sunlight-highlight-vb sunlight-highlighted"><span class="sunlight-vb"><span class="sunlight-keyword">Public</span>&nbsp;<span class="sunlight-keyword">Module</span>&nbsp;<span class="sunlight-named-ident">thisModule</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i1_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">12_34_5%</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i2_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;ha_BC_d23_8&amp;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i3_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;O42_7i</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i4_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">&amp;B01_1_0l</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i5_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">+</span><span class="sunlight-number">123S</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i6_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">123UI</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i7_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">+</span><span class="sunlight-number">123uL</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i8_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-operator">-</span><span class="sunlight-number">123us</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i9_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2398</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i1_ERROR</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">_123</span>&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;This&nbsp;should&nbsp;be&nbsp;an&nbsp;identifier.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">i2_ERROR</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">123</span><span class="sunlight-ident">_</span>&nbsp;&nbsp;<span class="sunlight-comment">'&nbsp;_&nbsp;is&nbsp;an&nbsp;invalid&nbsp;identifier&nbsp;(still&nbsp;highlighted)</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f1_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">1F</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f2_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">2.0E3R</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f3_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">.3E+8D</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f4_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">4E-9</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f5_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">5___2.3_1_3e-4_6_4!</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f6_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">6.2#</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">Const</span>&nbsp;<span class="sunlight-ident">f7_OK</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-number">7@</span>
<span class="sunlight-keyword">End</span>&nbsp;<span class="sunlight-keyword">Module</span>
</span></pre></div></div>
<h2>xml-multilang.xml</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-31-line-1" href="#sunlight-31-line-1">1</a>
<a name="sunlight-31-line-2" href="#sunlight-31-line-2">2</a>
<a name="sunlight-31-line-3" href="#sunlight-31-line-3">3</a>
<a name="sunlight-31-line-4" href="#sunlight-31-line-4">4</a>
<a name="sunlight-31-line-5" href="#sunlight-31-line-5">5</a>
<a name="sunlight-31-line-6" href="#sunlight-31-line-6">6</a>
<a name="sunlight-31-line-7" href="#sunlight-31-line-7">7</a>
<a name="sunlight-31-line-8" href="#sunlight-31-line-8">8</a>
<a name="sunlight-31-line-9" href="#sunlight-31-line-9">9</a>
<a name="sunlight-31-line-10" href="#sunlight-31-line-10">10</a>
<a name="sunlight-31-line-11" href="#sunlight-31-line-11">11</a>
<a name="sunlight-31-line-12" href="#sunlight-31-line-12">12</a>
<a name="sunlight-31-line-13" href="#sunlight-31-line-13">13</a>
<a name="sunlight-31-line-14" href="#sunlight-31-line-14">14</a>
<a name="sunlight-31-line-15" href="#sunlight-31-line-15">15</a>
<a name="sunlight-31-line-16" href="#sunlight-31-line-16">16</a>
<a name="sunlight-31-line-17" href="#sunlight-31-line-17">17</a>
<a name="sunlight-31-line-18" href="#sunlight-31-line-18">18</a>
<a name="sunlight-31-line-19" href="#sunlight-31-line-19">19</a>
<a name="sunlight-31-line-20" href="#sunlight-31-line-20">20</a>
<a name="sunlight-31-line-21" href="#sunlight-31-line-21">21</a>
<a name="sunlight-31-line-22" href="#sunlight-31-line-22">22</a>
<a name="sunlight-31-line-23" href="#sunlight-31-line-23">23</a>
<a name="sunlight-31-line-24" href="#sunlight-31-line-24">24</a>
<a name="sunlight-31-line-25" href="#sunlight-31-line-25">25</a>
<a name="sunlight-31-line-26" href="#sunlight-31-line-26">26</a>
<a name="sunlight-31-line-27" href="#sunlight-31-line-27">27</a>
<a name="sunlight-31-line-28" href="#sunlight-31-line-28">28</a>
<a name="sunlight-31-line-29" href="#sunlight-31-line-29">29</a>
<a name="sunlight-31-line-30" href="#sunlight-31-line-30">30</a>
<a name="sunlight-31-line-31" href="#sunlight-31-line-31">31</a>
<a name="sunlight-31-line-32" href="#sunlight-31-line-32">32</a>
<a name="sunlight-31-line-33" href="#sunlight-31-line-33">33</a>
<a name="sunlight-31-line-34" href="#sunlight-31-line-34">34</a>
<a name="sunlight-31-line-35" href="#sunlight-31-line-35">35</a>
<a name="sunlight-31-line-36" href="#sunlight-31-line-36">36</a>
<a name="sunlight-31-line-37" href="#sunlight-31-line-37">37</a>
<a name="sunlight-31-line-38" href="#sunlight-31-line-38">38</a>
<a name="sunlight-31-line-39" href="#sunlight-31-line-39">39</a>
<a name="sunlight-31-line-40" href="#sunlight-31-line-40">40</a>
<a name="sunlight-31-line-41" href="#sunlight-31-line-41">41</a>
<a name="sunlight-31-line-42" href="#sunlight-31-line-42">42</a>
<a name="sunlight-31-line-43" href="#sunlight-31-line-43">43</a>
<a name="sunlight-31-line-44" href="#sunlight-31-line-44">44</a>
<a name="sunlight-31-line-45" href="#sunlight-31-line-45">45</a>
<a name="sunlight-31-line-46" href="#sunlight-31-line-46">46</a>
<a name="sunlight-31-line-47" href="#sunlight-31-line-47">47</a>
<a name="sunlight-31-line-48" href="#sunlight-31-line-48">48</a>
<a name="sunlight-31-line-49" href="#sunlight-31-line-49">49</a>
<a name="sunlight-31-line-50" href="#sunlight-31-line-50">50</a>
<a name="sunlight-31-line-51" href="#sunlight-31-line-51">51</a>
<a name="sunlight-31-line-52" href="#sunlight-31-line-52">52</a>
<a name="sunlight-31-line-53" href="#sunlight-31-line-53">53</a>
<a name="sunlight-31-line-54" href="#sunlight-31-line-54">54</a>
<a name="sunlight-31-line-55" href="#sunlight-31-line-55">55</a>
<a name="sunlight-31-line-56" href="#sunlight-31-line-56">56</a>
<a name="sunlight-31-line-57" href="#sunlight-31-line-57">57</a>
<a name="sunlight-31-line-58" href="#sunlight-31-line-58">58</a>
<a name="sunlight-31-line-59" href="#sunlight-31-line-59">59</a>
<a name="sunlight-31-line-60" href="#sunlight-31-line-60">60</a>
<a name="sunlight-31-line-61" href="#sunlight-31-line-61">61</a>
<a name="sunlight-31-line-62" href="#sunlight-31-line-62">62</a>
<a name="sunlight-31-line-63" href="#sunlight-31-line-63">63</a>
<a name="sunlight-31-line-64" href="#sunlight-31-line-64">64</a>
<a name="sunlight-31-line-65" href="#sunlight-31-line-65">65</a>
</div><pre class="sunlight-highlight-xml sunlight-highlighted"><span class="sunlight-xml"><span class="sunlight-doctype">&lt;!doctype&nbsp;html&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">html</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">head</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">script</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/javascript"</span>&nbsp;<span class="sunlight-attribute">src</span><span class="sunlight-operator">=</span><span class="sunlight-string">"/sunlight.js"</span><span class="sunlight-operator">&gt;</span><span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">script</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span><span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">style</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/css"</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-css">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-rule">@font-face</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-family</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">Custom</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">src</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-function">url</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">fonts</span><span class="sunlight-punctuation">/</span><span class="sunlight-ident">custom</span><span class="sunlight-operator">.</span><span class="sunlight-ident">ttf</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-element">body</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">background-color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">black</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">font-family</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-string">"Courier&nbsp;New"</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">width</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">100%</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">min-height</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">200px</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">.</span><span class="sunlight-class">attention</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">color</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-ident">red</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">border</span><span class="sunlight-operator">:</span>&nbsp;<span class="sunlight-number">2px</span>&nbsp;<span class="sunlight-ident">solid</span>&nbsp;<span class="sunlight-hexColor">#000000</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">style</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">script</span>&nbsp;<span class="sunlight-attribute">type</span><span class="sunlight-operator">=</span><span class="sunlight-string">"text/javascript"</span><span class="sunlight-operator">&gt;</span></span><span class="sunlight-javascript">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">window</span><span class="sunlight-operator">.</span><span class="sunlight-ident">onload</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">try</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">var</span>&nbsp;<span class="sunlight-ident">xhr</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">new</span>&nbsp;<span class="sunlight-globalObject">XMLHttpRequest</span><span class="sunlight-punctuation">(</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">open</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"GET"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-string">"/ajax.php"</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-keyword">true</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">onreadystatechange</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-keyword">function</span><span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">readyState</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-number">4</span>&nbsp;<span class="sunlight-operator">&amp;&amp;</span>&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">status</span>&nbsp;<span class="sunlight-operator">===</span>&nbsp;<span class="sunlight-number">200</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">document</span><span class="sunlight-operator">.</span><span class="sunlight-ident">getElementById</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"foo"</span><span class="sunlight-punctuation">)</span><span class="sunlight-operator">.</span><span class="sunlight-ident">innerHTML</span>&nbsp;<span class="sunlight-operator">=</span>&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">responseText</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-ident">xhr</span><span class="sunlight-operator">.</span><span class="sunlight-ident">send</span><span class="sunlight-punctuation">(</span><span class="sunlight-keyword">null</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">catch</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">e</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span><span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span><span class="sunlight-punctuation">;</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">script</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">head</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">body</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Let's&nbsp;try&nbsp;some&nbsp;PHP<span class="sunlight-operator">:</span></span><span class="sunlight-php">&nbsp;Hello&nbsp;<span class="sunlight-shortOpenTag">&lt;?=</span>&nbsp;<span class="sunlight-variable">$_GET</span><span class="sunlight-punctuation">[</span><span class="sunlight-string">'username'</span><span class="sunlight-punctuation">]</span>&nbsp;<span class="sunlight-closeTag">?&gt;</span></span><span class="sunlight-xml">!&nbsp;Long&nbsp;tags&nbsp;work,&nbsp;too<span class="sunlight-operator">:</span></span><span class="sunlight-php">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-openTag">&lt;?php</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-languageConstruct">echo</span>&nbsp;<span class="sunlight-string">'Hello&nbsp;world'</span><span class="sunlight-punctuation">;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-keyword">foreach</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-function">range</span><span class="sunlight-punctuation">(</span><span class="sunlight-number">1</span><span class="sunlight-punctuation">,</span>&nbsp;<span class="sunlight-number">10</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-keyword">as</span>&nbsp;<span class="sunlight-variable">$i</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-function">print_r</span><span class="sunlight-punctuation">(</span><span class="sunlight-variable">$i</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">;</span>&nbsp;<span class="sunlight-comment">//prints&nbsp;$i&nbsp;lol</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-punctuation">}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-closeTag">?&gt;</span></span><span class="sunlight-xml">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Now&nbsp;let's&nbsp;try&nbsp;some&nbsp;C#<span class="sunlight-operator">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">p</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">&lt;%--&nbsp;server&nbsp;side&nbsp;comment&nbsp;--%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-keyword">if</span>&nbsp;<span class="sunlight-punctuation">(</span><span class="sunlight-ident">User</span><span class="sunlight-operator">.</span><span class="sunlight-ident">IsInRole</span><span class="sunlight-punctuation">(</span><span class="sunlight-string">"admin"</span><span class="sunlight-punctuation">)</span><span class="sunlight-punctuation">)</span>&nbsp;<span class="sunlight-punctuation">{</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;see&nbsp;this
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-punctuation">}</span>&nbsp;<span class="sunlight-keyword">else</span>&nbsp;<span class="sunlight-punctuation">{</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;are&nbsp;no&nbsp;admin&nbsp;fool!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-punctuation">}</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-aspOpenTag">&lt;%=</span></span><span class="sunlight-csharp">&nbsp;<span class="sunlight-string">"Short&nbsp;tag&nbsp;ftw"</span></span><span class="sunlight-xml">&nbsp;<span class="sunlight-aspCloseTag">%&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">body</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">html</span><span class="sunlight-operator">&gt;</span>
</span></pre></div></div>
<h2>xml.xml</h2>
<div class="sunlight-container"><div class="sunlight-code-container" style="overflow-y: auto; max-height: undefined; border-width: 1px; border-style: solid;"><div class="sunlight-line-number-margin"><a name="sunlight-32-line-1" href="#sunlight-32-line-1">1</a>
<a name="sunlight-32-line-2" href="#sunlight-32-line-2">2</a>
<a name="sunlight-32-line-3" href="#sunlight-32-line-3">3</a>
<a name="sunlight-32-line-4" href="#sunlight-32-line-4">4</a>
<a name="sunlight-32-line-5" href="#sunlight-32-line-5">5</a>
<a name="sunlight-32-line-6" href="#sunlight-32-line-6">6</a>
<a name="sunlight-32-line-7" href="#sunlight-32-line-7">7</a>
<a name="sunlight-32-line-8" href="#sunlight-32-line-8">8</a>
<a name="sunlight-32-line-9" href="#sunlight-32-line-9">9</a>
<a name="sunlight-32-line-10" href="#sunlight-32-line-10">10</a>
<a name="sunlight-32-line-11" href="#sunlight-32-line-11">11</a>
<a name="sunlight-32-line-12" href="#sunlight-32-line-12">12</a>
<a name="sunlight-32-line-13" href="#sunlight-32-line-13">13</a>
<a name="sunlight-32-line-14" href="#sunlight-32-line-14">14</a>
<a name="sunlight-32-line-15" href="#sunlight-32-line-15">15</a>
<a name="sunlight-32-line-16" href="#sunlight-32-line-16">16</a>
<a name="sunlight-32-line-17" href="#sunlight-32-line-17">17</a>
<a name="sunlight-32-line-18" href="#sunlight-32-line-18">18</a>
<a name="sunlight-32-line-19" href="#sunlight-32-line-19">19</a>
<a name="sunlight-32-line-20" href="#sunlight-32-line-20">20</a>
<a name="sunlight-32-line-21" href="#sunlight-32-line-21">21</a>
<a name="sunlight-32-line-22" href="#sunlight-32-line-22">22</a>
<a name="sunlight-32-line-23" href="#sunlight-32-line-23">23</a>
</div><pre class="sunlight-highlight-xml sunlight-highlighted"><span class="sunlight-xml"><span class="sunlight-xmlOpenTag">&lt;?xml</span>&nbsp;<span class="sunlight-attribute">version</span><span class="sunlight-operator">=</span><span class="sunlight-string">"1.0"</span>&nbsp;<span class="sunlight-xmlCloseTag">?&gt;</span>
<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">config</span>&nbsp;<span class="sunlight-attribute">xmlns</span><span class="sunlight-operator">:</span><span class="sunlight-attribute">foo</span><span class="sunlight-operator">=</span><span class="sunlight-string">"http://example.com"</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">&lt;!--&nbsp;sections&nbsp;--&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span>&nbsp;<span class="sunlight-attribute">name</span><span class="sunlight-operator">=</span><span class="sunlight-string">"foo"</span><span class="sunlight-operator">&gt;</span>Content&nbsp;of&nbsp;the&nbsp;section<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span>&nbsp;<span class="sunlight-attribute">name</span><span class="sunlight-operator">=</span><span class="sunlight-string">"bar"</span><span class="sunlight-operator">&gt;</span>Content&nbsp;of&nbsp;the&nbsp;section<span class="sunlight-entity">&amp;beforeopentag;</span><span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span>&nbsp;<span class="sunlight-attribute">foo</span><span class="sunlight-operator">:</span><span class="sunlight-attribute">id</span><span class="sunlight-operator">=</span><span class="sunlight-string">"12"</span>&nbsp;<span class="sunlight-attribute">name</span><span class="sunlight-operator">=</span><span class="sunlight-string">"foo"</span><span class="sunlight-operator">&gt;</span>Content&nbsp;of&nbsp;the&nbsp;"section"&nbsp;&amp;&nbsp;stuff<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">System.Net</span>&nbsp;<span class="sunlight-operator">/&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-comment">&lt;!--&nbsp;cdata&nbsp;--&gt;</span>
<span class="sunlight-cdata">&lt;![CDATA[I&nbsp;can&nbsp;put&nbsp;whatever&nbsp;I&nbsp;want&nbsp;here&nbsp;HAHAHA!
&lt;tags&gt;&nbsp;that&nbsp;shouldn't&nbsp;be&nbsp;tags&lt;/tags&gt;
&lt;?xml&nbsp;lol!&nbsp;?&gt;]]&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">_self-closing</span>&nbsp;<span class="sunlight-operator">/&gt;</span>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">nested</span>&nbsp;<span class="sunlight-attribute">lulz</span><span class="sunlight-operator">=</span><span class="sunlight-string">"asdf"</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;again<span class="sunlight-entity">&amp;hellip;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;</span><span class="sunlight-tagName">again</span><span class="sunlight-operator">&gt;</span>nested&nbsp;content<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">again</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">nested</span><span class="sunlight-operator">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">section</span><span class="sunlight-operator">&gt;</span>
<span class="sunlight-operator">&lt;/</span><span class="sunlight-tagName">config</span><span class="sunlight-operator">&gt;</span>
</span></pre></div></div>

</body>
</html>
